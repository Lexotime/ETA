"use strict";(self.webpackChunketoile_afrique_app=self.webpackChunketoile_afrique_app||[]).push([[179],{4319:(Ut,ze,L)=>{L.r(ze),L.d(ze,{AdminRoutingModule:()=>Kt});var g=L(433),l=L(4650),G=L(9051),ge=L(5024),U=L(6895);function be(He,q){if(1&He&&(l.TgZ(0,"option",16),l._uU(1),l.qZA()),2&He){const ne=q.$implicit;l.Q6J("value",ne.value),l.xp6(1),l.Oqu(ne.name)}}function we(He,q){if(1&He&&(l.TgZ(0,"option",16),l._uU(1),l.qZA()),2&He){const ne=q.$implicit;l.Q6J("value",ne.value),l.xp6(1),l.Oqu(ne.name)}}function Ae(He,q){if(1&He&&(l.TgZ(0,"option",16),l._uU(1),l.qZA()),2&He){const ne=q.$implicit;l.Q6J("value",ne),l.xp6(1),l.Oqu(ne)}}function xe(He,q){if(1&He&&(l.TgZ(0,"option",16),l._uU(1),l.qZA()),2&He){const ne=q.$implicit;l.Q6J("value",ne),l.xp6(1),l.Oqu(ne)}}class ue{constructor(q,ne,at){this.formBuilder=q,this.router=ne,this.adminService=at,this.newCourse=!1,this.columns=[{name:"firstname",value:"nom"},{name:"lastname",value:"prenom"},{name:"email",value:"email"},{name:"status",value:"etat"}],this.level=[{name:"CI",value:"CI"},{name:"CP",value:"CP"},{name:"CE1",value:"CE1"},{name:"CE1",value:"CE1"},{name:"CM1",value:"CM1"},{name:"CM2",value:"CM2"},{name:"6e",value:"6\xe9me"},{name:"5e",value:"5\xe9me"},{name:"4e",value:"4\xe9me"},{name:"3e",value:"3\xe9me"},{name:"Second",value:"Second"},{name:"Premi\xe8re",value:"Premi\xe8re"},{name:"Terminale",value:"Terminale"}],this.option=[{name:"n\xe9an",value:"n\xe9an"},{name:"L",value:"L"},{name:"S",value:"S"}],this.days=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],this.hours=["8h-10h","10h-12h","15h-17h","17h-19h","20h-22h"]}ngOnInit(){this.initNewForm()}initNewForm(){this.newForm=this.formBuilder.group({day:["Lundi",g.kI.required],hours:["8h-10h",g.kI.required],level:["CI",g.kI.required],option:["none",g.kI.required],name:[,g.kI.required],description:["",g.kI.required]})}onSubmit(){let q={...this.newForm.value};this.adminService.createCourse(q).then(ne=>{console.log(ne),this.router.navigate(["/admin/cours"])},ne=>{console.log(ne)}),this.initNewForm()}}ue.\u0275fac=function(q){return new(q||ue)(l.Y36(g.qu),l.Y36(G.F0),l.Y36(ge.l))},ue.\u0275cmp=l.Xpm({type:ue,selectors:[["app-new-course"]],decls:37,vars:6,consts:[[1,"w-full","h-screen","flex","justify-center","items-center","bg-white"],[3,"formGroup","ngSubmit"],[1,"block","my-2","space-y-3","cursor-pointer","w-[520px]","p-8","drop-shadow-md","bg-white","shadow-amber-800","mx-4","rounded-xl","relative","overflow-hidden"],[1,"text-center","text-xl","text-amber-500"],[1,"relative"],["formControlName","name","required","","type","text","id","floating_standard","placeholder"," ",1,"block","py-2.5","px-0","w-full","text","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","floating_standard",1,"absolute","text-sm","text-gray-500","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:left-0","peer-focus:text-blue-600","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["name","level","formControlName","level","id","level",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],[3,"value",4,"ngFor","ngForOf"],["name","option","formControlName","option","id","option",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["name","day","placeholder"," ","formControlName","day","id","language",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["name","hours","placeholder"," ","formControlName","hours","id","language",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],[1,"relative","z-0"],["name","description","formControlName","description","id","floating_standard","placeholder"," ",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],[1,"text-center"],[1,"p-1","px-6","bg-green-400","text-white","font-bold","rounded",3,"disabled"],[3,"value"]],template:function(q,ne){1&q&&(l.TgZ(0,"div",0)(1,"form",1),l.NdJ("ngSubmit",function(){return ne.onSubmit()}),l.TgZ(2,"div",2)(3,"p",3),l._uU(4," Ajouter nouveau cours "),l.qZA(),l.TgZ(5,"div",4),l._UZ(6,"input",5),l.TgZ(7,"label",6),l._uU(8,"Libell\xe9"),l.qZA()(),l.TgZ(9,"div",4)(10,"select",7),l.YNc(11,be,2,2,"option",8),l.qZA(),l.TgZ(12,"label",6),l._uU(13,"Niveau"),l.qZA()(),l.TgZ(14,"div",4)(15,"select",9),l.YNc(16,we,2,2,"option",8),l.qZA(),l.TgZ(17,"label",6),l._uU(18,"Option"),l.qZA()(),l.TgZ(19,"div",4)(20,"select",10),l.YNc(21,Ae,2,2,"option",8),l.qZA(),l.TgZ(22,"label",6),l._uU(23,"Jour"),l.qZA()(),l.TgZ(24,"div",4)(25,"select",11),l.YNc(26,xe,2,2,"option",8),l.qZA(),l.TgZ(27,"label",6),l._uU(28,"Heurs"),l.qZA()(),l.TgZ(29,"div",12)(30,"textarea",13),l._uU(31,"                "),l.qZA(),l.TgZ(32,"label",6),l._uU(33,"Description"),l.qZA()(),l.TgZ(34,"div",14)(35,"button",15),l._uU(36,"Valider"),l.qZA()()()()()),2&q&&(l.xp6(1),l.Q6J("formGroup",ne.newForm),l.xp6(10),l.Q6J("ngForOf",ne.level),l.xp6(5),l.Q6J("ngForOf",ne.option),l.xp6(5),l.Q6J("ngForOf",ne.days),l.xp6(5),l.Q6J("ngForOf",ne.hours),l.xp6(9),l.Q6J("disabled",ne.newForm.invalid))},dependencies:[U.sg,g._Y,g.YN,g.Kr,g.Fj,g.EJ,g.JJ,g.JL,g.Q7,g.sg,g.u]});class ie{constructor(q,ne){this.router=q,this.adminService=ne}ngOnInit(){this.adminService.getVideoLink().subscribe(q=>{this.link=q})}}ie.\u0275fac=function(q){return new(q||ie)(l.Y36(G.gz),l.Y36(ge.l))},ie.\u0275cmp=l.Xpm({type:ie,selectors:[["app-look-video"]],decls:3,vars:1,consts:[[1,"h-screen","flex","items-center","justify-center","bg-gray-100"],[1,"w-3/4","h-2/3","bg-white","shadow","rounded","p-10"],["alt","",1,"h-full","w-auto","mx-auto",3,"src"]],template:function(q,ne){1&q&&(l.TgZ(0,"div",0)(1,"div",1),l._UZ(2,"img",2),l.qZA()()),2&q&&(l.xp6(2),l.Q6J("src",ne.link,l.LSH))}});const pe=function(He){return{"p-2 px-6 text-xl font-semibold border-2 rounded-2xl text-amber-500 ":!0,"border-b-amber-300 border-r-amber-300 cursor-pointer":He}};class nt{constructor(q,ne,at,Dt){this.formBuilder=q,this.adminService=ne,this.route=at,this.router=Dt,this.course={name:"",level:""}}ngOnInit(){this.initForm(),this.route.params.subscribe(q=>{this.adminService.getItem(q.id,"Courses").subscribe(at=>{this.course=at.docs[0].data()})})}initForm(){this.form=this.formBuilder.group({name:["",g.kI.required],description:["",g.kI.required],file:["",g.kI.required]})}onSubmit(){let q=this.form.get("name").value,ne=this.form.get("description").value,at=this.form.get("file").value;this.adminService.createVideo({name:q,description:ne,course:this.course.id,id:""},this.course.id,at),this.router.navigate(["/admin/videos"])}onFileSelect(q){if(q.target.files.length>0){const ne=q.target.files[0];this.form.get("file").setValue(ne)}}}function qe(He,q){if(1&He){const ne=l.EpF();l.TgZ(0,"th",28),l.NdJ("click",function(){const Ht=l.CHM(ne).$implicit,Ge=l.oxw();return l.KtG(Ge.sort(Ht.name))}),l._uU(1),l.qZA()}if(2&He){const ne=q.$implicit;l.xp6(1),l.hij(" ",ne.value," ")}}function Qe(He,q){if(1&He&&(l.TgZ(0,"td",30),l._uU(1),l.qZA()),2&He){const ne=q.$implicit,at=l.oxw().$implicit;l.xp6(1),l.hij(" ",at[ne.name]," ")}}function ct(He,q){if(1&He&&(l.TgZ(0,"tr"),l.YNc(1,Qe,2,1,"td",29),l.TgZ(2,"td",30)(3,"div",31)(4,"a",32),l._uU(5,"Voir"),l.qZA()()()()),2&He){const ne=q.$implicit,at=l.oxw();l.xp6(1),l.Q6J("ngForOf",at.columns),l.xp6(3),l.Q6J("routerLink","/admin/video/visionner/"+ne.id)}}function Ne(He,q){if(1&He){const ne=l.EpF();l.TgZ(0,"button",33),l.NdJ("click",function(){const Ht=l.CHM(ne).$implicit,Ge=l.oxw();return l.KtG(Ge.goToPage(Ht))}),l._uU(1),l.qZA()}if(2&He){const ne=q.$implicit,at=l.oxw();l.Q6J("disabled",ne===at.page),l.xp6(1),l.hij(" ",ne+1," ")}}nt.\u0275fac=function(q){return new(q||nt)(l.Y36(g.qu),l.Y36(ge.l),l.Y36(G.gz),l.Y36(G.F0))},nt.\u0275cmp=l.Xpm({type:nt,selectors:[["app-add-video"]],decls:26,vars:5,consts:[[1,"flex","items-center","justify-center","h-screen","bg-white"],[1,"py-6","px-16","space-y-8","bg-white","drop-shadow",3,"formGroup","ngSubmit"],[1,"text-2xl","text-center","mt-2","text-amber-500","font-bold"],[1,"flex","items-center","justify-center","w-80","mx-auto"],["for","dropzone-file",1,"flex","flex-col","items-center","justify-center","w-full","h-44","border-2","border-gray-300","border-dashed","rounded-lg","cursor-pointer","bg-gray-50","hover:bg-gray-100"],[1,"flex","flex-col","items-center","justify-center","pt-5","pb-6"],["aria-hidden","true","fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-10","h-10","mb-3","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"],[1,"mb-2","text-sm","text-gray-500"],[1,"font-semibold"],["id","dropzone-file","formControlName","file","type","file",1,"hidden",3,"change"],[1,"relative","z-0"],["formControlName","name","type","text","id","floating_standard","placeholder"," ",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","floating_standard",1,"absolute","text-sm","text-gray-500","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:left-0","peer-focus:text-blue-600","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["name","description","formControlName","description","id","floating_standard","placeholder"," ",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],[1,"text-center"],["type","submit","value","Ajouter",3,"ngClass"]],template:function(q,ne){1&q&&(l.TgZ(0,"div",0)(1,"form",1),l.NdJ("ngSubmit",function(){return ne.onSubmit()}),l.TgZ(2,"p",2),l._uU(3,"Ajouter une video pour le cours "),l._UZ(4,"br"),l._uU(5),l.qZA(),l.TgZ(6,"div",3)(7,"label",4)(8,"div",5),l.O4$(),l.TgZ(9,"svg",6),l._UZ(10,"path",7),l.qZA(),l.kcU(),l.TgZ(11,"p",8)(12,"span",9),l._uU(13,"Click to upload"),l.qZA(),l._uU(14," or drag and drop Video"),l.qZA()(),l.TgZ(15,"input",10),l.NdJ("change",function(Dt){return ne.onFileSelect(Dt)}),l.qZA()()(),l.TgZ(16,"div",11),l._UZ(17,"input",12),l.TgZ(18,"label",13),l._uU(19,"Nom"),l.qZA()(),l.TgZ(20,"div",11),l._UZ(21,"textarea",14),l.TgZ(22,"label",13),l._uU(23,"Description"),l.qZA()(),l.TgZ(24,"div",15),l._UZ(25,"input",16),l.qZA()()()),2&q&&(l.xp6(1),l.Q6J("formGroup",ne.form),l.xp6(4),l.hij(" ",ne.course.name+" niveau "+ne.course.level,""),l.xp6(20),l.Q6J("ngClass",l.VKq(3,pe,!ne.form.invalid)))},dependencies:[U.mk,g._Y,g.Fj,g.JJ,g.JL,g.sg,g.u]});class Me{constructor(q,ne){this.adminService=q,this.route=ne,this.data=[],this.columns=[{name:"name",value:"nom"},{name:"description",value:"description"}],this.canSelect=!0,this.itemEmitter=new l.vpe,this.sens=!1,this.saveColumn="",this.currentEmit="1",this.course={name:"",level:""},this.page=0,this.numberOfElement=20}ngOnInit(){this.adminService.getAllVideos().subscribe(q=>{q.docs.forEach(at=>{this.data.push(at.data())}),console.log(this.data);let ne=this.route.snapshot.params.id;this.saveData=ne?this.data.filter(at=>at.course===ne):this.data,this.listFragments=this.getListFragment(this.page,this.numberOfElement)})}emitItem(q){this.currentEmit=q,this.itemEmitter.emit(q)}getListFragment(q,ne){let at=[];for(let Dt=q*ne,Ht=0;Dt<ne*(q+1)&&this.saveData.length>Dt;Dt++,Ht++)at.push(this.saveData[Dt]);return at}getPages(){let q=[];for(let ne=0;ne<this.data.length/this.numberOfElement;ne++)q.push(ne);return q}setNumberOfElement(q){this.page=0,this.numberOfElement=+q,this.listFragments=this.getListFragment(this.page,this.numberOfElement)}goToPage(q){this.page=q,this.listFragments=this.getListFragment(q,this.numberOfElement)}nextPage(){this.page<this.getPages()[this.getPages().length-1]&&(this.listFragments=this.getListFragment(++this.page,this.numberOfElement))}previousPage(){this.page>this.getPages()[0]&&(this.listFragments=this.getListFragment(--this.page,this.numberOfElement))}filter(q){this.page=0,this.saveData=q?this.data.filter(ne=>{for(const at of this.columns)if(-1!=q.toUpperCase().search(ne[`${at.name}`].toString().toUpperCase()))return!0;return!1}):this.data,this.saveData||(this.saveData=this.data),console.log(this.saveData),this.listFragments=this.getListFragment(this.page,this.numberOfElement)}sort(q){this.saveColumn===q?this.sens=!this.sens:(this.sens=!0,this.saveColumn=q),this.page=0,this.saveData=this.data.sort((ne,at)=>ne[`${q}`]>at[`${q}`]?this.sens?1:-1:this.sens?-1:1),this.listFragments=this.getListFragment(this.page,this.numberOfElement)}}Me.\u0275fac=function(q){return new(q||Me)(l.Y36(ge.l),l.Y36(G.gz))},Me.\u0275cmp=l.Xpm({type:Me,selectors:[["app-video-list"]],inputs:{extra:"extra",canSelect:"canSelect"},outputs:{itemEmitter:"itemEmitter"},decls:41,vars:5,consts:[[1,"flex","items-center","justify-center","flex-1"],[1,"flex","flex-col","justify-center","items-center","w-full","mx-10"],[1,"my-10"],[1,"flex","space-x-4","items-center"],[1,"relative","z-0"],["type","text","id","floating_standard","placeholder"," ",1,"w-80","block","py-2.5","px-0","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["search",""],["for","floating_standard",1,"w-80","absolute","text-sm","text-gray-500","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:left-0","peer-focus:text-blue-600","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],[1,"p-2.5","ml-2","text-sm","font-medium","text-white","bg-amber-400","rounded-lg","border","border-amber-500","hover:bg-amber-700","focus:ring-4","focus:outline-none","focus:ring-amber-300",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"sr-only"],[1,"w-full"],[1,"bg-amber-400","text-white","rounded-xl"],["class","p-2 text-sm capitalize text-start cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"p-2","text-sm","capitalize","text-start"],[1,"border-b","border-amber-500"],[4,"ngFor","ngForOf"],[1,"flex","w-full","items-center","mt-10","text-sm","justify-between"],[1,"flex","items-center"],[1,"mr-2","border-r-2","border-black"],["name","numberOfElement","id","numberOfElement",3,"change"],["select",""],["value","10"],["value","20"],["value","30"],["class"," mx-2",3,"disabled","click",4,"ngFor","ngForOf"],[1,"mx-1",3,"disabled","click"],[1,"p-2","text-sm","capitalize","text-start","cursor-pointer",3,"click"],["class","p-2 text-md  w-44",4,"ngFor","ngForOf"],[1,"p-2","text-md","w-44"],[1,"flex","justify-between"],[1,"py-1","px-8","rounded","bg-blue-400","text-white","font-bold",3,"routerLink"],[1,"mx-2",3,"disabled","click"]],template:function(q,ne){if(1&q){const at=l.EpF();l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),l._UZ(5,"input",5,6),l.TgZ(7,"label",7),l._uU(8,"Rechercher..."),l.qZA()(),l.TgZ(9,"button",8),l.NdJ("click",function(){l.CHM(at);const Ht=l.MAs(6);return l.KtG(ne.filter(Ht.value))}),l.O4$(),l.TgZ(10,"svg",9),l._UZ(11,"path",10),l.qZA(),l.kcU(),l.TgZ(12,"span",11),l._uU(13,"Search"),l.qZA()()()(),l.TgZ(14,"table",12)(15,"thead",13),l.YNc(16,qe,2,1,"th",14),l.TgZ(17,"th",15),l._uU(18,"Actions"),l.qZA()(),l.TgZ(19,"tbody",16),l.YNc(20,ct,6,2,"tr",17),l.qZA()(),l.TgZ(21,"div",18)(22,"div",19)(23,"div",20),l._uU(24," tableau de : "),l.TgZ(25,"select",21,22),l.NdJ("change",function(){l.CHM(at);const Ht=l.MAs(26);return l.KtG(ne.setNumberOfElement(Ht.value))}),l.TgZ(27,"option",23),l._uU(28,"10"),l.qZA(),l.TgZ(29,"option",24),l._uU(30,"10"),l.qZA(),l.TgZ(31,"option",25),l._uU(32,"30"),l.qZA()()(),l.TgZ(33,"div"),l._uU(34," page : "),l.YNc(35,Ne,2,2,"button",26),l.qZA()(),l.TgZ(36,"div")(37,"button",27),l.NdJ("click",function(){return ne.previousPage()}),l._uU(38,"Pr\xe9cedent"),l.qZA(),l.TgZ(39,"button",27),l.NdJ("click",function(){return ne.nextPage()}),l._uU(40,"Suivant"),l.qZA()()()()()}2&q&&(l.xp6(16),l.Q6J("ngForOf",ne.columns),l.xp6(4),l.Q6J("ngForOf",ne.listFragments),l.xp6(15),l.Q6J("ngForOf",ne.getPages()),l.xp6(2),l.Q6J("disabled",ne.page===ne.getPages()[0]),l.xp6(2),l.Q6J("disabled",ne.page===ne.getPages()[ne.getPages().length-1]))},dependencies:[U.sg,g.YN,g.Kr,G.rH]});class Fe{}function et(He,q){if(1&He&&(l.TgZ(0,"option",15),l._uU(1),l.qZA()),2&He){const ne=q.$implicit;l.Q6J("value",ne.value),l.xp6(1),l.Oqu(ne.name)}}function se(He,q){if(1&He&&(l.TgZ(0,"option",15),l._uU(1),l.qZA()),2&He){const ne=q.$implicit;l.Q6J("value",ne.value),l.xp6(1),l.Oqu(ne.name)}}function $e(He,q){if(1&He&&(l.TgZ(0,"option",15),l._uU(1),l.qZA()),2&He){const ne=q.$implicit;l.Q6J("value",ne.uid),l.xp6(1),l.Oqu(ne.name)}}Fe.\u0275fac=function(q){return new(q||Fe)},Fe.\u0275cmp=l.Xpm({type:Fe,selectors:[["app-video"]],decls:5,vars:0,consts:[[1,"bg-white","pt-32","flex","flex-col","min-h-screen"],[1,"text-4xl","text-center","mb-16"],[1,"mt-10","rounded-t-[60px]","bg-white","drop-shadow-xl","shadow","shadow-gray-300","rounde-t-xl","mx-4","flex-1"]],template:function(q,ne){1&q&&(l.TgZ(0,"div",0)(1,"p",1),l._uU(2," Liste des videos "),l.qZA(),l.TgZ(3,"div",2),l._UZ(4,"app-video-list"),l.qZA()())},dependencies:[Me]});class Le{constructor(q,ne,at,Dt){this.formBuilder=q,this.route=ne,this.router=at,this.adminService=Dt,this.courseForm=new g.cw({level:new g.NI,name:new g.NI,option:new g.NI}),this.newCourse=!1,this.teacher={},this.columns=[{name:"firstname",value:"nom"},{name:"lastname",value:"prenom"},{name:"email",value:"email"},{name:"status",value:"etat"}],this.level=[{name:"CI",value:"CI"},{name:"CP",value:"CP"},{name:"CE1",value:"CE1"},{name:"CE1",value:"CE1"},{name:"CM1",value:"CM1"},{name:"CM2",value:"CM2"},{name:"6e",value:"6\xe9me"},{name:"5e",value:"5\xe9me"},{name:"4e",value:"4\xe9me"},{name:"3e",value:"3\xe9me"},{name:"Second",value:"Second"},{name:"Premi\xe8re",value:"Premi\xe8re"},{name:"Terminale",value:"Terminale"}],this.option=[{name:"S",value:"S"},{name:"L",value:"L"},{name:"n\xe9an",value:"none"}],this.coursesList=[],this.courses=[]}ngOnInit(){this.initForm(),this.adminService.getAllCourses().subscribe(q=>{this.coursesList=[],q.forEach(ne=>{let at={...ne.payload.doc.data(),uid:ne.payload.doc.id};this.coursesList.push(at)})}),this.route.params.subscribe(q=>{this.adminService.getItem(q.id,"Teachers").subscribe(at=>{this.teacher=at.docs[0].data()})})}initForm(){this.courseForm=this.formBuilder.group({name:[,g.kI.required],level:["CI",g.kI.required],option:["none",g.kI.required]})}filter(){return this.coursesList.filter(q=>q.option==this.courseForm.get("option")?.value&&q.level==this.courseForm.get("level")?.value&&!q.teacher)}onSubmit(){this.teacher&&this.courseForm.get("name")?.value&&this.adminService.updateCourseTeacher(this.teacher.id,this.courseForm.get("name")?.value,this.teacher.firstname+" "+this.teacher.lastname).then(q=>{console.log(q),this.router.navigate(["/admin/enseignants"])}).catch(q=>{console.log(q)})}}Le.\u0275fac=function(q){return new(q||Le)(l.Y36(g.qu),l.Y36(G.gz),l.Y36(G.F0),l.Y36(ge.l))},Le.\u0275cmp=l.Xpm({type:Le,selectors:[["app-add-course"]],decls:28,vars:7,consts:[[1,"w-full","h-screen","flex","justify-center","items-center","bg-white"],[3,"formGroup","ngSubmit"],[1,""],[1,"block","my-2","space-y-6","cursor-pointer","w-[520px]","p-8","drop-shadow-md","bg-white","shadow-amber-800","mx-4","rounded-xl","relative","overflow-hidden"],[1,"text-center","text-2xl","text-amber-500"],[1,"text-red-400"],[1,"relative"],["name","level","formControlName","level","id","level",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],[3,"value",4,"ngFor","ngForOf"],["for","floating_standard",1,"absolute","text-sm","text-gray-500","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:left-0","peer-focus:text-blue-600","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["name","option","formControlName","option","id","option",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],[1,"relative","z-0"],["type","text","id","floating_standard","placeholder"," ","formControlName","name","id","courses",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],[1,"text-center"],[1,"p-1","px-6","bg-green-400","text-white","font-bold","rounded",3,"disabled"],[3,"value"]],template:function(q,ne){1&q&&(l.TgZ(0,"div",0)(1,"form",1),l.NdJ("ngSubmit",function(){return ne.onSubmit()}),l.TgZ(2,"div",2)(3,"div",3)(4,"div",4),l._uU(5," Ajouter matiere pour "),l.TgZ(6,"p"),l._uU(7),l.qZA()(),l.TgZ(8,"p",5),l._uU(9),l.qZA(),l.TgZ(10,"div",6)(11,"select",7),l.YNc(12,et,2,2,"option",8),l.qZA(),l.TgZ(13,"label",9),l._uU(14,"Niveau"),l.qZA()(),l.TgZ(15,"div",6)(16,"select",10),l.YNc(17,se,2,2,"option",8),l.qZA(),l.TgZ(18,"label",9),l._uU(19,"Option"),l.qZA()(),l.TgZ(20,"div",11)(21,"select",12),l.YNc(22,$e,2,2,"option",8),l.qZA(),l.TgZ(23,"label",9),l._uU(24,"Cours"),l.qZA()(),l.TgZ(25,"div",13)(26,"button",14),l._uU(27,"Valider"),l.qZA()()()()()()),2&q&&(l.xp6(1),l.Q6J("formGroup",ne.courseForm),l.xp6(6),l.Oqu(ne.teacher.firstname+" "+ne.teacher.lastname),l.xp6(2),l.Oqu(ne.errorMessage),l.xp6(3),l.Q6J("ngForOf",ne.level),l.xp6(5),l.Q6J("ngForOf",ne.option),l.xp6(5),l.Q6J("ngForOf",ne.filter()),l.xp6(4),l.Q6J("disabled",ne.courseForm.invalid))},dependencies:[U.sg,g._Y,g.YN,g.Kr,g.EJ,g.JJ,g.JL,g.sg,g.u]});const ut=function(He){return{"p-2 px-6 text-xl font-semibold border-2 rounded-2xl text-amber-500 ":!0,"border-b-amber-300 border-r-amber-300 cursor-pointer":He}};class Ye{constructor(q,ne,at){this.formBuilder=q,this.router=ne,this.adminService=at,this.teacher=new l.vpe,this.level=[{name:"CI",value:"CI"},{name:"CP",value:"CP"},{name:"CE1",value:"CE1"},{name:"CE1",value:"CE1"},{name:"CM1",value:"CM1"},{name:"CM2",value:"CM2"},{name:"6e",value:"6e"},{name:"5e",value:"5e"},{name:"4e",value:"4e"},{name:"3e",value:"3e"},{name:"Second",value:"Second"},{name:"Premi\xe8re",value:"Premi\xe8re"},{name:"Terminale",value:"Terminale"}],this.courses=["Math","Francais","Anglais"],this.language=["francais","anglais","espagnol"],this.isAuth=!1}ngOnInit(){this.initForm()}initForm(){this.form=this.formBuilder.group({firstname:["",g.kI.required],lastname:["",g.kI.required],email:["",[g.kI.email,g.kI.required]]})}onSubmit(){let q={...this.form.value};this.adminService.createTeacher(q,q.email).then(at=>{this.router.navigate(["/admin/enseignants"])},at=>{this.errorMessage=at.message.search("(auth/email-already-in-use)")?"Vous ne pouvez pas ajouter cet enseignant.":"Une erreur c'est produit veuillez ressayer"})}}function de(He,q){if(1&He){const ne=l.EpF();l.TgZ(0,"th",30),l.NdJ("click",function(){const Ht=l.CHM(ne).$implicit,Ge=l.oxw();return l.KtG(Ge.sort(Ht.name))}),l._uU(1),l.qZA()}if(2&He){const ne=q.$implicit;l.xp6(1),l.hij(" ",ne.value," ")}}function Oe(He,q){if(1&He&&(l.TgZ(0,"td",37),l._uU(1),l.qZA()),2&He){const ne=q.$implicit,at=l.oxw().$implicit;l.xp6(1),l.hij(" ",at[ne.name]," ")}}function W(He,q){1&He&&(l.TgZ(0,"button",35),l._uU(1,"g\xe9n\xe9rer lien"),l.qZA())}function te(He,q){if(1&He&&(l.TgZ(0,"tr"),l.YNc(1,Oe,2,1,"td",31),l.TgZ(2,"td",32)(3,"div",33),l.YNc(4,W,2,0,"button",34),l.TgZ(5,"button",35)(6,"a",36),l._uU(7,"+ vid\xe9o"),l.qZA()(),l.TgZ(8,"button",35)(9,"a",36),l._uU(10,"voir vid\xe9o"),l.qZA()()()()()),2&He){const ne=q.$implicit,at=l.oxw();l.xp6(1),l.Q6J("ngForOf",at.columns),l.xp6(3),l.Q6J("ngIf",!ne.link),l.xp6(2),l.Q6J("href","/admin/videos/ajouter/"+ne.id,l.LSH),l.xp6(3),l.Q6J("href","/admin/videos/"+ne.id,l.LSH)}}function ae(He,q){if(1&He){const ne=l.EpF();l.TgZ(0,"button",38),l.NdJ("click",function(){const Ht=l.CHM(ne).$implicit,Ge=l.oxw();return l.KtG(Ge.goToPage(Ht))}),l._uU(1),l.qZA()}if(2&He){const ne=q.$implicit,at=l.oxw();l.Q6J("disabled",ne===at.page),l.xp6(1),l.hij(" ",ne+1," ")}}Ye.\u0275fac=function(q){return new(q||Ye)(l.Y36(g.qu),l.Y36(G.F0),l.Y36(ge.l))},Ye.\u0275cmp=l.Xpm({type:Ye,selectors:[["app-add-teacher"]],outputs:{teacher:"teacher"},decls:20,vars:6,consts:[[1,"flex","items-center","justify-center","h-screen","bg-white"],[1,"p-4","px-16","space-y-8","bg-white","drop-shadow",3,"formGroup","ngSubmit"],[1,"text-3xl","text-center","mt-2","text-amber-500","font-bold"],[1,"text-red-400"],[1,"relative","z-0","mx-2","w-80"],["formControlName","firstname","type","text","id","floating_standard","placeholder"," ",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","floating_standard",1,"absolute","text-sm","text-gray-500","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:left-0","peer-focus:text-blue-600","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["formControlName","lastname","type","text","id","floating_standard","placeholder"," ",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["formControlName","email","type","email","id","floating_standard","placeholder"," ",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],[1,"text-center"],["type","submit","value","Ajouter",3,"disabled","ngClass"]],template:function(q,ne){1&q&&(l.TgZ(0,"div",0)(1,"form",1),l.NdJ("ngSubmit",function(){return ne.onSubmit()}),l.TgZ(2,"p",2),l._uU(3,"Ajouter Enseignant"),l.qZA(),l.TgZ(4,"p",3),l._uU(5),l.qZA(),l.TgZ(6,"div",4),l._UZ(7,"input",5),l.TgZ(8,"label",6),l._uU(9,"Prenom"),l.qZA()(),l.TgZ(10,"div",4),l._UZ(11,"input",7),l.TgZ(12,"label",6),l._uU(13,"Nom"),l.qZA()(),l.TgZ(14,"div",4),l._UZ(15,"input",8),l.TgZ(16,"label",6),l._uU(17,"Email"),l.qZA()(),l.TgZ(18,"div",9),l._UZ(19,"input",10),l.qZA()()()),2&q&&(l.xp6(1),l.Q6J("formGroup",ne.form),l.xp6(4),l.Oqu(ne.errorMessage),l.xp6(14),l.Q6J("disabled",ne.form.invalid)("ngClass",l.VKq(4,ut,!ne.form.invalid)))},dependencies:[U.mk,g._Y,g.Fj,g.JJ,g.JL,g.sg,g.u]});class Ie{constructor(q,ne){this.adminService=q,this.route=ne,this.data=[],this.columns=[{name:"name",value:"Libell\xe9"},{name:"day",value:"Jour"},{name:"hours",value:"Heure"},{name:"level",value:"Niveau"},{name:"link",value:"lien"}],this.sens=!1,this.saveColumn="",this.currentEmit="1",this.page=0,this.numberOfElement=20}ngOnInit(){this.adminService.getAllCourses().subscribe(q=>{this.data=[],q.forEach(at=>{this.data.push(at.payload.doc.data())});let ne=this.route.snapshot.params.id;ne?this.adminService.getItem(ne,"Teachers").subscribe(at=>{this.teacher=at.docs[0].data().email,this.saveData=this.data.filter(Dt=>Dt.teacher===this.teacher),this.listFragments=this.getListFragment(this.page,this.numberOfElement)}):(this.saveData=this.data,this.listFragments=this.getListFragment(this.page,this.numberOfElement))})}getListFragment(q,ne){let at=[];for(let Dt=q*ne,Ht=0;Dt<ne*(q+1)&&this.saveData.length>Dt;Dt++,Ht++)at.push(this.saveData[Dt]);return at}getPages(){let q=[];for(let ne=0;ne<this.data.length/this.numberOfElement;ne++)q.push(ne);return q}setNumberOfElement(q){this.page=0,this.numberOfElement=+q,this.listFragments=this.getListFragment(this.page,this.numberOfElement)}goToPage(q){this.page=q,this.listFragments=this.getListFragment(q,this.numberOfElement)}nextPage(){this.page<this.getPages()[this.getPages().length-1]&&(this.listFragments=this.getListFragment(++this.page,this.numberOfElement))}previousPage(){this.page>this.getPages()[0]&&(this.listFragments=this.getListFragment(--this.page,this.numberOfElement))}filter(q){this.page=0,this.saveData=q?this.data.filter(ne=>{for(const at of this.columns)if(-1!=q.toUpperCase().search(ne[`${at.name}`].toString().toUpperCase()))return!0;return!1}):this.data,this.saveData||(this.saveData=this.data),console.log(this.saveData),this.listFragments=this.getListFragment(this.page,this.numberOfElement)}sort(q){this.saveColumn===q?this.sens=!this.sens:(this.sens=!0,this.saveColumn=q),this.page=0,this.saveData=this.data.sort((ne,at)=>ne[`${q}`]>at[`${q}`]?this.sens?1:-1:this.sens?-1:1),this.listFragments=this.getListFragment(this.page,this.numberOfElement)}}Ie.\u0275fac=function(q){return new(q||Ie)(l.Y36(ge.l),l.Y36(G.gz))},Ie.\u0275cmp=l.Xpm({type:Ie,selectors:[["app-course-list-admin"]],decls:44,vars:5,consts:[[1,"flex","items-center","justify-center","flex-1"],[1,"flex","flex-col","justify-center","items-center","w-full","mx-10"],[1,"my-10"],[1,"flex","space-x-4","items-center"],[1,"relative","z-0"],["type","text","id","floating_standard","placeholder"," ",1,"w-80","block","py-2.5","px-0","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["search",""],["for","floating_standard",1,"w-80","absolute","text-sm","text-gray-500","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:left-0","peer-focus:text-blue-600","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],[1,"p-2.5","ml-2","text-sm","font-medium","text-white","bg-amber-400","rounded-lg","border","border-amber-500","hover:bg-amber-700","focus:ring-4","focus:outline-none","focus:ring-amber-300",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"sr-only"],[1,"absolute","top-10","right-10"],["routerLink","/admin/cours/ajouter"],[1,"w-full"],[1,"bg-amber-400","text-white","rounded-xl"],["class","p-2 text-sm capitalize text-start cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"p-2","text-sm","capitalize","text-start"],[1,"border-b","border-amber-500"],[4,"ngFor","ngForOf"],[1,"flex","w-full","items-center","mt-10","text-sm","justify-between"],[1,"flex","items-center"],[1,"mr-2","border-r-2","border-black"],["name","numberOfElement","id","numberOfElement",3,"change"],["select",""],["value","10"],["value","20"],["value","30"],["class"," mx-2",3,"disabled","click",4,"ngFor","ngForOf"],[1,"mx-1",3,"disabled","click"],[1,"p-2","text-sm","capitalize","text-start","cursor-pointer",3,"click"],["class","p-2 text-sm  max-w-44",4,"ngFor","ngForOf"],[1,"p-2","text-sm","max-44"],[1,"flex","justify-between"],["class"," px-4 py-1 rounded bg-blue-500 text-white font-bold",4,"ngIf"],[1,"px-4","py-1","rounded","bg-blue-500","text-white","font-bold"],[3,"href"],[1,"p-2","text-sm","max-w-44"],[1,"mx-2",3,"disabled","click"]],template:function(q,ne){if(1&q){const at=l.EpF();l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),l._UZ(5,"input",5,6),l.TgZ(7,"label",7),l._uU(8,"Rechercher..."),l.qZA()(),l.TgZ(9,"button",8),l.NdJ("click",function(){l.CHM(at);const Ht=l.MAs(6);return l.KtG(ne.filter(Ht.value))}),l.O4$(),l.TgZ(10,"svg",9),l._UZ(11,"path",10),l.qZA(),l.kcU(),l.TgZ(12,"span",11),l._uU(13,"Search"),l.qZA()()(),l.TgZ(14,"div",12)(15,"a",13),l._uU(16,"Ajouter cours"),l.qZA()()(),l.TgZ(17,"table",14)(18,"thead",15),l.YNc(19,de,2,1,"th",16),l.TgZ(20,"th",17),l._uU(21,"Actions"),l.qZA()(),l.TgZ(22,"tbody",18),l.YNc(23,te,11,4,"tr",19),l.qZA()(),l.TgZ(24,"div",20)(25,"div",21)(26,"div",22),l._uU(27," tableau de : "),l.TgZ(28,"select",23,24),l.NdJ("change",function(){l.CHM(at);const Ht=l.MAs(29);return l.KtG(ne.setNumberOfElement(Ht.value))}),l.TgZ(30,"option",25),l._uU(31,"10"),l.qZA(),l.TgZ(32,"option",26),l._uU(33,"10"),l.qZA(),l.TgZ(34,"option",27),l._uU(35,"30"),l.qZA()()(),l.TgZ(36,"div"),l._uU(37," page : "),l.YNc(38,ae,2,2,"button",28),l.qZA()(),l.TgZ(39,"div")(40,"button",29),l.NdJ("click",function(){return ne.previousPage()}),l._uU(41,"Pr\xe9cedent"),l.qZA(),l.TgZ(42,"button",29),l.NdJ("click",function(){return ne.nextPage()}),l._uU(43,"Suivant"),l.qZA()()()()()}2&q&&(l.xp6(19),l.Q6J("ngForOf",ne.columns),l.xp6(4),l.Q6J("ngForOf",ne.listFragments),l.xp6(15),l.Q6J("ngForOf",ne.getPages()),l.xp6(2),l.Q6J("disabled",ne.page===ne.getPages()[0]),l.xp6(2),l.Q6J("disabled",ne.page===ne.getPages()[ne.getPages().length-1]))},dependencies:[U.sg,U.O5,g.YN,g.Kr,G.rH]});class lt{}lt.\u0275fac=function(q){return new(q||lt)},lt.\u0275cmp=l.Xpm({type:lt,selectors:[["app-courses"]],decls:5,vars:0,consts:[[1,"bg-white","pt-32","flex","flex-col","min-h-screen"],[1,"text-4xl","text-center","mb-16"],[1,"mt-10","rounded-t-[60px]","bg-white","drop-shadow-xl","shadow","shadow-gray-300","rounde-t-xl","mx-4","flex-1","overflow-auto"]],template:function(q,ne){1&q&&(l.TgZ(0,"div",0)(1,"p",1),l._uU(2," Liste des cours "),l.qZA(),l.TgZ(3,"div",2),l._UZ(4,"app-course-list-admin"),l.qZA()())},dependencies:[Ie]});var pt=L(4119);function Ct(He,q){if(1&He){const ne=l.EpF();l.TgZ(0,"th",28),l.NdJ("click",function(){const Ht=l.CHM(ne).$implicit,Ge=l.oxw();return l.KtG(Ge.sort(Ht.name))}),l._uU(1),l.qZA()}if(2&He){const ne=q.$implicit;l.xp6(1),l.hij(" ",ne.value," ")}}function Ot(He,q){if(1&He&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&He){const ne=l.oxw(2).$implicit;l.xp6(1),l.Oqu(ne.option)}}function Qt(He,q){if(1&He&&(l.TgZ(0,"td",30),l._uU(1),l.YNc(2,Ot,2,1,"span",34),l.qZA()),2&He){const ne=q.$implicit,at=l.oxw().$implicit;l.xp6(1),l.hij(" ",at[ne.name]," "),l.xp6(1),l.Q6J("ngIf","level"===ne.name)}}function Nt(He,q){if(1&He){const ne=l.EpF();l.TgZ(0,"button",35),l.NdJ("click",function(){l.CHM(ne);const Dt=l.oxw().$implicit,Ht=l.oxw();return l.KtG(Ht.onBlock(Dt.id))}),l._uU(1,"bloquer"),l.qZA()}}function Pt(He,q){if(1&He){const ne=l.EpF();l.TgZ(0,"button",36),l.NdJ("click",function(){l.CHM(ne);const Dt=l.oxw().$implicit,Ht=l.oxw();return l.KtG(Ht.onUnblock(Dt.id))}),l._uU(1,"d\xe9bloquer"),l.qZA()}}function Et(He,q){if(1&He&&(l.TgZ(0,"tr"),l.YNc(1,Qt,3,2,"td",29),l.TgZ(2,"td",30)(3,"div",31),l.YNc(4,Nt,2,0,"button",32),l.YNc(5,Pt,2,0,"button",33),l.qZA()()()),2&He){const ne=q.$implicit,at=l.oxw();l.xp6(1),l.Q6J("ngForOf",at.columns),l.xp6(3),l.Q6J("ngIf","actif"===ne.status),l.xp6(1),l.Q6J("ngIf","inactif"===ne.status)}}function Wt(He,q){if(1&He){const ne=l.EpF();l.TgZ(0,"button",37),l.NdJ("click",function(){const Ht=l.CHM(ne).$implicit,Ge=l.oxw();return l.KtG(Ge.goToPage(Ht))}),l._uU(1),l.qZA()}if(2&He){const ne=q.$implicit,at=l.oxw();l.Q6J("disabled",ne===at.page),l.xp6(1),l.hij(" ",ne+1," ")}}class qt{constructor(q){this.adminService=q,this.data=[],this.columns=[{name:"name",value:"pseudo"},{name:"email",value:"email"},{name:"level",value:"niveau"},{name:"status",value:"status"}],this.sens=!1,this.saveColumn="",this.currentEmit="1",this.page=0,this.numberOfElement=20}ngOnInit(){this.adminService.getAllStudents().subscribe(q=>{q.docs.forEach(ne=>{this.data.push(ne.data())}),console.log(this.data),this.saveData=this.data,this.listFragments=this.getListFragment(this.page,this.numberOfElement)})}getListFragment(q,ne){let at=[];for(let Dt=q*ne,Ht=0;Dt<ne*(q+1)&&this.saveData.length>Dt;Dt++,Ht++)at.push(this.saveData[Dt]);return at}getPages(){let q=[];for(let ne=0;ne<this.data.length/this.numberOfElement;ne++)q.push(ne);return q}setNumberOfElement(q){this.page=0,this.numberOfElement=+q,this.listFragments=this.getListFragment(this.page,this.numberOfElement)}goToPage(q){this.page=q,this.listFragments=this.getListFragment(q,this.numberOfElement)}nextPage(){this.page<this.getPages()[this.getPages().length-1]&&(this.listFragments=this.getListFragment(++this.page,this.numberOfElement))}previousPage(){this.page>this.getPages()[0]&&(this.listFragments=this.getListFragment(--this.page,this.numberOfElement))}filter(q){this.page=0,this.saveData=q?this.data.filter(ne=>{for(const at of this.columns)if(-1!=q.toUpperCase().search(ne[`${at.name}`].toString().toUpperCase()))return!0;return!1}):this.data,this.saveData||(this.saveData=this.data),console.log(this.saveData),this.listFragments=this.getListFragment(this.page,this.numberOfElement)}sort(q){this.saveColumn===q?this.sens=!this.sens:(this.sens=!0,this.saveColumn=q),this.page=0,this.saveData=this.data.sort((ne,at)=>ne[`${q}`]>at[`${q}`]?this.sens?1:-1:this.sens?-1:1),this.listFragments=this.getListFragment(this.page,this.numberOfElement)}onBlock(q){this.message=this.adminService.blockUser(q,"Students"),this.data.filter(ne=>ne.id===q)[0].status="inactif"}onUnblock(q){this.message=this.adminService.unBlockUser(q,"Students"),this.data.filter(ne=>ne.id===q)[0].status="actif"}}qt.\u0275fac=function(q){return new(q||qt)(l.Y36(ge.l))},qt.\u0275cmp=l.Xpm({type:qt,selectors:[["app-student-list"]],decls:41,vars:5,consts:[[1,"flex","items-center","justify-center","flex-1"],[1,"flex","flex-col","justify-center","items-center","w-full","mx-10"],[1,"my-10"],[1,"flex","space-x-4","items-center"],[1,"relative","z-0"],["type","text","id","floating_standard","placeholder"," ",1,"w-80","block","py-2.5","px-0","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["search",""],["for","floating_standard",1,"w-80","absolute","text-sm","text-gray-500","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:left-0","peer-focus:text-blue-600","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],[1,"p-2.5","ml-2","text-sm","font-medium","text-white","bg-amber-400","rounded-lg","border","border-amber-500","hover:bg-amber-700","focus:ring-4","focus:outline-none","focus:ring-amber-300",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"sr-only"],[1,"w-full"],[1,"bg-amber-400","text-white","rounded-xl"],["class","p-2 text-sm capitalize text-start cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"p-2","text-sm","capitalize","text-start"],[1,"border-b","border-amber-500"],[4,"ngFor","ngForOf"],[1,"flex","w-full","items-center","mt-10","text-sm","justify-between"],[1,"flex","items-center"],[1,"mr-2","border-r-2","border-black"],["name","numberOfElement","id","numberOfElement",3,"change"],["select",""],["value","10"],["value","20"],["value","30"],["class"," mx-2",3,"disabled","click",4,"ngFor","ngForOf"],[1,"mx-1",3,"disabled","click"],[1,"p-2","text-sm","capitalize","text-start","cursor-pointer",3,"click"],["class","p-2 text-sm  w-44",4,"ngFor","ngForOf"],[1,"p-2","text-sm","w-44"],[1,"flex","justify-between"],["class","py-1 px-8 rounded bg-red-400 text-white font-bold",3,"click",4,"ngIf"],["class","py-1 px-8 rounded bg-green-400 text-white font-bold",3,"click",4,"ngIf"],[4,"ngIf"],[1,"py-1","px-8","rounded","bg-red-400","text-white","font-bold",3,"click"],[1,"py-1","px-8","rounded","bg-green-400","text-white","font-bold",3,"click"],[1,"mx-2",3,"disabled","click"]],template:function(q,ne){if(1&q){const at=l.EpF();l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),l._UZ(5,"input",5,6),l.TgZ(7,"label",7),l._uU(8,"Rechercher..."),l.qZA()(),l.TgZ(9,"button",8),l.NdJ("click",function(){l.CHM(at);const Ht=l.MAs(6);return l.KtG(ne.filter(Ht.value))}),l.O4$(),l.TgZ(10,"svg",9),l._UZ(11,"path",10),l.qZA(),l.kcU(),l.TgZ(12,"span",11),l._uU(13,"Search"),l.qZA()()()(),l.TgZ(14,"table",12)(15,"thead",13),l.YNc(16,Ct,2,1,"th",14),l.TgZ(17,"th",15),l._uU(18,"Actions"),l.qZA()(),l.TgZ(19,"tbody",16),l.YNc(20,Et,6,3,"tr",17),l.qZA()(),l.TgZ(21,"div",18)(22,"div",19)(23,"div",20),l._uU(24," tableau de : "),l.TgZ(25,"select",21,22),l.NdJ("change",function(){l.CHM(at);const Ht=l.MAs(26);return l.KtG(ne.setNumberOfElement(Ht.value))}),l.TgZ(27,"option",23),l._uU(28,"10"),l.qZA(),l.TgZ(29,"option",24),l._uU(30,"10"),l.qZA(),l.TgZ(31,"option",25),l._uU(32,"30"),l.qZA()()(),l.TgZ(33,"div"),l._uU(34," page : "),l.YNc(35,Wt,2,2,"button",26),l.qZA()(),l.TgZ(36,"div")(37,"button",27),l.NdJ("click",function(){return ne.previousPage()}),l._uU(38,"Pr\xe9cedent"),l.qZA(),l.TgZ(39,"button",27),l.NdJ("click",function(){return ne.nextPage()}),l._uU(40,"Suivant"),l.qZA()()()()()}2&q&&(l.xp6(16),l.Q6J("ngForOf",ne.columns),l.xp6(4),l.Q6J("ngForOf",ne.listFragments),l.xp6(15),l.Q6J("ngForOf",ne.getPages()),l.xp6(2),l.Q6J("disabled",ne.page===ne.getPages()[0]),l.xp6(2),l.Q6J("disabled",ne.page===ne.getPages()[ne.getPages().length-1]))},dependencies:[U.sg,U.O5,g.YN,g.Kr]});class yn{constructor(){this.students=pt.eM,this.currentStudent=this.students[0],this.columns=[{name:"firstname",value:"nom"},{name:"lastname",value:"prenom"},{name:"email",value:"email"},{name:"status",value:"etat"}],this.item=0}getItem(q){this.currentStudent=this.students.filter(ne=>ne.id===q)}onBlocked(q){}}yn.\u0275fac=function(q){return new(q||yn)},yn.\u0275cmp=l.Xpm({type:yn,selectors:[["app-student"]],decls:5,vars:0,consts:[[1,"bg-white","pt-32","flex","flex-col","min-h-screen"],[1,"text-4xl","text-center","mb-16"],[1,"mt-10","rounded-t-[60px]","bg-white","drop-shadow-xl","shadow","shadow-gray-300","rounde-t-xl","mx-4","flex-1"]],template:function(q,ne){1&q&&(l.TgZ(0,"div",0)(1,"p",1),l._uU(2," Liste des Etudiants "),l.qZA(),l.TgZ(3,"div",2),l._UZ(4,"app-student-list"),l.qZA()())},dependencies:[qt]});var $t=L(5861);function On(He,q){if(1&He){const ne=l.EpF();l.TgZ(0,"div",31)(1,"div",32)(2,"p",33),l._uU(3,"Etes vous s\xfbre de vouloir continuer ? "),l.qZA(),l.TgZ(4,"div",34)(5,"button",35),l.NdJ("click",function(){l.CHM(ne);const Dt=l.oxw();return l.KtG(Dt.getNotifyResponse(!0))}),l._uU(6,"Valider"),l.qZA(),l.TgZ(7,"button",36),l.NdJ("click",function(){l.CHM(ne);const Dt=l.oxw();return l.KtG(Dt.getNotifyResponse(!1))}),l._uU(8,"Annuler"),l.qZA()()()()}}function Nn(He,q){if(1&He){const ne=l.EpF();l.TgZ(0,"th",37),l.NdJ("click",function(){const Ht=l.CHM(ne).$implicit,Ge=l.oxw();return l.KtG(Ge.sort(Ht.name))}),l._uU(1),l.qZA()}if(2&He){const ne=q.$implicit;l.xp6(1),l.hij(" ",ne.value," ")}}function wr(He,q){if(1&He&&(l.TgZ(0,"td",47),l._uU(1),l.qZA()),2&He){const ne=q.$implicit,at=l.oxw().$implicit;l.xp6(1),l.hij(" ",at[ne.name]," ")}}function kn(He,q){if(1&He){const ne=l.EpF();l.TgZ(0,"button",48),l.NdJ("click",function(){l.CHM(ne);const Dt=l.oxw().$implicit,Ht=l.oxw();return l.KtG(Ht.onBlock(Dt.id))}),l._uU(1,"bloquer"),l.qZA()}}function _r(He,q){if(1&He){const ne=l.EpF();l.TgZ(0,"button",49),l.NdJ("click",function(){l.CHM(ne);const Dt=l.oxw().$implicit,Ht=l.oxw();return l.KtG(Ht.onUnBlock(Dt.id))}),l._uU(1,"d\xe9bloquer"),l.qZA()}}function kr(He,q){if(1&He){const ne=l.EpF();l.TgZ(0,"tr",38),l.NdJ("click",function(){const Ht=l.CHM(ne).$implicit,Ge=l.oxw();return l.KtG(Ge.emitItem(Ht.id))}),l.YNc(1,wr,2,1,"td",39),l.TgZ(2,"td",40)(3,"div",41)(4,"button",42)(5,"a",43),l._uU(6,"+ cours"),l.qZA()(),l.TgZ(7,"button",44)(8,"a",43),l._uU(9,"voir cours"),l.qZA()(),l.YNc(10,kn,2,0,"button",45),l.YNc(11,_r,2,0,"button",46),l.qZA()()()}if(2&He){const ne=q.$implicit,at=l.oxw();l.xp6(1),l.Q6J("ngForOf",at.columns),l.xp6(4),l.Q6J("routerLink","/admin/enseignants/ajouter/cours/"+ne.id),l.xp6(3),l.Q6J("routerLink","/admin/cours/"+ne.id),l.xp6(2),l.Q6J("ngIf","actif"===ne.status),l.xp6(1),l.Q6J("ngIf","inactif"===ne.status)}}function nn(He,q){if(1&He){const ne=l.EpF();l.TgZ(0,"button",50),l.NdJ("click",function(){const Ht=l.CHM(ne).$implicit,Ge=l.oxw();return l.KtG(Ge.goToPage(Ht))}),l._uU(1),l.qZA()}if(2&He){const ne=q.$implicit,at=l.oxw();l.Q6J("disabled",ne===at.page),l.xp6(1),l.hij(" ",ne+1," ")}}class zn{constructor(q){this.adminService=q,this.data=[],this.alertVisible=!1,this.canSelect=!0,this.itemEmitter=new l.vpe,this.sens=!1,this.saveColumn="",this.currentEmit="1",this.loadData=!0,this.page=0,this.numberOfElement=20}ngOnInit(){var q=this;return(0,$t.Z)(function*(){q.initTable()})()}initTable(){this.data=[],this.adminService.getAllTeachers().subscribe(q=>{q.docs.forEach(ne=>{this.data.push(ne.data())}),console.log(this.data),this.saveData=this.data,this.listFragments=this.getListFragment(this.page,this.numberOfElement)})}emitItem(q){this.currentEmit=q,this.itemEmitter.emit(q)}getListFragment(q,ne){let at=[];for(let Dt=q*ne,Ht=0;Dt<ne*(q+1)&&this.saveData.length>Dt;Dt++,Ht++)at.push(this.saveData[Dt]);return at}getPages(){let q=[];for(let ne=0;ne<this.data.length/this.numberOfElement;ne++)q.push(ne);return q}setNumberOfElement(q){this.page=0,this.numberOfElement=+q,this.listFragments=this.getListFragment(this.page,this.numberOfElement)}goToPage(q){this.page=q,this.listFragments=this.getListFragment(q,this.numberOfElement)}nextPage(){this.page<this.getPages()[this.getPages().length-1]&&(this.listFragments=this.getListFragment(++this.page,this.numberOfElement))}previousPage(){this.page>this.getPages()[0]&&(this.listFragments=this.getListFragment(--this.page,this.numberOfElement))}filter(q){this.page=0,this.saveData=q?this.data.filter(ne=>{for(const at of this.columns)if(-1!=q.toUpperCase().search(ne[`${at.name}`].toString().toUpperCase()))return!0;return!1}):this.data,this.saveData||(this.saveData=this.data),console.log(this.saveData),this.listFragments=this.getListFragment(this.page,this.numberOfElement)}sort(q){this.saveColumn===q?this.sens=!this.sens:(this.sens=!0,this.saveColumn=q),this.page=0,this.saveData=this.data.sort((ne,at)=>ne[`${q}`]>at[`${q}`]?this.sens?1:-1:this.sens?-1:1),this.listFragments=this.getListFragment(this.page,this.numberOfElement)}refreshList(){this.listFragments=void 0,this.page=0}addCourse(q){}goToCourses(q){}onBlock(q){this.adminService.blockUser(q,"Teachers"),this.data.filter(ne=>ne.id===q)[0].status="inactif"}onUnBlock(q){this.adminService.unBlockUser(q,"Teachers")&&(this.data.filter(ne=>ne.id===q)[0].status="actif")}getNotifyResponse(q){return console.log(q),this.alertVisible=!1,q}showNotification(q,ne){}}zn.\u0275fac=function(q){return new(q||zn)(l.Y36(ge.l))},zn.\u0275cmp=l.Xpm({type:zn,selectors:[["app-teacher-list"]],inputs:{columns:"columns",extra:"extra",canSelect:"canSelect"},outputs:{itemEmitter:"itemEmitter"},decls:45,vars:6,consts:[["class","absolute left-0 top-0 right-0 bottom-0 flex items-center justify-center  z-[2000] bg-black bg-opacity-20",4,"ngIf"],[1,"flex","items-center","justify-center","flex-1"],[1,"flex","flex-col","justify-center","items-center","w-full","mx-10","relative"],[1,"my-10"],[1,"flex","space-x-4","items-center"],[1,"relative","z-0"],["type","text","id","floating_standard","placeholder"," ",1,"w-80","block","py-2.5","px-0","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["search",""],["for","floating_standard",1,"w-80","absolute","text-sm","text-gray-500","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:left-0","peer-focus:text-blue-600","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],[1,"p-2.5","ml-2","text-sm","font-medium","text-white","bg-amber-400","rounded-lg","border","border-amber-500","hover:bg-amber-700","focus:ring-4","focus:outline-none","focus:ring-amber-300",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"sr-only"],[1,"absolute","top-10","right-10"],["routerLink","/admin/enseignants/ajouter"],[1,"w-full"],[1,"bg-amber-400","text-white","rounded-xl"],["class","p-2  capitalize text-start cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"p-2","capitalize","text-start"],[1,"border-b","border-amber-500"],[3,"click",4,"ngFor","ngForOf"],[1,"flex","w-full","items-center","mt-10","text-xl","justify-between"],[1,"flex","items-center"],[1,"mr-2","border-r-2","border-black"],["name","numberOfElement","id","numberOfElement",3,"change"],["select",""],["value","10"],["value","20"],["value","30"],["class"," mx-2",3,"disabled","click",4,"ngFor","ngForOf"],[1,"mx-1",3,"disabled","click"],[1,"absolute","left-0","top-0","right-0","bottom-0","flex","items-center","justify-center","z-[2000]","bg-black","bg-opacity-20"],[1,"w-96","space-y-2","p-10","fixed","bg-white","flex","flex-col","items-center","justify-between","rounded"],[1,"text-xl"],[1,"text-xl","w-full","flex","justify-between"],[1,"px-6","py-1","bg-green-500","text-white","font-bold","rounded",3,"click"],[1,"px-6","py-1","bg-red-500","text-white","font-bold","rounded",3,"click"],[1,"p-2","capitalize","text-start","cursor-pointer",3,"click"],[3,"click"],["class","p-2 text-sm  w-44",4,"ngFor","ngForOf"],[1,"p-2","text-sm","w-80"],[1,"w-auto","flex","justify-between"],[1,"px-4","py-1","rounded","bg-green-500","text-white","font-bold"],[3,"routerLink"],[1,"px-4","py-1","rounded","bg-blue-500","text-white","font-bold"],["class"," py-1 px-4 rounded bg-red-400 text-white font-bold",3,"click",4,"ngIf"],["class"," py-1 px-4 rounded bg-green-400 text-white font-bold",3,"click",4,"ngIf"],[1,"p-2","text-sm","w-44"],[1,"py-1","px-4","rounded","bg-red-400","text-white","font-bold",3,"click"],[1,"py-1","px-4","rounded","bg-green-400","text-white","font-bold",3,"click"],[1,"mx-2",3,"disabled","click"]],template:function(q,ne){if(1&q){const at=l.EpF();l.YNc(0,On,9,0,"div",0),l.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),l._UZ(6,"input",6,7),l.TgZ(8,"label",8),l._uU(9,"Rechercher..."),l.qZA()(),l.TgZ(10,"button",9),l.NdJ("click",function(){l.CHM(at);const Ht=l.MAs(7);return l.KtG(ne.filter(Ht.value))}),l.O4$(),l.TgZ(11,"svg",10),l._UZ(12,"path",11),l.qZA(),l.kcU(),l.TgZ(13,"span",12),l._uU(14,"Search"),l.qZA()()()(),l.TgZ(15,"div",13)(16,"a",14),l._uU(17,"Ajouter enseignants"),l.qZA()(),l.TgZ(18,"table",15)(19,"thead",16),l.YNc(20,Nn,2,1,"th",17),l.TgZ(21,"th",18),l._uU(22,"Actions"),l.qZA()(),l.TgZ(23,"tbody",19),l.YNc(24,kr,12,5,"tr",20),l.qZA()(),l.TgZ(25,"div",21)(26,"div",22)(27,"div",23),l._uU(28," tableau de : "),l.TgZ(29,"select",24,25),l.NdJ("change",function(){l.CHM(at);const Ht=l.MAs(30);return l.KtG(ne.setNumberOfElement(Ht.value))}),l.TgZ(31,"option",26),l._uU(32,"10"),l.qZA(),l.TgZ(33,"option",27),l._uU(34,"10"),l.qZA(),l.TgZ(35,"option",28),l._uU(36,"30"),l.qZA()()(),l.TgZ(37,"div"),l._uU(38," page : "),l.YNc(39,nn,2,2,"button",29),l.qZA()(),l.TgZ(40,"div")(41,"button",30),l.NdJ("click",function(){return ne.previousPage()}),l._uU(42,"Pr\xe9cedent"),l.qZA(),l.TgZ(43,"button",30),l.NdJ("click",function(){return ne.nextPage()}),l._uU(44,"Suivant"),l.qZA()()()()()}2&q&&(l.Q6J("ngIf",ne.alertVisible),l.xp6(20),l.Q6J("ngForOf",ne.columns),l.xp6(4),l.Q6J("ngForOf",ne.listFragments),l.xp6(15),l.Q6J("ngForOf",ne.getPages()),l.xp6(2),l.Q6J("disabled",ne.page===ne.getPages()[0]),l.xp6(2),l.Q6J("disabled",ne.page===ne.getPages()[ne.getPages().length-1]))},dependencies:[U.sg,U.O5,g.YN,g.Kr,G.rH]});class $n{constructor(q){this.adminService=q,this.teachers=[],this.columns=[{name:"firstname",value:"Pr\xe9nom"},{name:"lastname",value:"Nom"},{name:"email",value:"Email"},{name:"status",value:"Status"}],this.loadData=!0,this.item=0}ngOnInit(){}getCourse(q){console.log(q)}getNewTeacher(q){this.adminService.createTeacher(q,q.email)}getItem(q){}getTeacherCourses(){}getCourseVideos(q){}}$n.\u0275fac=function(q){return new(q||$n)(l.Y36(ge.l))},$n.\u0275cmp=l.Xpm({type:$n,selectors:[["app-teacher"]],decls:5,vars:1,consts:[[1,"bg-white","pt-32","flex","flex-col","min-h-screen"],[1,"text-4xl","text-center","pb-24"],[1,"rounded-t-[60px]","bg-white","drop-shadow-xl","shadow","shadow-gray-300","rounde-t-xl","mx-4","flex-1"],[3,"columns","itemEmitter"]],template:function(q,ne){1&q&&(l.TgZ(0,"div",0)(1,"p",1),l._uU(2," Liste des Enseignants "),l.qZA(),l.TgZ(3,"div",2)(4,"app-teacher-list",3),l.NdJ("itemEmitter",function(Dt){return ne.getItem(Dt)}),l.qZA()()()),2&q&&(l.xp6(4),l.Q6J("columns",ne.columns))},dependencies:[zn]});const Vn=[{path:"cours",component:lt},{path:"cours/ajouter",component:ue},{path:"cours/:id",component:lt},{path:"enseignants",component:$n},{path:"etudiants",component:yn},{path:"videos",component:Fe},{path:"videos/:id",component:Fe},{path:"enseignants/ajouter/cours/:id",component:Le},{path:"enseignants/ajouter",component:Ye},{path:"videos/ajouter/:id",component:nt},{path:"videos/visionner/:id",component:ie}];class Kt{}Kt.\u0275fac=function(q){return new(q||Kt)},Kt.\u0275mod=l.oAB({type:Kt}),Kt.\u0275inj=l.cJS({imports:[G.Bz.forChild(Vn),G.Bz]})},5024:(Ut,ze,L)=>{L.d(ze,{l:()=>ct});var g=L(8996),l=L(3900);const G={_origin:"https://api.emailjs.com"};class be{constructor(Me){this.status=Me?Me.status:0,this.text=Me?Me.responseText:"Network Error"}}const ie_send=(Ne,Me,Fe,et)=>{const se=et||G._userID;return((Ne,Me,Fe)=>{if(!Ne)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!Me)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!Fe)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"})(se,Ne,Me),((Ne,Me,Fe={})=>new Promise((et,se)=>{const $e=new XMLHttpRequest;$e.addEventListener("load",({target:Le})=>{const ut=new be(Le);200===ut.status||"OK"===ut.text?et(ut):se(ut)}),$e.addEventListener("error",({target:Le})=>{se(new be(Le))}),$e.open("POST",G._origin+Ne,!0),Object.keys(Fe).forEach(Le=>{$e.setRequestHeader(Le,Fe[Le])}),$e.send(Me)}))("/api/v1.0/email/send",JSON.stringify({lib_version:"3.10.0",user_id:se,service_id:Ne,template_id:Me,template_params:Fe}),{"Content-type":"application/json"})};var pe=L(4650),nt=L(2095),qe=L(1205),Qe=L(377);class ct{constructor(Me,Fe,et){this.fireStore=Me,this.fireAuth=Fe,this.storage=et,this.chars="abcdefghijklmnopqrstuvwxyz",this.CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZ",this.num="123456789",this.passwordLength=3}generatePassword(Me,Fe){let et="";for(let se=0;se<=Fe;se++){let $e=Math.floor(Math.random()*this.chars.length);et+=Me.substring($e,$e+1)+""}return et}createTeacher(Me,Fe){Me.id=this.fireStore.createId(),Me.courses=[],console.log(Me);const et=this.generatePassword(this.CHARS,1)+this.generatePassword(this.chars,4)+"@"+this.generatePassword(this.num,2);return console.log(et),this.fireAuth.createUserWithEmailAndPassword(Fe,et).then(se=>se.user?.uid?(Me.uid=se.user?.uid,new Promise(($e,Le)=>{this.fireStore.collection("Teachers").add({...Me,status:"actif"}).then(ut=>{this.sendEmail({password:et,email:Fe,name:Me.firstname+" "+Me.lastname}),$e(ut)},ut=>Le(ut))})):"Une erreur c'est produite")}createCourse(Me){return Me.id=this.fireStore.createId(),console.log("hey"),new Promise((Fe,et)=>{this.fireStore.collection("Courses").add({...Me,link:"",videos:[],teacherName:""}).then(se=>{Fe("Cours cr\xe9\xe9e vec succ\xe8s")},se=>{et("Une erreur est survenue impossible de continuer l'op\xe9ration")})})}updateCourseTeacher(Me,Fe,et){return this.fireStore.collection("Courses").doc(Fe).update({teacher:Me,teacherName:et})}createVideo(Me,Fe,et){Me.id=this.fireStore.createId();let se=0;return this.fireStore.collection("Courses",$e=>$e.where("id","==",Fe)).snapshotChanges().subscribe($e=>{if(se++,1==se){let Le=$e[0].payload.doc.data().videos;Le.push(Me.id),this.fireStore.collection("Courses").doc($e[0].payload.doc.id).update({videos:Le}).then(ut=>{},ut=>{}),this.uploadFileAndGetMetadata("videos",et).downloadUrl$.subscribe(ut=>{new Promise((Ye,de)=>this.fireStore.collection("Videos").add({...Me,link:ut}).then(Oe=>{Ye("Vid\xe9o cr\xe9\xe9e vec succ\xe8s")},Oe=>{de("Une erreur est survenue impossible de continuer l'op\xe9ration")}))})}})}deleteStudent(Me){this.fireStore.collection("/Students").doc(Me).delete()}blockUser(Me,Fe){let et=0;return this.fireStore.collection(`${Fe}`,se=>se.where("id","==",Me)).snapshotChanges().subscribe(se=>{et++,1===et&&this.fireStore.collection(`${Fe}`).doc(se[0].payload.doc.id).update({status:"inactif"}).then($e=>"Utilisateur bloquer").catch($e=>"Une erreur c'est produite veuillez ressager")})}unBlockUser(Me,Fe){let et=0;return this.fireStore.collection(`${Fe}`,se=>se.where("id","==",Me)).snapshotChanges().subscribe(se=>{if(et++,1===et)return this.fireStore.collection(`${Fe}`).doc(se[0].payload.doc.id).update({status:"actif"}).then($e=>"Utilisateur d\xe9bloquer").catch($e=>"Une erreur c'est produite veuillez ressager")})}getAllTeachers(){return this.fireStore.collection("/Teachers").get()}getAllStudents(){return this.fireStore.collection("/Students").get()}getAllCourses(){return this.fireStore.collection("/Courses").snapshotChanges()}getCourseId(){return this.fireStore.collection("/Courses").get()}getAllVideos(){return this.fireStore.collection("/Videos").get()}getItem(Me,Fe){return this.fireStore.collection(`/${Fe}`,et=>et.where("id","==",Me)).get()}uploadFileAndGetMetadata(Me,Fe){const{name:et}=Fe,se=`${Me}/${(new Date).getTime()}_${et}`,$e=this.storage.upload(se,Fe);return{uploadProgress$:$e.percentageChanges()?$e.percentageChanges():0,downloadUrl$:this.getDownloadUrl$($e,se)}}getVideoLink(){return this.storage.ref("videos/1671190561399_122476.jpg").getDownloadURL()}getDownloadUrl$(Me,Fe){return(0,g.D)(Me).pipe((0,l.w)(et=>this.storage.ref(Fe).getDownloadURL()))}addCourseVideos(){}deleteVideo(){}deleteCourse(){}sendEmail(Me){ie_send("etoile-d-afrique-web-app","etoile-afrique-send-pass",Me,"BCidLL6hrWDmpzwyN").then(Fe=>{console.log(Fe.text)},Fe=>{console.log(Fe.text)})}}ct.\u0275fac=function(Me){return new(Me||ct)(pe.LFG(nt.ST),pe.LFG(qe.zQ),pe.LFG(Qe.Q1))},ct.\u0275prov=pe.Yz7({token:ct,factory:ct.\u0275fac,providedIn:"root"})},8796:(Ut,ze,L)=>{L.r(ze),L.d(ze,{AuthRoutingModule:()=>nt});var g=L(433),l=L(4650),G=L(9051),ge=L(7501);class U{constructor(Qe,ct,Ne){this.formBuilder=Qe,this.router=ct,this.authService=Ne,this.isAuth=!1,localStorage.clear()}ngOnInit(){this.initForm()}initForm(){this.loginForm=this.formBuilder.group({login:["",g.kI.required],password:["",[g.kI.required,g.kI.pattern(/(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/)]]})}onSubmit(){const Qe=this.loginForm.get("login").value,ct=this.loginForm.get("password").value;this.authService.searchAdmin(Qe).subscribe(Ne=>{let Me=null;Ne.forEach(Fe=>{Me=Fe.data()}),Me?this.authService.adminLogin(Qe,ct).then(Fe=>{localStorage.setItem("login",Fe.user?.uid?Fe.user?.uid:""),Fe.user?.getIdToken().then(et=>{localStorage.setItem("token",et),localStorage.setItem("user","admin"),this.router.navigateByUrl("/admin/cours")},et=>{this.errorMessage="Login ou mot de passe incorrect"})}):this.errorMessage="Login ou mot de passe incorrect"})}}U.\u0275fac=function(Qe){return new(Qe||U)(l.Y36(g.qu),l.Y36(G.F0),l.Y36(ge.e))},U.\u0275cmp=l.Xpm({type:U,selectors:[["app-admin-auth"]],decls:26,vars:3,consts:[[1,"min-h-screen","flex","items-center","justify-center"],[1,"w-2/5","bg-amber-400","h-screen","flex","flex-col","items-center","justify-center"],["src","","alt"," ",1,"w-80","h-44","bg-red-400","mb-4"],[1,"ofont-extrabold","mt-4","w-3/4","text-xl","text-center"],[1,"flex","justify-center","flex-1"],[1,"p-10","mb-16","bg-white","drop-shadow","shadow-md","shadow-amber-50","rounded-3xl","overflow-hidden"],[1,"text-center","text-3xl"],[1,"p-4","px-16","space-y-12",3,"formGroup","ngSubmit"],[1,"text-red-500"],[1,"relative","z-0","w-80"],["formControlName","login","required","","type","email","id","floating_standard","placeholder"," ",1,"block","py-2.5","px-0","w-full","text","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","floating_standard",1,"absolute","text-sm","text-gray-500","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:left-0","peer-focus:text-blue-600","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],[1,"relative","z-0"],["formControlName","password","required","","type","password","id","floating_standard","placeholder"," ",1,"block","py-2.5","px-0","w-full","text","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],[1,"text-center"],["type","submit","value","Se Connecter",1,"cursor-pointer","p-2","px-4","font-semibold","border-2","rounded-2xl","drop-shadow-login-button","bg-main-bg","border-b-amber-300","border-r-amber-300",3,"disabled"],["href","/inscription",1,"text-amber-400"]],template:function(Qe,ct){1&Qe&&(l.TgZ(0,"div",0)(1,"div",1),l._UZ(2,"img",2),l.TgZ(3,"p",3),l._uU(4," Lorem, ipsum dolor sit amet consectetur adipisicing elit. Incidunt nobis debitis cum, tempore est fugit earum quibusdam rem beatae ducimus placeat repellat libero laborum quam, iure pariatur quasi molestias eligendi. "),l.qZA()(),l.TgZ(5,"div",4)(6,"div",5)(7,"p",6),l._uU(8,"Connexion"),l.qZA(),l.TgZ(9,"form",7),l.NdJ("ngSubmit",function(){return ct.onSubmit()}),l.TgZ(10,"p",8),l._uU(11),l.qZA(),l.TgZ(12,"div",9),l._UZ(13,"input",10),l.TgZ(14,"label",11),l._uU(15,"Email"),l.qZA()(),l.TgZ(16,"div",12),l._UZ(17,"input",13),l.TgZ(18,"label",11),l._uU(19,"Mot de passe"),l.qZA()(),l.TgZ(20,"div",14),l._UZ(21,"input",15),l.qZA(),l.TgZ(22,"div",14),l._uU(23,"Pas encore inscrit ? "),l.TgZ(24,"a",16),l._uU(25,"S'inscrire."),l.qZA()()()()()()),2&Qe&&(l.xp6(9),l.Q6J("formGroup",ct.loginForm),l.xp6(2),l.Oqu(ct.errorMessage),l.xp6(10),l.Q6J("disabled",ct.loginForm.invalid))},dependencies:[g._Y,g.Fj,g.JJ,g.JL,g.Q7,g.sg,g.u]});class be{constructor(Qe,ct,Ne){this.formBuilder=Qe,this.router=ct,this.authService=Ne,this.isAuth=!1,localStorage.clear()}ngOnInit(){this.initForm()}initForm(){this.loginForm=this.formBuilder.group({login:["",g.kI.required],password:["",[g.kI.required,g.kI.pattern(/(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/)]],role:["Student",g.kI.required]})}onSubmit(){const Qe=this.loginForm.get("login").value,ct=this.loginForm.get("password").value,Ne=this.loginForm.get("role").value;this.authService.login(Qe,ct,Ne).then(Me=>{this.errorMessage=Me.toString()})}}be.\u0275fac=function(Qe){return new(Qe||be)(l.Y36(g.qu),l.Y36(G.F0),l.Y36(ge.e))},be.\u0275cmp=l.Xpm({type:be,selectors:[["app-login"]],decls:34,vars:3,consts:[[1,"min-h-screen","flex","items-center","justify-center"],[1,"md:flex","hidden","w-2/5","bg-amber-400","h-screen","flex-col","items-center","justify-center"],["src","","alt"," ",1,"w-80","h-44","bg-red-400","mb-4"],[1,"ofont-extrabold","mt-4","w-3/4","text-xl","text-center"],[1,"flex","justify-center","flex-1"],[1,"md:p-10","py-10","mb-16","bg-white","md:drop-shadow","md:shadow-md","shadow-amber-50","rounded-3xl","overflow-hidden"],[1,"text-center","text-3xl"],[1,"md:p-4","px-16","space-y-12",3,"formGroup","ngSubmit"],[1,"text-red-500"],[1,"relative","z-0","w-80"],["formControlName","login","required","","type","email","id","floating_standard","placeholder"," ",1,"block","py-2.5","px-0","w-full","text","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","floating_standard",1,"absolute","text-sm","text-gray-500","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:left-0","peer-focus:text-blue-600","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],[1,"relative","z-0"],["formControlName","password","required","","type","password","id","floating_standard","placeholder"," ",1,"block","py-2.5","px-0","w-full","text","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["formControlName","role","required","","id","floating_standard","placeholder"," ",1,"block","py-2.5","px-0","w-full","text","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["value","Student"],["value","Teacher"],["for","floating_standard",1,"absolute","text-xl","text-gray-500","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:left-0","peer-focus:text-blue-600","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],[1,"text-center"],["type","submit","value","Se Connecter",1,"cursor-pointer","p-2","px-4","font-semibold","border-2","rounded-2xl","drop-shadow-login-button","bg-main-bg","border-b-amber-300","border-r-amber-300",3,"disabled"],["href","/inscription",1,"text-amber-400"]],template:function(Qe,ct){1&Qe&&(l.TgZ(0,"div",0)(1,"div",1),l._UZ(2,"img",2),l.TgZ(3,"p",3),l._uU(4," Lorem, ipsum dolor sit amet consectetur adipisicing elit. Incidunt nobis debitis cum, tempore est fugit earum quibusdam rem beatae ducimus placeat repellat libero laborum quam, iure pariatur quasi molestias eligendi. "),l.qZA()(),l.TgZ(5,"div",4)(6,"div",5)(7,"p",6),l._uU(8,"Connexion"),l.qZA(),l.TgZ(9,"form",7),l.NdJ("ngSubmit",function(){return ct.onSubmit()}),l.TgZ(10,"p",8),l._uU(11),l.qZA(),l.TgZ(12,"div",9),l._UZ(13,"input",10),l.TgZ(14,"label",11),l._uU(15,"Email"),l.qZA()(),l.TgZ(16,"div",12),l._UZ(17,"input",13),l.TgZ(18,"label",11),l._uU(19,"Mot de passe"),l.qZA()(),l.TgZ(20,"div",12)(21,"select",14)(22,"option",15),l._uU(23,"\xc9tudiant"),l.qZA(),l.TgZ(24,"option",16),l._uU(25,"Professeur"),l.qZA()(),l.TgZ(26,"label",17),l._uU(27,"Vous \xeates ?"),l.qZA()(),l.TgZ(28,"div",18),l._UZ(29,"input",19),l.qZA(),l.TgZ(30,"div",18),l._uU(31,"Pas encore inscrit ? "),l.TgZ(32,"a",20),l._uU(33,"S'inscrire."),l.qZA()()()()()()),2&Qe&&(l.xp6(9),l.Q6J("formGroup",ct.loginForm),l.xp6(2),l.Oqu(ct.errorMessage),l.xp6(18),l.Q6J("disabled",ct.loginForm.invalid))},dependencies:[g._Y,g.YN,g.Kr,g.Fj,g.EJ,g.JJ,g.JL,g.Q7,g.sg,g.u]});var we=L(2893),Ae=L(6895);function xe(qe,Qe){if(1&qe&&(l.TgZ(0,"option",22),l._uU(1),l.qZA()),2&qe){const ct=Qe.$implicit;l.Q6J("value",ct.value),l.xp6(1),l.Oqu(ct.name)}}function ue(qe,Qe){if(1&qe&&(l.TgZ(0,"option",22),l._uU(1),l.qZA()),2&qe){const ct=Qe.$implicit;l.Q6J("value",ct),l.xp6(1),l.Oqu(ct)}}class ie{constructor(Qe,ct,Ne,Me){this.formBuilder=Qe,this.router=ct,this.authService=Ne,this.dataService=Me,this.level=[{name:"CI",value:"CI",option:["n\xe9an"]},{name:"CP",value:"CP",option:["n\xe9an"]},{name:"CE1",value:"CE1",option:["n\xe9an"]},{name:"CE1",value:"CE1",option:["n\xe9an"]},{name:"CM1",value:"CM1",option:["n\xe9an"]},{name:"CM2",value:"CM2",option:["n\xe9an"]},{name:"6e",value:"6\xe9me",option:["n\xe9an"]},{name:"5e",value:"5\xe9me",option:["n\xe9an"]},{name:"4e",value:"4\xe9me",option:["n\xe9an"]},{name:"3e",value:"3\xe9me",option:["n\xe9an"]},{name:"Second",value:"Second",option:["L","S"]},{name:"Premi\xe8re",value:"Premi\xe8re",option:["L","S"]},{name:"Terminale",value:"Terminale",option:["L","S"]}],this.option=[{name:"n\xe9an",value:"none"},{name:"L",value:"L"},{name:"S",value:"S"}],this.isAuth=!1,localStorage.clear()}ngOnInit(){this.initForm()}initForm(){this.registerForm=this.formBuilder.group({login:["",g.kI.required],name:["",g.kI.required],level:["CI",g.kI.required],option:[,g.kI.required],password:["",[g.kI.required,g.kI.pattern(/(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/)]],confirmPassword:["",[g.kI.required,g.kI.pattern(/(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/)]]})}getOption(){return this.level.filter(Qe=>Qe.value==this.registerForm.get("level")?.value)[0].option}onSubmit(){const Qe=this.registerForm.get("name").value,ct=this.registerForm.get("login").value,Ne=this.registerForm.get("password").value;Ne!==this.registerForm.get("confirmPassword").value?this.errorMessage="Mot de passe incorrecte":this.authService.register(ct,Ne).then(et=>{et?et.uid?(this.dataService.createStudent({id:"",uid:et.uid,courses:[],name:Qe,email:ct,status:"actif"}).then($e=>{this.message=""}).catch($e=>{}),console.log(this.dataService.getStudent(et.uid)),this.router.navigate(["/connexion"])):this.errorMessage=et.message:this.errorMessage="Une erreur c'est produit veuillez ressayer plutard"})}}ie.\u0275fac=function(Qe){return new(Qe||ie)(l.Y36(g.qu),l.Y36(G.F0),l.Y36(ge.e),l.Y36(we.k))},ie.\u0275cmp=l.Xpm({type:ie,selectors:[["app-register"]],decls:44,vars:5,consts:[[1,"min-h-screen","flex","items-center","justify-between","overflow-hidden"],[1,"w-2/5","bg-amber-400","h-screen","md:flex","hidden","flex-col","items-center","justify-center"],["src","","alt"," ",1,"w-80","h-44","bg-red-400","mb-4"],[1,"ofont-extrabold","mt-4","w-3/4","text-xl","text-center"],[1,"flex","justify-center","flex-1"],[1,"p-6","block","bg-white","md:shadow-xl","md:drop-shadow","shadow-amber-50","rounded-3xl","overflow-hidden"],[1,"text-center","text-3xl"],[1,"p-4","px-16","space-y-5",3,"formGroup","ngSubmit"],[1,"text-red-500","text-center"],[1,"relative","z-0","w-80"],["formControlName","name","required","","type","text","id","floating_standard","placeholder"," ",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","floating_standard",1,"absolute","text-sm","text-gray-500","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:left-0","peer-focus:text-blue-600","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["formControlName","login","required","","type","email","id","floating_standard","placeholder"," ",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],[1,"relative","z-0"],["name","level","formControlName","level","id","level",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],[3,"value",4,"ngFor","ngForOf"],["name","option","formControlName","option","id","option",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["formControlName","password","required","","type","password","id","floating_standard","placeholder"," ",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["formControlName","confirmPassword","required","","type","password","id","floating_standard","placeholder"," ",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],[1,"text-center"],["type","submit","value","S'inscrire",1,"cursor-pointer","p-2","px-4","font-semibold","border-2","rounded-2xl","drop-shadow-login-button","bg-main-bg","border-b-amber-300","border-r-amber-300",3,"disabled"],["href","/connexion",1,"text-amber-400"],[3,"value"]],template:function(Qe,ct){1&Qe&&(l.TgZ(0,"div",0)(1,"div",1),l._UZ(2,"img",2),l.TgZ(3,"p",3),l._uU(4," Lorem, ipsum dolor sit amet consectetur adipisicing elit. Incidunt nobis debitis cum, tempore est fugit earum quibusdam rem beatae ducimus placeat repellat libero laborum quam, iure pariatur quasi molestias eligendi. "),l.qZA()(),l.TgZ(5,"div",4)(6,"div",5)(7,"p",6),l._uU(8,"Inscription"),l.qZA(),l.TgZ(9,"form",7),l.NdJ("ngSubmit",function(){return ct.onSubmit()}),l.TgZ(10,"p",8),l._uU(11),l.qZA(),l.TgZ(12,"div",9),l._UZ(13,"input",10),l.TgZ(14,"label",11),l._uU(15,"Pseudo"),l.qZA()(),l.TgZ(16,"div",9),l._UZ(17,"input",12),l.TgZ(18,"label",11),l._uU(19,"Email"),l.qZA()(),l.TgZ(20,"div",13)(21,"select",14),l.YNc(22,xe,2,2,"option",15),l.qZA(),l.TgZ(23,"label",11),l._uU(24,"Niveau"),l.qZA()(),l.TgZ(25,"div",13)(26,"select",16),l.YNc(27,ue,2,2,"option",15),l.qZA(),l.TgZ(28,"label",11),l._uU(29,"Option"),l.qZA()(),l.TgZ(30,"div",13),l._UZ(31,"input",17),l.TgZ(32,"label",11),l._uU(33,"Mot de passe"),l.qZA()(),l.TgZ(34,"div",13),l._UZ(35,"input",18),l.TgZ(36,"label",11),l._uU(37,"Confirmer le Mot de passe"),l.qZA()(),l.TgZ(38,"div",19),l._UZ(39,"input",20),l.qZA(),l.TgZ(40,"div",19),l._uU(41,"D\xe9j\xe0 inscrit ? "),l.TgZ(42,"a",21),l._uU(43,"Se connecter."),l.qZA()()()()()()),2&Qe&&(l.xp6(9),l.Q6J("formGroup",ct.registerForm),l.xp6(2),l.Oqu(ct.errorMessage),l.xp6(11),l.Q6J("ngForOf",ct.level),l.xp6(5),l.Q6J("ngForOf",ct.getOption()),l.xp6(12),l.Q6J("disabled",ct.registerForm.invalid))},dependencies:[Ae.sg,g._Y,g.YN,g.Kr,g.Fj,g.EJ,g.JJ,g.JL,g.Q7,g.sg,g.u]});const pe=[{path:"",component:be},{path:"connexion",component:be},{path:"inscription",component:ie},{path:"admin",component:U}];class nt{}nt.\u0275fac=function(Qe){return new(Qe||nt)},nt.\u0275mod=l.oAB({type:nt}),nt.\u0275inj=l.cJS({imports:[G.Bz.forChild(pe),G.Bz]})},7501:(Ut,ze,L)=>{L.d(ze,{e:()=>we});var g=L(5861),l=L(4650),G=L(1205),ge=L(9051),U=L(2893),be=L(2095);class we{constructor(xe,ue,ie,pe){this.fireAuth=xe,this.router=ue,this.dataService=ie,this.fireStore=pe}getToken(){return this.token}getUserId(){return""}setToken(xe){this.token=xe,console.log(this.token)}adminLogin(xe,ue){return this.fireAuth.signInWithEmailAndPassword(xe,ue)}searchAdmin(xe){return this.fireStore.collection("Admins",ue=>ue.where("email","==",xe)).get()}login(xe,ue,ie){return this.fireAuth.signInWithEmailAndPassword(xe,ue).then(pe=>pe.user?.getIdToken().then(nt=>{switch(ie){case"Student":this.fireStore.collection("Students",qe=>qe.where("uid","==",pe.user?.uid)).get().subscribe(qe=>{qe.docs.forEach(Qe=>Qe.data().uid===pe.user?.uid?(localStorage.setItem("login",pe.user?.uid?pe.user?.uid:""),localStorage.setItem("user","student"),localStorage.setItem("token",nt),this.router.navigate(["/etud/accueil/CI"])):"V\xe9rifiez les informations saisies")});break;case"Teacher":this.fireStore.collection("Teachers",qe=>qe.where("uid","==",pe.user?.uid)).get().subscribe(qe=>{qe.docs.forEach(Qe=>Qe.data().uid===pe.user?.uid?(localStorage.setItem("login",pe.user?.uid?pe.user?.uid:""),localStorage.setItem("token",nt),localStorage.setItem("user","teacher"),this.router.navigate(["/en/accueil"])):"V\xe9rifiez les informations saisies")});break;default:return"Saisie incorrecte"}return""}).catch(nt=>"Veuillez ressayer"),pe=>"Veuillez ressayer")}register(xe,ue){var ie=this;return(0,g.Z)(function*(){let pe;return yield ie.fireAuth.createUserWithEmailAndPassword(xe,ue).then(nt=>{pe={uid:nt.user?.uid,message:""}},nt=>{pe=nt.message.search("auth/email-already-in-use")?{uid:null,message:"Email d\xe9j\xe0 utilis\xe9"}:{uid:null,message:"Une erreur c'est produit veuillez ressayer"}}),pe})()}logout(){this.fireAuth.signOut().then(()=>{localStorage.removeItem("token"),this.router.navigate(["/connexion"])},xe=>{alert(xe.message)})}forgotPassword(xe){this.fireAuth.sendPasswordResetEmail(xe).then(()=>{this.router.navigate(["/varify-email"])},ue=>{alert("Something went wrong")})}}we.\u0275fac=function(xe){return new(xe||we)(l.LFG(G.zQ),l.LFG(ge.F0),l.LFG(U.k),l.LFG(be.ST))},we.\u0275prov=l.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"})},2893:(Ut,ze,L)=>{L.d(ze,{k:()=>ge});var g=L(4650),l=L(2095),G=L(1205);class ge{constructor(be,we){this.fireStore=be,this.fireAuth=we}createStudent(be){return be.id=this.fireStore.createId(),new Promise((we,Ae)=>{this.fireStore.collection("Students").add(be).then(xe=>{we(xe)},xe=>Ae(xe))})}getStudent(be){return this.fireStore.collection("/Students",we=>we.where("uid","==",be)).snapshotChanges()}getAllStudent(){return this.fireStore.collection("Students").snapshotChanges()}}ge.\u0275fac=function(be){return new(be||ge)(g.LFG(l.ST),g.LFG(G.zQ))},ge.\u0275prov=g.Yz7({token:ge,factory:ge.\u0275fac,providedIn:"root"})},4119:(Ut,ze,L)=>{L.d(ze,{FM:()=>G,Wv:()=>ge,eM:()=>U,nO:()=>l});const l=[],G=[{name:"Proba partie 1",date:"10-12-2022",link:"lien vers video",id:"1",course:"5"},{name:"Proba partie 2",date:"14-12-2022",link:"lien vers video",id:"2",course:"5"},{name:"Proba partie 3",date:"21-12-2022",link:"lien vers video",id:"3",course:"5"}],ge=[{day:"Lundi",hours:"8h-10h",cover:"",id:"1",name:"Math",description:"Description programme de Math en CI",teacher:"1",link:"",language:"Francais",level:"CI"},{day:"Mardi",hours:"10h-12h",cover:"",id:"2",name:"Math",description:"Description programme de Math en CP",teacher:"1",link:"",language:"Francais",level:"CP"},{day:"Jeudi",hours:"8h-10h",cover:"",id:"3",name:"Histoire",description:"Description programme de Histoire en 6e",teacher:"2",link:"",language:"Francais",level:"6e"},{day:"Samedi",hours:"17h-19h",cover:"",id:"4",name:"Histoire",description:"Description programme de Histoire en 3e",teacher:"2",link:"",language:"Francais",level:"3e"},{day:"Mercredi",hours:"17h-19h",cover:"",id:"5",name:"Math",description:"Description programme de Math en 4e",teacher:"3",link:"",language:"Francais",level:"4e"},{day:"Mercredi",hours:"15h-17h",cover:"",id:"6",name:"PC",description:"Description programme de PC en 4e",teacher:"3",link:"",language:"Francais",level:"4e"},{day:"Mardi",hours:"8h-10h",cover:"",id:"7",name:"Math",description:"Description programme de Math en CM2",teacher:"4",link:"",language:"Francais",level:"CM2"},{day:"Samedi",hours:"15h-17h",cover:"",id:"8",name:"Francais",description:"francais pour les anglais ",teacher:"5",link:"",language:"Francais",level:"6e"}],U=[{level:"CI",firstname:"Papa",lastname:"Bar",email:"bounabamba@gmail.com",status:"inactif",courses:["5","6"],picture:"",id:"1"},{level:"CI",firstname:"Amdy",lastname:"Diop",email:"amdy@gmail.com",status:"inactif",courses:["5"],picture:"",id:"2"},{level:"CI",firstname:"Sidy",lastname:"Ndiaye",email:"sylla@gmail.com",status:"inactif",courses:["5","6"],picture:"",id:"3"},{level:"CI",firstname:"Papa",lastname:"Bar",email:"bounabamba@gmail.com",status:"inactif",courses:["5","6"],picture:"",id:"1"},{level:"CI",firstname:"Amdy",lastname:"Diop",email:"amdy@gmail.com",status:"inactif",courses:["5"],picture:"",id:"2"},{level:"CI",firstname:"Sidy",lastname:"Ndiaye",email:"sylla@gmail.com",status:"inactif",courses:["5","6"],picture:"",id:"3"},{level:"CI",firstname:"Papa",lastname:"Bar",email:"bounabamba@gmail.com",status:"inactif",courses:["5","6"],picture:"",id:"1"},{level:"CI",firstname:"Amdy",lastname:"Diop",email:"amdy@gmail.com",status:"inactif",courses:["5"],picture:"",id:"2"},{level:"CI",firstname:"Sidy",lastname:"Ndiaye",email:"sylla@gmail.com",status:"inactif",courses:["5","6"],picture:"",id:"3"},{level:"CI",firstname:"Papa",lastname:"Bar",email:"bounabamba@gmail.com",status:"inactif",courses:["5","6"],picture:"",id:"1"},{level:"CI",firstname:"Amdy",lastname:"Diop",email:"amdy@gmail.com",status:"inactif",courses:["5"],picture:"",id:"2"},{level:"CI",firstname:"Sidy",lastname:"Ndiaye",email:"sylla@gmail.com",status:"inactif",courses:["5","6"],picture:"",id:"3"},{level:"CI",firstname:"Papa",lastname:"Bar",email:"bounabamba@gmail.com",status:"inactif",courses:["5","6"],picture:"",id:"1"},{level:"CI",firstname:"Amdy",lastname:"Diop",email:"amdy@gmail.com",status:"inactif",courses:["5"],picture:"",id:"2"},{level:"CI",firstname:"Sidy",lastname:"Ndiaye",email:"sylla@gmail.com",status:"inactif",courses:["5","6"],picture:"",id:"3"},{level:"CI",firstname:"Papa",lastname:"Bar",email:"bounabamba@gmail.com",status:"inactif",courses:["5","6"],picture:"",id:"1"},{level:"CI",firstname:"Amdy",lastname:"Diop",email:"amdy@gmail.com",status:"inactif",courses:["5"],picture:"",id:"2"},{level:"CI",firstname:"Sidy",lastname:"Ndiaye",email:"sylla@gmail.com",status:"inactif",courses:["5","6"],picture:"",id:"3"},{level:"CI",firstname:"Papa",lastname:"Bar",email:"bounabamba@gmail.com",status:"inactif",courses:["5","6"],picture:"",id:"1"},{level:"CI",firstname:"Amdy",lastname:"Diop",email:"amdy@gmail.com",status:"inactif",courses:["5"],picture:"",id:"2"},{level:"CI",firstname:"Sidy",lastname:"Ndiaye",email:"sylla@gmail.com",status:"inactif",courses:["5","6"],picture:"",id:"3"},{level:"CI",firstname:"Papa",lastname:"Bar",email:"bounabamba@gmail.com",status:"inactif",courses:["5","6"],picture:"",id:"1"},{level:"CI",firstname:"Amdy",lastname:"Diop",email:"amdy@gmail.com",status:"inactif",courses:["5"],picture:"",id:"2"},{level:"CI",firstname:"Sidy",lastname:"Ndiaye",email:"sylla@gmail.com",status:"inactif",courses:["5","6"],picture:"",id:"3"}]},9634:(Ut,ze,L)=>{L.r(ze),L.d(ze,{StudentRoutingModule:()=>de});var g=L(433),l=L(4650),G=L(9051),ge=L(2095),U=L(1205),be=L(377);class we{constructor(W,te,ae,Ie){this.fireStore=W,this.fireAuth=te,this.storage=ae,this.router=Ie}getStudent(){let W=localStorage.getItem("login");return(!W||"admin"===localStorage.getItem("user")||"teacher"===localStorage.getItem("user"))&&this.router.navigate(["/"]),this.fireStore.collection("Students",te=>te.where("uid","==",W)).snapshotChanges()}getCoursesById(W){return this.fireStore.collection("Courses",te=>te.where("id","==",W)).snapshotChanges()}getStudentCourses(W){return this.fireStore.collection("Courses",te=>te.where("level","==",W)).snapshotChanges()}getCoursesByLevel(W){return this.fireStore.collection("Courses",te=>te.where("level","==",W)).snapshotChanges()}getCourseObjectId(W){return this.fireStore.collection("Courses",te=>te.where("id","==",W)).get()}getStudentObjectId(W){return this.fireStore.collection("Students",te=>te.where("id","==",W)).get()}getCourseTeacher(W){return this.fireStore.collection("Teachers",te=>te.where("email","==",W)).get()}getCoursesVideo(W){return this.fireStore.collection("Videos",te=>te.where("id","in",W)).snapshotChanges()}registerOnCourse(W,te){return this.fireStore.collection("Students").doc(W).update({courses:te})}}we.\u0275fac=function(W){return new(W||we)(l.LFG(ge.ST),l.LFG(U.zQ),l.LFG(be.Q1),l.LFG(G.F0))},we.\u0275prov=l.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"});var Ae=L(6895);function xe(Oe,W){1&Oe&&(l.TgZ(0,"p",15)(1,"a",16),l._uU(2,"Modifier le mot de passe ?"),l.qZA()())}const ue=function(Oe){return{"p-1 px-6 text-xl font-semibold border rounded-xl text-amber-400 ":!0,"bg-green-500 text-white py-1 border-none rounded cursor-pointer":Oe}};function ie(Oe,W){if(1&Oe){const te=l.EpF();l.TgZ(0,"form",17),l.NdJ("ngSubmit",function(){l.CHM(te);const Ie=l.oxw();return l.KtG(Ie.submitPassword())}),l.TgZ(1,"p",18),l._uU(2,"Modifier le mot de passe "),l.qZA(),l.TgZ(3,"div",19),l._UZ(4,"input",20),l.TgZ(5,"label",11),l._uU(6,"Mot de passe"),l.qZA()(),l.TgZ(7,"div",19),l._UZ(8,"input",21),l.TgZ(9,"label",11),l._uU(10,"Confirmer le mot de passe"),l.qZA()(),l.TgZ(11,"div",2),l._UZ(12,"input",22),l.qZA()()}if(2&Oe){const te=l.oxw();l.Q6J("formGroup",te.formPassword),l.xp6(12),l.Q6J("disabled",te.formPassword.invalid&&!te.modifier)("ngClass",l.VKq(3,ue,!te.formPassword.invalid))}}class pe{constructor(W,te,ae){this.formBuilder=W,this.router=te,this.studentService=ae,this.form=new g.cw({name:new g.NI,email:new g.NI}),this.formPassword=new g.cw({password:new g.NI,confirmPassword:new g.NI}),this.isAuth=!1,this.modifier=!1}ngOnInit(){this.code=this.router.snapshot.queryParams.oobCode,console.log(this.code),this.code&&(this.modifier=!0),console.log(this.modifier),this.studentService.getStudent().subscribe(W=>{W.forEach(te=>{this.student=te.payload.doc.data()}),this.initForm(this.student)}),this.initPasswordForm()}initForm(W){this.form=this.formBuilder.group({name:[{value:W.name,disabled:!0},g.kI.required],email:[{value:W.email,disabled:!0}]})}initPasswordForm(){this.formPassword=this.formBuilder.group({password:[{value:"",disabled:!this.modifier},[g.kI.required,g.kI.pattern(/(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/)]],confirmPassword:[{value:"",disabled:!this.modifier},g.kI.required]})}submitPassword(){let te=this.formPassword.get("password")?.value,ae=this.formPassword.get("password")?.value;te===ae&&console.log(this.student)}}pe.\u0275fac=function(W){return new(W||pe)(l.Y36(g.qu),l.Y36(G.gz),l.Y36(we))},pe.\u0275cmp=l.Xpm({type:pe,selectors:[["app-profile"]],decls:22,vars:4,consts:[[1,"relative","top-0","md:pt-30","pt-20","flex","flex-col","md:w-11/12","mx-auto","items-center","justify-center"],[1,"mb-10","font-extrabold","text-center","flex","justify-center","items-center","md:mx-0","py-4","rounded-[20px]","text-white","text-4xl","bg-amber-400","w-full"],[1,""],[1,"flex","flex-wrap","items-center","justify-center","mb-4"],[1,"w-80","h-80","rounded-full","bg-amber-200"],["src","","alt","logo"],[1,"md:w-auto","w-full","p-4","space-y-8",3,"formGroup"],[1,"md:text-3xl","text-xl","md:text-center","mt-2","text-amber-400","font-bold"],[1,"text-red-400"],[1,"relative","z-0","md:mx-2","md:w-full"],["formControlName","name","type","text","id","floating_standard","placeholder"," ",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","floating_standard",1,"absolute","text-sm","text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:left-0","peer-focus:text-blue-600","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["formControlName","email","type","email","id","floating_standard","placeholder"," ",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["class","w-full text-end p-4 pt-0 text-blue-400",4,"ngIf"],["class","w-full space-y-5 p-4",3,"formGroup","ngSubmit",4,"ngIf"],[1,"w-full","text-end","p-4","pt-0","text-blue-400"],["href",""],[1,"w-full","space-y-5","p-4",3,"formGroup","ngSubmit"],[1,"text-xl","mt-2","text-amber-400","font-bold"],[1,"relative","z-0","w-full"],["formControlName","password","type","password","id","floating_standard","placeholder"," ",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["formControlName","confirmPassword","type","password","id","floating_standard","placeholder"," ",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["type","submit","value","Modifier",3,"disabled","ngClass"]],template:function(W,te){1&W&&(l.TgZ(0,"div",0)(1,"div",1),l._uU(2," Profil "),l.qZA(),l.TgZ(3,"div",2)(4,"div",3)(5,"div",4),l._UZ(6,"img",5),l.qZA(),l.TgZ(7,"form",6)(8,"p",7),l._uU(9,"Informations personnelles"),l.qZA(),l.TgZ(10,"p",8),l._uU(11),l.qZA(),l.TgZ(12,"div",9),l._UZ(13,"input",10),l.TgZ(14,"label",11),l._uU(15,"Pseudo"),l.qZA()(),l.TgZ(16,"div",9),l._UZ(17,"input",12),l.TgZ(18,"label",11),l._uU(19,"Email"),l.qZA()()()(),l.YNc(20,xe,3,0,"p",13),l.YNc(21,ie,13,5,"form",14),l.qZA()()),2&W&&(l.xp6(7),l.Q6J("formGroup",te.form),l.xp6(4),l.Oqu(te.errorMessage),l.xp6(9),l.Q6J("ngIf",!te.modifier),l.xp6(1),l.Q6J("ngIf",te.modifier))},dependencies:[Ae.mk,Ae.O5,g._Y,g.Fj,g.JJ,g.JL,g.sg,g.u]});class nt{constructor(W,te){this.studentService=W,this.router=te,this.currentLink="CI",this.courses=[],this.message=""}ngOnInit(){this.studentService.getStudent().subscribe(W=>{W.forEach(te=>{this.student=te.payload.doc.data()}),this.studentService.getStudentCourses(this.student.courses).subscribe(te=>{this.courses=[],te.forEach(lt=>{this.courses.push(lt.payload.doc.data())});let ae=this.courses.reduce((lt,pt)=>(lt[pt.name]=lt[pt.name]||[],lt[pt.name].push(pt),lt),Object.create(null)),Ie=[];Object.keys(ae).forEach(lt=>{Ie.push(ae[lt].map(pt=>({name:lt,data:pt})))}),this.courses=Ie})})}getEvent(W){}}function qe(Oe,W){if(1&Oe&&(l.TgZ(0,"th",6),l._uU(1),l.qZA()),2&Oe){const te=W.$implicit;l.xp6(1),l.Oqu(te)}}function Qe(Oe,W){if(1&Oe&&(l.TgZ(0,"p",11)(1,"a",12),l._uU(2),l.qZA()()),2&Oe){const te=W.$implicit;l.xp6(1),l.Q6J("href",te.link,l.LSH),l.xp6(1),l.Oqu(te.name)}}function ct(Oe,W){if(1&Oe&&(l.TgZ(0,"td",8),l.YNc(1,Qe,3,2,"p",10),l.qZA()),2&Oe){const te=W.$implicit,ae=l.oxw().$implicit,Ie=l.oxw();l.xp6(1),l.Q6J("ngForOf",Ie.getCourses(te,ae))}}function Ne(Oe,W){if(1&Oe&&(l.TgZ(0,"tr",7)(1,"td",8),l._uU(2),l.qZA(),l.YNc(3,ct,2,1,"td",9),l.qZA()),2&Oe){const te=W.$implicit,ae=l.oxw();l.xp6(2),l.Oqu(te),l.xp6(1),l.Q6J("ngForOf",ae.days)}}function Me(Oe,W){if(1&Oe&&(l.TgZ(0,"p",11)(1,"a",12),l._uU(2),l.qZA()()),2&Oe){const te=W.$implicit;l.xp6(1),l.Q6J("href",te.link,l.LSH),l.xp6(1),l.Oqu(te.name)}}function Fe(Oe,W){if(1&Oe&&(l.TgZ(0,"div",16)(1,"p",17),l._uU(2),l.qZA(),l.YNc(3,Me,3,2,"p",10),l.qZA()),2&Oe){const te=W.$implicit,ae=l.oxw().$implicit,Ie=l.oxw();l.xp6(2),l.Oqu(te),l.xp6(1),l.Q6J("ngForOf",Ie.getCourses(ae,te))}}function et(Oe,W){if(1&Oe&&(l.TgZ(0,"div",7)(1,"p",13),l._uU(2),l.qZA(),l.TgZ(3,"div",14),l.YNc(4,Fe,4,2,"div",15),l.qZA()()),2&Oe){const te=W.$implicit,ae=l.oxw();l.xp6(2),l.hij("-",te,""),l.xp6(2),l.Q6J("ngForOf",ae.hours)}}nt.\u0275fac=function(W){return new(W||nt)(l.Y36(we),l.Y36(G.gz))},nt.\u0275cmp=l.Xpm({type:nt,selectors:[["app-video"]],decls:5,vars:0,consts:[[1,"pt-40","w-11/12","mx-auto"],[1,"mb-10","font-extrabold","text-center","flex","justify-center","items-center","h-[10vh]","rounded-[20px]","text-white","text-4xl","bg-amber-400","w-full"],[1,"text-center","text-4xl"]],template:function(W,te){1&W&&(l.TgZ(0,"div",0)(1,"div",1),l._uU(2," Rediffusion "),l.qZA(),l.TgZ(3,"p",2),l._uU(4,"\xc0 VENIR"),l.qZA()())}});class se{constructor(W){this.studentService=W,this.days=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],this.hours=["8h-10h","10h-12h","15h-17h","17h-19h","20h-22h"],this.student={},this.courses=[]}ngOnInit(){this.studentService.getStudent().subscribe(W=>{W.forEach(te=>{this.student=te.payload.doc.data()}),this.studentService.getStudentCourses(this.student.level).subscribe(te=>{this.courses=[],te.forEach(ae=>{this.courses.push(ae.payload.doc.data())})})})}getCourses(W,te){return this.courses.filter(ae=>ae.hours==te&&W==ae.day)}}function $e(Oe,W){if(1&Oe&&(l.O4$(),l.kcU(),l.TgZ(0,"div",23)(1,"div",24)(2,"div",25)(3,"div",26),l._UZ(4,"img",27),l.qZA(),l.TgZ(5,"div",28)(6,"p",29),l._uU(7),l.qZA(),l.TgZ(8,"p"),l._uU(9),l.TgZ(10,"span"),l._uU(11),l.qZA()()(),l.TgZ(12,"div",30)(13,"p")(14,"span",31),l._uU(15,"Pr\xe9senter par :"),l.qZA(),l._uU(16),l.qZA()(),l.TgZ(17,"div",32)(18,"p",33)(19,"span",31),l._uU(20,"lien :"),l.qZA(),l.TgZ(21,"a",34),l._uU(22,"meeting"),l.qZA()(),l.TgZ(23,"button",35),l._uU(24,"voir vid\xe9os"),l.qZA()()(),l.TgZ(25,"div",36)(26,"p",37),l._uU(27,"Description :"),l.qZA(),l.TgZ(28,"p"),l._uU(29),l.qZA()()()()),2&Oe){const te=W.$implicit;l.xp6(4),l.Q6J("src",te.picture,l.LSH),l.xp6(3),l.hij("",te.name," "),l.xp6(2),l.hij("Tous les ",te.day," \xe0 "),l.xp6(2),l.hij("",te.hours," "),l.xp6(5),l.hij(" ",te.teacherName," "),l.xp6(5),l.Q6J("href",te.link,l.LSH),l.xp6(8),l.hij("",te.description," ")}}se.\u0275fac=function(W){return new(W||se)(l.Y36(we))},se.\u0275cmp=l.Xpm({type:se,selectors:[["app-calendar"]],decls:11,vars:3,consts:[[1,"relative","top-0","pt-20","flex","flex-col","w-11/12","mx-auto","items-center","justify-center"],[1,"mb-10","font-extrabold","text-center","flex","justify-center","items-center","py-4","rounded-[20px]","text-white","md:text-3xl","text-xl","bg-amber-400","w-full"],[1,"md:table","hidden"],["class","border py-4 text-amber-500 text-xl w-44",4,"ngFor","ngForOf"],["class","",4,"ngFor","ngForOf"],[1,"md:hidden","w-full"],[1,"border","py-4","text-amber-500","text-xl","w-44"],[1,""],[1,"p-4","border"],["class","p-4 border",4,"ngFor","ngForOf"],["class","text-sm bg-gray-50 my-0.5 py-1",4,"ngFor","ngForOf"],[1,"text-sm","bg-gray-50","my-0.5","py-1"],[1,"text-blue-400","mr-1",3,"href"],[1,"ml-4","text-amber-500","text-xl"],[1,"flex","overflow-auto","scroll-m-1","pb-2"],["class","text-sm p-4 drop-shadow shadow bg-white m-2 rounded-[10px]",4,"ngFor","ngForOf"],[1,"text-sm","p-4","drop-shadow","shadow","bg-white","m-2","rounded-[10px]"],[1,"text-gray-500"]],template:function(W,te){1&W&&(l.TgZ(0,"div",0)(1,"div",1),l._uU(2," Emploi du temps "),l.qZA(),l.TgZ(3,"table",2)(4,"thead"),l._UZ(5,"th"),l.YNc(6,qe,2,1,"th",3),l.qZA(),l.TgZ(7,"tbody"),l.YNc(8,Ne,4,2,"tr",4),l.qZA()(),l.TgZ(9,"div",5),l.YNc(10,et,5,2,"div",4),l.qZA()()),2&W&&(l.xp6(6),l.Q6J("ngForOf",te.days),l.xp6(2),l.Q6J("ngForOf",te.hours),l.xp6(2),l.Q6J("ngForOf",te.days))},dependencies:[Ae.sg]});class Le{constructor(W){this.studentService=W,this.student={},this.courses=[],this.fragCourses=[],this.page=1,this.numberOfElement=10}ngOnInit(){this.studentService.getStudent().subscribe(W=>{W.forEach(te=>{this.student=te.payload.doc.data()}),this.studentService.getStudentCourses(this.student.level).subscribe(te=>{this.courses=[],console.log(this.student.option),te.forEach(Ie=>{console.log(Ie),Ie.payload.doc.data().option===this.student.option&&this.courses.push(Ie.payload.doc.data())}),this.fragCourses=[];let ae=0;for(;ae<this.courses.length&&ae<this.page*this.numberOfElement;)this.fragCourses.push(this.courses[ae]),ae++})})}filter(W){}next(){if(this.courses.length>this.page*this.numberOfElement){this.fragCourses=[];let W=this.page*this.numberOfElement;for(;W<this.courses.length&&W<(this.page+1)*this.numberOfElement;)this.fragCourses.push(this.courses[W]),W++;this.page++}}previous(){if(this.page>1){this.page--,this.fragCourses=[];let W=(this.page-1)*this.numberOfElement;for(;W<this.courses.length&&W-(this.page-1)*this.numberOfElement<this.numberOfElement;)this.fragCourses.push(this.courses[W]),W++}}}Le.\u0275fac=function(W){return new(W||Le)(l.Y36(we))},Le.\u0275cmp=l.Xpm({type:Le,selectors:[["app-courses"]],decls:37,vars:1,consts:[[1,"flex","flex-col","items-center","justify-center","space-y-5","md:mb-10"],[1,"font-extrabold","text-center","flex","justify-center","items-center","px-20","rounded-[20px]","text-white","md:text-4xl","text-2xl","bg-amber-400","w-full"],["action","",1,"flex","md:space-x-4","items-center"],[1,"md:my-10","my-6"],[1,"flex","md:space-x-4","items-center"],[1,"relative","z-0"],["type","text","id","floating_standard","placeholder"," ",1,"md:w-80","block","py-2.5","px-0","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-amber-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["search",""],["for","floating_standard",1,"w-80","absolute","text-sm","text-gray-500","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:left-0","peer-focus:text-blue-600","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],[1,"p-2.5","ml-2","text-sm","font-medium","text-white","bg-amber-400","rounded-lg","border","hover:bg-amber-500","focus:ring-4","focus:outline-none","focus:ring-amber-300",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"sr-only"],[1,"md:w-11/12"],[1,"flex"],[1,"flex","justify-between","items-center","flex-1"],[1,"flex","h-10","items-center","text-amber-400",3,"click"],["fill","#FBBF24","width","2.5rem","clip-rule","evenodd","fill-rule","evenodd","stroke-linejoin","round","stroke-miterlimit","2","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg"],["d","m13.789 7.155c.141-.108.3-.157.456-.157.389 0 .755.306.755.749v8.501c0 .445-.367.75-.755.75-.157 0-.316-.05-.457-.159-1.554-1.203-4.199-3.252-5.498-4.258-.184-.142-.29-.36-.29-.592 0-.23.107-.449.291-.591 1.299-1.002 3.945-3.044 5.498-4.243z"],[1,"flex","items-center","h-10","text-amber-400",3,"click"],["d","m10.211 7.155c-.141-.108-.3-.157-.456-.157-.389 0-.755.306-.755.749v8.501c0 .445.367.75.755.75.157 0 .316-.05.457-.159 1.554-1.203 4.199-3.252 5.498-4.258.184-.142.29-.36.29-.592 0-.23-.107-.449-.291-.591-1.299-1.002-3.945-3.044-5.498-4.243z"],["class","md:mx-0 mx-4 bg-white rounded-[20px] drop-shadow min-w-[340px] mb-5",4,"ngFor","ngForOf"],[1,"flex","justify-between","items-center"],[1,"md:mx-0","mx-4","bg-white","rounded-[20px]","drop-shadow","min-w-[340px]","mb-5"],[1,"w-full","p-4"],[1,"flex","flex-wrap","items-center","space-x-4"],[1,"pr-2","md:border-r"],["alt","",1,"min-h-24","max-h-24",3,"src"],["cclass","pr-2 md:border-r"],[1,"text-amber-500","text-3xl"],[1,"pr-2","md:border-r","space-y-2"],[1,"underline"],[1,"flex","items-center","space-x-4"],[1,""],[1,"ml-4","text-blue-400",3,"href"],[1,"text-white","font-bold","rounded","py-1","px-6","bg-blue-400"],[1,"mt-4"],[1,"underline","text-xl"]],template:function(W,te){if(1&W){const ae=l.EpF();l.TgZ(0,"section",0)(1,"div",1),l._uU(2," Mes Cours "),l.qZA(),l.TgZ(3,"form",2)(4,"div",3)(5,"div",4)(6,"div",5),l._UZ(7,"input",6,7),l.TgZ(9,"label",8),l._uU(10,"Rechercher..."),l.qZA()(),l.TgZ(11,"button",9),l.NdJ("click",function(){l.CHM(ae);const lt=l.MAs(8);return l.KtG(te.filter(lt.value))}),l.O4$(),l.TgZ(12,"svg",10),l._UZ(13,"path",11),l.qZA(),l.kcU(),l.TgZ(14,"span",12),l._uU(15,"Search"),l.qZA()()()()(),l.TgZ(16,"section",13)(17,"div",14)(18,"div",15)(19,"button",16),l.NdJ("click",function(){return te.previous()}),l.O4$(),l.TgZ(20,"svg",17),l._UZ(21,"path",18),l.qZA(),l._uU(22," pr\xe9cedent "),l.qZA(),l.kcU(),l.TgZ(23,"button",19),l.NdJ("click",function(){return te.next()}),l._uU(24," suivant "),l.O4$(),l.TgZ(25,"svg",17),l._UZ(26,"path",20),l.qZA()()()(),l.YNc(27,$e,30,7,"div",21),l.kcU(),l.TgZ(28,"div",22)(29,"button",16),l.NdJ("click",function(){return te.previous()}),l.O4$(),l.TgZ(30,"svg",17),l._UZ(31,"path",18),l.qZA(),l._uU(32," pr\xe9cedent "),l.qZA(),l.kcU(),l.TgZ(33,"button",19),l.NdJ("click",function(){return te.next()}),l._uU(34," suivant "),l.O4$(),l.TgZ(35,"svg",17),l._UZ(36,"path",20),l.qZA()()()()()}2&W&&(l.xp6(27),l.Q6J("ngForOf",te.fragCourses))},dependencies:[Ae.sg,g._Y,g.JL]});class ut{constructor(W,te){this.studentService=W,this.router=te,this.currentLink="CI",this.courses=[],this.message="",this.levelLink=[{name:"CI",value:"CI"},{name:"CP",value:"CP"},{name:"CE1",value:"CE1"},{name:"CE2",value:"CE2"},{name:"CM1",value:"CM1"},{name:"CM2",value:"CM2"},{name:"6e",value:"6e"},{name:"5e",value:"5e"},{name:"4e",value:"4e"},{name:"3e",value:"3e"},{name:"Second",value:"Second"},{name:"Premi\xe8re",value:"Premi\xe8re"},{name:"Terminale",value:"Terminale"}],this.coursesList=["Math\xe9matique","Physique Chimie","Science de la vie et de la terre","Philosophie","Informatique","Litt\xe9rature","Histoire","G\xe9ographie","\xc9conomie social","Allemand","Fran\xe7ais","Anglais","Espagnol","Arabe","Espagnol","Autre"]}ngOnInit(){this.studentService.getStudent().subscribe(W=>{W.forEach(te=>{this.student=te.payload.doc.data()})}),this.router.params.subscribe(W=>{})}register(W){let ae,te=this.student.courses;te.push(W),console.log(te),this.studentService.getStudentObjectId(this.student.id).forEach(Ie=>{Ie.forEach(lt=>{ae=lt.id})}).then(Ie=>{this.studentService.registerOnCourse(ae,te).then(lt=>{this.message=""},lt=>{this.message=""})},Ie=>{this.message="",console.log("errrr")})}getEvent(W){this.register(W)}}ut.\u0275fac=function(W){return new(W||ut)(l.Y36(we),l.Y36(G.gz))},ut.\u0275cmp=l.Xpm({type:ut,selectors:[["app-home"]],decls:50,vars:0,consts:[[1,"md:py-32","pt-32","pb-2","min-h-screen","px-4"],[1,"relative","bg-gray-100","w-11/12","mx-auto","flex","items-center","shadow","h-[45vh]","rounded-[40px]","overflow-hidden"],[1,"block","left-0","w-1/12","p-8","absolute","z-10"],["version","1.1","id","Capa_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","viewBox","0 0 451.847 451.847",0,"xml","space","preserve",2,"enable-background","new 0 0 451.847 451.847"],["d","M97.141,225.92c0-8.095,3.091-16.192,9.259-22.366L300.689,9.27c12.359-12.359,32.397-12.359,44.751,0\n                    c12.354,12.354,12.354,32.388,0,44.748L173.525,225.92l171.903,171.909c12.354,12.354,12.354,32.391,0,44.744\n                    c-12.354,12.365-32.386,12.365-44.745,0l-194.29-194.281C100.226,242.115,97.141,234.018,97.141,225.92z"],[1,"relative","flex-1","h-full","flex","items-center","justify-center"],[1,""],[1,"space-x-10","flex","items-center","bottom-10","absolute"],[1,"w-4","h-4","bg-amber-400","rounded-full"],[1,"absolute","right-0","rotate-180","block","w-1/12","p-8"],[1,"bg-white","rounded-[20px]","pt-8"]],template:function(W,te){1&W&&(l.TgZ(0,"div",0)(1,"section",1)(2,"button",2),l.O4$(),l.TgZ(3,"svg",3)(4,"g"),l._UZ(5,"path",4),l.qZA(),l._UZ(6,"g")(7,"g")(8,"g")(9,"g")(10,"g")(11,"g")(12,"g")(13,"g")(14,"g")(15,"g")(16,"g")(17,"g")(18,"g")(19,"g")(20,"g"),l.qZA()(),l.kcU(),l.TgZ(21,"div",5),l._UZ(22,"div",6)(23,"div")(24,"div"),l.TgZ(25,"div",7),l._UZ(26,"button",8)(27,"button",8)(28,"button",8),l.qZA()(),l.TgZ(29,"button",9),l.O4$(),l.TgZ(30,"svg",3)(31,"g"),l._UZ(32,"path",4),l.qZA(),l._UZ(33,"g")(34,"g")(35,"g")(36,"g")(37,"g")(38,"g")(39,"g")(40,"g")(41,"g")(42,"g")(43,"g")(44,"g")(45,"g")(46,"g")(47,"g"),l.qZA()()(),l.kcU(),l.TgZ(48,"div",10),l._UZ(49,"app-courses"),l.qZA()())},dependencies:[Le]});const Ye=[{path:"accueil",component:ut},{path:"accueil/:id",component:ut},{path:"activite",component:se},{path:"cours",component:Le},{path:"profil",component:pe},{path:"rediffusion",component:nt}];class de{}de.\u0275fac=function(W){return new(W||de)},de.\u0275mod=l.oAB({type:de}),de.\u0275inj=l.cJS({imports:[G.Bz.forChild(Ye),G.Bz]})},521:(Ut,ze,L)=>{var g=L(1481),l=L(433),G=L(9051),ge=L(6895),U=L(4650);class be{constructor(We){this.renderer=We,this.renderer.listen("window","resize",Ue=>{this.screenSize=window.innerWidth})}getLocalData(We){return localStorage.getItem(We)}setLocalData(We,Ue){localStorage.setItem(We,Ue)}clearLocalData(){localStorage.clear()}}be.\u0275fac=function(We){return new(We||be)(U.LFG(U.Qsj))},be.\u0275prov=U.Yz7({token:be,factory:be.\u0275fac,providedIn:"root"});class we{}we.\u0275fac=function(We){return new(We||we)},we.\u0275mod=U.oAB({type:we}),we.\u0275inj=U.cJS({providers:[be],imports:[ge.ez,G.Bz]});class Ae{}Ae.\u0275fac=function(We){return new(We||Ae)},Ae.\u0275mod=U.oAB({type:Ae}),Ae.\u0275inj=U.cJS({imports:[ge.ez,we,G.Bz,l.UX]});var xe=L(5024),ue=L(4319);class ie{}ie.\u0275fac=function(We){return new(We||ie)},ie.\u0275mod=U.oAB({type:ie}),ie.\u0275inj=U.cJS({providers:[xe.l],imports:[ge.ez,l.UX,ue.AdminRoutingModule,we]});var pe=L(9634);class nt{}nt.\u0275fac=function(We){return new(We||nt)},nt.\u0275mod=U.oAB({type:nt}),nt.\u0275inj=U.cJS({imports:[pe.StudentRoutingModule,ge.ez,l.UX,we]});var qe=L(7501),Qe=L(8796),ct=L(1205);class Ne{}Ne.\u0275fac=function(We){return new(We||Ne)},Ne.\u0275mod=U.oAB({type:Ne}),Ne.\u0275inj=U.cJS({providers:[qe.e],imports:[ge.ez,Qe.AuthRoutingModule,l.u5,l.UX,ct.ww]});class Me{canActivate(We,Ue){return"admin"===localStorage.getItem("user")}}Me.\u0275fac=function(We){return new(We||Me)},Me.\u0275prov=U.Yz7({token:Me,factory:Me.\u0275fac,providedIn:"root"});class Fe{canActivate(We,Ue){return!!localStorage.getItem("login")}}Fe.\u0275fac=function(We){return new(We||Fe)},Fe.\u0275prov=U.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"});const et=[{path:"",loadChildren:()=>Promise.resolve().then(L.bind(L,8796)).then(Ge=>Ge.AuthRoutingModule)},{path:"etud",canActivate:[Fe],loadChildren:()=>Promise.resolve().then(L.bind(L,9634)).then(Ge=>Ge.StudentRoutingModule)},{path:"en",canActivate:[Fe],loadChildren:()=>L.e(672).then(L.bind(L,3672)).then(Ge=>Ge.TeacherRoutingModule)},{path:"admin",canActivate:[Me],loadChildren:()=>Promise.resolve().then(L.bind(L,4319)).then(Ge=>Ge.AdminRoutingModule)}];class se{}se.\u0275fac=function(We){return new(We||se)},se.\u0275mod=U.oAB({type:se}),se.\u0275inj=U.cJS({imports:[G.Bz.forRoot(et),G.Bz]});const $e=["toggleButton"],Le=["menu"],ut=["tF"],Ye=["tF1"];function de(Ge,We){1&Ge&&U._UZ(0,"img",15,16)}function Oe(Ge,We){1&Ge&&U._UZ(0,"img",17,16)}const W=function(Ge,We){return{"right-5 top-16 z-[5000] w-44 bg-white rounded divide-y divide-gray-100 shadow":!0,fixed:Ge,hidden:We}};function te(Ge,We){if(1&Ge){const Ue=U.EpF();U.TgZ(0,"div",3)(1,"button",4,5),U.NdJ("click",function(){U.CHM(Ue);const Er=U.oxw(2);return U.KtG(Er.onDrop(!Er.isOpen))}),U.YNc(3,de,2,0,"img",6),U.YNc(4,Oe,2,0,"img",7),U.O4$(),U.TgZ(5,"svg",8,9),U._UZ(7,"path",10),U.qZA()(),U.kcU(),U.TgZ(8,"div",11,12)(10,"ul",13)(11,"li")(12,"a",14),U.NdJ("click",function(){U.CHM(Ue);const Er=U.oxw(2);return U.KtG(Er.onLogout())}),U._uU(13,"Se d\xe9connecter"),U.qZA()()()()()}if(2&Ge){const Ue=U.oxw(2);U.xp6(3),U.Q6J("ngIf","admin"===Ue.getUser()),U.xp6(1),U.Q6J("ngIf","admin"!==Ue.getUser()),U.xp6(4),U.Q6J("ngClass",U.WLB(3,W,Ue.isOpen,!Ue.isOpen))}}const ae=function(Ge,We,Ue){return{"z-[100] fixed left-0 top-0 right-0 shadow flex items-center justify-between px-8 bg-white":!0,"p-1":Ge,"p-6":We,"left-[280px]":Ue}},Ie=function(Ge){return{"text-black text-xl":!0,"ml-8":Ge}};function lt(Ge,We){if(1&Ge&&(U.TgZ(0,"div",1)(1,"div",1),U._uU(2,"\xc9toiles d'afrique"),U.qZA(),U.YNc(3,te,14,6,"div",2),U.qZA()),2&Ge){const Ue=U.oxw();U.Q6J("ngClass",U.kEZ(3,ae,Ue.isAuth(),!Ue.isAuth(),Ue.screenSize>=950&&Ue.sideVisible)),U.xp6(1),U.Q6J("ngClass",U.VKq(7,Ie,Ue.screenSize<950||!Ue.sideVisible)),U.xp6(2),U.Q6J("ngIf",Ue.isAuth())}}class pt{constructor(We){this.renderer=We,this.aLinks=[{name:"Etudiant",href:"admin/etudiants"},{name:"Enseignant",href:"admin/enseignants"}],this.tLinks=[{name:"Accueil",href:"en/cours"},{name:"Emploi du temps",href:"en/activite"},{name:"Mes Videos",href:"en/videos"}],this.sLinks=[{name:"Accueil",href:"etud/accueil"},{name:"Mes cours",href:"etud/cours"},{name:"Emploi du temps",href:"etud/activite"},{name:"Rediffusion",href:"etud/rediffusion"}],this.isOpen=!1,this.renderer.listen("window","click",Ue=>{Ue.target!==this.toggleButton.nativeElement&&Ue.target!==this.list.nativeElement&&Ue.target!==this.tF.nativeElement&&Ue.target!==this.tF1.nativeElement&&(this.isOpen=!1)}),this.renderer.listen("window","resize",Ue=>{this.screenSize=window.innerWidth})}ngOnInit(){this.screenSize=window.innerWidth}isAuth(){return!!localStorage.getItem("login")}getUser(){return localStorage.getItem("user")}onLogout(){localStorage.clear()}onClose(){this.isOpen=!1}onDrop(We){this.isOpen=We}}pt.\u0275fac=function(We){return new(We||pt)(U.Y36(U.Qsj))},pt.\u0275cmp=U.Xpm({type:pt,selectors:[["app-header"]],viewQuery:function(We,Ue){if(1&We&&(U.Gf($e,5),U.Gf(Le,5),U.Gf(ut,5),U.Gf(Ye,5)),2&We){let Ft;U.iGM(Ft=U.CRH())&&(Ue.toggleButton=Ft.first),U.iGM(Ft=U.CRH())&&(Ue.list=Ft.first),U.iGM(Ft=U.CRH())&&(Ue.tF=Ft.first),U.iGM(Ft=U.CRH())&&(Ue.tF1=Ft.first)}},inputs:{sideVisible:"sideVisible"},decls:1,vars:1,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"],["class","relative flex",4,"ngIf"],[1,"relative","flex"],["id","dropdownDefault","type","button",1,"font-medium","rounded-full","text-sm","px-4","py-2","text-center","flex","items-center","justify-center",3,"click"],["toggleButton",""],["src","assets/images/adminLogo.png","alt"," ","class","h-8 text-centerrounded-full",4,"ngIf"],["src","assets/images/user1.png","alt"," ","class","h-8 text-centerrounded-full",4,"ngIf"],["aria-hidden","true","fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"ml-2","w-4","h-4"],["tF1",""],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["id","dropdown",3,"ngClass"],["menu",""],["aria-labelledby","dropdownDefault",1,"py-1","text-sm","text-gray-700"],["href","/",1,"block","py-2","px-4","hover:bg-gray-100",3,"click"],["src","assets/images/adminLogo.png","alt"," ",1,"h-8","text-centerrounded-full"],["tF",""],["src","assets/images/user1.png","alt"," ",1,"h-8","text-centerrounded-full"]],template:function(We,Ue){1&We&&U.YNc(0,lt,4,9,"div",0),2&We&&U.Q6J("ngIf",Ue.isAuth())},dependencies:[ge.mk,ge.O5]});const Ct=["sideBar"],Ot=["sideMenu"];function Qt(Ge,We){if(1&Ge&&(U.TgZ(0,"li",14)(1,"a",15),U._uU(2),U.qZA()()),2&Ge){const Ue=We.$implicit;U.xp6(1),U.Q6J("routerLink",Ue.href),U.xp6(1),U.Oqu(Ue.name)}}function Nt(Ge,We){if(1&Ge&&(U.TgZ(0,"ul",12),U.YNc(1,Qt,3,2,"li",13),U.qZA()),2&Ge){const Ue=U.oxw(3);U.xp6(1),U.Q6J("ngForOf",Ue.tLinks)}}function Pt(Ge,We){if(1&Ge&&(U.TgZ(0,"li",14)(1,"a",16),U._uU(2),U.qZA()()),2&Ge){const Ue=We.$implicit;U.xp6(1),U.Q6J("routerLink",Ue.href),U.xp6(1),U.Oqu(Ue.name)}}function Et(Ge,We){if(1&Ge&&(U.TgZ(0,"ul",12),U.YNc(1,Pt,3,2,"li",13),U.qZA()),2&Ge){const Ue=U.oxw(3);U.xp6(1),U.Q6J("ngForOf",Ue.aLinks)}}function Wt(Ge,We){if(1&Ge&&(U.TgZ(0,"li",14)(1,"a",16),U._uU(2),U.qZA()()),2&Ge){const Ue=We.$implicit;U.xp6(1),U.Q6J("routerLink",Ue.href),U.xp6(1),U.Oqu(Ue.name)}}function qt(Ge,We){if(1&Ge&&(U.TgZ(0,"ul",12),U.YNc(1,Wt,3,2,"li",13),U.qZA()),2&Ge){const Ue=U.oxw(3);U.xp6(1),U.Q6J("ngForOf",Ue.sLinks)}}function yn(Ge,We){if(1&Ge&&(U.TgZ(0,"div",7)(1,"div",8),U._UZ(2,"img",9),U.TgZ(3,"a",10),U._uU(4,"\xc9toile d'afrique"),U.qZA()(),U.YNc(5,Nt,2,1,"ul",11),U.YNc(6,Et,2,1,"ul",11),U.YNc(7,qt,2,1,"ul",11),U.qZA()),2&Ge){const Ue=U.oxw(2);U.xp6(5),U.Q6J("ngIf",Ue.isAuth()&&"teacher"===Ue.getUser()),U.xp6(1),U.Q6J("ngIf",Ue.isAuth()&&"admin"===Ue.getUser()),U.xp6(1),U.Q6J("ngIf",Ue.isAuth()&&"student"===Ue.getUser())}}function $t(Ge,We){1&Ge&&(U.TgZ(0,"div",17),U._UZ(1,"img",18),U.TgZ(2,"div",19),U._uU(3," \xa9 2022 \xc9toile d'afrique, Inc. "),U.qZA()())}const On=function(Ge,We){return{"z-[1000] h-screen top-0   pl-4 fixed flex flex-col justify-between":!0,"w-[280px] bg-amber-400 pt-8":Ge,"pt-2":We}};function Nn(Ge,We){if(1&Ge){const Ue=U.EpF();U.TgZ(0,"div",2)(1,"div",3),U.NdJ("click",function(){U.CHM(Ue);const Er=U.oxw();return U.KtG(Er.setSide())}),U._UZ(2,"img",4),U.qZA(),U.YNc(3,yn,8,3,"div",5),U.YNc(4,$t,4,0,"div",6),U.qZA()}if(2&Ge){const Ue=U.oxw();U.Q6J("ngClass",U.WLB(3,On,Ue.sideVisible,!Ue.sideVisible)),U.xp6(3),U.Q6J("ngIf",Ue.sideVisible),U.xp6(1),U.Q6J("ngIf",Ue.sideVisible)}}function wr(Ge,We){if(1&Ge&&(U.TgZ(0,"li",14)(1,"a",27),U._uU(2),U.qZA()()),2&Ge){const Ue=We.$implicit;U.xp6(1),U.Q6J("routerLink",Ue.href),U.xp6(1),U.Oqu(Ue.name)}}function kn(Ge,We){if(1&Ge&&(U.TgZ(0,"ul",26),U.YNc(1,wr,3,2,"li",13),U.qZA()),2&Ge){const Ue=U.oxw(2);U.xp6(1),U.Q6J("ngForOf",Ue.tLinks)}}function _r(Ge,We){if(1&Ge&&(U.TgZ(0,"li",14)(1,"a",28),U._uU(2),U.qZA()()),2&Ge){const Ue=We.$implicit;U.xp6(1),U.Q6J("routerLink",Ue.href),U.xp6(1),U.Oqu(Ue.name)}}function kr(Ge,We){if(1&Ge&&(U.TgZ(0,"ul",26),U.YNc(1,_r,3,2,"li",13),U.qZA()),2&Ge){const Ue=U.oxw(2);U.xp6(1),U.Q6J("ngForOf",Ue.aLinks)}}function nn(Ge,We){if(1&Ge&&(U.TgZ(0,"li",14)(1,"a",28),U._uU(2),U.qZA()()),2&Ge){const Ue=We.$implicit;U.xp6(1),U.Q6J("routerLink",Ue.href),U.xp6(1),U.Oqu(Ue.name)}}function zn(Ge,We){if(1&Ge&&(U.TgZ(0,"ul",26),U.YNc(1,nn,3,2,"li",13),U.qZA()),2&Ge){const Ue=U.oxw(2);U.xp6(1),U.Q6J("ngForOf",Ue.sLinks)}}const $n=function(Ge,We){return{"top-16 z-[5000] w-screen bg-white rounded divide-y divide-gray-100 shadow":!0,fixed:Ge,hidden:We}};function Vn(Ge,We){if(1&Ge){const Ue=U.EpF();U.TgZ(0,"div")(1,"button",20),U.NdJ("click",function(){U.CHM(Ue);const Er=U.oxw();return U.KtG(Er.onOpen(!Er.isOpen))}),U._UZ(2,"img",21,22),U.qZA(),U.TgZ(4,"div",23,24),U.YNc(6,kn,2,1,"ul",25),U.YNc(7,kr,2,1,"ul",25),U.YNc(8,zn,2,1,"ul",25),U.qZA()()}if(2&Ge){const Ue=U.oxw();U.xp6(4),U.Q6J("ngClass",U.WLB(4,$n,Ue.isOpen,!Ue.isOpen)),U.xp6(2),U.Q6J("ngIf",Ue.isAuth()&&"teacher"===Ue.getUser()),U.xp6(1),U.Q6J("ngIf",Ue.isAuth()&&"admin"===Ue.getUser()),U.xp6(1),U.Q6J("ngIf",Ue.isAuth()&&"student"===Ue.getUser())}}class Kt{constructor(We){this.renderer=We,this.aLinks=[{name:"Etudiant",href:"admin/etudiants"},{name:"Enseignant",href:"admin/enseignants"},{name:"Cours",href:"admin/cours"},{name:"Vid\xe9os",href:"admin/videos"}],this.tLinks=[{name:"Accueil",href:"en/accueil"},{name:"Emploi du temps",href:"en/activite"},{name:"Mes Videos",href:"en/videos"},{name:"Profil",href:"en/profil"}],this.sLinks=[{name:"Accueil",href:"etud/accueil"},{name:"Emploi du temps",href:"etud/activite"},{name:"Rediffusion",href:"etud/rediffusion"},{name:"Profil",href:"etud/profil"}],this.visible=new U.vpe,this.sideVisible=!1,this.isOpen=!1,this.renderer.listen("window","resize",Ue=>{this.screenSize=window.innerWidth}),this.renderer.listen("window","click",Ue=>{Ue.target!==this.toggleButton.nativeElement&&Ue.target!==this.list.nativeElement&&(this.isOpen=!1,console.log(Ue.target))})}ngOnInit(){this.screenSize=window.innerWidth,this.visible.emit(this.sideVisible)}setSide(){this.sideVisible=!this.sideVisible,this.visible.emit(this.sideVisible)}onOpen(We){console.log(We),this.isOpen=We}isAuth(){return!!localStorage.getItem("login")}getUser(){return localStorage.getItem("user")}}function He(Ge,We){if(1&Ge){const Ue=U.EpF();U.TgZ(0,"app-sidebar",5),U.NdJ("visible",function(Er){U.CHM(Ue);const qn=U.oxw();return U.KtG(qn.getVisible(Er))}),U.qZA()}}Kt.\u0275fac=function(We){return new(We||Kt)(U.Y36(U.Qsj))},Kt.\u0275cmp=U.Xpm({type:Kt,selectors:[["app-sidebar"]],viewQuery:function(We,Ue){if(1&We&&(U.Gf(Ct,5),U.Gf(Ot,5)),2&We){let Ft;U.iGM(Ft=U.CRH())&&(Ue.toggleButton=Ft.first),U.iGM(Ft=U.CRH())&&(Ue.list=Ft.first)}},outputs:{visible:"visible"},decls:2,vars:2,consts:[[3,"ngClass",4,"ngIf"],[4,"ngIf"],[3,"ngClass"],[1,"mb-8",3,"click"],["src","assets/images/menu.png",1,"w-10","cursor-pointer"],["class","flex-1",4,"ngIf"],["class","mb-10",4,"ngIf"],[1,"flex-1"],[1,"flex","items-center","justify-start","space-x-4","pb-2","border-b","mr-4","border-white"],["src","","alt","logo"],["href","",1,"text-2xl","text-white","font-extrabold"],["class","mt-5",4,"ngIf"],[1,"mt-5"],["class","",4,"ngFor","ngForOf"],[1,""],["routerLinkActive","mr-0 rounded-r-none font-extrabold  text-amber-500 bg-opacity-100",1,"block","px-2","py-3","text-gray-900","bg-white","bg-opacity-20","mb-2","rounded-xl","mx-5","text-center",3,"routerLink"],["routerLinkActive","mr-0 rounded-r-none font-extrabold text-amber-500 bg-opacity-100",1,"block","px-2","py-3","text-gray-900","bg-white","bg-opacity-20","mb-2","rounded-xl","mx-5","text-center",3,"routerLink"],[1,"mb-10"],["src","","alt","logo",1,"bg-white","w-48","h-48","mx-auto"],[1,"mt-10","text-sm"],["id","dropdownDefault",1,"bg-red","fixed","top-4","left-4","z-[5000]",3,"click"],["src","assets/images/menu.png",1,"w-8","cursor-pointer"],["sideBar",""],["id","dropdown",3,"ngClass"],["sideMenu",""],["class","py-1 text-sm text-gray-700 bg-white","aria-labelledby","dropdownDefault",4,"ngIf"],["aria-labelledby","dropdownDefault",1,"py-1","text-sm","text-gray-700","bg-white"],["routerLinkActive"," rounded-r-none font-extrabold  text-amber-500 bg-opacity-100",1,"block","text-gray-900","bg-white","bg-opacity-20","py-3","rounded-xl","text-xl","text-center",3,"routerLink"],["routerLinkActive"," rounded-r-none font-extrabold text-amber-500 bg-opacity-100",1,"block","text-gray-900","bg-white","bg-opacity-20","py-3","rounded-xl","text-xl","text-center",3,"routerLink"]],template:function(We,Ue){1&We&&(U.YNc(0,Nn,5,6,"div",0),U.YNc(1,Vn,9,7,"div",1)),2&We&&(U.Q6J("ngIf",Ue.screenSize>=950),U.xp6(1),U.Q6J("ngIf",Ue.screenSize<950))},dependencies:[ge.mk,ge.sg,ge.O5,G.rH,G.Od]});const q=function(Ge){return{"ml-[280px]":Ge}};class ne{constructor(We){this.renderer=We,this.title="\xc9toiles d'afrique",this.sideVisible=!1,this.renderer.listen("window","resize",Ue=>{this.screenSize=window.innerWidth})}isAuth(){return!!localStorage.getItem("login")}ngOnInit(){this.screenSize=window.innerWidth}getVisible(We){this.sideVisible=We}}ne.\u0275fac=function(We){return new(We||ne)(U.Y36(U.Qsj))},ne.\u0275cmp=U.Xpm({type:ne,selectors:[["app-root"]],decls:6,vars:5,consts:[[1,"overflow-hidden"],["role","main",1,"min-h-screen"],[3,"visible",4,"ngIf"],[3,"ngClass"],[3,"sideVisible"],[3,"visible"]],template:function(We,Ue){1&We&&(U.TgZ(0,"div",0)(1,"div",1),U.YNc(2,He,1,0,"app-sidebar",2),U.TgZ(3,"div",3),U._UZ(4,"app-header",4)(5,"router-outlet"),U.qZA()()()),2&We&&(U.xp6(2),U.Q6J("ngIf",Ue.isAuth()),U.xp6(1),U.Q6J("ngClass",U.VKq(3,q,Ue.isAuth()&&Ue.screenSize>=950&&Ue.sideVisible)),U.xp6(1),U.Q6J("sideVisible",Ue.sideVisible))},dependencies:[ge.mk,ge.O5,G.lC,pt,Kt]});var at=L(2011);class Ht{}Ht.\u0275fac=function(We){return new(We||Ht)},Ht.\u0275mod=U.oAB({type:Ht,bootstrap:[ne]}),Ht.\u0275inj=U.cJS({imports:[g.b2,se,we,nt,Ae,ie,at.hO.initializeApp({apiKey:"AIzaSyCyHU_plKTd0126vYiCXxmB3z7GMOZC0kE",authDomain:"etoile-d-afrique-app-827db.firebaseapp.com",projectId:"etoile-d-afrique-app-827db",storageBucket:"etoile-d-afrique-app-827db.appspot.com",messagingSenderId:"243030714558",appId:"1:243030714558:web:d5dbd001cfc50ceb4056ef",measurementId:"G-DPK52XZGRT"}),Ne]}),g.q6().bootstrapModule(Ht).catch(Ge=>console.error(Ge))},6217:(Ut,ze,L)=>{L.d(ze,{nm:()=>Pr});var g=L(2122);L(4650),L(259);var se=L(5861),$e=L(9681),Le=L(4859),ut=L(2090),Ye=L(1877);const de=new Map,Oe={activated:!1,tokenObservers:[]},W={initialized:!1,enabled:!1};function te(Ce){return de.get(Ce)||Object.assign({},Oe)}function Ie(){return W}class Pt{constructor(Se,je,gt,At,an){if(this.operation=Se,this.retryPolicy=je,this.getWaitDuration=gt,this.lowerBound=At,this.upperBound=an,this.pending=null,this.nextErrorWaitInterval=At,At>an)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Se){var je=this;return(0,se.Z)(function*(){je.stop();try{je.pending=new ut.BH,yield function Et(Ce){return new Promise(Se=>{setTimeout(Se,Ce)})}(je.getNextRun(Se)),je.pending.resolve(),yield je.pending.promise,je.pending=new ut.BH,yield je.operation(),je.pending.resolve(),yield je.pending.promise,je.process(!0).catch(()=>{})}catch(gt){je.retryPolicy(gt)?je.process(!1).catch(()=>{}):je.stop()}})()}getNextRun(Se){if(Se)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const je=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),je}}}const qt=new ut.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function $t(Ce){if(!te(Ce).activated)throw qt.create("use-before-activation",{appName:Ce.name})}function wr(Ce,Se){return kn.apply(this,arguments)}function kn(){return(kn=(0,se.Z)(function*({url:Ce,body:Se},je){const gt={"Content-Type":"application/json"},At=je.getImmediate({optional:!0});if(At){const ei=yield At.getHeartbeatsHeader();ei&&(gt["X-Firebase-Client"]=ei)}const an={method:"POST",body:JSON.stringify(Se),headers:gt};let _n,Bn;try{_n=yield fetch(Ce,an)}catch(ei){throw qt.create("fetch-network-error",{originalErrorMessage:ei?.message})}if(200!==_n.status)throw qt.create("fetch-status-error",{httpStatus:_n.status});try{Bn=yield _n.json()}catch(ei){throw qt.create("fetch-parse-error",{originalErrorMessage:ei?.message})}const ir=Bn.ttl.match(/^([\d.]+)(s)$/);if(!ir||!ir[2]||isNaN(Number(ir[1])))throw qt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Bn.ttl}`});const Lr=1e3*Number(ir[1]),li=Date.now();return{token:Bn.token,expireTimeMillis:li+Lr,issuedAtTimeMillis:li}})).apply(this,arguments)}function nn(Ce,Se){const{projectId:je,appId:gt,apiKey:At}=Ce.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${je}/apps/${gt}:exchangeDebugToken?key=${At}`,body:{debug_token:Se}}}const Vn="firebase-app-check-store";let He=null;function q(){return He||(He=new Promise((Ce,Se)=>{try{const je=indexedDB.open("firebase-app-check-database",1);je.onsuccess=gt=>{Ce(gt.target.result)},je.onerror=gt=>{var At;Se(qt.create("storage-open",{originalErrorMessage:null===(At=gt.target.error)||void 0===At?void 0:At.message}))},je.onupgradeneeded=gt=>{0===gt.oldVersion&&gt.target.result.createObjectStore(Vn,{keyPath:"compositeKey"})}}catch(je){Se(qt.create("storage-open",{originalErrorMessage:je?.message}))}}),He)}function We(){return(We=(0,se.Z)(function*(Ce,Se){const gt=(yield q()).transaction(Vn,"readwrite"),an=gt.objectStore(Vn).put({compositeKey:Ce,value:Se});return new Promise((_n,Bn)=>{an.onsuccess=ir=>{_n()},gt.onerror=ir=>{var Lr;Bn(qt.create("storage-set",{originalErrorMessage:null===(Lr=ir.target.error)||void 0===Lr?void 0:Lr.message}))}})})).apply(this,arguments)}const qn=new Ye.Yd("@firebase/app-check");function $r(Ce,Se){return(0,ut.hl)()?function at(Ce,Se){return function Ge(Ce,Se){return We.apply(this,arguments)}(function Er(Ce){return`${Ce.options.appId}-${Ce.name}`}(Ce),Se)}(Ce,Se).catch(je=>{qn.warn(`Failed to write token to IndexedDB. Error: ${je}`)}):Promise.resolve()}function qr(){return Ie().enabled}function Mn(){return rn.apply(this,arguments)}function rn(){return(rn=(0,se.Z)(function*(){const Ce=Ie();if(Ce.enabled&&Ce.token)return Ce.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Mt={error:"UNKNOWN_ERROR"};function ht(Ce){return ut.US.encodeString(JSON.stringify(Ce),!1)}function Zt(Ce){return ln.apply(this,arguments)}function ln(){return(ln=(0,se.Z)(function*(Ce,Se=!1){const je=Ce.app;$t(je);const gt=te(je);let an,At=gt.token;if(At&&!st(At)&&(gt.token=void 0,At=void 0),!At){const ir=yield gt.cachedTokenPromise;ir&&(st(ir)?At=ir:yield $r(je,void 0))}if(!Se&&At&&st(At))return{token:At.token};let Bn,_n=!1;if(qr()){gt.exchangeTokenPromise||(gt.exchangeTokenPromise=wr(nn(je,yield Mn()),Ce.heartbeatServiceProvider).finally(()=>{gt.exchangeTokenPromise=void 0}),_n=!0);const ir=yield gt.exchangeTokenPromise;return yield $r(je,ir),gt.token=ir,{token:ir.token}}try{gt.exchangeTokenPromise||(gt.exchangeTokenPromise=gt.provider.getToken().finally(()=>{gt.exchangeTokenPromise=void 0}),_n=!0),At=yield te(je).exchangeTokenPromise}catch(ir){"appCheck/throttled"===ir.code?qn.warn(ir.message):qn.error(ir),an=ir}return At?an?Bn=st(At)?{token:At.token,internalError:an}:Ze(an):(Bn={token:At.token},gt.token=At,yield $r(je,At)):Bn=Ze(an),_n&&De(je,Bn),Bn})).apply(this,arguments)}function sn(Ce,Se){const je=te(Ce),gt=je.tokenObservers.filter(At=>At.next!==Se);0===gt.length&&je.tokenRefresher&&je.tokenRefresher.isRunning()&&je.tokenRefresher.stop(),je.tokenObservers=gt}function ye(Ce){const{app:Se}=Ce,je=te(Se);let gt=je.tokenRefresher;gt||(gt=function he(Ce){const{app:Se}=Ce;return new Pt((0,se.Z)(function*(){let gt;if(gt=te(Se).token?yield Zt(Ce,!0):yield Zt(Ce),gt.error)throw gt.error;if(gt.internalError)throw gt.internalError}),()=>!0,()=>{const je=te(Se);if(je.token){let gt=je.token.issuedAtTimeMillis+.5*(je.token.expireTimeMillis-je.token.issuedAtTimeMillis)+3e5;return gt=Math.min(gt,je.token.expireTimeMillis-3e5),Math.max(0,gt-Date.now())}return 0},3e4,96e4)}(Ce),je.tokenRefresher=gt),!gt.isRunning()&&je.isTokenAutoRefreshEnabled&&gt.start()}function De(Ce,Se){const je=te(Ce).tokenObservers;for(const gt of je)try{"EXTERNAL"===gt.type&&null!=Se.error?gt.error(Se.error):gt.next(Se)}catch{}}function st(Ce){return Ce.expireTimeMillis-Date.now()>0}function Ze(Ce){return{token:ht(Mt),error:Ce}}class Rt{constructor(Se,je){this.app=Se,this.heartbeatServiceProvider=je}_delete(){const{tokenObservers:Se}=te(this.app);for(const je of Se)sn(this.app,je.next);return Promise.resolve()}}const gn="app-check-internal";!function mr(){(0,$e._registerComponent)(new Le.wA("app-check",Ce=>function vn(Ce,Se){return new Rt(Ce,Se)}(Ce.getProvider("app").getImmediate(),Ce.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Ce,Se,je)=>{Ce.getProvider(gn).initialize()})),(0,$e._registerComponent)(new Le.wA(gn,Ce=>function Fn(Ce){return{getToken:Se=>Zt(Ce,Se),addTokenListener:Se=>function pn(Ce,Se,je,gt){const{app:At}=Ce,an=te(At);if(an.tokenObservers=[...an.tokenObservers,{next:je,error:gt,type:Se}],an.token&&st(an.token)){const Bn=an.token;Promise.resolve().then(()=>{je({token:Bn.token}),ye(Ce)}).catch(()=>{})}an.cachedTokenPromise.then(()=>ye(Ce))}(Ce,"INTERNAL",Se),removeTokenListener:Se=>sn(Ce.app,Se)}}(Ce.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,$e.registerVersion)("@firebase/app-check","0.6.0")}();class Pr{constructor(){return(0,g.vb)("app-check")}}typeof window<"u"&&window},1205:(Ut,ze,L)=>{L.d(ze,{zQ:()=>lt,ww:()=>pt,rT:()=>W,f7:()=>ae,L6:()=>de,_Q:()=>Oe,lh:()=>te,Qv:()=>Ye,nw:()=>Ie});var g=L(4650),l=L(7579),G=L(9646),ge=L(9751),U=L(8996),be=L(6451),we=L(5363),Ae=L(3900),xe=L(4004),ue=L(6063);class ie extends l.x{constructor(Ot=1/0,Qt=1/0,Nt=ue.l){super(),this._bufferSize=Ot,this._windowTime=Qt,this._timestampProvider=Nt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Qt===1/0,this._bufferSize=Math.max(1,Ot),this._windowTime=Math.max(1,Qt)}next(Ot){const{isStopped:Qt,_buffer:Nt,_infiniteTimeWindow:Pt,_timestampProvider:Et,_windowTime:Wt}=this;Qt||(Nt.push(Ot),!Pt&&Nt.push(Et.now()+Wt)),this._trimBuffer(),super.next(Ot)}_subscribe(Ot){this._throwIfClosed(),this._trimBuffer();const Qt=this._innerSubscribe(Ot),{_infiniteTimeWindow:Nt,_buffer:Pt}=this,Et=Pt.slice();for(let Wt=0;Wt<Et.length&&!Ot.closed;Wt+=Nt?1:2)Ot.next(Et[Wt]);return this._checkFinalizedStatuses(Ot),Qt}_trimBuffer(){const{_bufferSize:Ot,_timestampProvider:Qt,_buffer:Nt,_infiniteTimeWindow:Pt}=this,Et=(Pt?1:2)*Ot;if(Ot<1/0&&Et<Nt.length&&Nt.splice(0,Nt.length-Et),!Pt){const Wt=Qt.now();let qt=0;for(let yn=1;yn<Nt.length&&Nt[yn]<=Wt;yn+=2)qt=yn;qt&&Nt.splice(0,qt+1)}}}var pe=L(3099);function nt(Ct,Ot,Qt){let Nt,Pt=!1;return Ct&&"object"==typeof Ct?({bufferSize:Nt=1/0,windowTime:Ot=1/0,refCount:Pt=!1,scheduler:Qt}=Ct):Nt=Ct??1/0,(0,pe.B)({connector:()=>new ie(Nt,Ot,Qt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Pt})}var qe=L(590),Qe=L(576);function ct(Ct,Ot){return(0,Qe.m)(Ot)?(0,Ae.w)(()=>Ct,Ot):(0,Ae.w)(()=>Ct)}var Ne=L(9468),Me=L(9300),Fe=L(2122),et=L(2011),se=L(6895),$e=L(6217),Le=L(9260);const Ye=new g.OlP("angularfire2.auth.use-emulator"),de=new g.OlP("angularfire2.auth.settings"),Oe=new g.OlP("angularfire2.auth.tenant-id"),W=new g.OlP("angularfire2.auth.langugage-code"),te=new g.OlP("angularfire2.auth.use-device-language"),ae=new g.OlP("angularfire.auth.persistence"),Ie=(Ct,Ot,Qt,Nt,Pt,Et,Wt,qt)=>(0,et.cc)(`${Ct.name}.auth`,"AngularFireAuth",Ct.name,()=>{const yn=Ot.runOutsideAngular(()=>Ct.auth());if(Qt&&yn.useEmulator(...Qt),Nt&&(yn.tenantId=Nt),yn.languageCode=Pt,Et&&yn.useDeviceLanguage(),Wt)for(const[$t,On]of Object.entries(Wt))yn.settings[$t]=On;return qt&&yn.setPersistence(qt),yn},[Qt,Nt,Pt,Et,Wt,qt]);let lt=(()=>{class Ct{constructor(Qt,Nt,Pt,Et,Wt,qt,yn,$t,On,Nn,wr,kn){const _r=new l.x,kr=(0,G.of)(void 0).pipe((0,we.Q)(Wt.outsideAngular),(0,Ae.w)(()=>Et.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,9169)))),(0,xe.U)(()=>(0,et.on)(Qt,Et,Nt)),(0,xe.U)(nn=>Ie(nn,Et,qt,$t,On,Nn,yn,wr)),nt({bufferSize:1,refCount:!1}));if((0,se.PM)(Pt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,G.of)(null);else{kr.pipe((0,qe.P)()).subscribe();const zn=kr.pipe((0,Ae.w)(Kt=>Kt.getRedirectResult().then(He=>He,()=>null)),Fe.iC,nt({bufferSize:1,refCount:!1})),$n=kr.pipe((0,Ae.w)(Kt=>new ge.y(He=>({unsubscribe:Et.runOutsideAngular(()=>Kt.onAuthStateChanged(q=>He.next(q),q=>He.error(q),()=>He.complete()))})))),Vn=kr.pipe((0,Ae.w)(Kt=>new ge.y(He=>({unsubscribe:Et.runOutsideAngular(()=>Kt.onIdTokenChanged(q=>He.next(q),q=>He.error(q),()=>He.complete()))}))));this.authState=zn.pipe(ct($n),(0,Ne.R)(Wt.outsideAngular),(0,we.Q)(Wt.insideAngular)),this.user=zn.pipe(ct(Vn),(0,Ne.R)(Wt.outsideAngular),(0,we.Q)(Wt.insideAngular)),this.idToken=this.user.pipe((0,Ae.w)(Kt=>Kt?(0,U.D)(Kt.getIdToken()):(0,G.of)(null))),this.idTokenResult=this.user.pipe((0,Ae.w)(Kt=>Kt?(0,U.D)(Kt.getIdTokenResult()):(0,G.of)(null))),this.credential=(0,be.T)(zn,_r,this.authState.pipe((0,Me.h)(Kt=>!Kt))).pipe((0,xe.U)(Kt=>Kt?.user?Kt:null),(0,Ne.R)(Wt.outsideAngular),(0,we.Q)(Wt.insideAngular))}return(0,et.pX)(this,kr,Et,{spy:{apply:(nn,zn,$n)=>{(nn.startsWith("signIn")||nn.startsWith("createUser"))&&$n.then(Vn=>_r.next(Vn))}}})}}return Ct.\u0275fac=function(Qt){return new(Qt||Ct)(g.LFG(et.Dh),g.LFG(et.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Fe.HU),g.LFG(Ye,8),g.LFG(de,8),g.LFG(Oe,8),g.LFG(W,8),g.LFG(te,8),g.LFG(ae,8),g.LFG($e.nm,8))},Ct.\u0275prov=g.Yz7({token:Ct,factory:Ct.\u0275fac,providedIn:"any"}),Ct})(),pt=(()=>{class Ct{constructor(){Le.Z.registerVersion("angularfire",Fe.q4.full,"auth-compat")}}return Ct.\u0275fac=function(Qt){return new(Qt||Ct)},Ct.\u0275mod=g.oAB({type:Ct}),Ct.\u0275inj=g.cJS({providers:[lt]}),Ct})()},2095:(Ut,ze,L)=>{L.d(ze,{ST:()=>Cv});var g=L(4650),l=L(4986),G=L(9751),ge=L(8996),U=L(9646),be=L(2122),we=L(8675),Ae=L(4482),xe=L(5403);function ue(){return(0,Ae.e)((i,e)=>{let t,s=!1;i.subscribe((0,xe.x)(e,u=>{const h=t;t=u,s&&e.next([h,u]),s=!0}))})}var ie=L(4004),pe=L(5026),nt=L(4671);function Qe(i,e){return i===e}var W,ct=L(9300),Ne=L(2011),Me=L(6895),et=(L(9169),L(3942)),se=L(5861),$e=L(9681),Le=L(4859),ut=L(1877),Ye=L(2090),de=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Oe={},te=te||{},ae=de||self;function Ie(){}function lt(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function pt(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Ot="closure_uid_"+(1e9*Math.random()>>>0),Qt=0;function Nt(i,e,t){return i.call.apply(i.bind,arguments)}function Pt(i,e,t){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,s),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function Et(i,e,t){return(Et=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Nt:Pt).apply(null,arguments)}function Wt(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function qt(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(s,u,h){for(var m=Array(arguments.length-2),C=2;C<arguments.length;C++)m[C-2]=arguments[C];return e.prototype[u].apply(s,m)}}function yn(){this.s=this.s,this.o=this.o}yn.prototype.s=!1,yn.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Ct(i){Object.prototype.hasOwnProperty.call(i,Ot)&&i[Ot]||(i[Ot]=++Qt)}(this)},yn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const On=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function Nn(i){const e=i.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=i[s];return t}return[]}function wr(i,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(lt(s)){const u=i.length||0,h=s.length||0;i.length=u+h;for(let m=0;m<h;m++)i[u+m]=s[m]}else i.push(s)}}function kn(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}kn.prototype.h=function(){this.defaultPrevented=!0};var _r=function(){if(!ae.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ae.addEventListener("test",Ie,e),ae.removeEventListener("test",Ie,e)}catch{}return i}();function kr(i){return/^[\s\xa0]*$/.test(i)}var nn=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function zn(i,e){return i<e?-1:i>e?1:0}function $n(){var i=ae.navigator;return i&&(i=i.userAgent)?i:""}function Vn(i){return-1!=$n().indexOf(i)}function Kt(i){return Kt[" "](i),i}Kt[" "]=Ie;var Ue,i,q=Vn("Opera"),ne=Vn("Trident")||Vn("MSIE"),at=Vn("Edge"),Dt=at||ne,Ht=Vn("Gecko")&&!(-1!=$n().toLowerCase().indexOf("webkit")&&!Vn("Edge"))&&!(Vn("Trident")||Vn("MSIE"))&&!Vn("Edge"),Ge=-1!=$n().toLowerCase().indexOf("webkit")&&!Vn("Edge");function We(){var i=ae.document;return i?i.documentMode:void 0}e:{var Ft="",Er=(i=$n(),Ht?/rv:([^\);]+)(\)|;)/.exec(i):at?/Edge\/([\d\.]+)/.exec(i):ne?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Ge?/WebKit\/(\S+)/.exec(i):q?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Er&&(Ft=Er?Er[1]:""),ne){var qn=We();if(null!=qn&&qn>parseFloat(Ft)){Ue=String(qn);break e}}Ue=Ft}var or={};var Tn=ae.document&&ne&&(We()||parseInt(Ue,10))||void 0;function qr(i,e){if(kn.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Ht){e:{try{Kt(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Mn[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&qr.X.h.call(this)}}qt(qr,kn);var Mn={2:"touch",3:"pen",4:"mouse"};qr.prototype.h=function(){qr.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var rn="closure_listenable_"+(1e6*Math.random()|0),ai=0;function Mt(i,e,t,s,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ha=u,this.key=++ai,this.ba=this.ea=!1}function ht(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function Zt(i,e,t){for(const s in i)e.call(t,i[s],s,i)}function ln(i){const e={};for(const t in i)e[t]=i[t];return e}const pn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sn(i,e){let t,s;for(let u=1;u<arguments.length;u++){for(t in s=arguments[u],s)i[t]=s[t];for(let h=0;h<pn.length;h++)t=pn[h],Object.prototype.hasOwnProperty.call(s,t)&&(i[t]=s[t])}}function ye(i){this.src=i,this.g={},this.h=0}function he(i,e){var t=e.type;if(t in i.g){var h,s=i.g[t],u=On(s,e);(h=0<=u)&&Array.prototype.splice.call(s,u,1),h&&(ht(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function De(i,e,t,s){for(var u=0;u<i.length;++u){var h=i[u];if(!h.ba&&h.listener==e&&h.capture==!!t&&h.ha==s)return u}return-1}ye.prototype.add=function(i,e,t,s,u){var h=i.toString();(i=this.g[h])||(i=this.g[h]=[],this.h++);var m=De(i,e,s,u);return-1<m?(e=i[m],t||(e.ea=!1)):((e=new Mt(e,this.src,h,!!s,u)).ea=t,i.push(e)),e};var st="closure_lm_"+(1e6*Math.random()|0),Ze={};function Rt(i,e,t,s,u){if(s&&s.once)return ar(i,e,t,s,u);if(Array.isArray(e)){for(var h=0;h<e.length;h++)Rt(i,e[h],t,s,u);return null}return t=dn(t),i&&i[rn]?i.N(e,t,pt(s)?!!s.capture:!!s,u):vn(i,e,t,!1,s,u)}function vn(i,e,t,s,u,h){if(!e)throw Error("Invalid event type");var m=pt(u)?!!u.capture:!!u,C=Xe(i);if(C||(i[st]=C=new ye(i)),(t=C.add(e,t,s,m,h)).proxy)return t;if(s=function Fn(){const e=ce;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=s,s.src=i,s.listener=t,i.addEventListener)_r||(u=m),void 0===u&&(u=!1),i.addEventListener(e.toString(),s,u);else if(i.attachEvent)i.attachEvent(me(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return t}function ar(i,e,t,s,u){if(Array.isArray(e)){for(var h=0;h<e.length;h++)ar(i,e[h],t,s,u);return null}return t=dn(t),i&&i[rn]?i.O(e,t,pt(s)?!!s.capture:!!s,u):vn(i,e,t,!0,s,u)}function cn(i,e,t,s,u){if(Array.isArray(e))for(var h=0;h<e.length;h++)cn(i,e[h],t,s,u);else s=pt(s)?!!s.capture:!!s,t=dn(t),i&&i[rn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=De(h=i.g[e],t,s,u))&&(ht(h[t]),Array.prototype.splice.call(h,t,1),0==h.length&&(delete i.g[e],i.h--))):i&&(i=Xe(i))&&(e=i.g[e.toString()],i=-1,e&&(i=De(e,t,s,u)),(t=-1<i?e[i]:null)&&Be(t))}function Be(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[rn])he(e.i,i);else{var t=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(t,s,i.capture):e.detachEvent?e.detachEvent(me(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Xe(e))?(he(t,i),0==t.h&&(t.src=null,e[st]=null)):ht(i)}}}function me(i){return i in Ze?Ze[i]:Ze[i]="on"+i}function ce(i,e){if(i.ba)i=!0;else{e=new qr(e,this);var t=i.listener,s=i.ha||i.src;i.ea&&Be(i),i=t.call(s,e)}return i}function Xe(i){return(i=i[st])instanceof ye?i:null}var ft="__closure_events_fn_"+(1e9*Math.random()>>>0);function dn(i){return"function"==typeof i?i:(i[ft]||(i[ft]=function(e){return i.handleEvent(e)}),i[ft])}function on(){yn.call(this),this.i=new ye(this),this.P=this,this.I=null}function Pn(i,e){var t,s=i.I;if(s)for(t=[];s;s=s.I)t.push(s);if(i=i.P,s=e.type||e,"string"==typeof e)e=new kn(e,i);else if(e instanceof kn)e.target=e.target||i;else{var u=e;sn(e=new kn(s,i),u)}if(u=!0,t)for(var h=t.length-1;0<=h;h--){var m=e.g=t[h];u=Qn(m,s,!0,e)&&u}if(u=Qn(m=e.g=i,s,!0,e)&&u,u=Qn(m,s,!1,e)&&u,t)for(h=0;h<t.length;h++)u=Qn(m=e.g=t[h],s,!1,e)&&u}function Qn(i,e,t,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,h=0;h<e.length;++h){var m=e[h];if(m&&!m.ba&&m.capture==t){var C=m.listener,F=m.ha||m.src;m.ea&&he(i.i,m),u=!1!==C.call(F,s)&&u}}return u&&!s.defaultPrevented}qt(on,yn),on.prototype[rn]=!0,on.prototype.removeEventListener=function(i,e,t,s){cn(this,i,e,t,s)},on.prototype.M=function(){if(on.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],s=0;s<t.length;s++)ht(t[s]);delete i.g[e],i.h--}}this.I=null},on.prototype.N=function(i,e,t,s){return this.i.add(String(i),e,!1,t,s)},on.prototype.O=function(i,e,t,s){return this.i.add(String(i),e,!0,t,s)};var xr=ae.JSON.stringify;function Li(){var i=Tr;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Jn,Rs=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new ji,i=>i.reset());class ji{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Si(i){ae.setTimeout(()=>{throw i},0)}function os(i,e){Jn||function Mr(){var i=ae.Promise.resolve(void 0);Jn=function(){i.then(Qr)}}(),Dr||(Jn(),Dr=!0),Tr.add(i,e)}var Dr=!1,Tr=new class nr{constructor(){this.h=this.g=null}add(e,t){const s=Rs.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function Qr(){for(var i;i=Li();){try{i.h.call(i.g)}catch(t){Si(t)}var e=Rs;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Dr=!1}function Ai(i,e){on.call(this),this.h=i||1,this.g=e||ae,this.j=Et(this.lb,this),this.l=Date.now()}function Bt(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function gn(i,e,t){if("function"==typeof i)t&&(i=Et(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Et(i.handleEvent,i)}return 2147483647<Number(e)?-1:ae.setTimeout(i,e||0)}function mr(i){i.g=gn(()=>{i.g=null,i.i&&(i.i=!1,mr(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}qt(Ai,on),(W=Ai.prototype).ca=!1,W.R=null,W.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Pn(this,"tick"),this.ca&&(Bt(this),this.start()))}},W.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},W.M=function(){Ai.X.M.call(this),Bt(this),delete this.g};class pi extends yn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:mr(this)}M(){super.M(),this.g&&(ae.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jr(i){yn.call(this),this.h=i,this.g={}}qt(Jr,yn);var Pr=[];function bi(i,e,t,s){Array.isArray(t)||(t&&(Pr[0]=t.toString()),t=Pr);for(var u=0;u<t.length;u++){var h=Rt(e,t[u],s||i.handleEvent,!1,i.h||i);if(!h)break;i.g[h.key]=h}}function ur(i){Zt(i.g,function(e,t){this.g.hasOwnProperty(t)&&Be(e)},i),i.g={}}function as(){this.g=!0}function wi(i,e,t,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function $i(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var s=t[i];if(!(2>s.length)){var u=s[1];if(Array.isArray(u)&&!(1>u.length)){var h=u[0];if("noop"!=h&&"stop"!=h&&"close"!=h)for(var m=1;m<u.length;m++)u[m]=""}}}return xr(t)}catch{return e}}(i,t)+(s?" "+s:"")})}Jr.prototype.M=function(){Jr.X.M.call(this),ur(this)},Jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},as.prototype.Aa=function(){this.g=!1},as.prototype.info=function(){};var Xr={},yr=null;function Br(){return yr=yr||new on}function vs(i){kn.call(this,Xr.Pa,i)}function ui(i){const e=Br();Pn(e,new vs(e))}function bs(i,e){kn.call(this,Xr.STAT_EVENT,i),this.stat=e}function rr(i){const e=Br();Pn(e,new bs(e,i))}function Ce(i,e){kn.call(this,Xr.Qa,i),this.size=e}function Se(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ae.setTimeout(function(){i()},e)}Xr.Pa="serverreachability",qt(vs,kn),Xr.STAT_EVENT="statevent",qt(bs,kn),Xr.Qa="timingevent",qt(Ce,kn);var je={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},gt={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function At(){}function _n(){}At.prototype.h=null;var li,Bn={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function ir(){kn.call(this,"d")}function Lr(){kn.call(this,"c")}function ei(){}function ci(i,e,t,s){this.l=i,this.j=e,this.m=t,this.U=s||1,this.S=new Jr(this),this.O=ii,this.T=new Ai(i=Dt?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Hi}function Hi(){this.i=null,this.g="",this.h=!1}qt(ir,kn),qt(Lr,kn),qt(ei,At),ei.prototype.g=function(){return new XMLHttpRequest},ei.prototype.i=function(){return{}},li=new ei;var ii=45e3,ws={},Xs={};function js(i,e,t){i.K=1,i.v=Ni(cs(e)),i.s=t,i.P=!0,gi(i,null)}function gi(i,e){i.F=Date.now(),Ns(i),i.A=cs(i.v);var t=i.A,s=i.U;Array.isArray(s)||(s=[String(s)]),Xi(t.i,"t",s),i.C=0,t=i.l.H,i.h=new Hi,i.g=Zo(i.l,t?e:null,!i.s),0<i.N&&(i.L=new pi(Et(i.La,i,i.g),i.N)),bi(i.S,i.g,"readystatechange",i.ib),e=i.H?ln(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),ui(),function Fr(i,e,t,s,u,h){i.info(function(){if(i.g)if(h)for(var m="",C=h.split("&"),F=0;F<C.length;F++){var Z=C[F].split("=");if(1<Z.length){var re=Z[0];Z=Z[1];var ve=re.split("_");m=2<=ve.length&&"type"==ve[1]?m+(re+"=")+Z+"&":m+(re+"=redacted&")}}else m=null;else m=h;return"XMLHTTP REQ ("+s+") [attempt "+u+"]: "+e+"\n"+t+"\n"+m})}(i.j,i.u,i.A,i.m,i.U,i.s)}function us(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function $s(i,e,t){let u,s=!0;for(;!i.I&&i.C<t.length;){if(u=Os(i,t),u==Xs){4==e&&(i.o=4,rr(14),s=!1),wi(i.j,i.m,null,"[Incomplete Response]");break}if(u==ws){i.o=4,rr(15),wi(i.j,i.m,t,"[Invalid Chunk]"),s=!1;break}wi(i.j,i.m,u,null),Gi(i,u)}us(i)&&u!=Xs&&u!=ws&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,rr(16),s=!1),i.i=i.i&&s,s?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),$o(e),e.K=!0,rr(11))):(wi(i.j,i.m,t,"[Invalid Chunked Response]"),Zi(i),Ui(i))}function Os(i,e){var t=i.C,s=e.indexOf("\n",t);return-1==s?Xs:(t=Number(e.substring(t,s)),isNaN(t)?ws:(s+=1)+t>e.length?Xs:(e=e.substr(s,t),i.C=s+t,e))}function Ns(i){i.V=Date.now()+i.O,Es(i,i.O)}function Es(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Se(Et(i.gb,i),e)}function Hs(i){i.B&&(ae.clearTimeout(i.B),i.B=null)}function Ui(i){0==i.l.G||i.I||Ho(i.l,i)}function Zi(i){Hs(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Bt(i.T),ur(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Gi(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||_o(t.h,i)))if(!i.J&&_o(t.h,i)&&3==t.G){try{var s=t.Fa.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var u=s;if(0==u[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;Fo(t),Ts(t)}bo(t),rr(18)}}else t.Ba=u[1],0<t.Ba-t.T&&37500>u[2]&&t.L&&0==t.A&&!t.v&&(t.v=Se(Et(t.cb,t),6e3));if(1>=es(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else ia(t,11)}else if((i.J||t.g==i)&&Fo(t),!kr(e))for(u=t.Fa.g.parse(e),e=0;e<u.length;e++){let Z=u[e];if(t.T=Z[0],Z=Z[1],2==t.G)if("c"==Z[0]){t.I=Z[1],t.ka=Z[2];const re=Z[3];null!=re&&(t.ma=re,t.j.info("VER="+t.ma));const ve=Z[4];null!=ve&&(t.Ca=ve,t.j.info("SVER="+t.Ca));const Ke=Z[5];null!=Ke&&"number"==typeof Ke&&0<Ke&&(t.J=s=1.5*Ke,t.j.info("backChannelRequestTimeoutMs_="+s)),s=t;const bt=i.g;if(bt){const St=bt.g?bt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(St){var h=s.h;h.g||-1==St.indexOf("spdy")&&-1==St.indexOf("quic")&&-1==St.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(ts(h,h.h),h.h=null))}if(s.D){const en=bt.g?bt.g.getResponseHeader("X-HTTP-Session-Id"):null;en&&(s.za=en,cr(s.F,s.D,en))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var m=i;if((s=t).sa=fs(s,s.H?s.ka:null,s.V),m.J){qi(s.h,m);var C=m,F=s.J;F&&C.setTimeout(F),C.B&&(Hs(C),Ns(C)),s.g=m}else La(s);0<t.i.length&&ra(t)}else"stop"!=Z[0]&&"close"!=Z[0]||ia(t,7);else 3==t.G&&("stop"==Z[0]||"close"==Z[0]?"stop"==Z[0]?ia(t,7):Ds(t):"noop"!=Z[0]&&t.l&&t.l.wa(Z),t.A=0)}ui()}catch{}}function So(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(lt(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function ko(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(lt(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const s in i)e[t++]=s;return e}}}(i),s=function Zs(i){if(i.W&&"function"==typeof i.W)return i.W();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(lt(i)){for(var e=[],t=i.length,s=0;s<t;s++)e.push(i[s]);return e}for(s in e=[],t=0,i)e[t++]=i[s];return e}(i),u=s.length,h=0;h<u;h++)e.call(void 0,s[h],t&&t[h],i)}(W=ci.prototype).setTimeout=function(i){this.O=i},W.ib=function(i){i=i.target;const e=this.L;e&&3==Xn(i)?e.l():this.La(i)},W.La=function(i){try{if(i==this.g)e:{const re=Xn(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>re)&&(3!=re||Dt||this.g&&(this.h.h||this.g.fa()||Ur(this.g)))){this.I||4!=re||7==e||ui(),Hs(this);var t=this.g.aa();this.Y=t;t:if(us(this)){var s=Ur(this.g);i="";var u=s.length,h=4==Xn(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Zi(this),Ui(this);var m="";break t}this.h.i=new ae.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:h&&e==u-1});s.splice(0,u),this.h.g+=i,this.C=0,m=this.h.g}else m=this.g.fa();if(this.i=200==t,function Sn(i,e,t,s,u,h,m){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+h+" "+m})}(this.j,this.u,this.A,this.m,this.U,re,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var C,F=this.g;if((C=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!kr(C)){var Z=C;break t}}Z=null}if(!(t=Z)){this.i=!1,this.o=3,rr(12),Zi(this),Ui(this);break e}wi(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Gi(this,t)}this.P?($s(this,re,m),Dt&&this.i&&3==re&&(bi(this.S,this.T,"tick",this.hb),this.T.start())):(wi(this.j,this.m,m,null),Gi(this,m)),4==re&&Zi(this),this.i&&!this.I&&(4==re?Ho(this.l,this):(this.i=!1,Ns(this)))}else 400==t&&0<m.indexOf("Unknown SID")?(this.o=3,rr(12)):(this.o=0,rr(13)),Zi(this),Ui(this)}}}catch{}},W.hb=function(){if(this.g){var i=Xn(this.g),e=this.g.fa();this.C<e.length&&(Hs(this),$s(this,i,e),this.i&&4!=i&&Ns(this))}},W.cancel=function(){this.I=!0,Zi(this)},W.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function Ei(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ui(),rr(17)),Zi(this),this.o=2,Ui(this)):Es(this,this.V-i)};var mi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ls(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof ls){this.h=void 0!==e?e:i.h,Gs(this,i.j),this.s=i.s,this.g=i.g,Ji(this,i.m),this.l=i.l,e=i.i;var t=new Ir;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),zi(this,t),this.o=i.o}else i&&(t=String(i).match(mi))?(this.h=!!e,Gs(this,t[1]||"",!0),this.s=ks(t[2]||""),this.g=ks(t[3]||"",!0),Ji(this,t[4]),this.l=ks(t[5]||"",!0),zi(this,t[6]||"",!0),this.o=ks(t[7]||"")):(this.h=!!e,this.i=new Ir(null,this.h))}function cs(i){return new ls(i)}function Gs(i,e,t){i.j=t?ks(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Ji(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function zi(i,e,t){e instanceof Ir?(i.i=e,function Ao(i,e){e&&!i.j&&(Ii(i),i.i=null,i.g.forEach(function(t,s){var u=s.toLowerCase();s!=u&&(Hr(this,s),Xi(this,u,t))},i)),i.j=e}(i.i,i.h)):(t||(e=Ps(e,yo)),i.i=new Ir(e,i.h))}function cr(i,e,t){i.i.set(e,t)}function Ni(i){return cr(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function ks(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Ps(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,xi),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function xi(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}ls.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Ps(e,zs,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Ps(e,zs,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(Ps(t,"/"==t.charAt(0)?to:qs,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Ps(t,Wr)),i.join("")};var zs=/[#\/\?@]/g,qs=/[#\?:]/g,to=/[#\?]/g,yo=/[#\?@]/g,Wr=/#/g;function Ir(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Ii(i){i.g||(i.g=new Map,i.h=0,i.i&&function eo(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var s=i[t].indexOf("="),u=null;if(0<=s){var h=i[t].substring(0,s);u=i[t].substring(s+1)}else h=i[t];e(h,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Hr(i,e){Ii(i),e=dr(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Ws(i,e){return Ii(i),e=dr(i,e),i.g.has(e)}function Xi(i,e,t){Hr(i,e),0<t.length&&(i.i=null,i.g.set(dr(i,e),Nn(t)),i.h+=t.length)}function dr(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Is(i){this.l=i||yi,i=ae.PerformanceNavigationTiming?0<(i=ae.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ae.g&&ae.g.Ga&&ae.g.Ga()&&ae.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(W=Ir.prototype).add=function(i,e){Ii(this),this.i=null,i=dr(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},W.forEach=function(i,e){Ii(this),this.g.forEach(function(t,s){t.forEach(function(u){i.call(e,u,s,this)},this)},this)},W.oa=function(){Ii(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const u=i[s];for(let h=0;h<u.length;h++)t.push(e[s])}return t},W.W=function(i){Ii(this);let e=[];if("string"==typeof i)Ws(this,i)&&(e=e.concat(this.g.get(dr(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},W.set=function(i,e){return Ii(this),this.i=null,Ws(this,i=dr(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},W.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},W.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const h=encodeURIComponent(String(s)),m=this.W(s);for(s=0;s<m.length;s++){var u=h;""!==m[s]&&(u+="="+encodeURIComponent(String(m[s]))),i.push(u)}}return this.i=i.join("&")};var yi=10;function Cs(i){return!!i.h||!!i.g&&i.g.size>=i.j}function es(i){return i.h?1:i.g?i.g.size:0}function _o(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function ts(i,e){i.g?i.g.add(e):i.h=e}function qi(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function hs(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Nn(i.i)}function En(){}function xo(){this.g=new En}function vo(i,e,t){const s=t||"";try{So(i,function(u,h){let m=u;pt(u)&&(m=xr(u)),e.push(s+h+"="+encodeURIComponent(m))})}catch(u){throw e.push(s+"type="+encodeURIComponent("_badmap")),u}}function $(i,e,t,s,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(s)}catch{}}function P(i){this.l=i.ac||null,this.j=i.jb||!1}function ee(i,e){on.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=oe,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Is.prototype.cancel=function(){if(this.i=hs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},En.prototype.stringify=function(i){return ae.JSON.stringify(i,void 0)},En.prototype.parse=function(i){return ae.JSON.parse(i,void 0)},qt(P,At),P.prototype.g=function(){return new ee(this.l,this.j)},P.prototype.i=function(i){return function(){return i}}({}),qt(ee,on);var oe=0;function Te(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function I(i){i.readyState=4,i.l=null,i.j=null,i.A=null,T(i)}function T(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(W=ee.prototype).open=function(i,e){if(this.readyState!=oe)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,T(this)},W.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||ae).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},W.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,I(this)),this.readyState=oe},W.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,T(this)),this.g&&(this.readyState=3,T(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof ae.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Te(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},W.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?I(this):T(this),3==this.readyState&&Te(this)}},W.Va=function(i){this.g&&(this.response=this.responseText=i,I(this))},W.Ua=function(i){this.g&&(this.response=i,I(this))},W.ga=function(){this.g&&I(this)},W.setRequestHeader=function(i,e){this.v.append(i,e)},W.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},W.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(ee.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var S=ae.JSON.parse;function H(i){on.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ee,this.K=this.L=!1}qt(H,on);var Ee="",mt=/^https?$/i,In=["POST","PUT"];function lr(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,hr(i),Rr(i)}function hr(i){i.D||(i.D=!0,Pn(i,"complete"),Pn(i,"error"))}function di(i){if(i.h&&typeof te<"u"&&(!i.C[1]||4!=Xn(i)||2!=i.aa()))if(i.v&&4==Xn(i))gn(i.Ha,0,i);else if(Pn(i,"readystatechange"),4==Xn(i)){i.h=!1;try{const C=i.aa();e:switch(C){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===C){var u=String(i.H).match(mi)[1]||null;if(!u&&ae.self&&ae.self.location){var h=ae.self.location.protocol;u=h.substr(0,h.length-1)}s=!mt.test(u?u.toLowerCase():"")}t=s}if(t)Pn(i,"complete"),Pn(i,"success");else{i.m=6;try{var m=2<Xn(i)?i.g.statusText:""}catch{m=""}i.j=m+" ["+i.aa()+"]",hr(i)}}finally{Rr(i)}}}function Rr(i,e){if(i.g){Mi(i);const t=i.g,s=i.C[0]?Ie:null;i.g=null,i.C=null,e||Pn(i,"ready");try{t.onreadystatechange=s}catch{}}}function Mi(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(ae.clearTimeout(i.A),i.A=null)}function Xn(i){return i.g?i.g.readyState:0}function Ur(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Ee:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function si(i){let e="";return Zt(i,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function ki(i,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=si(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):cr(i,e,t))}function Kr(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Bo(i){this.Ca=0,this.i=[],this.j=new as,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Kr("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Kr("baseRetryDelayMs",5e3,i),this.bb=Kr("retryDelaySeedMs",1e4,i),this.$a=Kr("forwardChannelMaxRetries",2,i),this.ta=Kr("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new Is(i&&i.concurrentRequestLimit),this.Fa=new xo,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Ds(i){if(jo(i),3==i.G){var e=i.U++,t=cs(i.F);cr(t,"SID",i.I),cr(t,"RID",e),cr(t,"TYPE","terminate"),ro(i,t),(e=new ci(i,i.j,e,void 0)).K=2,e.v=Ni(cs(t)),t=!1,ae.navigator&&ae.navigator.sendBeacon&&(t=ae.navigator.sendBeacon(e.v.toString(),"")),!t&&ae.Image&&((new Image).src=e.v,t=!0),t||(e.g=Zo(e.l,null),e.g.da(e.v)),e.F=Date.now(),Ns(e)}ba(i)}function Ts(i){i.g&&($o(i),i.g.cancel(),i.g=null)}function jo(i){Ts(i),i.u&&(ae.clearTimeout(i.u),i.u=null),Fo(i),i.h.cancel(),i.m&&("number"==typeof i.m&&ae.clearTimeout(i.m),i.m=null)}function ra(i){Cs(i.h)||i.m||(i.m=!0,os(i.Ja,i),i.C=0)}function Fa(i,e){var t;t=e?e.m:i.U++;const s=cs(i.F);cr(s,"SID",i.I),cr(s,"RID",t),cr(s,"AID",i.T),ro(i,s),i.o&&i.s&&ki(s,i.o,i.s),t=new ci(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=va(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),ts(i.h,t),js(t,s,e)}function ro(i,e){i.ia&&Zt(i.ia,function(t,s){cr(e,s,t)}),i.l&&So({},function(t,s){cr(e,s,t)})}function va(i,e,t){t=Math.min(i.i.length,t);var s=i.l?Et(i.l.Ra,i.l,i):null;e:{var u=i.i;let h=-1;for(;;){const m=["count="+t];-1==h?0<t?(h=u[0].h,m.push("ofs="+h)):h=0:m.push("ofs="+h);let C=!0;for(let F=0;F<t;F++){let Z=u[F].h;const re=u[F].g;if(Z-=h,0>Z)h=Math.max(0,u[F].h-100),C=!1;else try{vo(re,m,"req"+Z+"_")}catch{s&&s(re)}}if(C){s=m.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,s}function La(i){i.g||i.u||(i.Z=1,os(i.Ia,i),i.A=0)}function bo(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=Se(Et(i.Ia,i),Su(i,i.A)),i.A++,0))}function $o(i){null!=i.B&&(ae.clearTimeout(i.B),i.B=null)}function Tu(i){i.g=new ci(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=cs(i.sa);cr(e,"RID","rpc"),cr(e,"SID",i.I),cr(e,"CI",i.L?"0":"1"),cr(e,"AID",i.T),cr(e,"TYPE","xmlhttp"),ro(i,e),i.o&&i.s&&ki(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=Ni(cs(e)),t.s=null,t.P=!0,gi(t,i)}function Fo(i){null!=i.v&&(ae.clearTimeout(i.v),i.v=null)}function Ho(i,e){var t=null;if(i.g==e){Fo(i),$o(i),i.g=null;var s=2}else{if(!_o(i.h,e))return;t=e.D,qi(i.h,e),s=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;Pn(s=Br(),new Ce(s,t)),ra(i)}else La(i);else if(3==(u=e.o)||0==u&&0<i.pa||!(1==s&&function Po(i,e){return!(es(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=Se(Et(i.Ja,i,e),Su(i,i.C)),i.C++,0)))}(i,e)||2==s&&bo(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),u){case 1:ia(i,5);break;case 4:ia(i,10);break;case 3:ia(i,6);break;default:ia(i,2)}}function Su(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function ia(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var s=Et(i.kb,i);t||(t=new ls("//www.google.com/images/cleardot.gif"),ae.location&&"http"==ae.location.protocol||Gs(t,"https"),Ni(t)),function no(i,e){const t=new as;if(ae.Image){const s=new Image;s.onload=Wt($,t,s,"TestLoadImage: loaded",!0,e),s.onerror=Wt($,t,s,"TestLoadImage: error",!1,e),s.onabort=Wt($,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=Wt($,t,s,"TestLoadImage: timeout",!1,e),ae.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(t.toString(),s)}else rr(2);i.G=0,i.l&&i.l.va(e),ba(i),jo(i)}function ba(i){if(i.G=0,i.la=[],i.l){const e=hs(i.h);(0!=e.length||0!=i.i.length)&&(wr(i.la,e),wr(i.la,i.i),i.h.i.length=0,Nn(i.i),i.i.length=0),i.l.ua()}}function fs(i,e,t){var s=t instanceof ls?cs(t):new ls(t,void 0);if(""!=s.g)e&&(s.g=e+"."+s.g),Ji(s,s.m);else{var u=ae.location;s=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var h=new ls(null,void 0);s&&Gs(h,s),e&&(h.g=e),u&&Ji(h,u),t&&(h.l=t),s=h}return e=i.za,(t=i.D)&&e&&cr(s,t,e),cr(s,"VER",i.ma),ro(i,s),s}function Zo(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new H(t&&i.Da&&!i.ra?new P({jb:!0}):i.ra)).Ka(i.H),e}function Zr(){}function io(){if(ne&&!(10<=Number(Tn)))throw Error("Environmental error: no available transport.")}function ns(i,e){on.call(this),this.g=new Bo(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!kr(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!kr(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new sa(this)}function Pi(i){ir.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function au(){Lr.call(this),this.status=1}function sa(i){this.g=i}(W=H.prototype).Ka=function(i){this.L=i},W.da=function(i,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():li.g(),this.C=function an(i){return i.h||(i.h=i.i())}(this.u?this.u:li),this.g.onreadystatechange=Et(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(h){return void lr(this,h)}if(i=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var u in s)t.set(u,s[u]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const h of s.keys())t.set(h,s.get(h))}s=Array.from(t.keys()).find(h=>"content-type"==h.toLowerCase()),u=ae.FormData&&i instanceof ae.FormData,!(0<=On(In,e))||s||u||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[h,m]of t)this.g.setRequestHeader(h,m);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Mi(this),0<this.B&&((this.K=function An(i){return ne&&function fi(){return function He(i){var e=or;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=nn(String(Ue)).split("."),t=nn("9").split("."),s=Math.max(e.length,t.length);for(let m=0;0==i&&m<s;m++){var u=e[m]||"",h=t[m]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],0==u[0].length&&0==h[0].length)break;i=zn(0==u[1].length?0:parseInt(u[1],10),0==h[1].length?0:parseInt(h[1],10))||zn(0==u[2].length,0==h[2].length)||zn(u[2],h[2]),u=u[3],h=h[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Et(this.qa,this)):this.A=gn(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(h){lr(this,h)}},W.qa=function(){typeof te<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Pn(this,"timeout"),this.abort(8))},W.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Pn(this,"complete"),Pn(this,"abort"),Rr(this))},W.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Rr(this,!0)),H.X.M.call(this)},W.Ha=function(){this.s||(this.F||this.v||this.l?di(this):this.fb())},W.fb=function(){di(this)},W.aa=function(){try{return 2<Xn(this)?this.g.status:-1}catch{return-1}},W.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},W.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),S(e)}},W.Ea=function(){return this.m},W.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(W=Bo.prototype).ma=8,W.G=1,W.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const u=new ci(this,this.j,i,void 0);let h=this.s;if(this.S&&(h?(h=ln(h),sn(h,this.S)):h=this.S),null!==this.o||this.N||(u.H=h,h=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var s=this.i[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=va(this,u,e),cr(t=cs(this.F),"RID",i),cr(t,"CVER",22),this.D&&cr(t,"X-HTTP-Session-Id",this.D),ro(this,t),h&&(this.N?e="headers="+encodeURIComponent(String(si(h)))+"&"+e:this.o&&ki(t,this.o,h)),ts(this.h,u),this.Ya&&cr(t,"TYPE","init"),this.O?(cr(t,"$req",e),cr(t,"SID","null"),u.Z=!0,js(u,t,null)):js(u,t,e),this.G=2}}else 3==this.G&&(i?Fa(this,i):0==this.i.length||Cs(this.h)||Fa(this))},W.Ia=function(){if(this.u=null,Tu(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=Se(Et(this.eb,this),i)}},W.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,rr(10),Ts(this),Tu(this))},W.cb=function(){null!=this.v&&(this.v=null,Ts(this),bo(this),rr(19))},W.kb=function(i){i?(this.j.info("Successfully pinged google.com"),rr(2)):(this.j.info("Failed to ping google.com"),rr(1))},(W=Zr.prototype).xa=function(){},W.wa=function(){},W.va=function(){},W.ua=function(){},W.Ra=function(){},io.prototype.g=function(i,e){return new ns(i,e)},qt(ns,on),ns.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;rr(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=fs(i,null,i.V),ra(i)},ns.prototype.close=function(){Ds(this.g)},ns.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=xr(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&ra(e)},ns.prototype.M=function(){this.g.l=null,delete this.j,Ds(this.g),delete this.g,ns.X.M.call(this)},qt(Pi,ir),qt(au,Lr),qt(sa,Zr),sa.prototype.xa=function(){Pn(this.g,"a")},sa.prototype.wa=function(i){Pn(this.g,new Pi(i))},sa.prototype.va=function(i){Pn(this.g,new au)},sa.prototype.ua=function(){Pn(this.g,"b")},io.prototype.createWebChannel=io.prototype.g,ns.prototype.send=ns.prototype.u,ns.prototype.open=ns.prototype.m,ns.prototype.close=ns.prototype.close,je.NO_ERROR=0,je.TIMEOUT=8,je.HTTP_ERROR=6,gt.COMPLETE="complete",_n.EventType=Bn,Bn.OPEN="a",Bn.CLOSE="b",Bn.ERROR="c",Bn.MESSAGE="d",on.prototype.listen=on.prototype.N,H.prototype.listenOnce=H.prototype.O,H.prototype.getLastError=H.prototype.Oa,H.prototype.getLastErrorCode=H.prototype.Ea,H.prototype.getStatus=H.prototype.aa,H.prototype.getResponseJson=H.prototype.Sa,H.prototype.getResponseText=H.prototype.fa,H.prototype.send=H.prototype.da,H.prototype.setWithCredentials=H.prototype.Ka;var x=Oe.createWebChannelTransport=function(){return new io},j=Oe.getStatEventTarget=function(){return Br()},M=Oe.ErrorCode=je,Y=Oe.EventType=gt,_e=Oe.Event=Xr,it=Oe.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},yt=Oe.FetchXmlHttpFactory=P,Yt=Oe.WebChannel=_n,pr=Oe.XhrIo=H;const Zn="@firebase/firestore";class Rn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rn.UNAUTHENTICATED=new Rn(null),Rn.GOOGLE_CREDENTIALS=new Rn("google-credentials-uid"),Rn.FIRST_PARTY=new Rn("first-party-uid"),Rn.MOCK_USER=new Rn("mock-user");let Wn="9.15.0";const Cr=new ut.Yd("@firebase/firestore");function Or(){return Cr.logLevel}function It(i,...e){if(Cr.logLevel<=ut.in.DEBUG){const t=e.map(ps);Cr.debug(`Firestore (${Wn}): ${i}`,...t)}}function vr(i,...e){if(Cr.logLevel<=ut.in.ERROR){const t=e.map(ps);Cr.error(`Firestore (${Wn}): ${i}`,...t)}}function br(i,...e){if(Cr.logLevel<=ut.in.WARN){const t=e.map(ps);Cr.warn(`Firestore (${Wn}): ${i}`,...t)}}function ps(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function jt(i="Unexpected state"){const e=`FIRESTORE (${Wn}) INTERNAL ASSERTION FAILED: `+i;throw vr(e),new Error(e)}function Jt(i,e){i||jt()}function zt(i,e){return i}const ot={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class wt extends Ye.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class _i{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Mo{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ua{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Rn.UNAUTHENTICATED))}shutdown(){}}class wa{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Va{constructor(e){this.t=e,this.currentUser=Rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let u=this.i;const h=Z=>this.i!==u?(u=this.i,t(Z)):Promise.resolve();let m=new _i;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new _i,e.enqueueRetryable(()=>h(this.currentUser))};const C=()=>{const Z=m;e.enqueueRetryable((0,se.Z)(function*(){yield Z.promise,yield h(s.currentUser)}))},F=Z=>{It("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=Z,this.auth.addAuthTokenListener(this.o),C()};this.t.onInit(Z=>F(Z)),setTimeout(()=>{if(!this.auth){const Z=this.t.getImmediate({optional:!0});Z?F(Z):(It("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new _i)}},0),C()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(It("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Jt("string"==typeof s.accessToken),new Mo(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Jt(null===e||"string"==typeof e),new Rn(e)}}class uu{constructor(e,t,s,u){this.h=e,this.l=t,this.m=s,this.g=u,this.type="FirstParty",this.user=Rn.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Jt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Au{constructor(e,t,s,u){this.h=e,this.l=t,this.m=s,this.g=u}getToken(){return Promise.resolve(new uu(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rs{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xu{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const s=h=>{null!=h.error&&It("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const m=h.token!==this.A;return this.A=h.token,It("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?t(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable(()=>s(h))};const u=h=>{It("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.appCheck.addTokenListener(this.o)};this.T.onInit(h=>u(h)),setTimeout(()=>{if(!this.appCheck){const h=this.T.getImmediate({optional:!0});h?u(h):It("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Jt("string"==typeof t.token),this.A=t.token,new rs(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Go(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}class ja{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const u=Go(40);for(let h=0;h<u.length;++h)s.length<20&&u[h]<t&&(s+=e.charAt(u[h]%e.length))}return s}}function Ln(i,e){return i<e?-1:i>e?1:0}function zo(i,e,t){return i.length===e.length&&i.every((s,u)=>t(s,e[u]))}function Mu(i){return i+"\0"}class Kn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new wt(ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new wt(ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new wt(ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new wt(ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Kn.fromMillis(Date.now())}static fromDate(e){return Kn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Kn(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ln(this.nanoseconds,e.nanoseconds):Ln(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class mn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new mn(e)}static min(){return new mn(new Kn(0,0))}static max(){return new mn(new Kn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Lo{constructor(e,t,s){void 0===t?t=0:t>e.length&&jt(),void 0===s?s=e.length-t:s>e.length-t&&jt(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Lo.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Lo?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let u=0;u<s;u++){const h=e.get(u),m=t.get(u);if(h<m)return-1;if(h>m)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Gn extends Lo{construct(e,t,s){return new Gn(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new wt(ot.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(u=>u.length>0))}return new Gn(t)}static emptyPath(){return new Gn([])}}const lu=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yr extends Lo{construct(e,t,s){return new Yr(e,t,s)}static isValidIdentifier(e){return lu.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Yr(["__name__"])}static fromServerFormat(e){const t=[];let s="",u=0;const h=()=>{if(0===s.length)throw new wt(ot.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let m=!1;for(;u<e.length;){const C=e[u];if("\\"===C){if(u+1===e.length)throw new wt(ot.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const F=e[u+1];if("\\"!==F&&"."!==F&&"`"!==F)throw new wt(ot.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=F,u+=2}else"`"===C?(m=!m,u++):"."!==C||m?(s+=C,u++):(h(),u++)}if(h(),m)throw new wt(ot.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yr(t)}static emptyPath(){return new Yr([])}}class kt{constructor(e){this.path=e}static fromPath(e){return new kt(Gn.fromString(e))}static fromName(e){return new kt(Gn.fromString(e).popFirst(5))}static empty(){return new kt(Gn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Gn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Gn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new kt(new Gn(e.slice()))}}class $a{constructor(e,t,s,u){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=u}}function Ha(i){return i.fields.find(e=>2===e.kind)}function Wi(i){return i.fields.filter(e=>2!==e.kind)}$a.UNKNOWN_ID=-1;class qo{constructor(e,t){this.fieldPath=e,this.kind=t}}class Wo{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Wo(0,Ss.min())}}function Ko(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,u=mn.fromTimestamp(1e9===s?new Kn(t+1,0):new Kn(t,s));return new Ss(u,kt.empty(),e)}function Za(i){return new Ss(i.readTime,i.key,-1)}class Ss{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ss(mn.min(),kt.empty(),-1)}static max(){return new Ss(mn.max(),kt.empty(),-1)}}function Uo(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=kt.comparator(i.documentKey,e.documentKey),0!==t?t:Ln(i.largestBatchId,e.largestBatchId))}const Ga="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aa{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ro(i){return Ea.apply(this,arguments)}function Ea(){return Ea=(0,se.Z)(function*(i){if(i.code!==ot.FAILED_PRECONDITION||i.message!==Ga)throw i;It("LocalStore","Unexpectedly lost primary lease")}),Ea.apply(this,arguments)}class tt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&jt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new tt((s,u)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(s,u)},this.catchCallback=h=>{this.wrapFailure(t,h).next(s,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof tt?t:tt.resolve(t)}catch(t){return tt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):tt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):tt.reject(t)}static resolve(e){return new tt((t,s)=>{t(e)})}static reject(e){return new tt((t,s)=>{s(e)})}static waitFor(e){return new tt((t,s)=>{let u=0,h=0,m=!1;e.forEach(C=>{++u,C.next(()=>{++h,m&&h===u&&t()},F=>s(F))}),m=!0,h===u&&t()})}static or(e){let t=tt.resolve(!1);for(const s of e)t=t.next(u=>u?tt.resolve(u):s());return t}static forEach(e,t){const s=[];return e.forEach((u,h)=>{s.push(t.call(this,u,h))}),this.waitFor(s)}static mapArray(e,t){return new tt((s,u)=>{const h=e.length,m=new Array(h);let C=0;for(let F=0;F<h;F++){const Z=F;t(e[Z]).next(re=>{m[Z]=re,++C,C===h&&s(m)},re=>u(re))}})}static doWhile(e,t){return new tt((s,u)=>{const h=()=>{!0===e()?t().next(()=>{h()},u):s()};h()})}}class Ru{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new _i,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new ua(e,t.error)):this.P.resolve()},this.transaction.onerror=s=>{const u=qa(s.target.error);this.P.reject(new ua(e,u))}}static open(e,t,s,u){try{return new Ru(t,e.transaction(u,s))}catch(h){throw new ua(t,h)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(It("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ca(t)}}class oo{constructor(e,t,s){this.name=e,this.version=t,this.S=s,12.2===oo.D((0,Ye.z$)())&&vr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return It("SimpleDb","Removing database:",e),za(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Ye.hl)())return!1;if(oo.N())return!0;const e=(0,Ye.z$)(),t=oo.D(e),s=0<t&&t<10,u=oo.k(e),h=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||h)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static k(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}F(e){var t=this;return(0,se.Z)(function*(){return t.db||(It("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,u)=>{const h=indexedDB.open(t.name,t.version);h.onsuccess=m=>{s(m.target.result)},h.onblocked=()=>{u(new ua(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},h.onerror=m=>{const C=m.target.error;u("VersionError"===C.name?new wt(ot.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===C.name?new wt(ot.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+C):new ua(e,C))},h.onupgradeneeded=m=>{It("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',m.oldVersion),t.S.$(m.target.result,h.transaction,m.oldVersion,t.version).next(()=>{It("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=s=>t.B(s)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,u){var h=this;return(0,se.Z)(function*(){const m="readonly"===t;let C=0;for(;;){++C;try{h.db=yield h.F(e);const F=Ru.open(h.db,e,m?"readonly":"readwrite",s),Z=u(F).next(re=>(F.V(),re)).catch(re=>(F.abort(re),tt.reject(re))).toPromise();return Z.catch(()=>{}),yield F.v,Z}catch(F){const Z=F,re="FirebaseError"!==Z.name&&C<3;if(It("SimpleDb","Transaction failed with error:",Z.message,"Retrying:",re),h.close(),!re)return Promise.reject(Z)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Gr{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return za(this.q.delete())}}class ua extends wt{constructor(e,t){super(ot.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ia(i){return"IndexedDbTransactionError"===i.name}class Ca{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(It("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(It("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),za(s)}add(e){return It("SimpleDb","ADD",this.store.name,e,e),za(this.store.add(e))}get(e){return za(this.store.get(e)).next(t=>(void 0===t&&(t=null),It("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return It("SimpleDb","DELETE",this.store.name,e),za(this.store.delete(e))}count(){return It("SimpleDb","COUNT",this.store.name),za(this.store.count())}W(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const u=this.cursor(s),h=[];return this.H(u,(m,C)=>{h.push(C)}).next(()=>h)}{const u=this.store.getAll(s.range);return new tt((h,m)=>{u.onerror=C=>{m(C.target.error)},u.onsuccess=C=>{h(C.target.result)}})}}J(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new tt((u,h)=>{s.onerror=m=>{h(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}Y(e,t){It("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.X=!1;const u=this.cursor(s);return this.H(u,(h,m,C)=>C.delete())}Z(e,t){let s;t?s=e:(s={},t=e);const u=this.cursor(s);return this.H(u,t)}tt(e){const t=this.cursor({});return new tt((s,u)=>{t.onerror=h=>{const m=qa(h.target.error);u(m)},t.onsuccess=h=>{const m=h.target.result;m?e(m.primaryKey,m.value).next(C=>{C?m.continue():s()}):s()}})}H(e,t){const s=[];return new tt((u,h)=>{e.onerror=m=>{h(m.target.error)},e.onsuccess=m=>{const C=m.target.result;if(!C)return void u();const F=new Gr(C),Z=t(C.primaryKey,C.value,F);if(Z instanceof tt){const re=Z.catch(ve=>(F.done(),tt.reject(ve)));s.push(re)}F.isDone?u():null===F.G?C.continue():C.continue(F.G)}}).next(()=>tt.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.X?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function za(i){return new tt((e,t)=>{i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{const u=qa(s.target.error);t(u)}})}let cu=!1;function qa(i){const e=oo.D((0,Ye.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const s=new wt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return cu||(cu=!0,setTimeout(()=>{throw s},0)),s}}return i}class el{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;It("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,se.Z)(function*(){t.task=null;try{It("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(s){Ia(s)?It("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield Ro(s)}yield t.nt(6e4)}))}}class du{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,se.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.it(s,e))})()}it(e,t){const s=new Set;let u=t,h=!0;return tt.doWhile(()=>!0===h&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(m=>{if(null!==m&&!s.has(m))return It("IndexBackiller",`Processing collection: ${m}`),this.rt(e,m,u).next(C=>{u-=C,s.add(m)});h=!1})).next(()=>t-u)}rt(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(u=>this.localStore.localDocuments.getNextDocuments(e,t,u,s).next(h=>{const m=h.changes;return this.localStore.indexManager.updateIndexEntries(e,m).next(()=>this.ot(u,h)).next(C=>(It("IndexBackiller",`Updating offset: ${C}`),this.localStore.indexManager.updateCollectionGroup(e,t,C))).next(()=>m.size)}))}ot(e,t){let s=e;return t.changes.forEach((u,h)=>{const m=Za(h);Uo(m,s)>0&&(s=m)}),new Ss(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Fs=(()=>{class i{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=u=>this.ut(u),this.ct=u=>s.writeSequenceNumber(u))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return i.at=-1,i})();class hu{constructor(e,t,s,u,h,m,C,F){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=u,this.ssl=h,this.forceLongPolling=m,this.autoDetectLongPolling=C,this.useFetchStreams=F}}class Sr{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Sr("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Sr&&e.projectId===this.projectId&&e.database===this.database}}function Da(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function wo(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Wa(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Ki(i){return null==i}function Ls(i){return 0===i&&1/i==-1/0}function b(i){return"number"==typeof i&&Number.isInteger(i)&&!Ls(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class y{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new y(t)}static fromUint8Array(e){const t=function(s){let u="";for(let h=0;h<s.length;++h)u+=String.fromCharCode(s[h]);return u}(e);return new y(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ln(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}y.EMPTY_BYTE_STRING=new y("");const A=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function N(i){if(Jt(!!i),"string"==typeof i){let e=0;const t=A.exec(i);if(Jt(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:z(i.seconds),nanos:z(i.nanos)}}function z(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function X(i){return"string"==typeof i?y.fromBase64String(i):y.fromUint8Array(i)}function Re(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function vt(i){const e=i.mapValue.fields.__previous_value__;return Re(e)?vt(e):e}function Gt(i){const e=N(i.mapValue.fields.__local_write_time__.timestampValue);return new Kn(e.seconds,e.nanos)}const Xt={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},er={nullValue:"NULL_VALUE"};function ti(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Re(i)?4:Ve(i)?9007199254740991:10:jt()}function oi(i,e){if(i===e)return!0;const t=ti(i);if(t!==ti(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Gt(i).isEqual(Gt(e));case 3:return function(s,u){if("string"==typeof s.timestampValue&&"string"==typeof u.timestampValue&&s.timestampValue.length===u.timestampValue.length)return s.timestampValue===u.timestampValue;const h=N(s.timestampValue),m=N(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,X(i.bytesValue).isEqual(X(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,u){return z(s.geoPointValue.latitude)===z(u.geoPointValue.latitude)&&z(s.geoPointValue.longitude)===z(u.geoPointValue.longitude)}(i,e);case 2:return function(s,u){if("integerValue"in s&&"integerValue"in u)return z(s.integerValue)===z(u.integerValue);if("doubleValue"in s&&"doubleValue"in u){const h=z(s.doubleValue),m=z(u.doubleValue);return h===m?Ls(h)===Ls(m):isNaN(h)&&isNaN(m)}return!1}(i,e);case 9:return zo(i.arrayValue.values||[],e.arrayValue.values||[],oi);case 10:return function(s,u){const h=s.mapValue.fields||{},m=u.mapValue.fields||{};if(Da(h)!==Da(m))return!1;for(const C in h)if(h.hasOwnProperty(C)&&(void 0===m[C]||!oi(h[C],m[C])))return!1;return!0}(i,e);default:return jt()}var u}function As(i,e){return void 0!==(i.values||[]).find(t=>oi(t,e))}function Ci(i,e){if(i===e)return 0;const t=ti(i),s=ti(e);if(t!==s)return Ln(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ln(i.booleanValue,e.booleanValue);case 2:return function(u,h){const m=z(u.integerValue||u.doubleValue),C=z(h.integerValue||h.doubleValue);return m<C?-1:m>C?1:m===C?0:isNaN(m)?isNaN(C)?0:-1:1}(i,e);case 3:return ao(i.timestampValue,e.timestampValue);case 4:return ao(Gt(i),Gt(e));case 5:return Ln(i.stringValue,e.stringValue);case 6:return function(u,h){const m=X(u),C=X(h);return m.compareTo(C)}(i.bytesValue,e.bytesValue);case 7:return function(u,h){const m=u.split("/"),C=h.split("/");for(let F=0;F<m.length&&F<C.length;F++){const Z=Ln(m[F],C[F]);if(0!==Z)return Z}return Ln(m.length,C.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,h){const m=Ln(z(u.latitude),z(h.latitude));return 0!==m?m:Ln(z(u.longitude),z(h.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,h){const m=u.values||[],C=h.values||[];for(let F=0;F<m.length&&F<C.length;++F){const Z=Ci(m[F],C[F]);if(Z)return Z}return Ln(m.length,C.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,h){if(u===Xt.mapValue&&h===Xt.mapValue)return 0;if(u===Xt.mapValue)return 1;if(h===Xt.mapValue)return-1;const m=u.fields||{},C=Object.keys(m),F=h.fields||{},Z=Object.keys(F);C.sort(),Z.sort();for(let re=0;re<C.length&&re<Z.length;++re){const ve=Ln(C[re],Z[re]);if(0!==ve)return ve;const Ke=Ci(m[C[re]],F[Z[re]]);if(0!==Ke)return Ke}return Ln(C.length,Z.length)}(i.mapValue,e.mapValue);default:throw jt()}}function ao(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Ln(i,e);const t=N(i),s=N(e),u=Ln(t.seconds,s.seconds);return 0!==u?u:Ln(t.nanos,s.nanos)}function Yo(i){return Vo(i)}function Vo(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const u=N(s);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?X(i.bytesValue).toBase64():"referenceValue"in i?kt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(s){let u="[",h=!0;for(const m of s.values||[])h?h=!1:u+=",",u+=Vo(m);return u+"]"}(i.arrayValue):"mapValue"in i?function(s){const u=Object.keys(s.fields||{}).sort();let h="{",m=!0;for(const C of u)m?m=!1:h+=",",h+=`${C}:${Vo(s.fields[C])}`;return h+"}"}(i.mapValue):jt();var e}function Eo(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Ou(i){return!!i&&"integerValue"in i}function Ta(i){return!!i&&"arrayValue"in i}function O(i){return!!i&&"nullValue"in i}function k(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function K(i){return!!i&&"mapValue"in i}function fe(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return wo(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=fe(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fe(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Ve(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function rt(i){return"nullValue"in i?er:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Eo(Sr.empty(),kt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:jt()}function Tt(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Eo(Sr.empty(),kt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Xt:jt()}function hn(i,e){const t=Ci(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function bn(i,e){const t=Ci(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class un{constructor(e,t){this.position=e,this.inclusive=t}}function tr(i,e,t){let s=0;for(let u=0;u<i.position.length;u++){const h=e[u],m=i.position[u];if(s=h.field.isKeyField()?kt.comparator(kt.fromName(m.referenceValue),t.key):Ci(m,t.data.field(h.field)),"desc"===h.dir&&(s*=-1),0!==s)break}return s}function Hn(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!oi(i.position[t],e.position[t]))return!1;return!0}class uo{}class xn extends uo{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new Ih(e,t,s):"array-contains"===t?new sp(e,s):"in"===t?new Nu(e,s):"not-in"===t?new Ug(e,s):"array-contains-any"===t?new Vg(e,s):new xn(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new Ch(e,s):new Lg(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ci(t,this.value)):null!==t&&ti(this.value)===ti(t)&&this.matchesComparison(Ci(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return jt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Nr extends uo{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new Nr(e,t)}matches(e){return Sa(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Sa(i){return"and"===i.op}function Aa(i){return"or"===i.op}function Oo(i){return Qo(i)&&Sa(i)}function Qo(i){for(const e of i.filters)if(e instanceof Nr)return!1;return!0}function xa(i){if(i instanceof xn)return i.field.canonicalString()+i.op.toString()+Yo(i.value);{const e=i.filters.map(t=>xa(t)).join(",");return`${i.op}(${e})`}}function td(i,e){return i instanceof xn?(t=i,(s=e)instanceof xn&&t.op===s.op&&t.field.isEqual(s.field)&&oi(t.value,s.value)):i instanceof Nr?function(t,s){return s instanceof Nr&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((u,h,m)=>u&&td(h,s.filters[m]),!0)}(i,e):void jt();var t,s}function Eh(i,e){const t=i.filters.concat(e);return Nr.create(t,i.op)}function nd(i){return i instanceof xn?`${(e=i).field.canonicalString()} ${e.op} ${Yo(e.value)}`:i instanceof Nr?function(e){return e.op.toString()+" {"+e.getFilters().map(nd).join(" ,")+"}"}(i):"Filter";var e}class Ih extends xn{constructor(e,t,s){super(e,t,s),this.key=kt.fromName(s.referenceValue)}matches(e){const t=kt.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ch extends xn{constructor(e,t){super(e,"in",t),this.keys=rd(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Lg extends xn{constructor(e,t){super(e,"not-in",t),this.keys=rd(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function rd(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>kt.fromName(s.referenceValue))}class sp extends xn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ta(t)&&As(t.arrayValue,this.value)}}class Nu extends xn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&As(this.value.arrayValue,t)}}class Ug extends xn{constructor(e,t){super(e,"not-in",t)}matches(e){if(As(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!As(this.value.arrayValue,t)}}class Vg extends xn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ta(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>As(this.value.arrayValue,s))}}class fu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Bg(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class is{constructor(e,t){this.comparator=e,this.root=t||lo.EMPTY}insert(e,t){return new is(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,lo.BLACK,null,null))}remove(e){return new is(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const u=this.comparator(e,s.key);if(0===u)return t+s.left.size;u<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new id(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new id(this.root,e,this.comparator,!1)}getReverseIterator(){return new id(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new id(this.root,e,this.comparator,!0)}}class id{constructor(e,t,s,u){this.isReverse=u,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=t?s(e.key,t):1,t&&u&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(0===h){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class lo{constructor(e,t,s,u,h){this.key=e,this.value=t,this.color=s??lo.RED,this.left=u??lo.EMPTY,this.right=h??lo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,u,h){return new lo(e??this.key,t??this.value,s??this.color,u??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let u=this;const h=s(e,u.key);return u=h<0?u.copy(null,null,null,u.left.insert(e,t,s),null):0===h?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,s)),u.fixUp()}removeMin(){if(this.left.isEmpty())return lo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return lo.EMPTY;s=u.right.min(),u=u.copy(s.key,s.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,lo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,lo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw jt();const e=this.left.check();if(e!==this.right.check())throw jt();return e+(this.isRed()?0:1)}}lo.EMPTY=null,lo.RED=!0,lo.BLACK=!1,lo.EMPTY=new class{constructor(){this.size=0}get key(){throw jt()}get value(){throw jt()}get color(){throw jt()}get left(){throw jt()}get right(){throw jt()}copy(i,e,t,s,u){return this}insert(i,e,t){return new lo(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vi{constructor(e){this.comparator=e,this.data=new is(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const u=s.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ac(this.data.getIterator())}getIteratorFrom(e){return new ac(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof vi)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,h=s.getNext().key;if(0!==this.comparator(u,h))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new vi(this.comparator);return t.data=e,t}}class ac{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ku(i){return i.hasNext()?i.getNext():void 0}class Io{constructor(e){this.fields=e,e.sort(Yr.comparator)}static empty(){return new Io([])}unionWith(e){let t=new vi(Yr.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Io(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zo(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Us{constructor(e){this.value=e}static empty(){return new Us({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!K(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fe(t)}setAll(e){let t=Yr.emptyPath(),s={},u=[];e.forEach((m,C)=>{if(!t.isImmediateParentOf(C)){const F=this.getFieldsMap(t);this.applyChanges(F,s,u),s={},u=[],t=C.popLast()}m?s[C.lastSegment()]=fe(m):u.push(C.lastSegment())});const h=this.getFieldsMap(t);this.applyChanges(h,s,u)}delete(e){const t=this.field(e.popLast());K(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return oi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let u=t.mapValue.fields[e.get(s)];K(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,s){wo(t,(u,h)=>e[u]=h);for(const u of s)delete e[u]}clone(){return new Us(fe(this.value))}}function sd(i){const e=[];return wo(i.fields,(t,s)=>{const u=new Yr([t]);if(K(s)){const h=sd(s.mapValue).fields;if(0===h.length)e.push(u);else for(const m of h)e.push(u.child(m))}else e.push(u)}),new Io(e)}class Di{constructor(e,t,s,u,h,m,C){this.key=e,this.documentType=t,this.version=s,this.readTime=u,this.createTime=h,this.data=m,this.documentState=C}static newInvalidDocument(e){return new Di(e,0,mn.min(),mn.min(),mn.min(),Us.empty(),0)}static newFoundDocument(e,t,s,u){return new Di(e,1,t,mn.min(),s,u,0)}static newNoDocument(e,t){return new Di(e,2,t,mn.min(),mn.min(),Us.empty(),0)}static newUnknownDocument(e,t){return new Di(e,3,t,mn.min(),mn.min(),Us.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(mn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Us.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Us.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Di&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Di(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class la{constructor(e,t=null,s=[],u=[],h=null,m=null,C=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=u,this.limit=h,this.startAt=m,this.endAt=C,this.ft=null}}function od(i,e=null,t=[],s=[],u=null,h=null,m=null){return new la(i,e,t,s,u,h,m)}function Pu(i){const e=zt(i);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>xa(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(u=s).field.canonicalString()+u.dir;var u}).join(","),Ki(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Yo(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Yo(s)).join(",")),e.ft=t}return e.ft}function Fl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!Bg(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!td(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Hn(i.startAt,e.startAt)&&Hn(i.endAt,e.endAt)}function Ll(i){return kt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function pu(i,e){return i.filters.filter(t=>t instanceof xn&&t.field.isEqual(e))}function Dh(i,e,t){let s=er,u=!0;for(const h of pu(i,e)){let m=er,C=!0;switch(h.op){case"<":case"<=":m=rt(h.value);break;case"==":case"in":case">=":m=h.value;break;case">":m=h.value,C=!1;break;case"!=":case"not-in":m=er}hn({value:s,inclusive:u},{value:m,inclusive:C})<0&&(s=m,u=C)}if(null!==t)for(let h=0;h<i.orderBy.length;++h)if(i.orderBy[h].field.isEqual(e)){const m=t.position[h];hn({value:s,inclusive:u},{value:m,inclusive:t.inclusive})<0&&(s=m,u=t.inclusive);break}return{value:s,inclusive:u}}function uc(i,e,t){let s=Xt,u=!0;for(const h of pu(i,e)){let m=Xt,C=!0;switch(h.op){case">=":case">":m=Tt(h.value),C=!1;break;case"==":case"in":case"<=":m=h.value;break;case"<":m=h.value,C=!1;break;case"!=":case"not-in":m=Xt}bn({value:s,inclusive:u},{value:m,inclusive:C})>0&&(s=m,u=C)}if(null!==t)for(let h=0;h<i.orderBy.length;++h)if(i.orderBy[h].field.isEqual(e)){const m=t.position[h];bn({value:s,inclusive:u},{value:m,inclusive:t.inclusive})>0&&(s=m,u=t.inclusive);break}return{value:s,inclusive:u}}class Ka{constructor(e,t=null,s=[],u=[],h=null,m="F",C=null,F=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=u,this.limit=h,this.limitType=m,this.startAt=C,this.endAt=F,this.dt=null,this._t=null}}function lc(i,e,t,s,u,h,m,C){return new Ka(i,e,t,s,u,h,m,C)}function tl(i){return new Ka(i)}function cc(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function co(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Fu(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Ul(i){return null!==i.collectionGroup}function Ya(i){const e=zt(i);if(null===e.dt){e.dt=[];const t=Fu(e),s=co(e);if(null!==t&&null===s)t.isKeyField()||e.dt.push(new fu(t)),e.dt.push(new fu(Yr.keyField(),"asc"));else{let u=!1;for(const h of e.explicitOrderBy)e.dt.push(h),h.field.isKeyField()&&(u=!0);if(!u){const h=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new fu(Yr.keyField(),h))}}}return e.dt}function ni(i){const e=zt(i);if(!e._t)if("F"===e.limitType)e._t=od(e.path,e.collectionGroup,Ya(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const h of Ya(e))t.push(new fu(h.field,"desc"===h.dir?"asc":"desc"));const s=e.endAt?new un(e.endAt.position,e.endAt.inclusive):null,u=e.startAt?new un(e.startAt.position,e.startAt.inclusive):null;e._t=od(e.path,e.collectionGroup,t,e.filters,e.limit,s,u)}return e._t}function Lu(i,e){e.getFirstInequalityField(),Fu(i);const t=i.filters.concat([e]);return new Ka(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function Vl(i,e,t){return new Ka(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function nl(i,e){return Fl(ni(i),ni(e))&&i.limitType===e.limitType}function ad(i){return`${Pu(ni(i))}|lt:${i.limitType}`}function dc(i){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>nd(s)).join(", ")}]`),Ki(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(u=s).field.canonicalString()} (${u.dir})`;var u}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Yo(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Yo(s)).join(",")),`Target(${t})`}(ni(i))}; limitType=${i.limitType})`}function Th(i,e){return e.isFoundDocument()&&function(t,s){const u=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):kt.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,s){for(const u of Ya(t))if(!u.field.isKeyField()&&null===s.data.field(u.field))return!1;return!0}(i,e)&&function(t,s){for(const u of t.filters)if(!u.matches(s))return!1;return!0}(i,e)&&(s=e,!((t=i).startAt&&!function(u,h,m){const C=tr(u,h,m);return u.inclusive?C<=0:C<0}(t.startAt,Ya(t),s)||t.endAt&&!function(u,h,m){const C=tr(u,h,m);return u.inclusive?C>=0:C>0}(t.endAt,Ya(t),s)));var t,s}function Qa(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Sh(i){return(e,t)=>{let s=!1;for(const u of Ya(i)){const h=Ah(u,e,t);if(0!==h)return h;s=s||u.field.isKeyField()}return 0}}function Ah(i,e,t){const s=i.field.isKeyField()?kt.comparator(e.key,t.key):function(u,h,m){const C=h.data.field(u),F=m.data.field(u);return null!==C&&null!==F?Ci(C,F):jt()}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return jt()}}function hc(i,e){if(i.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ls(e)?"-0":e}}function xh(i){return{integerValue:""+i}}function rl(i,e){return b(e)?xh(e):hc(i,e)}class il{constructor(){this._=void 0}}function op(i,e,t){return i instanceof sl?function(s,u){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return u&&(h.fields.__previous_value__=u),{mapValue:h}}(t,e):i instanceof ca?fc(i,e):i instanceof gu?Vu(i,e):function(s,u){const h=Mh(s,u),m=ud(h)+ud(s.gt);return Ou(h)&&Ou(s.gt)?xh(m):hc(s.yt,m)}(i,e)}function Uu(i,e,t){return i instanceof ca?fc(i,e):i instanceof gu?Vu(i,e):t}function Mh(i,e){return i instanceof mu?Ou(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class sl extends il{}class ca extends il{constructor(e){super(),this.elements=e}}function fc(i,e){const t=ld(e);for(const s of i.elements)t.some(u=>oi(u,s))||t.push(s);return{arrayValue:{values:t}}}class gu extends il{constructor(e){super(),this.elements=e}}function Vu(i,e){let t=ld(e);for(const s of i.elements)t=t.filter(u=>!oi(u,s));return{arrayValue:{values:t}}}class mu extends il{constructor(e,t){super(),this.yt=e,this.gt=t}}function ud(i){return z(i.integerValue||i.doubleValue)}function ld(i){return Ta(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Ja{constructor(e,t){this.field=e,this.transform=t}}class up{constructor(e,t){this.version=e,this.transformResults=t}}class Ti{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ti}static exists(e){return new Ti(void 0,e)}static updateTime(e){return new Ti(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ol(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class pc{}function Rh(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new da(i.key,Ti.none()):new ju(i.key,i.data,Ti.none());{const t=i.data,s=Us.empty();let u=new vi(Yr.comparator);for(let h of e.fields)if(!u.has(h)){let m=t.field(h);null===m&&h.length>1&&(h=h.popLast(),m=t.field(h)),null===m?s.delete(h):s.set(h,m),u=u.add(h)}return new Xa(i.key,s,new Io(u.toArray()),Ti.none())}}function Bl(i,e,t){i instanceof ju?function(s,u,h){const m=s.value.clone(),C=dd(s.fieldTransforms,u,h.transformResults);m.setAll(C),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(i,e,t):i instanceof Xa?function(s,u,h){if(!ol(s.precondition,u))return void u.convertToUnknownDocument(h.version);const m=dd(s.fieldTransforms,u,h.transformResults),C=u.data;C.setAll(cd(s)),C.setAll(m),u.convertToFoundDocument(h.version,C).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Bu(i,e,t,s){return i instanceof ju?function(u,h,m,C){if(!ol(u.precondition,h))return m;const F=u.value.clone(),Z=yu(u.fieldTransforms,C,h);return F.setAll(Z),h.convertToFoundDocument(h.version,F).setHasLocalMutations(),null}(i,e,t,s):i instanceof Xa?function(u,h,m,C){if(!ol(u.precondition,h))return m;const F=yu(u.fieldTransforms,C,h),Z=h.data;return Z.setAll(cd(u)),Z.setAll(F),h.convertToFoundDocument(h.version,Z).setHasLocalMutations(),null===m?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(re=>re.field))}(i,e,t,s):(m=t,ol(i.precondition,h=e)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m);var h,m}function Oh(i,e){let t=null;for(const s of i.fieldTransforms){const u=e.data.field(s.field),h=Mh(s.transform,u||null);null!=h&&(null===t&&(t=Us.empty()),t.set(s.field,h))}return t||null}function gc(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===s||t&&s&&zo(t,s,(u,h)=>function ap(i,e){return i.field.isEqual(e.field)&&(s=e.transform,(t=i.transform)instanceof ca&&s instanceof ca||t instanceof gu&&s instanceof gu?zo(t.elements,s.elements,oi):t instanceof mu&&s instanceof mu?oi(t.gt,s.gt):t instanceof sl&&s instanceof sl);var t,s}(u,h))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,s}class ju extends pc{constructor(e,t,s,u=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class Xa extends pc{constructor(e,t,s,u,h=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=u,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function cd(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function dd(i,e,t){const s=new Map;Jt(i.length===t.length);for(let u=0;u<t.length;u++){const h=i[u],m=h.transform,C=e.data.field(h.field);s.set(h.field,Uu(m,C,t[u]))}return s}function yu(i,e,t){const s=new Map;for(const u of i){const h=u.transform,m=t.data.field(u.field);s.set(u.field,op(h,m,e))}return s}class da extends pc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mc extends pc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Nh{constructor(e){this.count=e}}var xs,Ar;function kh(i){switch(i){default:return jt();case ot.CANCELLED:case ot.UNKNOWN:case ot.DEADLINE_EXCEEDED:case ot.RESOURCE_EXHAUSTED:case ot.INTERNAL:case ot.UNAVAILABLE:case ot.UNAUTHENTICATED:return!1;case ot.INVALID_ARGUMENT:case ot.NOT_FOUND:case ot.ALREADY_EXISTS:case ot.PERMISSION_DENIED:case ot.FAILED_PRECONDITION:case ot.ABORTED:case ot.OUT_OF_RANGE:case ot.UNIMPLEMENTED:case ot.DATA_LOSS:return!0}}function hd(i){if(void 0===i)return vr("GRPC error has no .code"),ot.UNKNOWN;switch(i){case xs.OK:return ot.OK;case xs.CANCELLED:return ot.CANCELLED;case xs.UNKNOWN:return ot.UNKNOWN;case xs.DEADLINE_EXCEEDED:return ot.DEADLINE_EXCEEDED;case xs.RESOURCE_EXHAUSTED:return ot.RESOURCE_EXHAUSTED;case xs.INTERNAL:return ot.INTERNAL;case xs.UNAVAILABLE:return ot.UNAVAILABLE;case xs.UNAUTHENTICATED:return ot.UNAUTHENTICATED;case xs.INVALID_ARGUMENT:return ot.INVALID_ARGUMENT;case xs.NOT_FOUND:return ot.NOT_FOUND;case xs.ALREADY_EXISTS:return ot.ALREADY_EXISTS;case xs.PERMISSION_DENIED:return ot.PERMISSION_DENIED;case xs.FAILED_PRECONDITION:return ot.FAILED_PRECONDITION;case xs.ABORTED:return ot.ABORTED;case xs.OUT_OF_RANGE:return ot.OUT_OF_RANGE;case xs.UNIMPLEMENTED:return ot.UNIMPLEMENTED;case xs.DATA_LOSS:return ot.DATA_LOSS;default:return jt()}}(Ar=xs||(xs={}))[Ar.OK=0]="OK",Ar[Ar.CANCELLED=1]="CANCELLED",Ar[Ar.UNKNOWN=2]="UNKNOWN",Ar[Ar.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ar[Ar.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ar[Ar.NOT_FOUND=5]="NOT_FOUND",Ar[Ar.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ar[Ar.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ar[Ar.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ar[Ar.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ar[Ar.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ar[Ar.ABORTED=10]="ABORTED",Ar[Ar.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ar[Ar.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ar[Ar.INTERNAL=13]="INTERNAL",Ar[Ar.UNAVAILABLE=14]="UNAVAILABLE",Ar[Ar.DATA_LOSS=15]="DATA_LOSS";class Ma{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[u,h]of s)if(this.equalsFn(u,e))return h}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),u=this.inner[s];if(void 0===u)return this.inner[s]=[[e,t]],void this.innerSize++;for(let h=0;h<u.length;h++)if(this.equalsFn(u[h][0],e))return void(u[h]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return 1===s.length?delete this.inner[t]:s.splice(u,1),this.innerSize--,!0;return!1}forEach(e){wo(this.inner,(t,s)=>{for(const[u,h]of s)e(u,h)})}isEmpty(){return Wa(this.inner)}size(){return this.innerSize}}const yc=new is(kt.comparator);function Vs(){return yc}const _c=new is(kt.comparator);function _u(...i){let e=_c;for(const t of i)e=e.insert(t.key,t);return e}function $u(i){let e=_c;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function ha(){return fa()}function ho(){return fa()}function fa(){return new Ma(i=>i.toString(),(i,e)=>i.isEqual(e))}const vc=new is(kt.comparator),jl=new vi(kt.comparator);function sr(...i){let e=jl;for(const t of i)e=e.add(t);return e}const bc=new vi(Ln);function wc(){return bc}class al{constructor(e,t,s,u,h){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=u,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const u=new Map;return u.set(e,$l.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new al(mn.min(),u,wc(),Vs(),sr())}}class $l{constructor(e,t,s,u,h){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=u,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new $l(s,t,sr(),sr(),sr())}}class Jo{constructor(e,t,s,u){this.It=e,this.removedTargetIds=t,this.key=s,this.Tt=u}}class Ec{constructor(e,t){this.targetId=e,this.Et=t}}class Hl{constructor(e,t,s=y.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=u}}class Ic{constructor(){this.At=0,this.Rt=Co(),this.bt=y.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=sr(),t=sr(),s=sr();return this.Rt.forEach((u,h)=>{switch(h){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:s=s.add(u);break;default:jt()}}),new $l(this.bt,this.Pt,e,t,s)}xt(){this.vt=!1,this.Rt=Co()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class Hu{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Vs(),this.qt=fd(),this.Ut=new vi(Ln)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const s=this.Wt(t);switch(e.state){case 0:this.zt(t)&&s.Dt(e.resumeToken);break;case 1:s.Mt(),s.Vt||s.xt(),s.Dt(e.resumeToken);break;case 2:s.Mt(),s.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(s.Ft(),s.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),s.Dt(e.resumeToken));break;default:jt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((s,u)=>{this.zt(u)&&t(u)})}Jt(e){const t=e.targetId,s=e.Et.count,u=this.Yt(t);if(u){const h=u.target;if(Ll(h))if(0===s){const m=new kt(h.path);this.Qt(t,m,Di.newNoDocument(m,mn.min()))}else Jt(1===s);else this.Xt(t)!==s&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((h,m)=>{const C=this.Yt(m);if(C){if(h.current&&Ll(C.target)){const F=new kt(C.target.path);null!==this.Lt.get(F)||this.te(m,F)||this.Qt(m,F,Di.newNoDocument(F,e))}h.St&&(t.set(m,h.Ct()),h.xt())}});let s=sr();this.qt.forEach((h,m)=>{let C=!0;m.forEachWhile(F=>{const Z=this.Yt(F);return!Z||2===Z.purpose||(C=!1,!1)}),C&&(s=s.add(h))}),this.Lt.forEach((h,m)=>m.setReadTime(e));const u=new al(e,t,this.Ut,this.Lt,s);return this.Lt=Vs(),this.qt=fd(),this.Ut=new vi(Ln),u}Gt(e,t){if(!this.zt(e))return;const s=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,s),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,s){if(!this.zt(e))return;const u=this.Wt(e);this.te(e,t)?u.Nt(t,1):u.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),s&&(this.Lt=this.Lt.insert(t,s))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new Ic,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new vi(Ln),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||It("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new Ic),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function fd(){return new is(kt.comparator)}function Co(){return new is(kt.comparator)}const Ph={asc:"ASCENDING",desc:"DESCENDING"},pd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gd={and:"AND",or:"OR"};class eu{constructor(e,t){this.databaseId=e,this.wt=t}}function pa(i,e){return i.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ul(i,e){return i.wt?e.toBase64():e.toUint8Array()}function Cc(i,e){return pa(i,e.toTimestamp())}function Yi(i){return Jt(!!i),mn.fromTimestamp(function(e){const t=N(e);return new Kn(t.seconds,t.nanos)}(i))}function ll(i,e){return(t=i,new Gn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function md(i){const e=Gn.fromString(i);return Jt(vd(e)),e}function cl(i,e){return ll(i.databaseId,e.path)}function Ra(i,e){const t=md(e);if(t.get(1)!==i.databaseId.projectId)throw new wt(ot.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new wt(ot.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new kt(p(t))}function yd(i,e){return ll(i.databaseId,e)}function _(i){const e=md(i);return 4===e.length?Gn.emptyPath():p(e)}function d(i){return new Gn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function p(i){return Jt(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function w(i,e,t){return{name:cl(i,e),fields:t.value.mapValue.fields}}function B(i,e,t){const s=Ra(i,e.name),u=Yi(e.updateTime),h=e.createTime?Yi(e.createTime):mn.min(),m=new Us({mapValue:{fields:e.fields}}),C=Di.newFoundDocument(s,u,h,m);return t&&C.setHasCommittedMutations(),t?C.setHasCommittedMutations():C}function dt(i,e){let t;if(e instanceof ju)t={update:w(i,e.key,e.value)};else if(e instanceof da)t={delete:cl(i,e.key)};else if(e instanceof Xa)t={update:w(i,e.key,e.data),updateMask:_d(e.fieldMask)};else{if(!(e instanceof mc))return jt();t={verify:cl(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(u,h){const m=h.transform;if(m instanceof sl)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof ca)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof gu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof mu)return{fieldPath:h.field.canonicalString(),increment:m.gt};throw jt()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:Cc(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:jt()),t;var u}function Vt(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?Ti.updateTime(Yi(u.updateTime)):void 0!==u.exists?Ti.exists(u.exists):Ti.none():Ti.none(),s=e.updateTransforms?e.updateTransforms.map(u=>function(h,m){let C=null;"setToServerValue"in m?(Jt("REQUEST_TIME"===m.setToServerValue),C=new sl):"appendMissingElements"in m?C=new ca(m.appendMissingElements.values||[]):"removeAllFromArray"in m?C=new gu(m.removeAllFromArray.values||[]):"increment"in m?C=new mu(h,m.increment):jt();const F=Yr.fromServerFormat(m.fieldPath);return new Ja(F,C)}(i,u)):[];var u;if(e.update){const u=Ra(i,e.update.name),h=new Us({mapValue:{fields:e.update.fields}});if(e.updateMask){const m=new Io((e.updateMask.fieldPaths||[]).map(Z=>Yr.fromServerFormat(Z)));return new Xa(u,h,m,t,s)}return new ju(u,h,t,s)}if(e.delete){const u=Ra(i,e.delete);return new da(u,t)}if(e.verify){const u=Ra(i,e.verify);return new mc(u,t)}return jt()}function Un(i,e){return{documents:[yd(i,e.path)]}}function Cn(i,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=yd(i,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=yd(i,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const u=function(F){if(0!==F.length)return Dc(Nr.create(F,"and"))}(e.filters);u&&(t.structuredQuery.where=u);const h=function(F){if(0!==F.length)return F.map(Z=>{return{field:ma((re=Z).field),direction:Fh(re.dir)};var re})}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const m=(Z=e.limit,i.wt||Ki(Z)?Z:{value:Z});var Z,C,F;return null!==m&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt={before:(C=e.startAt).inclusive,values:C.position}),e.endAt&&(t.structuredQuery.endAt={before:!(F=e.endAt).inclusive,values:F.position}),t}function gs(i){let e=_(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let u=null;if(s>0){Jt(1===s);const re=t.from[0];re.allDescendants?u=re.collectionId:e=e.child(re.collectionId)}let h=[];t.where&&(h=function(re){const ve=Zl(re);return ve instanceof Nr&&Oo(ve)?ve.getFilters():[ve]}(t.where));let m=[];t.orderBy&&(m=t.orderBy.map(re=>{return new fu(tu((ve=re).field),function(Ke){switch(Ke){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ve.direction));var ve}));let C=null;t.limit&&(C=function(re){let ve;return ve="object"==typeof re?re.value:re,Ki(ve)?null:ve}(t.limit));let F=null;var re;t.startAt&&(F=new un((re=t.startAt).values||[],!!re.before));let Z=null;return t.endAt&&(Z=function(re){return new un(re.values||[],!re.before)}(t.endAt)),lc(e,u,m,h,C,"F",F,Z)}function Zl(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=tu(e.unaryFilter.field);return xn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=tu(e.unaryFilter.field);return xn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=tu(e.unaryFilter.field);return xn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=tu(e.unaryFilter.field);return xn.create(h,"!=",{nullValue:"NULL_VALUE"});default:return jt()}}(i):void 0!==i.fieldFilter?xn.create(tu((e=i).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return jt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return Nr.create(e.compositeFilter.filters.map(t=>Zl(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return jt()}}(e.compositeFilter.op))}(i):jt();var e}function Fh(i){return Ph[i]}function Gl(i){return pd[i]}function Oa(i){return gd[i]}function ma(i){return{fieldPath:i.canonicalString()}}function tu(i){return Yr.fromServerFormat(i.fieldPath)}function Dc(i){return i instanceof xn?function(e){if("=="===e.op){if(k(e.value))return{unaryFilter:{field:ma(e.field),op:"IS_NAN"}};if(O(e.value))return{unaryFilter:{field:ma(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(k(e.value))return{unaryFilter:{field:ma(e.field),op:"IS_NOT_NAN"}};if(O(e.value))return{unaryFilter:{field:ma(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ma(e.field),op:Gl(e.op),value:e.value}}}(i):i instanceof Nr?function(e){const t=e.getFilters().map(s=>Dc(s));return 1===t.length?t[0]:{compositeFilter:{op:Oa(e.op),filters:t}}}(i):jt()}function _d(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function vd(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Do(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=dl(e)),e=jg(i.get(t),e);return dl(e)}function jg(i,e){let t=e;const s=i.length;for(let u=0;u<s;u++){const h=i.charAt(u);switch(h){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=h}}return t}function dl(i){return i+"\x01\x01"}function Xo(i){const e=i.length;if(Jt(e>=2),2===e)return Jt("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Gn.emptyPath();const t=e-2,s=[];let u="";for(let h=0;h<e;){const m=i.indexOf("\x01",h);switch((m<0||m>t)&&jt(),i.charAt(m+1)){case"\x01":const C=i.substring(h,m);let F;0===u.length?F=C:(u+=C,F=u,u=""),s.push(F);break;case"\x10":u+=i.substring(h,m),u+="\0";break;case"\x11":u+=i.substring(h,m+1);break;default:jt()}h=m+2}return new Gn(s)}const Ly=["userId","batchId"];function lp(i,e){return[i,Do(e)]}function cp(i,e,t){return[i,Do(e),t]}const Uy={},Vy=["prefixPath","collectionGroup","readTime","documentId"],By=["prefixPath","collectionGroup","documentId"],jy=["collectionGroup","readTime","prefixPath","documentId"],$g=["canonicalId","targetId"],Lh=["targetId","path"],$y=["path","targetId"],dp=["collectionId","parent"],Hy=["indexId","uid"],Bs=["uid","sequenceNumber"],Zy=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Gy=["indexId","uid","orderedDocumentKey"],hp=["userId","collectionPath","documentId"],Hg=["userId","collectionPath","largestBatchId"],zy=["userId","collectionGroup","largestBatchId"],Zg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],qy=[...Zg,"documentOverlays"],Gg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fp=Gg,Xv=[...fp,"indexConfiguration","indexState","indexEntries"];class zg extends aa{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function ms(i,e){const t=zt(i);return oo.M(t.se,e)}class bd{constructor(e,t,s,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=u}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const h=this.mutations[u];h.key.isEqual(e.key)&&Bl(h,e,s[u])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Bu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Bu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=ho();return this.mutations.forEach(u=>{const h=e.get(u.key),m=h.overlayedDocument;let C=this.applyToLocalView(m,h.mutatedFields);C=t.has(u.key)?null:C;const F=Rh(m,C);null!==F&&s.set(u.key,F),m.isValidDocument()||m.convertToNoDocument(mn.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),sr())}isEqual(e){return this.batchId===e.batchId&&zo(this.mutations,e.mutations,(t,s)=>gc(t,s))&&zo(this.baseMutations,e.baseMutations,(t,s)=>gc(t,s))}}class Uh{constructor(e,t,s,u){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=u}static from(e,t,s){Jt(e.mutations.length===s.length);let u=vc;const h=e.mutations;for(let m=0;m<h.length;m++)u=u.insert(h[m].key,s[m].version);return new Uh(e,t,s,u)}}class Vh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Zu{constructor(e,t,s,u,h=mn.min(),m=mn.min(),C=y.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=u,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=C}withSequenceNumber(e){return new Zu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Zu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Zu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Wy{constructor(e){this.ie=e}}function pp(i,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:wd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:cl(u=i.ie,(h=e).key),fields:h.data.value.mapValue.fields,updateTime:pa(u,h.version.toTimestamp()),createTime:pa(u,h.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:Gu(e.version)};else{if(!e.isUnknownDocument())return jt();s.unknownDocument={path:t.path.toArray(),version:Gu(e.version)}}var u,h;return s}function wd(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Gu(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Tc(i){const e=new Kn(i.seconds,i.nanoseconds);return mn.fromTimestamp(e)}function zu(i,e){const t=(e.baseMutations||[]).map(h=>Vt(i.ie,h));for(let h=0;h<e.mutations.length-1;++h){const m=e.mutations[h];h+1<e.mutations.length&&void 0!==e.mutations[h+1].transform&&(m.updateTransforms=e.mutations[h+1].transform.fieldTransforms,e.mutations.splice(h+1,1),++h)}const s=e.mutations.map(h=>Vt(i.ie,h)),u=Kn.fromMillis(e.localWriteTimeMs);return new bd(e.batchId,u,t,s)}function Ed(i){const e=Tc(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Tc(i.lastLimboFreeSnapshotVersion):mn.min();let s;var u;return void 0!==i.query.documents?(Jt(1===(u=i.query).documents.length),s=ni(tl(_(u.documents[0])))):s=ni(gs(i.query)),new Zu(s,i.targetId,0,i.lastListenSequenceNumber,e,t,y.fromBase64String(i.resumeToken))}function Bh(i,e){const t=Gu(e.snapshotVersion),s=Gu(e.lastLimboFreeSnapshotVersion);let u;u=Ll(e.target)?Un(i.ie,e.target):Cn(i.ie,e.target);const h=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Pu(e.target),readTime:t,resumeToken:h,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:u}}function jh(i){const e=gs({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Vl(e,e.limit,"L"):e}function $h(i,e){return new Vh(e.largestBatchId,Vt(i.ie,e.overlayMutation))}function hl(i,e){const t=e.path.lastSegment();return[i,Do(e.path.popLast()),t]}function qg(i,e,t,s){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:Gu(s.readTime),documentKey:Do(s.documentKey.path),largestBatchId:s.largestBatchId}}class gp{getBundleMetadata(e,t){return Id(e).get(t).next(s=>{if(s)return{id:(u=s).bundleId,createTime:Tc(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return Id(e).put({bundleId:(s=t).id,createTime:Gu(Yi(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return Wg(e).get(t).next(s=>{if(s)return{name:(u=s).name,query:jh(u.bundledQuery),readTime:Tc(u.readTime)};var u})}saveNamedQuery(e,t){return Wg(e).put({name:(s=t).name,readTime:Gu(Yi(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Id(i){return ms(i,"bundles")}function Wg(i){return ms(i,"namedQueries")}class Sc{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new Sc(e,t.uid||"")}getOverlay(e,t){return fl(e).get(hl(this.userId,t)).next(s=>s?$h(this.yt,s):null)}getOverlays(e,t){const s=ha();return tt.forEach(t,u=>this.getOverlay(e,u).next(h=>{null!==h&&s.set(u,h)})).next(()=>s)}saveOverlays(e,t,s){const u=[];return s.forEach((h,m)=>{const C=new Vh(t,m);u.push(this.oe(e,C))}),tt.waitFor(u)}removeOverlaysForBatchId(e,t,s){const u=new Set;t.forEach(m=>u.add(Do(m.getCollectionPath())));const h=[];return u.forEach(m=>{const C=IDBKeyRange.bound([this.userId,m,s],[this.userId,m,s+1],!1,!0);h.push(fl(e).Y("collectionPathOverlayIndex",C))}),tt.waitFor(h)}getOverlaysForCollection(e,t,s){const u=ha(),h=Do(t),m=IDBKeyRange.bound([this.userId,h,s],[this.userId,h,Number.POSITIVE_INFINITY],!0);return fl(e).W("collectionPathOverlayIndex",m).next(C=>{for(const F of C){const Z=$h(this.yt,F);u.set(Z.getKey(),Z)}return u})}getOverlaysForCollectionGroup(e,t,s,u){const h=ha();let m;const C=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return fl(e).Z({index:"collectionGroupOverlayIndex",range:C},(F,Z,re)=>{const ve=$h(this.yt,Z);h.size()<u||ve.largestBatchId===m?(h.set(ve.getKey(),ve),m=ve.largestBatchId):re.done()}).next(()=>h)}oe(e,t){return fl(e).put(function(s,u,h){const[m,C,F]=hl(u,h.mutation.key);return{userId:u,collectionPath:C,documentId:F,collectionGroup:h.mutation.key.getCollectionGroup(),largestBatchId:h.largestBatchId,overlayMutation:dt(s.ie,h.mutation)}}(this.yt,this.userId,t))}}function fl(i){return ms(i,"documentOverlays")}class ya{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(z(e.integerValue));else if("doubleValue"in e){const s=z(e.doubleValue);isNaN(s)?this.he(t,13):(this.he(t,15),Ls(s)?t.le(0):t.le(s))}else if("timestampValue"in e){const s=e.timestampValue;this.he(t,20),"string"==typeof s?t.fe(s):(t.fe(`${s.seconds||""}`),t.le(s.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(X(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.he(t,45),t.le(s.latitude||0),t.le(s.longitude||0)}else"mapValue"in e?Ve(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):jt()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const s=e.fields||{};this.he(t,55);for(const u of Object.keys(s))this.de(u,t),this.ce(s[u],t)}ye(e,t){const s=e.values||[];this.he(t,50);for(const u of s)this.ce(u,t)}me(e,t){this.he(t,37),kt.fromName(e).path.forEach(s=>{this.he(t,60),this.pe(s,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function Kg(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Hh(i){const e=64-function(t){let s=0;for(let u=0;u<8;++u){const h=Kg(255&t[u]);if(s+=h,8!==h)break}return s}(i);return Math.ceil(e/8)}ya.Ie=new ya;class Yy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ee(s.value),s=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.be(s.value),s=t.next();this.Pe()}ve(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ee(s);else if(s<2048)this.Ee(960|s>>>6),this.Ee(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|s>>>12),this.Ee(128|63&s>>>6),this.Ee(128|63&s);else{const u=t.codePointAt(0);this.Ee(240|u>>>18),this.Ee(128|63&u>>>12),this.Ee(128|63&u>>>6),this.Ee(128|63&u)}}this.Ae()}Ve(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.be(s);else if(s<2048)this.be(960|s>>>6),this.be(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.be(480|s>>>12),this.be(128|63&s>>>6),this.be(128|63&s);else{const u=t.codePointAt(0);this.be(240|u>>>18),this.be(128|63&u>>>12),this.be(128|63&u>>>6),this.be(128|63&u)}}this.Pe()}Se(e){const t=this.De(e),s=Hh(t);this.Ce(1+s),this.buffer[this.position++]=255&s;for(let u=t.length-s;u<t.length;++u)this.buffer[this.position++]=255&t[u]}xe(e){const t=this.De(e),s=Hh(t);this.Ce(1+s),this.buffer[this.position++]=~(255&s);for(let u=t.length-s;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(u){const h=new DataView(new ArrayBuffer(8));return h.setFloat64(0,u,!1),new Uint8Array(h.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let u=1;u<t.length;++u)t[u]^=s?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const u=new Uint8Array(s);u.set(this.buffer),this.buffer=u}}class Qy{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class Yg{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class vu{constructor(){this.$e=new Yy,this.Be=new Qy(this.$e),this.Le=new Yg(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class zl{constructor(e,t,s,u){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=u}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new zl(this.indexId,this.documentKey,this.arrayValue,s)}}function pl(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Qg(i.arrayValue,e.arrayValue),0!==t?t:(t=Qg(i.directionalValue,e.directionalValue),0!==t?t:kt.comparator(i.documentKey,e.documentKey)))}function Qg(i,e){for(let t=0;t<i.length&&t<e.length;++t){const s=i[t]-e[t];if(0!==s)return s}return i.length-e.length}class mp{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const s=t;s.isInequality()?this.Qe=s:this.Ge.push(s)}}je(e){Jt(e.collectionGroup===this.collectionId);const t=Ha(e);if(void 0!==t&&!this.We(t))return!1;const s=Wi(e);let u=0,h=0;for(;u<s.length&&this.We(s[u]);++u);if(u===s.length)return!0;if(void 0!==this.Qe){const m=s[u];if(!this.ze(this.Qe,m)||!this.He(this.Ke[h++],m))return!1;++u}for(;u<s.length;++u){const m=s[u];if(h>=this.Ke.length||!this.He(this.Ke[h++],m))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Jg(i){var e,t;if(Jt(i instanceof xn||i instanceof Nr),i instanceof xn){if(i instanceof Nu){const u=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(h=>xn.create(i.field,"==",h)))||[];return Nr.create(u,"or")}return i}const s=i.filters.map(u=>Jg(u));return Nr.create(s,i.op)}function Xg(i){if(0===i.getFilters().length)return[];const e=_p(Jg(i));return Jt(Jy(e)),yp(e)||Zh(e)?[e]:e.getFilters()}function yp(i){return i instanceof xn}function Zh(i){return i instanceof Nr&&Oo(i)}function Jy(i){return yp(i)||Zh(i)||function(e){if(e instanceof Nr&&Aa(e)){for(const t of e.getFilters())if(!yp(t)&&!Zh(t))return!1;return!0}return!1}(i)}function _p(i){if(Jt(i instanceof xn||i instanceof Nr),i instanceof xn)return i;if(1===i.filters.length)return _p(i.filters[0]);const e=i.filters.map(s=>_p(s));let t=Nr.create(e,i.op);return t=qu(t),Jy(t)?t:(Jt(t instanceof Nr),Jt(Sa(t)),Jt(t.filters.length>1),t.filters.reduce((s,u)=>ql(s,u)))}function ql(i,e){let t;return Jt(i instanceof xn||i instanceof Nr),Jt(e instanceof xn||e instanceof Nr),t=i instanceof xn?e instanceof xn?Nr.create([i,e],"and"):em(i,e):e instanceof xn?em(e,i):function(s,u){if(Jt(s.filters.length>0&&u.filters.length>0),Sa(s)&&Sa(u))return Eh(s,u.getFilters());const h=Aa(s)?s:u,m=Aa(s)?u:s,C=h.filters.map(F=>ql(F,m));return Nr.create(C,"or")}(i,e),qu(t)}function em(i,e){if(Sa(e))return Eh(e,i.getFilters());{const t=e.filters.map(s=>ql(i,s));return Nr.create(t,"or")}}function qu(i){if(Jt(i instanceof xn||i instanceof Nr),i instanceof xn)return i;const e=i.getFilters();if(1===e.length)return qu(e[0]);if(Qo(i))return i;const t=e.map(u=>qu(u)),s=[];return t.forEach(u=>{u instanceof xn?s.push(u):u instanceof Nr&&(u.op===i.op?s.push(...u.filters):s.push(u))}),1===s.length?s[0]:Nr.create(s,i.op)}class Cd{constructor(){this.Je=new vp}addToCollectionParentIndex(e,t){return this.Je.add(t),tt.resolve()}getCollectionParents(e,t){return tt.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return tt.resolve()}deleteFieldIndex(e,t){return tt.resolve()}getDocumentsMatchingTarget(e,t){return tt.resolve(null)}getIndexType(e,t){return tt.resolve(0)}getFieldIndexes(e,t){return tt.resolve([])}getNextCollectionGroupToUpdate(e){return tt.resolve(null)}getMinOffset(e,t){return tt.resolve(Ss.min())}getMinOffsetFromCollectionGroup(e,t){return tt.resolve(Ss.min())}updateCollectionGroup(e,t,s){return tt.resolve()}updateIndexEntries(e,t){return tt.resolve()}}class vp{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),u=this.index[t]||new vi(Gn.comparator),h=!u.has(s);return this.index[t]=u.add(s),h}has(e){const t=e.lastSegment(),s=e.popLast(),u=this.index[t];return u&&u.has(s)}getEntries(e){return(this.index[e]||new vi(Gn.comparator)).toArray()}}const Dd=new Uint8Array(0);class Xy{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new vp,this.Xe=new Ma(s=>Pu(s),(s,u)=>Fl(s,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const s=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const h={collectionId:s,parent:Do(u)};return tm(e).put(h)}return tt.resolve()}getCollectionParents(e,t){const s=[],u=IDBKeyRange.bound([t,""],[Mu(t),""],!1,!0);return tm(e).W(u).next(h=>{for(const m of h){if(m.collectionId!==t)break;s.push(Xo(m.parent))}return s})}addFieldIndex(e,t){const s=Sd(e),u={indexId:(m=t).indexId,collectionGroup:m.collectionGroup,fields:m.fields.map(C=>[C.fieldPath.canonicalString(),C.kind])};var m;delete u.indexId;const h=s.add(u);if(t.indexState){const m=Ac(e);return h.next(C=>{m.put(qg(C,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return h.next()}deleteFieldIndex(e,t){const s=Sd(e),u=Ac(e),h=Td(e);return s.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>h.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=Td(e);let u=!0;const h=new Map;return tt.forEach(this.Ze(t),m=>this.tn(e,m).next(C=>{u&&(u=!!C),h.set(m,C)})).next(()=>{if(u){let m=sr();const C=[];return tt.forEach(h,(F,Z)=>{var re;It("IndexedDbIndexManager",`Using index ${re=F,`id=${re.indexId}|cg=${re.collectionGroup}|f=${re.fields.map(jr=>`${jr.fieldPath}:${jr.kind}`).join(",")}`} to execute ${Pu(t)}`);const ve=function(jr,Oi){const zr=Ha(Oi);if(void 0===zr)return null;for(const ri of pu(jr,zr.fieldPath))switch(ri.op){case"array-contains-any":return ri.value.arrayValue.values||[];case"array-contains":return[ri.value]}return null}(Z,F),Ke=function(jr,Oi){const zr=new Map;for(const ri of Wi(Oi))for(const mo of pu(jr,ri.fieldPath))switch(mo.op){case"==":case"in":zr.set(ri.fieldPath.canonicalString(),mo.value);break;case"not-in":case"!=":return zr.set(ri.fieldPath.canonicalString(),mo.value),Array.from(zr.values())}return null}(Z,F),bt=function(jr,Oi){const zr=[];let ri=!0;for(const mo of Wi(Oi)){const Xc=0===mo.kind?Dh(jr,mo.fieldPath,jr.startAt):uc(jr,mo.fieldPath,jr.startAt);zr.push(Xc.value),ri&&(ri=Xc.inclusive)}return new un(zr,ri)}(Z,F),St=function(jr,Oi){const zr=[];let ri=!0;for(const mo of Wi(Oi)){const Xc=0===mo.kind?uc(jr,mo.fieldPath,jr.endAt):Dh(jr,mo.fieldPath,jr.endAt);zr.push(Xc.value),ri&&(ri=Xc.inclusive)}return new un(zr,ri)}(Z,F),en=this.en(F,Z,bt),Dn=this.en(F,Z,St),hi=this.nn(F,Z,Ke),Qi=this.sn(F.indexId,ve,en,bt.inclusive,Dn,St.inclusive,hi);return tt.forEach(Qi,jr=>s.J(jr,t.limit).next(Oi=>{Oi.forEach(zr=>{const ri=kt.fromSegments(zr.documentKey);m.has(ri)||(m=m.add(ri),C.push(ri))})}))}).next(()=>C)}return tt.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:Xg(Nr.create(e.filters,"and")).map(s=>od(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,s,u,h,m,C){const F=(null!=t?t.length:1)*Math.max(s.length,h.length),Z=F/(null!=t?t.length:1),re=[];for(let ve=0;ve<F;++ve){const Ke=t?this.rn(t[ve/Z]):Dd,bt=this.on(e,Ke,s[ve%Z],u),St=this.un(e,Ke,h[ve%Z],m),en=C.map(Dn=>this.on(e,Ke,Dn,!0));re.push(...this.createRange(bt,St,en))}return re}on(e,t,s,u){const h=new zl(e,kt.empty(),t,s);return u?h:h.Ue()}un(e,t,s,u){const h=new zl(e,kt.empty(),t,s);return u?h.Ue():h}tn(e,t){const s=new mp(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(h=>{let m=null;for(const C of h)s.je(C)&&(!m||C.fields.length>m.fields.length)&&(m=C);return m})}getIndexType(e,t){let s=2;const u=this.Ze(t);return tt.forEach(u,h=>this.tn(e,h).next(m=>{m?0!==s&&m.fields.length<function(C){let F=new vi(Yr.comparator),Z=!1;for(const re of C.filters)for(const ve of re.getFlattenedFilters())ve.field.isKeyField()||("array-contains"===ve.op||"array-contains-any"===ve.op?Z=!0:F=F.add(ve.field));for(const re of C.orderBy)re.field.isKeyField()||(F=F.add(re.field));return F.size+(Z?1:0)}(h)&&(s=1):s=0})).next(()=>null!==t.limit&&u.length>1&&2===s?1:s)}cn(e,t){const s=new vu;for(const u of Wi(e)){const h=t.data.field(u.fieldPath);if(null==h)return null;const m=s.qe(u.kind);ya.Ie.ue(h,m)}return s.Fe()}rn(e){const t=new vu;return ya.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const s=new vu;return ya.Ie.ue(Eo(this.databaseId,t),s.qe(function(u){const h=Wi(u);return 0===h.length?0:h[h.length-1].kind}(e))),s.Fe()}nn(e,t,s){if(null===s)return[];let u=[];u.push(new vu);let h=0;for(const m of Wi(e)){const C=s[h++];for(const F of u)if(this.hn(t,m.fieldPath)&&Ta(C))u=this.ln(u,m,C);else{const Z=F.qe(m.kind);ya.Ie.ue(C,Z)}}return this.fn(u)}en(e,t,s){return this.nn(e,t,s.position)}fn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Fe();return t}ln(e,t,s){const u=[...e],h=[];for(const m of s.arrayValue.values||[])for(const C of u){const F=new vu;F.seed(C.Fe()),ya.Ie.ue(m,F.qe(t.kind)),h.push(F)}return h}hn(e,t){return!!e.filters.find(s=>s instanceof xn&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=Sd(e),u=Ac(e);return(t?s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.W()).next(h=>{const m=[];return tt.forEach(h,C=>u.get([C.indexId,this.uid]).next(F=>{m.push(function(Z,re){const ve=re?new Wo(re.sequenceNumber,new Ss(Tc(re.readTime),new kt(Xo(re.documentKey)),re.largestBatchId)):Wo.empty(),Ke=Z.fields.map(([bt,St])=>new qo(Yr.fromServerFormat(bt),St));return new $a(Z.indexId,Z.collectionGroup,Ke,ve)}(C,F))})).next(()=>m)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,u)=>{const h=s.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==h?h:Ln(s.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const u=Sd(e),h=Ac(e);return this.dn(e).next(m=>u.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(C=>tt.forEach(C,F=>h.put(qg(F.indexId,this.user,m,s)))))}updateIndexEntries(e,t){const s=new Map;return tt.forEach(t,(u,h)=>{const m=s.get(u.collectionGroup);return(m?tt.resolve(m):this.getFieldIndexes(e,u.collectionGroup)).next(C=>(s.set(u.collectionGroup,C),tt.forEach(C,F=>this._n(e,u,F).next(Z=>{const re=this.wn(h,F);return Z.isEqual(re)?tt.resolve():this.mn(e,h,F,Z,re)}))))})}gn(e,t,s,u){return Td(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.an(s,t.key),documentKey:t.key.path.toArray()})}yn(e,t,s,u){return Td(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.an(s,t.key),t.key.path.toArray()])}_n(e,t,s){const u=Td(e);let h=new vi(pl);return u.Z({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.an(s,t)])},(m,C)=>{h=h.add(new zl(s.indexId,t,C.arrayValue,C.directionalValue))}).next(()=>h)}wn(e,t){let s=new vi(pl);const u=this.cn(t,e);if(null==u)return s;const h=Ha(t);if(null!=h){const m=e.data.field(h.fieldPath);if(Ta(m))for(const C of m.arrayValue.values||[])s=s.add(new zl(t.indexId,e.key,this.rn(C),u))}else s=s.add(new zl(t.indexId,e.key,Dd,u));return s}mn(e,t,s,u,h){It("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const m=[];return function(C,F,Z,re,ve){const Ke=C.getIterator(),bt=F.getIterator();let St=ku(Ke),en=ku(bt);for(;St||en;){let Dn=!1,hi=!1;if(St&&en){const Qi=Z(St,en);Qi<0?hi=!0:Qi>0&&(Dn=!0)}else null!=St?hi=!0:Dn=!0;Dn?(re(en),en=ku(bt)):hi?(ve(St),St=ku(Ke)):(St=ku(Ke),en=ku(bt))}}(u,h,pl,C=>{m.push(this.gn(e,t,s,C))},C=>{m.push(this.yn(e,t,s,C))}),tt.waitFor(m)}dn(e){let t=1;return Ac(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,u,h)=>{h.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((m,C)=>pl(m,C)).filter((m,C,F)=>!C||0!==pl(m,F[C-1]));const u=[];u.push(e);for(const m of s){const C=pl(m,e),F=pl(m,t);if(0===C)u[0]=e.Ue();else if(C>0&&F<0)u.push(m),u.push(m.Ue());else if(F>0)break}u.push(t);const h=[];for(let m=0;m<u.length;m+=2){if(this.pn(u[m],u[m+1]))return[];h.push(IDBKeyRange.bound([u[m].indexId,this.uid,u[m].arrayValue,u[m].directionalValue,Dd,[]],[u[m+1].indexId,this.uid,u[m+1].arrayValue,u[m+1].directionalValue,Dd,[]]))}return h}pn(e,t){return pl(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Gh)}getMinOffset(e,t){return tt.mapArray(this.Ze(t),s=>this.tn(e,s).next(u=>u||jt())).next(Gh)}}function tm(i){return ms(i,"collectionParents")}function Td(i){return ms(i,"indexEntries")}function Sd(i){return ms(i,"indexConfiguration")}function Ac(i){return ms(i,"indexState")}function Gh(i){Jt(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<i.length;s++){const u=i[s].indexState.offset;Uo(u,e)<0&&(e=u),t<u.largestBatchId&&(t=u.largestBatchId)}return new Ss(e.readTime,e.documentKey,t)}const zh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ea{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new ea(e,ea.DEFAULT_COLLECTION_PERCENTILE,ea.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function qh(i,e,t){const s=i.store("mutations"),u=i.store("documentMutations"),h=[],m=IDBKeyRange.only(t.batchId);let C=0;const F=s.Z({range:m},(re,ve,Ke)=>(C++,Ke.delete()));h.push(F.next(()=>{Jt(1===C)}));const Z=[];for(const re of t.mutations){const ve=cp(e,re.key.path,t.batchId);h.push(u.delete(ve)),Z.push(re.key)}return tt.waitFor(h).next(()=>Z)}function gl(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw jt();e=i.noDocument}return JSON.stringify(e).length}ea.DEFAULT_COLLECTION_PERCENTILE=10,ea.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ea.DEFAULT=new ea(41943040,ea.DEFAULT_COLLECTION_PERCENTILE,ea.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ea.DISABLED=new ea(-1,0,0);class Wh{constructor(e,t,s,u){this.userId=e,this.yt=t,this.indexManager=s,this.referenceDelegate=u,this.In={}}static re(e,t,s,u){Jt(""!==e.uid);const h=e.isAuthenticated()?e.uid:"";return new Wh(h,t,s,u)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ml(e).Z({index:"userMutationsIndex",range:s},(u,h,m)=>{t=!1,m.done()}).next(()=>t)}addMutationBatch(e,t,s,u){const h=xc(e),m=ml(e);return m.add({}).next(C=>{Jt("number"==typeof C);const F=new bd(C,t,s,u),Z=function(Ke,bt,St){const en=St.baseMutations.map(hi=>dt(Ke.ie,hi)),Dn=St.mutations.map(hi=>dt(Ke.ie,hi));return{userId:bt,batchId:St.batchId,localWriteTimeMs:St.localWriteTime.toMillis(),baseMutations:en,mutations:Dn}}(this.yt,this.userId,F),re=[];let ve=new vi((Ke,bt)=>Ln(Ke.canonicalString(),bt.canonicalString()));for(const Ke of u){const bt=cp(this.userId,Ke.key.path,C);ve=ve.add(Ke.key.path.popLast()),re.push(m.put(Z)),re.push(h.put(bt,Uy))}return ve.forEach(Ke=>{re.push(this.indexManager.addToCollectionParentIndex(e,Ke))}),e.addOnCommittedListener(()=>{this.In[C]=F.keys()}),tt.waitFor(re).next(()=>F)})}lookupMutationBatch(e,t){return ml(e).get(t).next(s=>s?(Jt(s.userId===this.userId),zu(this.yt,s)):null)}Tn(e,t){return this.In[t]?tt.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const u=s.keys();return this.In[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,u=IDBKeyRange.lowerBound([this.userId,s]);let h=null;return ml(e).Z({index:"userMutationsIndex",range:u},(m,C,F)=>{C.userId===this.userId&&(Jt(C.batchId>=s),h=zu(this.yt,C)),F.done()}).next(()=>h)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return ml(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(u,h,m)=>{s=h.batchId,m.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ml(e).W("userMutationsIndex",t).next(s=>s.map(u=>zu(this.yt,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=lp(this.userId,t.path),u=IDBKeyRange.lowerBound(s),h=[];return xc(e).Z({range:u},(m,C,F)=>{const[Z,re,ve]=m,Ke=Xo(re);if(Z===this.userId&&t.path.isEqual(Ke))return ml(e).get(ve).next(bt=>{if(!bt)throw jt();Jt(bt.userId===this.userId),h.push(zu(this.yt,bt))});F.done()}).next(()=>h)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new vi(Ln);const u=[];return t.forEach(h=>{const m=lp(this.userId,h.path),C=IDBKeyRange.lowerBound(m),F=xc(e).Z({range:C},(Z,re,ve)=>{const[Ke,bt,St]=Z,en=Xo(bt);Ke===this.userId&&h.path.isEqual(en)?s=s.add(St):ve.done()});u.push(F)}),tt.waitFor(u).next(()=>this.En(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,u=s.length+1,h=lp(this.userId,s),m=IDBKeyRange.lowerBound(h);let C=new vi(Ln);return xc(e).Z({range:m},(F,Z,re)=>{const[ve,Ke,bt]=F,St=Xo(Ke);ve===this.userId&&s.isPrefixOf(St)?St.length===u&&(C=C.add(bt)):re.done()}).next(()=>this.En(e,C))}En(e,t){const s=[],u=[];return t.forEach(h=>{u.push(ml(e).get(h).next(m=>{if(null===m)throw jt();Jt(m.userId===this.userId),s.push(zu(this.yt,m))}))}),tt.waitFor(u).next(()=>s)}removeMutationBatch(e,t){return qh(e.se,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),tt.forEach(s,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return tt.resolve();const s=IDBKeyRange.lowerBound([this.userId]),u=[];return xc(e).Z({range:s},(h,m,C)=>{if(h[0]===this.userId){const F=Xo(h[1]);u.push(F)}else C.done()}).next(()=>{Jt(0===u.length)})})}containsKey(e,t){return nm(e,this.userId,t)}Rn(e){return rm(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function nm(i,e,t){const s=lp(e,t.path),u=s[1],h=IDBKeyRange.lowerBound(s);let m=!1;return xc(i).Z({range:h,X:!0},(C,F,Z)=>{const[re,ve,Ke]=C;re===e&&ve===u&&(m=!0),Z.done()}).next(()=>m)}function ml(i){return ms(i,"mutations")}function xc(i){return ms(i,"documentMutations")}function rm(i){return ms(i,"mutationQueues")}class Wl{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Wl(0)}static vn(){return new Wl(-1)}}class e_{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const s=new Wl(t.highestTargetId);return t.highestTargetId=s.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>mn.fromTimestamp(new Kn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.Vn(e).next(u=>(u.highestListenSequenceNumber=t,s&&(u.lastRemoteSnapshotVersion=s.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.Sn(e,u)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(s=>(s.targetCount+=1,this.Cn(t,s),this.Sn(e,s))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>nu(e).delete(t.targetId)).next(()=>this.Vn(e)).next(s=>(Jt(s.targetCount>0),s.targetCount-=1,this.Sn(e,s)))}removeTargets(e,t,s){let u=0;const h=[];return nu(e).Z((m,C)=>{const F=Ed(C);F.sequenceNumber<=t&&null===s.get(F.targetId)&&(u++,h.push(this.removeTargetData(e,F)))}).next(()=>tt.waitFor(h)).next(()=>u)}forEachTarget(e,t){return nu(e).Z((s,u)=>{const h=Ed(u);t(h)})}Vn(e){return bu(e).get("targetGlobalKey").next(t=>(Jt(null!==t),t))}Sn(e,t){return bu(e).put("targetGlobalKey",t)}Dn(e,t){return nu(e).put(Bh(this.yt,t))}Cn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=Pu(t),u=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let h=null;return nu(e).Z({range:u,index:"queryTargetsIndex"},(m,C,F)=>{const Z=Ed(C);Fl(t,Z.target)&&(h=Z,F.done())}).next(()=>h)}addMatchingKeys(e,t,s){const u=[],h=yl(e);return t.forEach(m=>{const C=Do(m.path);u.push(h.put({targetId:s,path:C})),u.push(this.referenceDelegate.addReference(e,s,m))}),tt.waitFor(u)}removeMatchingKeys(e,t,s){const u=yl(e);return tt.forEach(t,h=>{const m=Do(h.path);return tt.waitFor([u.delete([s,m]),this.referenceDelegate.removeReference(e,s,h)])})}removeMatchingKeysForTargetId(e,t){const s=yl(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(u)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),u=yl(e);let h=sr();return u.Z({range:s,X:!0},(m,C,F)=>{const Z=Xo(m[1]),re=new kt(Z);h=h.add(re)}).next(()=>h)}containsKey(e,t){const s=Do(t.path),u=IDBKeyRange.bound([s],[Mu(s)],!1,!0);let h=0;return yl(e).Z({index:"documentTargetsIndex",X:!0,range:u},([m,C],F,Z)=>{0!==m&&(h++,Z.done())}).next(()=>h>0)}ne(e,t){return nu(e).get(t).next(s=>s?Ed(s):null)}}function nu(i){return ms(i,"targets")}function bu(i){return ms(i,"targetGlobal")}function yl(i){return ms(i,"targetDocuments")}function im([i,e],[t,s]){const u=Ln(i,t);return 0===u?Ln(e,s):u}class e0{constructor(e){this.xn=e,this.buffer=new vi(im),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();im(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class t0{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;It("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,se.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){Ia(s)?It("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield Ro(s)}yield t.Fn(3e5)}))}}class sm{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return tt.resolve(Fs.at);const s=new e0(t);return this.$n.forEachTarget(e,u=>s.On(u.sequenceNumber)).next(()=>this.$n.Ln(e,u=>s.On(u))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.$n.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(It("LruGarbageCollector","Garbage collection skipped; disabled"),tt.resolve(zh)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(It("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zh):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let s,u,h,m,C,F,Z;const re=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ve=>(ve>this.params.maximumSequenceNumbersToCollect?(It("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ve}`),u=this.params.maximumSequenceNumbersToCollect):u=ve,m=Date.now(),this.nthSequenceNumber(e,u))).next(ve=>(s=ve,C=Date.now(),this.removeTargets(e,s,t))).next(ve=>(h=ve,F=Date.now(),this.removeOrphanedDocuments(e,s))).next(ve=>(Z=Date.now(),Or()<=ut.in.DEBUG&&It("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${m-re}ms\n\tDetermined least recently used ${u} in `+(C-m)+`ms\n\tRemoved ${h} targets in `+(F-C)+`ms\n\tRemoved ${ve} documents in `+(Z-F)+`ms\nTotal Duration: ${Z-re}ms`),tt.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:h,documentsRemoved:ve})))}}class n0{constructor(e,t){this.db=e,this.garbageCollector=new sm(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(u=>s+u))}Un(e){let t=0;return this.Ln(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(s,u)=>t(u))}addReference(e,t,s){return Ad(e,s)}removeReference(e,t,s){return Ad(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Ad(e,t)}Gn(e,t){return function(s,u){let h=!1;return rm(s).tt(m=>nm(s,m,u).next(C=>(C&&(h=!0),tt.resolve(!C)))).next(()=>h)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let h=0;return this.Kn(e,(m,C)=>{if(C<=t){const F=this.Gn(e,m).next(Z=>{if(!Z)return h++,s.getEntry(e,m).next(()=>(s.removeEntry(m,mn.min()),yl(e).delete([0,Do(m.path)])))});u.push(F)}}).next(()=>tt.waitFor(u)).next(()=>s.apply(e)).next(()=>h)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Ad(e,t)}Kn(e,t){const s=yl(e);let u,h=Fs.at;return s.Z({index:"documentTargetsIndex"},([m,C],{path:F,sequenceNumber:Z})=>{0===m?(h!==Fs.at&&t(new kt(Xo(u)),h),h=Z,u=F):h=Fs.at}).next(()=>{h!==Fs.at&&t(new kt(Xo(u)),h)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ad(i,e){return yl(i).put((s=i.currentSequenceNumber,{targetId:0,path:Do(e.path),sequenceNumber:s}));var s}class bp{constructor(){this.changes=new Ma(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Di.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?tt.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class t_{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return To(e).put(s)}removeEntry(e,t,s){return To(e).delete(function(u,h){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],wd(h),m[m.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Qn(e,s)))}getEntry(e,t){let s=Di.newInvalidDocument(t);return To(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(xd(t))},(u,h)=>{s=this.jn(t,h)}).next(()=>s)}Wn(e,t){let s={size:0,document:Di.newInvalidDocument(t)};return To(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(xd(t))},(u,h)=>{s={document:this.jn(t,h),size:gl(h)}}).next(()=>s)}getEntries(e,t){let s=Vs();return this.zn(e,t,(u,h)=>{const m=this.jn(u,h);s=s.insert(u,m)}).next(()=>s)}Hn(e,t){let s=Vs(),u=new is(kt.comparator);return this.zn(e,t,(h,m)=>{const C=this.jn(h,m);s=s.insert(h,C),u=u.insert(h,gl(m))}).next(()=>({documents:s,Jn:u}))}zn(e,t,s){if(t.isEmpty())return tt.resolve();let u=new vi(am);t.forEach(F=>u=u.add(F));const h=IDBKeyRange.bound(xd(u.first()),xd(u.last())),m=u.getIterator();let C=m.getNext();return To(e).Z({index:"documentKeyIndex",range:h},(F,Z,re)=>{const ve=kt.fromSegments([...Z.prefixPath,Z.collectionGroup,Z.documentId]);for(;C&&am(C,ve)<0;)s(C,null),C=m.getNext();C&&C.isEqual(ve)&&(s(C,Z),C=m.hasNext()?m.getNext():null),C?re.j(xd(C)):re.done()}).next(()=>{for(;C;)s(C,null),C=m.hasNext()?m.getNext():null})}getAllFromCollection(e,t,s){const u=[t.popLast().toArray(),t.lastSegment(),wd(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],h=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return To(e).W(IDBKeyRange.bound(u,h,!0)).next(m=>{let C=Vs();for(const F of m){const Z=this.jn(kt.fromSegments(F.prefixPath.concat(F.collectionGroup,F.documentId)),F);C=C.insert(Z.key,Z)}return C})}getAllFromCollectionGroup(e,t,s,u){let h=Vs();const m=Ep(t,s),C=Ep(t,Ss.max());return To(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(m,C,!0)},(F,Z,re)=>{const ve=this.jn(kt.fromSegments(Z.prefixPath.concat(Z.collectionGroup,Z.documentId)),Z);h=h.insert(ve.key,ve),h.size===u&&re.done()}).next(()=>h)}newChangeBuffer(e){return new n_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return om(e).get("remoteDocumentGlobalKey").next(t=>(Jt(!!t),t))}Qn(e,t){return om(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const s=function Ky(i,e){let t;if(e.document)t=B(i.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=kt.fromSegments(e.noDocument.path),u=Tc(e.noDocument.readTime);t=Di.newNoDocument(s,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return jt();{const s=kt.fromSegments(e.unknownDocument.path),u=Tc(e.unknownDocument.version);t=Di.newUnknownDocument(s,u)}}return e.readTime&&t.setReadTime(function(s){const u=new Kn(s[0],s[1]);return mn.fromTimestamp(u)}(e.readTime)),t}(this.yt,t);if(!s.isNoDocument()||!s.version.isEqual(mn.min()))return s}return Di.newInvalidDocument(e)}}function wp(i){return new t_(i)}class n_ extends bp{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Ma(s=>s.toString(),(s,u)=>s.isEqual(u))}applyChanges(e){const t=[];let s=0,u=new vi((h,m)=>Ln(h.canonicalString(),m.canonicalString()));return this.changes.forEach((h,m)=>{const C=this.Xn.get(h);if(t.push(this.Yn.removeEntry(e,h,C.readTime)),m.isValidDocument()){const F=pp(this.Yn.yt,m);u=u.add(h.path.popLast());const Z=gl(F);s+=Z-C.size,t.push(this.Yn.addEntry(e,h,F))}else if(s-=C.size,this.trackRemovals){const F=pp(this.Yn.yt,m.convertToNoDocument(mn.min()));t.push(this.Yn.addEntry(e,h,F))}}),u.forEach(h=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,h))}),t.push(this.Yn.updateMetadata(e,s)),tt.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(s=>(this.Xn.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:s,Jn:u})=>(u.forEach((h,m)=>{this.Xn.set(h,{size:m,readTime:s.get(h).readTime})}),s))}}function om(i){return ms(i,"remoteDocumentGlobal")}function To(i){return ms(i,"remoteDocumentsV14")}function xd(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ep(i,e){const t=e.documentKey.path.toArray();return[i,wd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function am(i,e){const t=i.path.toArray(),s=e.path.toArray();let u=0;for(let h=0;h<t.length-2&&h<s.length-2;++h)if(u=Ln(t[h],s[h]),u)return u;return u=Ln(t.length,s.length),u||(u=Ln(t[t.length-2],s[s.length-2]),u||Ln(t[t.length-1],s[s.length-1]))}class r_{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class um{constructor(e,t,s,u){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=u}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(u=>(s=u,this.remoteDocumentCache.getEntry(e,t))).next(u=>(null!==s&&Bu(s.mutation,u,Io.empty(),Kn.now()),u))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,sr()).next(()=>s))}getLocalViewOfDocuments(e,t,s=sr()){const u=ha();return this.populateOverlays(e,u,t).next(()=>this.computeViews(e,t,u,s).next(h=>{let m=_u();return h.forEach((C,F)=>{m=m.insert(C,F.overlayedDocument)}),m}))}getOverlayedDocuments(e,t){const s=ha();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,sr()))}populateOverlays(e,t,s){const u=[];return s.forEach(h=>{t.has(h)||u.push(h)}),this.documentOverlayCache.getOverlays(e,u).next(h=>{h.forEach((m,C)=>{t.set(m,C)})})}computeViews(e,t,s,u){let h=Vs();const m=fa(),C=fa();return t.forEach((F,Z)=>{const re=s.get(Z.key);u.has(Z.key)&&(void 0===re||re.mutation instanceof Xa)?h=h.insert(Z.key,Z):void 0!==re&&(m.set(Z.key,re.mutation.getFieldMask()),Bu(re.mutation,Z,re.mutation.getFieldMask(),Kn.now()))}),this.recalculateAndSaveOverlays(e,h).next(F=>(F.forEach((Z,re)=>m.set(Z,re)),t.forEach((Z,re)=>{var ve;return C.set(Z,new r_(re,null!==(ve=m.get(Z))&&void 0!==ve?ve:null))}),C))}recalculateAndSaveOverlays(e,t){const s=fa();let u=new is((m,C)=>m-C),h=sr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(m=>{for(const C of m)C.keys().forEach(F=>{const Z=t.get(F);if(null===Z)return;let re=s.get(F)||Io.empty();re=C.applyToLocalView(Z,re),s.set(F,re);const ve=(u.get(C.batchId)||sr()).add(F);u=u.insert(C.batchId,ve)})}).next(()=>{const m=[],C=u.getReverseIterator();for(;C.hasNext();){const F=C.getNext(),Z=F.key,re=F.value,ve=ho();re.forEach(Ke=>{if(!h.has(Ke)){const bt=Rh(t.get(Ke),s.get(Ke));null!==bt&&ve.set(Ke,bt),h=h.add(Ke)}}),m.push(this.documentOverlayCache.saveOverlays(e,Z,ve))}return tt.waitFor(m)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return kt.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Ul(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var u}getNextDocuments(e,t,s,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,u).next(h=>{const m=u-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,u-h.size):tt.resolve(ha());let C=-1,F=h;return m.next(Z=>tt.forEach(Z,(re,ve)=>(C<ve.largestBatchId&&(C=ve.largestBatchId),h.get(re)?tt.resolve():this.remoteDocumentCache.getEntry(e,re).next(Ke=>{F=F.insert(re,Ke)}))).next(()=>this.populateOverlays(e,Z,h)).next(()=>this.computeViews(e,F,Z,sr())).next(re=>({batchId:C,changes:$u(re)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new kt(t)).next(s=>{let u=_u();return s.isFoundDocument()&&(u=u.insert(s.key,s)),u})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const u=t.collectionGroup;let h=_u();return this.indexManager.getCollectionParents(e,u).next(m=>tt.forEach(m,C=>{const F=(Z=t,re=C.child(u),new Ka(re,null,Z.explicitOrderBy.slice(),Z.filters.slice(),Z.limit,Z.limitType,Z.startAt,Z.endAt));var Z,re;return this.getDocumentsMatchingCollectionQuery(e,F,s).next(Z=>{Z.forEach((re,ve)=>{h=h.insert(re,ve)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,s){let u;return this.remoteDocumentCache.getAllFromCollection(e,t.path,s).next(h=>(u=h,this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId))).next(h=>{h.forEach((C,F)=>{const Z=F.getKey();null===u.get(Z)&&(u=u.insert(Z,Di.newInvalidDocument(Z)))});let m=_u();return u.forEach((C,F)=>{const Z=h.get(C);void 0!==Z&&Bu(Z.mutation,F,Io.empty(),Kn.now()),Th(t,F)&&(m=m.insert(C,F))}),m})}}class i_{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return tt.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var s;return this.Zn.set(t.id,{id:(s=t).id,version:s.version,createTime:Yi(s.createTime)}),tt.resolve()}getNamedQuery(e,t){return tt.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(s=t).name,query:jh(s.bundledQuery),readTime:Yi(s.readTime)}),tt.resolve();var s}}class lm{constructor(){this.overlays=new is(kt.comparator),this.es=new Map}getOverlay(e,t){return tt.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ha();return tt.forEach(t,u=>this.getOverlay(e,u).next(h=>{null!==h&&s.set(u,h)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((u,h)=>{this.oe(e,t,h)}),tt.resolve()}removeOverlaysForBatchId(e,t,s){const u=this.es.get(s);return void 0!==u&&(u.forEach(h=>this.overlays=this.overlays.remove(h)),this.es.delete(s)),tt.resolve()}getOverlaysForCollection(e,t,s){const u=ha(),h=t.length+1,m=new kt(t.child("")),C=this.overlays.getIteratorFrom(m);for(;C.hasNext();){const F=C.getNext().value,Z=F.getKey();if(!t.isPrefixOf(Z.path))break;Z.path.length===h&&F.largestBatchId>s&&u.set(F.getKey(),F)}return tt.resolve(u)}getOverlaysForCollectionGroup(e,t,s,u){let h=new is((Z,re)=>Z-re);const m=this.overlays.getIterator();for(;m.hasNext();){const Z=m.getNext().value;if(Z.getKey().getCollectionGroup()===t&&Z.largestBatchId>s){let re=h.get(Z.largestBatchId);null===re&&(re=ha(),h=h.insert(Z.largestBatchId,re)),re.set(Z.getKey(),Z)}}const C=ha(),F=h.getIterator();for(;F.hasNext()&&(F.getNext().value.forEach((Z,re)=>C.set(Z,re)),!(C.size()>=u)););return tt.resolve(C)}oe(e,t,s){const u=this.overlays.get(s.key);if(null!==u){const m=this.es.get(u.largestBatchId).delete(s.key);this.es.set(u.largestBatchId,m)}this.overlays=this.overlays.insert(s.key,new Vh(t,s));let h=this.es.get(t);void 0===h&&(h=sr(),this.es.set(t,h)),this.es.set(t,h.add(s.key))}}class Ip{constructor(){this.ns=new vi(fo.ss),this.rs=new vi(fo.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const s=new fo(e,t);this.ns=this.ns.add(s),this.rs=this.rs.add(s)}us(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.cs(new fo(e,t))}hs(e,t){e.forEach(s=>this.removeReference(s,t))}ls(e){const t=new kt(new Gn([])),s=new fo(t,e),u=new fo(t,e+1),h=[];return this.rs.forEachInRange([s,u],m=>{this.cs(m),h.push(m.key)}),h}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new kt(new Gn([])),s=new fo(t,e),u=new fo(t,e+1);let h=sr();return this.rs.forEachInRange([s,u],m=>{h=h.add(m.key)}),h}containsKey(e){const t=new fo(e,0),s=this.ns.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class fo{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return kt.comparator(e.key,t.key)||Ln(e._s,t._s)}static os(e,t){return Ln(e._s,t._s)||kt.comparator(e.key,t.key)}}class s_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new vi(fo.ss)}checkEmpty(e){return tt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,u){const h=this.ws;this.ws++;const m=new bd(h,t,s,u);this.mutationQueue.push(m);for(const C of u)this.gs=this.gs.add(new fo(C.key,h)),this.indexManager.addToCollectionParentIndex(e,C.key.path.popLast());return tt.resolve(m)}lookupMutationBatch(e,t){return tt.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.ps(t+1),h=u<0?0:u;return tt.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return tt.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return tt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new fo(t,0),u=new fo(t,Number.POSITIVE_INFINITY),h=[];return this.gs.forEachInRange([s,u],m=>{const C=this.ys(m._s);h.push(C)}),tt.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new vi(Ln);return t.forEach(u=>{const h=new fo(u,0),m=new fo(u,Number.POSITIVE_INFINITY);this.gs.forEachInRange([h,m],C=>{s=s.add(C._s)})}),tt.resolve(this.Is(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,u=s.length+1;let h=s;kt.isDocumentKey(h)||(h=h.child(""));const m=new fo(new kt(h),0);let C=new vi(Ln);return this.gs.forEachWhile(F=>{const Z=F.key.path;return!!s.isPrefixOf(Z)&&(Z.length===u&&(C=C.add(F._s)),!0)},m),tt.resolve(this.Is(C))}Is(e){const t=[];return e.forEach(s=>{const u=this.ys(s);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){Jt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let s=this.gs;return tt.forEach(t.mutations,u=>{const h=new fo(u.key,t.batchId);return s=s.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.gs=s})}An(e){}containsKey(e,t){const s=new fo(t,0),u=this.gs.firstAfterOrEqual(s);return tt.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return tt.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class fr{constructor(e){this.Es=e,this.docs=new is(kt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,u=this.docs.get(s),h=u?u.size:0,m=this.Es(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:m}),this.size+=m-h,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return tt.resolve(s?s.document.mutableCopy():Di.newInvalidDocument(t))}getEntries(e,t){let s=Vs();return t.forEach(u=>{const h=this.docs.get(u);s=s.insert(u,h?h.document.mutableCopy():Di.newInvalidDocument(u))}),tt.resolve(s)}getAllFromCollection(e,t,s){let u=Vs();const h=new kt(t.child("")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:C,value:{document:F}}=m.getNext();if(!t.isPrefixOf(C.path))break;C.path.length>t.length+1||Uo(Za(F),s)<=0||(u=u.insert(F.key,F.mutableCopy()))}return tt.resolve(u)}getAllFromCollectionGroup(e,t,s,u){jt()}As(e,t){return tt.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new cm(this)}getSize(e){return tt.resolve(this.size)}}class cm extends bp{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((s,u)=>{u.isValidDocument()?t.push(this.Yn.addEntry(e,u)):this.Yn.removeEntry(s)}),tt.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class dm{constructor(e){this.persistence=e,this.Rs=new Ma(t=>Pu(t),Fl),this.lastRemoteSnapshotVersion=mn.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Ip,this.targetCount=0,this.vs=Wl.Pn()}forEachTarget(e,t){return this.Rs.forEach((s,u)=>t(u)),tt.resolve()}getLastRemoteSnapshotVersion(e){return tt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return tt.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),tt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.bs&&(this.bs=t),tt.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Wl(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,tt.resolve()}updateTargetData(e,t){return this.Dn(t),tt.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,tt.resolve()}removeTargets(e,t,s){let u=0;const h=[];return this.Rs.forEach((m,C)=>{C.sequenceNumber<=t&&null===s.get(C.targetId)&&(this.Rs.delete(m),h.push(this.removeMatchingKeysForTargetId(e,C.targetId)),u++)}),tt.waitFor(h).next(()=>u)}getTargetCount(e){return tt.resolve(this.targetCount)}getTargetData(e,t){const s=this.Rs.get(t)||null;return tt.resolve(s)}addMatchingKeys(e,t,s){return this.Ps.us(t,s),tt.resolve()}removeMatchingKeys(e,t,s){this.Ps.hs(t,s);const u=this.persistence.referenceDelegate,h=[];return u&&t.forEach(m=>{h.push(u.markPotentiallyOrphaned(e,m))}),tt.waitFor(h)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),tt.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Ps.ds(t);return tt.resolve(s)}containsKey(e,t){return tt.resolve(this.Ps.containsKey(t))}}class Cp{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Fs(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new dm(this),this.indexManager=new Cd,this.remoteDocumentCache=new fr(s=>this.referenceDelegate.xs(s)),this.yt=new Wy(t),this.Ns=new i_(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Vs[e.toKey()];return s||(s=new s_(t,this.referenceDelegate),this.Vs[e.toKey()]=s),s}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,s){It("MemoryPersistence","Starting transaction:",e);const u=new o_(this.Ss.next());return this.referenceDelegate.ks(),s(u).next(h=>this.referenceDelegate.Os(u).next(()=>h)).toPromise().then(h=>(u.raiseOnCommittedEvent(),h))}Ms(e,t){return tt.or(Object.values(this.Vs).map(s=>()=>s.containsKey(e,t)))}}class o_ extends aa{constructor(e){super(),this.currentSequenceNumber=e}}class Kh{constructor(e){this.persistence=e,this.Fs=new Ip,this.$s=null}static Bs(e){return new Kh(e)}get Ls(){if(this.$s)return this.$s;throw jt()}addReference(e,t,s){return this.Fs.addReference(s,t),this.Ls.delete(s.toString()),tt.resolve()}removeReference(e,t,s){return this.Fs.removeReference(s,t),this.Ls.add(s.toString()),tt.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),tt.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(u=>this.Ls.add(u.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(h=>this.Ls.add(h.toString()))}).next(()=>s.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return tt.forEach(this.Ls,s=>{const u=kt.fromPath(s);return this.qs(e,u).next(h=>{h||t.removeEntry(u,mn.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(s=>{s?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return tt.or([()=>tt.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class hm{constructor(e){this.yt=e}$(e,t,s,u){const h=new Ru("createOrUpgrade",t);var C;s<1&&u>=1&&(e.createObjectStore("owner"),(C=e).createObjectStore("mutationQueues",{keyPath:"userId"}),C.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ly,{unique:!0}),C.createObjectStore("documentMutations"),fm(e),function(C){C.createObjectStore("remoteDocuments")}(e));let m=tt.resolve();return s<3&&u>=3&&(0!==s&&(function(C){C.deleteObjectStore("targetDocuments"),C.deleteObjectStore("targets"),C.deleteObjectStore("targetGlobal")}(e),fm(e)),m=m.next(()=>function(C){const F=C.store("targetGlobal"),Z={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mn.min().toTimestamp(),targetCount:0};return F.put("targetGlobalKey",Z)}(h))),s<4&&u>=4&&(0!==s&&(m=m.next(()=>function(C,F){return F.store("mutations").W().next(Z=>{C.deleteObjectStore("mutations"),C.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ly,{unique:!0});const re=F.store("mutations"),ve=Z.map(Ke=>re.put(Ke));return tt.waitFor(ve)})}(e,h))),m=m.next(()=>{!function(C){C.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&u>=5&&(m=m.next(()=>this.Us(h))),s<6&&u>=6&&(m=m.next(()=>(function(C){C.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(h)))),s<7&&u>=7&&(m=m.next(()=>this.Gs(h))),s<8&&u>=8&&(m=m.next(()=>this.Qs(e,h))),s<9&&u>=9&&(m=m.next(()=>{!function(C){C.objectStoreNames.contains("remoteDocumentChanges")&&C.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&u>=10&&(m=m.next(()=>this.js(h))),s<11&&u>=11&&(m=m.next(()=>{(function(C){C.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(C){C.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&u>=12&&(m=m.next(()=>{!function(C){const F=C.createObjectStore("documentOverlays",{keyPath:hp});F.createIndex("collectionPathOverlayIndex",Hg,{unique:!1}),F.createIndex("collectionGroupOverlayIndex",zy,{unique:!1})}(e)})),s<13&&u>=13&&(m=m.next(()=>function(C){const F=C.createObjectStore("remoteDocumentsV14",{keyPath:Vy});F.createIndex("documentKeyIndex",By),F.createIndex("collectionGroupIndex",jy)}(e)).next(()=>this.Ws(e,h)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&u>=14&&(m=m.next(()=>this.zs(e,h))),s<15&&u>=15&&(m=m.next(()=>function(C){C.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),C.createObjectStore("indexState",{keyPath:Hy}).createIndex("sequenceNumberIndex",Bs,{unique:!1}),C.createObjectStore("indexEntries",{keyPath:Zy}).createIndex("documentKeyIndex",Gy,{unique:!1})}(e))),m}Ks(e){let t=0;return e.store("remoteDocuments").Z((s,u)=>{t+=gl(u)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Us(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.W().next(u=>tt.forEach(u,h=>{const m=IDBKeyRange.bound([h.userId,-1],[h.userId,h.lastAcknowledgedBatchId]);return s.W("userMutationsIndex",m).next(C=>tt.forEach(C,F=>{Jt(F.userId===h.userId);const Z=zu(this.yt,F);return qh(e,h.userId,Z).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const h=[];return s.Z((m,C)=>{const F=new Gn(m),Z=[0,Do(F)];h.push(t.get(Z).next(re=>re?tt.resolve():t.put({targetId:0,path:Do(F),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>tt.waitFor(h))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:dp});const s=t.store("collectionParents"),u=new vp,h=m=>{if(u.add(m)){const C=m.lastSegment(),F=m.popLast();return s.put({collectionId:C,parent:Do(F)})}};return t.store("remoteDocuments").Z({X:!0},(m,C)=>{const F=new Gn(m);return h(F.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([m,C,F],Z)=>{const re=Xo(C);return h(re.popLast())}))}js(e){const t=e.store("targets");return t.Z((s,u)=>{const h=Ed(u),m=Bh(this.yt,h);return t.put(m)})}Ws(e,t){const s=t.store("remoteDocuments"),u=[];return s.Z((h,m)=>{const C=t.store("remoteDocumentsV14"),F=(Z=m,Z.document?new kt(Gn.fromString(Z.document.name).popFirst(5)):Z.noDocument?kt.fromSegments(Z.noDocument.path):Z.unknownDocument?kt.fromSegments(Z.unknownDocument.path):jt()).path.toArray();var Z;const re={prefixPath:F.slice(0,F.length-2),collectionGroup:F[F.length-2],documentId:F[F.length-1],readTime:m.readTime||[0,0],unknownDocument:m.unknownDocument,noDocument:m.noDocument,document:m.document,hasCommittedMutations:!!m.hasCommittedMutations};u.push(C.put(re))}).next(()=>tt.waitFor(u))}zs(e,t){const s=t.store("mutations"),u=wp(this.yt),h=new Cp(Kh.Bs,this.yt.ie);return s.W().next(m=>{const C=new Map;return m.forEach(F=>{var Z;let re=null!==(Z=C.get(F.userId))&&void 0!==Z?Z:sr();zu(this.yt,F).keys().forEach(ve=>re=re.add(ve)),C.set(F.userId,re)}),tt.forEach(C,(F,Z)=>{const re=new Rn(Z),ve=Sc.re(this.yt,re),Ke=h.getIndexManager(re),bt=Wh.re(re,this.yt,Ke,h.referenceDelegate);return new um(u,bt,ve,Ke).recalculateAndSaveOverlaysForDocumentKeys(new zg(t,Fs.at),F).next()})})}}function fm(i){i.createObjectStore("targetDocuments",{keyPath:Lh}).createIndex("documentTargetsIndex",$y,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",$g,{unique:!0}),i.createObjectStore("targetGlobal")}const Yh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Dp{constructor(e,t,s,u,h,m,C,F,Z,re,ve=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Hs=h,this.window=m,this.document=C,this.Js=Z,this.Ys=re,this.Xs=ve,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=Ke=>Promise.resolve(),!Dp.C())throw new wt(ot.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new n0(this,u),this.ii=t+"main",this.yt=new Wy(F),this.ri=new oo(this.ii,this.Xs,new hm(this.yt)),this.Cs=new e_(this.referenceDelegate,this.yt),this.remoteDocumentCache=wp(this.yt),this.Ns=new gp,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===re&&vr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new wt(ot.FAILED_PRECONDITION,Yh);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Fs(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var s=(0,se.Z)(function*(u){if(t.started)return e(u)});return function(u){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,se.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,se.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Tp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Ia(e))return It("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return It("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Md(e).get("owner").next(t=>tt.resolve(this.mi(t)))}gi(e){return Tp(e).delete(this.clientId)}yi(){var e=this;return(0,se.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const u=ms(s,"clientMetadata");return u.W().next(h=>{const m=e.Ii(h,18e5),C=h.filter(F=>-1===m.indexOf(F));return tt.forEach(C,F=>u.delete(F.clientId)).next(()=>C)})}).catch(()=>[]);if(e.oi)for(const s of t)e.oi.removeItem(e.Ti(s.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?tt.resolve(!0):Md(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new wt(ot.FAILED_PRECONDITION,Yh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Tp(e).W().next(s=>void 0===this.Ii(s,5e3).find(u=>{if(this.clientId!==u.clientId){const m=!this.inForeground&&u.inForeground,C=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||m&&C)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&It("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,se.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new zg(t,Fs.at);return e._i(s).next(()=>e.gi(s))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(s=>this.pi(s.updateTimeMs,t)&&!this.Ei(s.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Tp(e).W().next(t=>this.Ii(t,18e5).map(s=>s.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Wh.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Xy(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return Sc.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,s){It("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",h=15===(m=this.Xs)?Xv:14===m?fp:13===m?Gg:12===m?qy:11===m?Zg:void jt();var m;let C;return this.ri.runTransaction(e,u,h,F=>(C=new zg(F,this.Ss?this.Ss.next():Fs.at),"readwrite-primary"===t?this.fi(C).next(Z=>!!Z||this.di(C)).next(Z=>{if(!Z)throw vr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new wt(ot.FAILED_PRECONDITION,Ga);return s(C)}).next(Z=>this.wi(C).next(()=>Z)):this.Vi(C).next(()=>s(C)))).then(F=>(C.raiseOnCommittedEvent(),F))}Vi(e){return Md(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new wt(ot.FAILED_PRECONDITION,Yh)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Md(e).put("owner",t)}static C(){return oo.C()}_i(e){const t=Md(e);return t.get("owner").next(s=>this.mi(s)?(It("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):tt.resolve())}pi(e,t){const s=Date.now();return!(e<s-t||e>s&&(vr(`Detected an update time that is in the future: ${e} > ${s}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Ye.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const s=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return It("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return vr("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){vr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Md(i){return ms(i,"owner")}function Tp(i){return ms(i,"clientMetadata")}function Qh(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Jh{constructor(e,t,s,u){this.targetId=e,this.fromCache=t,this.Si=s,this.Di=u}static Ci(e,t){let s=sr(),u=sr();for(const h of t.docChanges)switch(h.type){case 0:s=s.add(h.doc.key);break;case 1:u=u.add(h.doc.key)}return new Jh(e,t.fromCache,s,u)}}class _l{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,s,u){return this.ki(e,t).next(h=>h||this.Oi(e,t,u,s)).next(h=>h||this.Mi(e,t))}ki(e,t){if(cc(t))return tt.resolve(null);let s=ni(t);return this.indexManager.getIndexType(e,s).next(u=>0===u?null:(null!==t.limit&&1===u&&(t=Vl(t,null,"F"),s=ni(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(h=>{const m=sr(...h);return this.Ni.getDocuments(e,m).next(C=>this.indexManager.getMinOffset(e,s).next(F=>{const Z=this.Fi(t,C);return this.$i(t,Z,m,F.readTime)?this.ki(e,Vl(t,null,"F")):this.Bi(e,Z,t,F)}))})))}Oi(e,t,s,u){return cc(t)||u.isEqual(mn.min())?this.Mi(e,t):this.Ni.getDocuments(e,s).next(h=>{const m=this.Fi(t,h);return this.$i(t,m,s,u)?this.Mi(e,t):(Or()<=ut.in.DEBUG&&It("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),dc(t)),this.Bi(e,m,t,Ko(u,-1)))})}Fi(e,t){let s=new vi(Sh(e));return t.forEach((u,h)=>{Th(e,h)&&(s=s.add(h))}),s}$i(e,t,s,u){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const h="F"===e.limitType?t.last():t.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(u)>0)}Mi(e,t){return Or()<=ut.in.DEBUG&&It("QueryEngine","Using full collection scan to execute query:",dc(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ss.min())}Bi(e,t,s,u){return this.Ni.getDocumentsMatchingQuery(e,s,u).next(h=>(t.forEach(m=>{h=h.insert(m.key,m)}),h))}}class a_{constructor(e,t,s,u){this.persistence=e,this.Li=t,this.yt=u,this.qi=new is(Ln),this.Ui=new Ma(h=>Pu(h),Fl),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(s)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new um(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function Xh(i,e,t,s){return new a_(i,e,t,s)}function ef(i,e){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,se.Z)(function*(i,e){const t=zt(i);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let u;return t.mutationQueue.getAllMutationBatches(s).next(h=>(u=h,t.Qi(e),t.mutationQueue.getAllMutationBatches(s))).next(h=>{const m=[],C=[];let F=sr();for(const Z of u){m.push(Z.batchId);for(const re of Z.mutations)F=F.add(re.key)}for(const Z of h){C.push(Z.batchId);for(const re of Z.mutations)F=F.add(re.key)}return t.localDocuments.getDocuments(s,F).next(Z=>({ji:Z,removedBatchIds:m,addedBatchIds:C}))})})}),Sp.apply(this,arguments)}function r0(i,e){const t=zt(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const u=e.batch.keys(),h=t.Gi.newChangeBuffer({trackRemovals:!0});return function(m,C,F,Z){const re=F.batch,ve=re.keys();let Ke=tt.resolve();return ve.forEach(bt=>{Ke=Ke.next(()=>Z.getEntry(C,bt)).next(St=>{const en=F.docVersions.get(bt);Jt(null!==en),St.version.compareTo(en)<0&&(re.applyToRemoteDocument(St,F),St.isValidDocument()&&(St.setReadTime(F.commitVersion),Z.addEntry(St)))})}),Ke.next(()=>m.mutationQueue.removeMutationBatch(C,re))}(t,s,e,h).next(()=>h.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,u,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let C=sr();for(let F=0;F<m.mutationResults.length;++F)m.mutationResults[F].transformResults.length>0&&(C=C.add(m.batch.mutations[F].key));return C}(e))).next(()=>t.localDocuments.getDocuments(s,u))})}function u_(i){const e=zt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function s0(i,e){const t=zt(i),s=e.snapshotVersion;let u=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const m=t.Gi.newChangeBuffer({trackRemovals:!0});u=t.qi;const C=[];e.targetChanges.forEach((re,ve)=>{const Ke=u.get(ve);if(!Ke)return;C.push(t.Cs.removeMatchingKeys(h,re.removedDocuments,ve).next(()=>t.Cs.addMatchingKeys(h,re.addedDocuments,ve)));let bt=Ke.withSequenceNumber(h.currentSequenceNumber);var St,en,Dn;e.targetMismatches.has(ve)?bt=bt.withResumeToken(y.EMPTY_BYTE_STRING,mn.min()).withLastLimboFreeSnapshotVersion(mn.min()):re.resumeToken.approximateByteSize()>0&&(bt=bt.withResumeToken(re.resumeToken,s)),u=u.insert(ve,bt),en=bt,Dn=re,(0===(St=Ke).resumeToken.approximateByteSize()||en.snapshotVersion.toMicroseconds()-St.snapshotVersion.toMicroseconds()>=3e8||Dn.addedDocuments.size+Dn.modifiedDocuments.size+Dn.removedDocuments.size>0)&&C.push(t.Cs.updateTargetData(h,bt))});let F=Vs(),Z=sr();if(e.documentUpdates.forEach(re=>{e.resolvedLimboDocuments.has(re)&&C.push(t.persistence.referenceDelegate.updateLimboDocument(h,re))}),C.push(pm(h,m,e.documentUpdates).next(re=>{F=re.Wi,Z=re.zi})),!s.isEqual(mn.min())){const re=t.Cs.getLastRemoteSnapshotVersion(h).next(ve=>t.Cs.setTargetsMetadata(h,h.currentSequenceNumber,s));C.push(re)}return tt.waitFor(C).next(()=>m.apply(h)).next(()=>t.localDocuments.getLocalViewOfDocuments(h,F,Z)).next(()=>F)}).then(h=>(t.qi=u,h))}function pm(i,e,t){let s=sr(),u=sr();return t.forEach(h=>s=s.add(h)),e.getEntries(i,s).next(h=>{let m=Vs();return t.forEach((C,F)=>{const Z=h.get(C);F.isFoundDocument()!==Z.isFoundDocument()&&(u=u.add(C)),F.isNoDocument()&&F.version.isEqual(mn.min())?(e.removeEntry(C,F.readTime),m=m.insert(C,F)):!Z.isValidDocument()||F.version.compareTo(Z.version)>0||0===F.version.compareTo(Z.version)&&Z.hasPendingWrites?(e.addEntry(F),m=m.insert(C,F)):It("LocalStore","Ignoring outdated watch update for ",C,". Current version:",Z.version," Watch version:",F.version)}),{Wi:m,zi:u}})}function gm(i,e){const t=zt(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Rd(i,e){const t=zt(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let u;return t.Cs.getTargetData(s,e).next(h=>h?(u=h,tt.resolve(u)):t.Cs.allocateTargetId(s).next(m=>(u=new Zu(e,m,0,s.currentSequenceNumber),t.Cs.addTargetData(s,u).next(()=>u))))}).then(s=>{const u=t.qi.get(s.targetId);return(null===u||s.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.qi=t.qi.insert(s.targetId,s),t.Ui.set(e,s.targetId)),s})}function Mc(i,e,t){return vl.apply(this,arguments)}function vl(){return vl=(0,se.Z)(function*(i,e,t){const s=zt(i),u=s.qi.get(e),h=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",h,m=>s.persistence.referenceDelegate.removeTarget(m,u)))}catch(m){if(!Ia(m))throw m;It("LocalStore",`Failed to update sequence numbers for target ${e}: ${m}`)}s.qi=s.qi.remove(e),s.Ui.delete(u.target)}),vl.apply(this,arguments)}function tf(i,e,t){const s=zt(i);let u=mn.min(),h=sr();return s.persistence.runTransaction("Execute query","readonly",m=>function(C,F,Z){const re=zt(C),ve=re.Ui.get(Z);return void 0!==ve?tt.resolve(re.qi.get(ve)):re.Cs.getTargetData(F,Z)}(s,m,ni(e)).next(C=>{if(C)return u=C.lastLimboFreeSnapshotVersion,s.Cs.getMatchingKeysForTargetId(m,C.targetId).next(F=>{h=F})}).next(()=>s.Li.getDocumentsMatchingQuery(m,e,t?u:mn.min(),t?h:sr())).next(C=>(mm(s,Qa(e),C),{documents:C,Hi:h})))}function Ap(i,e){const t=zt(i),s=zt(t.Cs),u=t.qi.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",h=>s.ne(h,e).next(m=>m?m.target:null))}function Od(i,e){const t=zt(i),s=t.Ki.get(e)||mn.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.Gi.getAllFromCollectionGroup(u,e,Ko(s,-1),Number.MAX_SAFE_INTEGER)).then(u=>(mm(t,e,u),u))}function mm(i,e,t){let s=i.Ki.get(e)||mn.min();t.forEach((u,h)=>{h.readTime.compareTo(s)>0&&(s=h.readTime)}),i.Ki.set(e,s)}function xp(){return xp=(0,se.Z)(function*(i,e,t,s){const u=zt(i);let h=sr(),m=Vs();for(const Z of t){const re=e.Ji(Z.metadata.name);Z.document&&(h=h.add(re));const ve=e.Yi(Z);ve.setReadTime(e.Xi(Z.metadata.readTime)),m=m.insert(re,ve)}const C=u.Gi.newChangeBuffer({trackRemovals:!0}),F=yield Rd(u,(Z=s,ni(tl(Gn.fromString(`__bundle__/docs/${Z}`)))));var Z;return u.persistence.runTransaction("Apply bundle documents","readwrite",Z=>pm(Z,C,m).next(re=>(C.apply(Z),re)).next(re=>u.Cs.removeMatchingKeysForTargetId(Z,F.targetId).next(()=>u.Cs.addMatchingKeys(Z,h,F.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(Z,re.Wi,re.zi)).next(()=>re.Wi)))}),xp.apply(this,arguments)}function l_(i,e){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,se.Z)(function*(i,e,t=sr()){const s=yield Rd(i,ni(jh(e.bundledQuery))),u=zt(i);return u.persistence.runTransaction("Save named query","readwrite",h=>{const m=Yi(e.readTime);if(s.snapshotVersion.compareTo(m)>=0)return u.Ns.saveNamedQuery(h,e);const C=s.withResumeToken(y.EMPTY_BYTE_STRING,m);return u.qi=u.qi.insert(C.targetId,C),u.Cs.updateTargetData(h,C).next(()=>u.Cs.removeMatchingKeysForTargetId(h,s.targetId)).next(()=>u.Cs.addMatchingKeys(h,t,s.targetId)).next(()=>u.Ns.saveNamedQuery(h,e))})}),Mp.apply(this,arguments)}function _m(i,e){return`firestore_clients_${i}_${e}`}function vm(i,e,t){let s=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function nf(i,e){return`firestore_targets_${i}_${e}`}class rf{constructor(e,t,s,u){this.user=e,this.batchId=t,this.state=s,this.error=u}static Zi(e,t,s){const u=JSON.parse(s);let h,m="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return m&&u.error&&(m="string"==typeof u.error.message&&"string"==typeof u.error.code,m&&(h=new wt(u.error.code,u.error.message))),m?new rf(e,t,u.state,h):(vr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rc{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Zi(e,t){const s=JSON.parse(t);let u,h="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return h&&s.error&&(h="string"==typeof s.error.message&&"string"==typeof s.error.code,h&&(u=new wt(s.error.code,s.error.message))),h?new Rc(e,s.state,u):(vr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Nd{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const s=JSON.parse(t);let u="object"==typeof s&&s.activeTargetIds instanceof Array,h=wc();for(let m=0;u&&m<s.activeTargetIds.length;++m)u=b(s.activeTargetIds[m]),h=h.add(s.activeTargetIds[m]);return u?new Nd(e,h):(vr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class kd{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new kd(t.clientId,t.onlineState):(vr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class bm{constructor(){this.activeTargetIds=wc()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Pd{constructor(e,t,s,u,h){this.window=e,this.Hs=t,this.persistenceKey=s,this.sr=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new is(Ln),this.started=!1,this.cr=[];const m=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=h,this.ar=_m(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new bm),this.lr=new RegExp(`^firestore_clients_${m}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${m}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${m}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(C){return`firestore_bundle_loaded_v2_${C}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,se.Z)(function*(){const t=yield e.syncEngine.vi();for(const u of t){if(u===e.sr)continue;const h=e.getItem(_m(e.persistenceKey,u));if(h){const m=Nd.Zi(u,h);m&&(e.ur=e.ur.insert(m.clientId,m))}}e.gr();const s=e.storage.getItem(e.wr);if(s){const u=e.yr(s);u&&e.pr(u)}for(const u of e.cr)e.rr(u);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((s,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,s){this.Tr(e,t,s),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(nf(this.persistenceKey,e));if(s){const u=Rc.Zi(e,s);u&&(t=u.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(nf(this.persistenceKey,e))}updateQueryState(e,t,s){this.Rr(e,t,s)}handleUserChange(e,t,s){t.forEach(u=>{this.Er(u)}),this.currentUser=e,s.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return It("SharedClientState","READ",e,t),t}setItem(e,t){It("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){It("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(It("SharedClientState","EVENT",s.key,s.newValue),s.key===this.ar)return void vr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,se.Z)(function*(){if(t.started){if(null!==s.key)if(t.lr.test(s.key)){if(null==s.newValue){const u=t.vr(s.key);return t.Vr(u,null)}{const u=t.Sr(s.key,s.newValue);if(u)return t.Vr(u.clientId,u)}}else if(t.dr.test(s.key)){if(null!==s.newValue){const u=t.Dr(s.key,s.newValue);if(u)return t.Cr(u)}}else if(t._r.test(s.key)){if(null!==s.newValue){const u=t.Nr(s.key,s.newValue);if(u)return t.kr(u)}}else if(s.key===t.wr){if(null!==s.newValue){const u=t.yr(s.newValue);if(u)return t.pr(u)}}else if(s.key===t.hr){const u=function(h){let m=Fs.at;if(null!=h)try{const C=JSON.parse(h);Jt("number"==typeof C),m=C}catch(C){vr("SharedClientState","Failed to read sequence number from WebStorage",C)}return m}(s.newValue);u!==Fs.at&&t.sequenceNumberHandler(u)}else if(s.key===t.mr){const u=t.Or(s.newValue);yield Promise.all(u.map(h=>t.syncEngine.Mr(h)))}}else t.cr.push(s)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,s){const u=new rf(this.currentUser,e,t,s),h=vm(this.persistenceKey,this.currentUser,e);this.setItem(h,u.tr())}Er(e){const t=vm(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,s){const u=nf(this.persistenceKey,e),h=new Rc(e,t,s);this.setItem(u,h.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const s=this.vr(e);return Nd.Zi(s,t)}Dr(e,t){const s=this.dr.exec(e),u=Number(s[1]);return rf.Zi(new Rn(void 0!==s[2]?s[2]:null),u,t)}Nr(e,t){const s=this._r.exec(e),u=Number(s[1]);return Rc.Zi(u,t)}yr(e){return kd.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,se.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);It("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const s=t?this.ur.insert(e,t):this.ur.remove(e),u=this.Ir(this.ur),h=this.Ir(s),m=[],C=[];return h.forEach(F=>{u.has(F)||m.push(F)}),u.forEach(F=>{h.has(F)||C.push(F)}),this.syncEngine.Br(m,C).then(()=>{this.ur=s})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=wc();return e.forEach((s,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class wm{constructor(){this.Lr=new bm,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,s){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new bm,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class o0{Ur(e){}shutdown(){}}class Kl{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){It("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){It("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Em={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class c_{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Im extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,s,u,h){const m=this.ho(e,t);It("RestConnection","Sending: ",m,s);const C={};return this.lo(C,u,h),this.fo(e,m,C,s).then(F=>(It("RestConnection","Received: ",F),F),F=>{throw br("RestConnection",`${e} failed with error: `,F,"url: ",m,"request:",s),F})}_o(e,t,s,u,h,m){return this.ao(e,t,s,u,h)}lo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Wn,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,h)=>e[h]=u),s&&s.headers.forEach((u,h)=>e[h]=u)}ho(e,t){return`${this.oo}/v1/${t}:${Em[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,s,u){return new Promise((h,m)=>{const C=new pr;C.setWithCredentials(!0),C.listenOnce(Y.COMPLETE,()=>{try{switch(C.getLastErrorCode()){case M.NO_ERROR:const Z=C.getResponseJson();It("Connection","XHR received:",JSON.stringify(Z)),h(Z);break;case M.TIMEOUT:It("Connection",'RPC "'+e+'" timed out'),m(new wt(ot.DEADLINE_EXCEEDED,"Request time out"));break;case M.HTTP_ERROR:const re=C.getStatus();if(It("Connection",'RPC "'+e+'" failed with status:',re,"response text:",C.getResponseText()),re>0){let ve=C.getResponseJson();Array.isArray(ve)&&(ve=ve[0]);const Ke=ve?.error;if(Ke&&Ke.status&&Ke.message){const bt=function(St){const en=St.toLowerCase().replace(/_/g,"-");return Object.values(ot).indexOf(en)>=0?en:ot.UNKNOWN}(Ke.status);m(new wt(bt,Ke.message))}else m(new wt(ot.UNKNOWN,"Server responded with status "+C.getStatus()))}else m(new wt(ot.UNAVAILABLE,"Connection failed."));break;default:jt()}}finally{It("Connection",'RPC "'+e+'" completed.')}});const F=JSON.stringify(u);C.send(t,"POST",F,s,15)})}wo(e,t,s){const u=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=x(),m=j(),C={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(C.xmlHttpFactory=new yt({})),this.lo(C.initMessageHeaders,t,s),C.encodeInitMessageHeaders=!0;const F=u.join("");It("Connection","Creating WebChannel: "+F,C);const Z=h.createWebChannel(F,C);let re=!1,ve=!1;const Ke=new c_({Hr:St=>{ve?It("Connection","Not sending because WebChannel is closed:",St):(re||(It("Connection","Opening WebChannel transport."),Z.open(),re=!0),It("Connection","WebChannel sending:",St),Z.send(St))},Jr:()=>Z.close()}),bt=(St,en,Dn)=>{St.listen(en,hi=>{try{Dn(hi)}catch(Qi){setTimeout(()=>{throw Qi},0)}})};return bt(Z,Yt.EventType.OPEN,()=>{ve||It("Connection","WebChannel transport opened.")}),bt(Z,Yt.EventType.CLOSE,()=>{ve||(ve=!0,It("Connection","WebChannel transport closed"),Ke.io())}),bt(Z,Yt.EventType.ERROR,St=>{ve||(ve=!0,br("Connection","WebChannel transport errored:",St),Ke.io(new wt(ot.UNAVAILABLE,"The operation could not be completed")))}),bt(Z,Yt.EventType.MESSAGE,St=>{var en;if(!ve){const Dn=St.data[0];Jt(!!Dn);const hi=Dn,Qi=hi.error||(null===(en=hi[0])||void 0===en?void 0:en.error);if(Qi){It("Connection","WebChannel received error:",Qi);const jr=Qi.status;let Oi=function(ri){const mo=xs[ri];if(void 0!==mo)return hd(mo)}(jr),zr=Qi.message;void 0===Oi&&(Oi=ot.INTERNAL,zr="Unknown error status: "+jr+" with message "+Qi.message),ve=!0,Ke.io(new wt(Oi,zr)),Z.close()}else It("Connection","WebChannel received:",Dn),Ke.ro(Dn)}}),bt(m,_e.STAT_EVENT,St=>{St.stat===it.PROXY?It("Connection","Detected buffering proxy"):St.stat===it.NOPROXY&&It("Connection","Detected no buffering proxy")}),setTimeout(()=>{Ke.so()},0),Ke}}function Cm(){return typeof window<"u"?window:null}function sf(){return typeof document<"u"?document:null}function bl(i){return new eu(i,!0)}class wl{constructor(e,t,s=1e3,u=1.5,h=6e4){this.Hs=e,this.timerId=t,this.mo=s,this.yo=u,this.po=h,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),s=Math.max(0,Date.now()-this.Eo),u=Math.max(0,t-s);u>0&&It("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,u,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class af{constructor(e,t,s,u,h,m,C,F){this.Hs=e,this.vo=s,this.Vo=u,this.connection=h,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=C,this.listener=F,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new wl(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,se.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,se.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var s=this;return(0,se.Z)(function*(){s.Lo(),s.qo(),s.xo.cancel(),s.So++,4!==e?s.xo.reset():t&&t.code===ot.RESOURCE_EXHAUSTED?(vr(t.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),s.xo.Ao()):t&&t.code===ot.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Uo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,u])=>{this.So===t&&this.Go(s,u)},s=>{e(()=>{const u=new wt(ot.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Qo(u)})})}Go(e,t){const s=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{s(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(u=>{s(()=>this.Qo(u))}),this.stream.onMessage(u=>{s(()=>this.onMessage(u))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,se.Z)(function*(){e.state=0,e.start()}))}Qo(e){return It("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(It("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Fd extends af{constructor(e,t,s,u,h,m){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,u,m),this.yt=h}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function ke(i,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(F=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===F?1:"REMOVE"===F?2:"CURRENT"===F?3:"RESET"===F?4:jt(),u=e.targetChange.targetIds||[],h=function(F,Z){return F.wt?(Jt(void 0===Z||"string"==typeof Z),y.fromBase64String(Z||"")):(Jt(void 0===Z||Z instanceof Uint8Array),y.fromUint8Array(Z||new Uint8Array))}(i,e.targetChange.resumeToken),m=e.targetChange.cause,C=m&&function(F){const Z=void 0===F.code?ot.UNKNOWN:hd(F.code);return new wt(Z,F.message||"")}(m);t=new Hl(s,u,h,C||null)}else if("documentChange"in e){const s=e.documentChange,u=Ra(i,s.document.name),h=Yi(s.document.updateTime),m=s.document.createTime?Yi(s.document.createTime):mn.min(),C=new Us({mapValue:{fields:s.document.fields}}),F=Di.newFoundDocument(u,h,m,C);t=new Jo(s.targetIds||[],s.removedTargetIds||[],F.key,F)}else if("documentDelete"in e){const s=e.documentDelete,u=Ra(i,s.document),h=s.readTime?Yi(s.readTime):mn.min(),m=Di.newNoDocument(u,h);t=new Jo([],s.removedTargetIds||[],m.key,m)}else if("documentRemove"in e){const s=e.documentRemove,u=Ra(i,s.document);t=new Jo([],s.removedTargetIds||[],u,null)}else{if(!("filter"in e))return jt();{const s=e.filter,h=new Nh(s.count||0);t=new Ec(s.targetId,h)}}var F;return t}(this.yt,e),s=function(u){if(!("targetChange"in u))return mn.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?mn.min():h.readTime?Yi(h.readTime):mn.min()}(e);return this.listener.Wo(t,s)}zo(e){const t={};t.database=d(this.yt),t.addTarget=function(u,h){let m;const C=h.target;return m=Ll(C)?{documents:Un(u,C)}:{query:Cn(u,C)},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0?m.resumeToken=ul(u,h.resumeToken):h.snapshotVersion.compareTo(mn.min())>0&&(m.readTime=pa(u,h.snapshotVersion.toTimestamp())),m}(this.yt,e);const s=function ga(i,e){const t=function(s,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return jt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Bo(t)}Ho(e){const t={};t.database=d(this.yt),t.removeTarget=e,this.Bo(t)}}class Rp extends af{constructor(e,t,s,u,h,m){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,u,m),this.yt=h,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Jt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function fn(i,e){return i&&i.length>0?(Jt(void 0!==e),i.map(t=>function(s,u){let h=Yi(s.updateTime?s.updateTime:u);return h.isEqual(mn.min())&&(h=Yi(u)),new up(h,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Yi(e.commitTime);return this.listener.Zo(s,t)}return Jt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=d(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>dt(this.yt,s))};this.Bo(t)}}class uf extends class{}{constructor(e,t,s,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.yt=u,this.nu=!1}su(){if(this.nu)throw new wt(ot.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.ao(e,t,s,u,h)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ot.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new wt(ot.UNKNOWN,u.toString())})}_o(e,t,s,u){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.connection._o(e,t,s,h,m,u)).catch(h=>{throw"FirebaseError"===h.name?(h.code===ot.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new wt(ot.UNKNOWN,h.toString())})}terminate(){this.nu=!0}}class Op{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(vr(t),this.ou=!1):It("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class Np{constructor(e,t,s,u,h){var m=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=h,this.mu.Ur(C=>{s.enqueueAndForget((0,se.Z)(function*(){var F;Ms(m)&&(It("RemoteStore","Restarting streams for network reachability change."),yield(F=(0,se.Z)(function*(Z){const re=zt(Z);re._u.add(4),yield Nc(re),re.gu.set("Unknown"),re._u.delete(4),yield Oc(re)}),function(Z){return F.apply(this,arguments)})(m))}))}),this.gu=new Op(s,u)}}function Oc(i){return Ud.apply(this,arguments)}function Ud(){return Ud=(0,se.Z)(function*(i){if(Ms(i))for(const e of i.wu)yield e(!0)}),Ud.apply(this,arguments)}function Nc(i){return kp.apply(this,arguments)}function kp(){return kp=(0,se.Z)(function*(i){for(const e of i.wu)yield e(!1)}),kp.apply(this,arguments)}function Vd(i,e){const t=zt(i);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Lp(t)?Fp(t):Wu(t).ko()&&lf(t,e))}function Bd(i,e){const t=zt(i),s=Wu(t);t.du.delete(e),s.ko()&&Pp(t,e),0===t.du.size&&(s.ko()?s.Fo():Ms(t)&&t.gu.set("Unknown"))}function lf(i,e){i.yu.Ot(e.targetId),Wu(i).zo(e)}function Pp(i,e){i.yu.Ot(e),Wu(i).Ho(e)}function Fp(i){i.yu=new Hu({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>i.du.get(e)||null}),Wu(i).start(),i.gu.uu()}function Lp(i){return Ms(i)&&!Wu(i).No()&&i.du.size>0}function Ms(i){return 0===zt(i)._u.size}function Up(i){i.yu=void 0}function d_(i){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,se.Z)(function*(i){i.du.forEach((e,t)=>{lf(i,e)})}),Tm.apply(this,arguments)}function Vp(i,e){return cf.apply(this,arguments)}function cf(){return cf=(0,se.Z)(function*(i,e){Up(i),Lp(i)?(i.gu.hu(e),Fp(i)):i.gu.set("Unknown")}),cf.apply(this,arguments)}function h_(i,e,t){return Bp.apply(this,arguments)}function Bp(){return Bp=(0,se.Z)(function*(i,e,t){if(i.gu.set("Online"),e instanceof Hl&&2===e.state&&e.cause)try{yield(s=(0,se.Z)(function*(u,h){const m=h.cause;for(const C of h.targetIds)u.du.has(C)&&(yield u.remoteSyncer.rejectListen(C,m),u.du.delete(C),u.yu.removeTarget(C))}),function(u,h){return s.apply(this,arguments)})(i,e)}catch(s){It("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield df(i,s)}else if(e instanceof Jo?i.yu.Kt(e):e instanceof Ec?i.yu.Jt(e):i.yu.jt(e),!t.isEqual(mn.min()))try{const s=yield u_(i.localStore);t.compareTo(s)>=0&&(yield function(u,h){const m=u.yu.Zt(h);return m.targetChanges.forEach((C,F)=>{if(C.resumeToken.approximateByteSize()>0){const Z=u.du.get(F);Z&&u.du.set(F,Z.withResumeToken(C.resumeToken,h))}}),m.targetMismatches.forEach(C=>{const F=u.du.get(C);if(!F)return;u.du.set(C,F.withResumeToken(y.EMPTY_BYTE_STRING,F.snapshotVersion)),Pp(u,C);const Z=new Zu(F.target,C,1,F.sequenceNumber);lf(u,Z)}),u.remoteSyncer.applyRemoteEvent(m)}(i,t))}catch(s){It("RemoteStore","Failed to raise snapshot:",s),yield df(i,s)}var s}),Bp.apply(this,arguments)}function df(i,e,t){return hf.apply(this,arguments)}function hf(){return hf=(0,se.Z)(function*(i,e,t){if(!Ia(e))throw e;i._u.add(1),yield Nc(i),i.gu.set("Offline"),t||(t=()=>u_(i.localStore)),i.asyncQueue.enqueueRetryable((0,se.Z)(function*(){It("RemoteStore","Retrying IndexedDB access"),yield t(),i._u.delete(1),yield Oc(i)}))}),hf.apply(this,arguments)}function Sm(i,e){return e().catch(t=>df(i,t,e))}function kc(i){return jd.apply(this,arguments)}function jd(){return jd=(0,se.Z)(function*(i){const e=zt(i),t=wu(e);let s=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;f_(e);)try{const u=yield gm(e.localStore,s);if(null===u){0===e.fu.length&&t.Fo();break}s=u.batchId,p_(e,u)}catch(u){yield df(e,u)}Am(e)&&xm(e)}),jd.apply(this,arguments)}function f_(i){return Ms(i)&&i.fu.length<10}function p_(i,e){i.fu.push(e);const t=wu(i);t.ko()&&t.Yo&&t.Xo(e.mutations)}function Am(i){return Ms(i)&&!wu(i).No()&&i.fu.length>0}function xm(i){wu(i).start()}function g_(i){return Na.apply(this,arguments)}function Na(){return Na=(0,se.Z)(function*(i){wu(i).eu()}),Na.apply(this,arguments)}function jp(i){return $p.apply(this,arguments)}function $p(){return $p=(0,se.Z)(function*(i){const e=wu(i);for(const t of i.fu)e.Xo(t.mutations)}),$p.apply(this,arguments)}function m_(i,e,t){return ff.apply(this,arguments)}function ff(){return ff=(0,se.Z)(function*(i,e,t){const s=i.fu.shift(),u=Uh.from(s,e,t);yield Sm(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield kc(i)}),ff.apply(this,arguments)}function y_(i,e){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,se.Z)(function*(i,e){var t;e&&wu(i).Yo&&(yield(t=(0,se.Z)(function*(s,u){if(kh(h=u.code)&&h!==ot.ABORTED){const m=s.fu.shift();wu(s).Mo(),yield Sm(s,()=>s.remoteSyncer.rejectFailedWrite(m.batchId,u)),yield kc(s)}var h}),function(s,u){return t.apply(this,arguments)})(i,e)),Am(i)&&xm(i)}),Hp.apply(this,arguments)}function Mm(i,e){return $d.apply(this,arguments)}function $d(){return $d=(0,se.Z)(function*(i,e){const t=zt(i);t.asyncQueue.verifyOperationInProgress(),It("RemoteStore","RemoteStore received new credentials");const s=Ms(t);t._u.add(3),yield Nc(t),s&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Oc(t)}),$d.apply(this,arguments)}function Zp(i,e){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,se.Z)(function*(i,e){const t=zt(i);e?(t._u.delete(2),yield Oc(t)):e||(t._u.add(2),yield Nc(t),t.gu.set("Unknown"))}),Gp.apply(this,arguments)}function Wu(i){return i.pu||(i.pu=function(e,t,s){const u=zt(e);return u.su(),new Fd(t,u.connection,u.authCredentials,u.appCheckCredentials,u.yt,s)}(i.datastore,i.asyncQueue,{Yr:d_.bind(null,i),Zr:Vp.bind(null,i),Wo:h_.bind(null,i)}),i.wu.push(function(){var e=(0,se.Z)(function*(t){t?(i.pu.Mo(),Lp(i)?Fp(i):i.gu.set("Unknown")):(yield i.pu.stop(),Up(i))});return function(t){return e.apply(this,arguments)}}())),i.pu}function wu(i){return i.Iu||(i.Iu=function(e,t,s){const u=zt(e);return u.su(),new Rp(t,u.connection,u.authCredentials,u.appCheckCredentials,u.yt,s)}(i.datastore,i.asyncQueue,{Yr:g_.bind(null,i),Zr:y_.bind(null,i),tu:jp.bind(null,i),Zo:m_.bind(null,i)}),i.wu.push(function(){var e=(0,se.Z)(function*(t){t?(i.Iu.Mo(),yield kc(i)):(yield i.Iu.stop(),i.fu.length>0&&(It("RemoteStore",`Stopping write stream with ${i.fu.length} pending writes`),i.fu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Iu}class Pc{constructor(e,t,s,u,h){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=u,this.removalCallback=h,this.deferred=new _i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(m=>{})}static createAndSchedule(e,t,s,u,h){const m=Date.now()+s,C=new Pc(e,t,m,u,h);return C.start(s),C}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new wt(ot.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hd(i,e){if(vr("AsyncQueue",`${e}: ${i}`),Ia(i))return new wt(ot.UNAVAILABLE,`${e}: ${i}`);throw i}class El{constructor(e){this.comparator=e?(t,s)=>e(t,s)||kt.comparator(t.key,s.key):(t,s)=>kt.comparator(t.key,s.key),this.keyedMap=_u(),this.sortedSet=new is(this.comparator)}static emptySet(e){return new El(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof El)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,h=s.getNext().key;if(!u.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new El;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class __{constructor(){this.Tu=new is(kt.comparator)}track(e){const t=e.doc.key,s=this.Tu.get(t);s?0!==e.type&&3===s.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==s.type?this.Tu=this.Tu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Tu=this.Tu.remove(t):1===e.type&&2===s.type?this.Tu=this.Tu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):jt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,s)=>{e.push(s)}),e}}class Yl{constructor(e,t,s,u,h,m,C,F,Z){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=u,this.mutatedKeys=h,this.fromCache=m,this.syncStateChanged=C,this.excludesMetadataChanges=F,this.hasCachedResults=Z}static fromInitialDocuments(e,t,s,u,h){const m=[];return t.forEach(C=>{m.push({type:0,doc:C})}),new Yl(e,t,El.emptySet(t),m,s,u,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==s[u].type||!t[u].doc.isEqual(s[u].doc))return!1;return!0}}class Rm{constructor(){this.Au=void 0,this.listeners=[]}}class Om{constructor(){this.queries=new Ma(e=>ad(e),nl),this.onlineState="Unknown",this.Ru=new Set}}function pf(i,e){return Zd.apply(this,arguments)}function Zd(){return Zd=(0,se.Z)(function*(i,e){const t=zt(i),s=e.query;let u=!1,h=t.queries.get(s);if(h||(u=!0,h=new Rm),u)try{h.Au=yield t.onListen(s)}catch(m){const C=Hd(m,`Initialization of query '${dc(e.query)}' failed`);return void e.onError(C)}t.queries.set(s,h),h.listeners.push(e),e.bu(t.onlineState),h.Au&&e.Pu(h.Au)&&zp(t)}),Zd.apply(this,arguments)}function ru(i,e){return Fc.apply(this,arguments)}function Fc(){return Fc=(0,se.Z)(function*(i,e){const t=zt(i),s=e.query;let u=!1;const h=t.queries.get(s);if(h){const m=h.listeners.indexOf(e);m>=0&&(h.listeners.splice(m,1),u=0===h.listeners.length)}if(u)return t.queries.delete(s),t.onUnlisten(s)}),Fc.apply(this,arguments)}function gf(i,e){const t=zt(i);let s=!1;for(const u of e){const m=t.queries.get(u.query);if(m){for(const C of m.listeners)C.Pu(u)&&(s=!0);m.Au=u}}s&&zp(t)}function Gd(i,e,t){const s=zt(i),u=s.queries.get(e);if(u)for(const h of u.listeners)h.onError(t);s.queries.delete(e)}function zp(i){i.Ru.forEach(e=>{e.next()})}class mf{constructor(e,t,s){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=s||{}}Pu(e){if(!this.options.includeMetadataChanges){const s=[];for(const u of e.docChanges)3!==u.type&&s.push(u);e=new Yl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Yl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class Nm{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class km{constructor(e){this.yt=e}Ji(e){return Ra(this.yt,e)}Yi(e){return e.metadata.exists?B(this.yt,e.document,!1):Di.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Yi(e)}}class v_{constructor(e,t,s){this.Mu=e,this.localStore=t,this.yt=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Lc(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const s=Gn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,s=new km(this.yt);for(const u of e)if(u.metadata.queries){const h=s.Ji(u.metadata.name);for(const m of u.metadata.queries){const C=(t.get(m)||sr()).add(h);t.set(m,C)}}return t}complete(){var e=this;return(0,se.Z)(function*(){const t=yield function ym(i,e,t,s){return xp.apply(this,arguments)}(e.localStore,new km(e.yt),e.documents,e.Mu.id),s=e.$u(e.documents);for(const u of e.queries)yield l_(e.localStore,u,s.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Lc(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Pm{constructor(e){this.key=e}}class b_{constructor(e){this.key=e}}class Fm{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=sr(),this.mutatedKeys=sr(),this.Gu=Sh(e),this.Qu=new El(this.Gu)}get ju(){return this.qu}Wu(e,t){const s=t?t.zu:new __,u=t?t.Qu:this.Qu;let h=t?t.mutatedKeys:this.mutatedKeys,m=u,C=!1;const F="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,Z="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((re,ve)=>{const Ke=u.get(re),bt=Th(this.query,ve)?ve:null,St=!!Ke&&this.mutatedKeys.has(Ke.key),en=!!bt&&(bt.hasLocalMutations||this.mutatedKeys.has(bt.key)&&bt.hasCommittedMutations);let Dn=!1;Ke&&bt?Ke.data.isEqual(bt.data)?St!==en&&(s.track({type:3,doc:bt}),Dn=!0):this.Hu(Ke,bt)||(s.track({type:2,doc:bt}),Dn=!0,(F&&this.Gu(bt,F)>0||Z&&this.Gu(bt,Z)<0)&&(C=!0)):!Ke&&bt?(s.track({type:0,doc:bt}),Dn=!0):Ke&&!bt&&(s.track({type:1,doc:Ke}),Dn=!0,(F||Z)&&(C=!0)),Dn&&(bt?(m=m.add(bt),h=en?h.add(re):h.delete(re)):(m=m.delete(re),h=h.delete(re)))}),null!==this.query.limit)for(;m.size>this.query.limit;){const re="F"===this.query.limitType?m.last():m.first();m=m.delete(re.key),h=h.delete(re.key),s.track({type:1,doc:re})}return{Qu:m,zu:s,$i:C,mutatedKeys:h}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const u=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const h=e.zu.Eu();h.sort((Z,re)=>function(ve,Ke){const bt=St=>{switch(St){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return jt()}};return bt(ve)-bt(Ke)}(Z.type,re.type)||this.Gu(Z.doc,re.doc)),this.Ju(s);const m=t?this.Yu():[],C=0===this.Ku.size&&this.current?1:0,F=C!==this.Uu;return this.Uu=C,0!==h.length||F?{snapshot:new Yl(this.query,e.Qu,u,h,e.mutatedKeys,0===C,F,!1,!!s&&s.resumeToken.approximateByteSize()>0),Xu:m}:{Xu:m}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new __,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=sr(),this.Qu.forEach(s=>{this.Zu(s.key)&&(this.Ku=this.Ku.add(s.key))});const t=[];return e.forEach(s=>{this.Ku.has(s)||t.push(new b_(s))}),this.Ku.forEach(s=>{e.has(s)||t.push(new Pm(s))}),t}tc(e){this.qu=e.Hi,this.Ku=sr();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Yl.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class w_{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class E_{constructor(e){this.key=e,this.nc=!1}}class I_{constructor(e,t,s,u,h,m){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=u,this.currentUser=h,this.maxConcurrentLimboResolutions=m,this.sc={},this.ic=new Ma(C=>ad(C),nl),this.rc=new Map,this.oc=new Set,this.uc=new is(kt.comparator),this.cc=new Map,this.ac=new Ip,this.hc={},this.lc=new Map,this.fc=Wl.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function C_(i,e){return qp.apply(this,arguments)}function qp(){return qp=(0,se.Z)(function*(i,e){const t=If(i);let s,u;const h=t.ic.get(e);if(h)s=h.targetId,t.sharedClientState.addLocalQueryTarget(s),u=h.view.ec();else{const m=yield Rd(t.localStore,ni(e));t.isPrimaryClient&&Vd(t.remoteStore,m);const C=t.sharedClientState.addLocalQueryTarget(m.targetId);s=m.targetId,u=yield Wp(t,e,s,"current"===C,m.resumeToken)}return u}),qp.apply(this,arguments)}function Wp(i,e,t,s,u){return yf.apply(this,arguments)}function yf(){return yf=(0,se.Z)(function*(i,e,t,s,u){i._c=(ve,Ke,bt)=>{return(St=(0,se.Z)(function*(en,Dn,hi,Qi){let jr=Dn.view.Wu(hi);jr.$i&&(jr=yield tf(en.localStore,Dn.query,!1).then(({documents:ri})=>Dn.view.Wu(ri,jr)));const Oi=Qi&&Qi.targetChanges.get(Dn.targetId),zr=Dn.view.applyChanges(jr,en.isPrimaryClient,Oi);return ng(en,Dn.targetId,zr.Xu),zr.snapshot}),function(en,Dn,hi,Qi){return St.apply(this,arguments)})(i,ve,Ke,bt);var St};const h=yield tf(i.localStore,e,!0),m=new Fm(e,h.Hi),C=m.Wu(h.documents),F=$l.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==i.onlineState,u),Z=m.applyChanges(C,i.isPrimaryClient,F);ng(i,t,Z.Xu);const re=new w_(e,t,m);return i.ic.set(e,re),i.rc.has(t)?i.rc.get(t).push(e):i.rc.set(t,[e]),Z.snapshot}),yf.apply(this,arguments)}function Kp(i,e){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,se.Z)(function*(i,e){const t=zt(i),s=t.ic.get(e),u=t.rc.get(s.targetId);if(u.length>1)return t.rc.set(s.targetId,u.filter(h=>!nl(h,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Mc(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),Bd(t.remoteStore,s.targetId),zd(t,s.targetId)}).catch(Ro))):(zd(t,s.targetId),yield Mc(t.localStore,s.targetId,!0))}),Yp.apply(this,arguments)}function Jp(){return Jp=(0,se.Z)(function*(i,e,t){const s=Cf(i);try{const u=yield function(h,m){const C=zt(h),F=Kn.now(),Z=m.reduce((Ke,bt)=>Ke.add(bt.key),sr());let re,ve;return C.persistence.runTransaction("Locally write mutations","readwrite",Ke=>{let bt=Vs(),St=sr();return C.Gi.getEntries(Ke,Z).next(en=>{bt=en,bt.forEach((Dn,hi)=>{hi.isValidDocument()||(St=St.add(Dn))})}).next(()=>C.localDocuments.getOverlayedDocuments(Ke,bt)).next(en=>{re=en;const Dn=[];for(const hi of m){const Qi=Oh(hi,re.get(hi.key).overlayedDocument);null!=Qi&&Dn.push(new Xa(hi.key,Qi,sd(Qi.value.mapValue),Ti.exists(!0)))}return C.mutationQueue.addMutationBatch(Ke,F,Dn,m)}).next(en=>{ve=en;const Dn=en.applyToLocalDocumentSet(re,St);return C.documentOverlayCache.saveOverlays(Ke,en.batchId,Dn)})}).then(()=>({batchId:ve.batchId,changes:$u(re)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(u.batchId),function(h,m,C){let F=h.hc[h.currentUser.toKey()];F||(F=new is(Ln)),F=F.insert(m,C),h.hc[h.currentUser.toKey()]=F}(s,u.batchId,t),yield Yu(s,u.changes),yield kc(s.remoteStore)}catch(u){const h=Hd(u,"Failed to persist write");t.reject(h)}}),Jp.apply(this,arguments)}function Lm(i,e){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,se.Z)(function*(i,e){const t=zt(i);try{const s=yield s0(t.localStore,e);e.targetChanges.forEach((u,h)=>{const m=t.cc.get(h);m&&(Jt(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?m.nc=!0:u.modifiedDocuments.size>0?Jt(m.nc):u.removedDocuments.size>0&&(Jt(m.nc),m.nc=!1))}),yield Yu(t,s,e)}catch(s){yield Ro(s)}}),Xp.apply(this,arguments)}function Um(i,e,t){const s=zt(i);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const u=[];s.ic.forEach((h,m)=>{const C=m.view.bu(e);C.snapshot&&u.push(C.snapshot)}),function(h,m){const C=zt(h);C.onlineState=m;let F=!1;C.queries.forEach((Z,re)=>{for(const ve of re.listeners)ve.bu(m)&&(F=!0)}),F&&zp(C)}(s.eventManager,e),u.length&&s.sc.Wo(u),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function D_(i,e,t){return eg.apply(this,arguments)}function eg(){return eg=(0,se.Z)(function*(i,e,t){const s=zt(i);s.sharedClientState.updateQueryState(e,"rejected",t);const u=s.cc.get(e),h=u&&u.key;if(h){let m=new is(kt.comparator);m=m.insert(h,Di.newNoDocument(h,mn.min()));const C=sr().add(h),F=new al(mn.min(),new Map,new vi(Ln),m,C);yield Lm(s,F),s.uc=s.uc.remove(h),s.cc.delete(e),qd(s)}else yield Mc(s.localStore,e,!1).then(()=>zd(s,e,t)).catch(Ro)}),eg.apply(this,arguments)}function T_(i,e){return _f.apply(this,arguments)}function _f(){return _f=(0,se.Z)(function*(i,e){const t=zt(i),s=e.batch.batchId;try{const u=yield r0(t.localStore,e);Ku(t,s,null),Uc(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield Yu(t,u)}catch(u){yield Ro(u)}}),_f.apply(this,arguments)}function Vm(i,e,t){return tg.apply(this,arguments)}function tg(){return tg=(0,se.Z)(function*(i,e,t){const s=zt(i);try{const u=yield function(h,m){const C=zt(h);return C.persistence.runTransaction("Reject batch","readwrite-primary",F=>{let Z;return C.mutationQueue.lookupMutationBatch(F,m).next(re=>(Jt(null!==re),Z=re.keys(),C.mutationQueue.removeMutationBatch(F,re))).next(()=>C.mutationQueue.performConsistencyCheck(F)).next(()=>C.documentOverlayCache.removeOverlaysForBatchId(F,Z,m)).next(()=>C.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(F,Z)).next(()=>C.localDocuments.getDocuments(F,Z))})}(s.localStore,e);Ku(s,e,t),Uc(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield Yu(s,u)}catch(u){yield Ro(u)}}),tg.apply(this,arguments)}function vf(){return vf=(0,se.Z)(function*(i,e){const t=zt(i);Ms(t.remoteStore)||It("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(h){const m=zt(h);return m.persistence.runTransaction("Get highest unacknowledged batch id","readonly",C=>m.mutationQueue.getHighestUnacknowledgedBatchId(C))}(t.localStore);if(-1===s)return void e.resolve();const u=t.lc.get(s)||[];u.push(e),t.lc.set(s,u)}catch(s){const u=Hd(s,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),vf.apply(this,arguments)}function Uc(i,e){(i.lc.get(e)||[]).forEach(t=>{t.resolve()}),i.lc.delete(e)}function Ku(i,e,t){const s=zt(i);let u=s.hc[s.currentUser.toKey()];if(u){const h=u.get(e);h&&(t?h.reject(t):h.resolve(),u=u.remove(e)),s.hc[s.currentUser.toKey()]=u}}function zd(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.rc.get(e))i.ic.delete(s),t&&i.sc.wc(s,t);i.rc.delete(e),i.isPrimaryClient&&i.ac.ls(e).forEach(s=>{i.ac.containsKey(s)||Vc(i,s)})}function Vc(i,e){i.oc.delete(e.path.canonicalString());const t=i.uc.get(e);null!==t&&(Bd(i.remoteStore,t),i.uc=i.uc.remove(e),i.cc.delete(t),qd(i))}function ng(i,e,t){for(const s of t)s instanceof Pm?(i.ac.addReference(s.key,e),S_(i,s)):s instanceof b_?(It("SyncEngine","Document no longer in limbo: "+s.key),i.ac.removeReference(s.key,e),i.ac.containsKey(s.key)||Vc(i,s.key)):jt()}function S_(i,e){const t=e.key,s=t.path.canonicalString();i.uc.get(t)||i.oc.has(s)||(It("SyncEngine","New document in limbo: "+t),i.oc.add(s),qd(i))}function qd(i){for(;i.oc.size>0&&i.uc.size<i.maxConcurrentLimboResolutions;){const e=i.oc.values().next().value;i.oc.delete(e);const t=new kt(Gn.fromString(e)),s=i.fc.next();i.cc.set(s,new E_(t)),i.uc=i.uc.insert(t,s),Vd(i.remoteStore,new Zu(ni(tl(t.path)),s,2,Fs.at))}}function Yu(i,e,t){return ka.apply(this,arguments)}function ka(){return ka=(0,se.Z)(function*(i,e,t){const s=zt(i),u=[],h=[],m=[];var C;s.ic.isEmpty()||(s.ic.forEach((C,F)=>{m.push(s._c(F,e,t).then(Z=>{if((Z||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(F.targetId,Z?.fromCache?"not-current":"current"),Z){u.push(Z);const re=Jh.Ci(F.targetId,Z);h.push(re)}}))}),yield Promise.all(m),s.sc.Wo(u),yield(C=(0,se.Z)(function*(F,Z){const re=zt(F);try{yield re.persistence.runTransaction("notifyLocalViewChanges","readwrite",ve=>tt.forEach(Z,Ke=>tt.forEach(Ke.Si,bt=>re.persistence.referenceDelegate.addReference(ve,Ke.targetId,bt)).next(()=>tt.forEach(Ke.Di,bt=>re.persistence.referenceDelegate.removeReference(ve,Ke.targetId,bt)))))}catch(ve){if(!Ia(ve))throw ve;It("LocalStore","Failed to update sequence numbers: "+ve)}for(const ve of Z){const Ke=ve.targetId;if(!ve.fromCache){const bt=re.qi.get(Ke),en=bt.withLastLimboFreeSnapshotVersion(bt.snapshotVersion);re.qi=re.qi.insert(Ke,en)}}}),function(F,Z){return C.apply(this,arguments)})(s.localStore,h))}),ka.apply(this,arguments)}function Wd(i,e){return po.apply(this,arguments)}function po(){return po=(0,se.Z)(function*(i,e){const t=zt(i);if(!t.currentUser.isEqual(e)){It("SyncEngine","User change. New user:",e.toKey());const s=yield ef(t.localStore,e);t.currentUser=e,(u=t).lc.forEach(m=>{m.forEach(C=>{C.reject(new wt(ot.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.lc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Yu(t,s.ji)}var u}),po.apply(this,arguments)}function Ql(i,e){const t=zt(i),s=t.cc.get(e);if(s&&s.nc)return sr().add(s.key);{let u=sr();const h=t.rc.get(e);if(!h)return u;for(const m of h){const C=t.ic.get(m);u=u.unionWith(C.view.ju)}return u}}function bf(i,e){return ta.apply(this,arguments)}function ta(){return ta=(0,se.Z)(function*(i,e){const t=zt(i),s=yield tf(t.localStore,e.query,!0),u=e.view.tc(s);return t.isPrimaryClient&&ng(t,e.targetId,u.Xu),u}),ta.apply(this,arguments)}function rg(i,e){return Il.apply(this,arguments)}function Il(){return Il=(0,se.Z)(function*(i,e){const t=zt(i);return Od(t.localStore,e).then(s=>Yu(t,s))}),Il.apply(this,arguments)}function Bc(i,e,t,s){return Cl.apply(this,arguments)}function Cl(){return Cl=(0,se.Z)(function*(i,e,t,s){const u=zt(i),h=yield function(m,C){const F=zt(m),Z=zt(F.mutationQueue);return F.persistence.runTransaction("Lookup mutation documents","readonly",re=>Z.Tn(re,C).next(ve=>ve?F.localDocuments.getDocuments(re,ve):tt.resolve(null)))}(u.localStore,e);var C;null!==h?("pending"===t?yield kc(u.remoteStore):"acknowledged"===t||"rejected"===t?(Ku(u,e,s||null),Uc(u,e),C=e,zt(zt(u.localStore).mutationQueue).An(C)):jt(),yield Yu(u,h)):It("SyncEngine","Cannot apply mutation batch with id: "+e)}),Cl.apply(this,arguments)}function Dl(){return Dl=(0,se.Z)(function*(i,e){const t=zt(i);if(If(t),Cf(t),!0===e&&!0!==t.dc){const s=t.sharedClientState.getAllActiveQueryTargets(),u=yield Jl(t,s.toArray());t.dc=!0,yield Zp(t.remoteStore,!0);for(const h of u)Vd(t.remoteStore,h)}else if(!1===e&&!1!==t.dc){const s=[];let u=Promise.resolve();t.rc.forEach((h,m)=>{t.sharedClientState.isLocalQueryTarget(m)?s.push(m):u=u.then(()=>(zd(t,m),Mc(t.localStore,m,!0))),Bd(t.remoteStore,m)}),yield u,yield Jl(t,s),function(h){const m=zt(h);m.cc.forEach((C,F)=>{Bd(m.remoteStore,F)}),m.ac.fs(),m.cc=new Map,m.uc=new is(kt.comparator)}(t),t.dc=!1,yield Zp(t.remoteStore,!1)}}),Dl.apply(this,arguments)}function Jl(i,e,t){return Tl.apply(this,arguments)}function Tl(){return Tl=(0,se.Z)(function*(i,e,t){const s=zt(i),u=[],h=[];for(const m of e){let C;const F=s.rc.get(m);if(F&&0!==F.length){C=yield Rd(s.localStore,ni(F[0]));for(const Z of F){const re=s.ic.get(Z),ve=yield bf(s,re);ve.snapshot&&h.push(ve.snapshot)}}else{const Z=yield Ap(s.localStore,m);C=yield Rd(s.localStore,Z),yield Wp(s,Xl(Z),m,!1,C.resumeToken)}u.push(C)}return s.sc.Wo(h),u}),Tl.apply(this,arguments)}function Xl(i){return lc(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function $c(i){const e=zt(i);return zt(zt(e.localStore).persistence).vi()}function Bm(i,e,t,s){return wf.apply(this,arguments)}function wf(){return wf=(0,se.Z)(function*(i,e,t,s){const u=zt(i);if(u.dc)return void It("SyncEngine","Ignoring unexpected query state notification.");const h=u.rc.get(e);if(h&&h.length>0)switch(t){case"current":case"not-current":{const m=yield Od(u.localStore,Qa(h[0])),C=al.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,y.EMPTY_BYTE_STRING);yield Yu(u,m,C);break}case"rejected":yield Mc(u.localStore,e,!0),zd(u,e,s);break;default:jt()}}),wf.apply(this,arguments)}function jm(i,e,t){return Ef.apply(this,arguments)}function Ef(){return Ef=(0,se.Z)(function*(i,e,t){const s=If(i);if(s.dc){for(const u of e){if(s.rc.has(u)){It("SyncEngine","Adding an already active target "+u);continue}const h=yield Ap(s.localStore,u),m=yield Rd(s.localStore,h);yield Wp(s,Xl(h),m.targetId,!1,m.resumeToken),Vd(s.remoteStore,m)}for(const u of t)s.rc.has(u)&&(yield Mc(s.localStore,u,!1).then(()=>{Bd(s.remoteStore,u),zd(s,u)}).catch(Ro))}}),Ef.apply(this,arguments)}function If(i){const e=zt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Lm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ql.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=D_.bind(null,e),e.sc.Wo=gf.bind(null,e.eventManager),e.sc.wc=Gd.bind(null,e.eventManager),e}function Cf(i){const e=zt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=T_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vm.bind(null,e),e}class ig{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,se.Z)(function*(){t.yt=bl(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return Xh(this.persistence,new _l,e.initialUser,this.yt)}yc(e){return new Cp(Kh.Bs,this.yt)}gc(e){return new wm}terminate(){var e=this;return(0,se.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class sg extends ig{constructor(e,t,s){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,se.Z)(function*(){yield t().call(s,e),yield s.Ac.initialize(s,e),yield Cf(s.Ac.syncEngine),yield kc(s.Ac.remoteStore),yield s.persistence.li(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Xh(this.persistence,new _l,e.initialUser,this.yt)}Tc(e,t){return new t0(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const s=new du(t,this.persistence);return new el(e.asyncQueue,s)}yc(e){const t=Qh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?ea.withCacheSize(this.cacheSizeBytes):ea.DEFAULT;return new Dp(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,Cm(),sf(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new wm}}class A_ extends sg{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,se.Z)(function*(){yield t().call(s,e);const u=s.Ac.syncEngine;s.sharedClientState instanceof Pd&&(s.sharedClientState.syncEngine={Fr:Bc.bind(null,u),$r:Bm.bind(null,u),Br:jm.bind(null,u),vi:$c.bind(null,u),Mr:rg.bind(null,u)},yield s.sharedClientState.start()),yield s.persistence.li(function(){var h=(0,se.Z)(function*(m){yield function jc(i,e){return Dl.apply(this,arguments)}(s.Ac.syncEngine,m),s.gcScheduler&&(m&&!s.gcScheduler.started?s.gcScheduler.start():m||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(m&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():m||s.indexBackfillerScheduler.stop())});return function(m){return h.apply(this,arguments)}}())})()}gc(e){const t=Cm();if(!Pd.C(t))throw new wt(ot.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Qh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Pd(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class og{initialize(e,t){var s=this;return(0,se.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=u=>Um(s.syncEngine,u,1),s.remoteStore.remoteSyncer.handleCredentialChange=Wd.bind(null,s.syncEngine),yield Zp(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Om}createDatastore(e){const t=bl(e.databaseInfo.databaseId),s=new Im(e.databaseInfo);return new uf(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,u=e.asyncQueue,h=C=>Um(this.syncEngine,C,0),m=Kl.C()?new Kl:new o0,new Np(t,s,u,h,m);var t,s,u,h,m}createSyncEngine(e,t){return function(s,u,h,m,C,F,Z){const re=new I_(s,u,h,m,C,F);return Z&&(re.dc=!0),re}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,se.Z)(function*(t){const s=zt(t);It("RemoteStore","RemoteStore shutting down."),s._u.add(5),yield Nc(s),s.mu.shutdown(),s.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Df(i,e,t){if(!t)throw new wt(ot.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Hm(i,e,t,s){if(!0===e&&!0===s)throw new wt(ot.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function ag(i){if(!kt.isDocumentKey(i))throw new wt(ot.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Tf(i){if(kt.isDocumentKey(i))throw new wt(ot.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Hc(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":jt()}function Vr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new wt(ot.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Hc(i);throw new wt(ot.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Kd(i,e){if(e<=0)throw new wt(ot.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}const Yd=new Map;class Sf{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new wt(ot.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new wt(ot.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Hm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qd{constructor(e,t,s,u){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new wt(ot.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new wt(ot.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sf(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Ua;switch(t.type){case"gapi":return new Au(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new wt(ot.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Yd.get(e);t&&(It("ComponentProvider","Removing Datastore"),Yd.delete(e),t.terminate())}(this),Promise.resolve()}}class Ri{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new iu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ri(this.firestore,e,this._key)}}class go{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new go(this.firestore,e,this._query)}}class iu extends go{constructor(e,t,s){super(e,t,tl(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ri(this.firestore,null,new kt(e))}withConverter(e){return new iu(this.firestore,e,this._path)}}function xf(i,e,...t){if(i=(0,Ye.m9)(i),Df("collection","path",e),i instanceof Qd){const s=Gn.fromString(e,...t);return Tf(s),new iu(i,null,s)}{if(!(i instanceof Ri||i instanceof iu))throw new wt(ot.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Gn.fromString(e,...t));return Tf(s),new iu(i.firestore,null,s)}}function Jd(i,e,...t){if(i=(0,Ye.m9)(i),1===arguments.length&&(e=ja.R()),Df("doc","path",e),i instanceof Qd){const s=Gn.fromString(e,...t);return ag(s),new Ri(i,null,new kt(s))}{if(!(i instanceof Ri||i instanceof iu))throw new wt(ot.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Gn.fromString(e,...t));return ag(s),new Ri(i.firestore,i instanceof iu?i.converter:null,new kt(s))}}function Mf(i,e){return i=(0,Ye.m9)(i),e=(0,Ye.m9)(e),(i instanceof Ri||i instanceof iu)&&(e instanceof Ri||e instanceof iu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Rf(i,e){return i=(0,Ye.m9)(i),e=(0,Ye.m9)(e),i instanceof go&&e instanceof go&&i.firestore===e.firestore&&nl(i._query,e._query)&&i.converter===e.converter}function Gm(i,e=10240){let t=0;return{read:()=>(0,se.Z)(function*(){if(t<i.byteLength){const s={value:i.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,se.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Xd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):vr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class zm{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new _i,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(s=>{s&&s.Ou()?this.metadata.resolve(s.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.ku)}`))},s=>this.metadata.reject(s))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,se.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,se.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,se.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const s=e.vc.decode(t),u=Number(s);isNaN(u)&&e.Dc(`length string (${s}) is not valid number`);const h=yield e.Cc(u);return new Nm(JSON.parse(h),t.length+u)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,se.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}Cc(e){var t=this;return(0,se.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const s=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,se.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class R_{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,se.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new wt(ot.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(u=(0,se.Z)(function*(h,m){const C=zt(h),F=d(C.yt)+"/documents",Z={documents:m.map(bt=>cl(C.yt,bt))},re=yield C._o("BatchGetDocuments",F,Z,m.length),ve=new Map;re.forEach(bt=>{const St=function J(i,e){return"found"in e?function(t,s){Jt(!!s.found);const u=Ra(t,s.found.name),h=Yi(s.found.updateTime),m=s.found.createTime?Yi(s.found.createTime):mn.min(),C=new Us({mapValue:{fields:s.found.fields}});return Di.newFoundDocument(u,h,m,C)}(i,e):"missing"in e?function(t,s){Jt(!!s.missing),Jt(!!s.readTime);const u=Ra(t,s.missing),h=Yi(s.readTime);return Di.newNoDocument(u,h)}(i,e):jt()}(C.yt,bt);ve.set(St.key.toString(),St)});const Ke=[];return m.forEach(bt=>{const St=ve.get(bt.toString());Jt(!!St),Ke.push(St)}),Ke}),function(h,m){return u.apply(this,arguments)})(t.datastore,e);var u;return s.forEach(u=>t.recordVersion(u)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new da(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,se.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,u)=>{const h=kt.fromPath(u);e.mutations.push(new mc(h,e.precondition(h)))}),yield(s=(0,se.Z)(function*(u,h){const m=zt(u),C=d(m.yt)+"/documents",F={writes:h.map(Z=>dt(m.yt,Z))};yield m.ao("Commit",C,F)}),function(u,h){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw jt();t=mn.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new wt(ot.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(mn.min())?Ti.exists(!1):Ti.updateTime(t):Ti.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(mn.min()))throw new wt(ot.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ti.updateTime(t)}return Ti.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class O_{constructor(e,t,s,u,h){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=u,this.deferred=h,this.kc=s.maxAttempts,this.xo=new wl(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,se.Z)(function*(){const t=new R_(e.datastore),s=e.Mc(t);s&&s.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(h=>{e.Fc(h)}))}).catch(u=>{e.Fc(u)})}))}Mc(e){try{const t=this.updateFunction(e);return!Ki(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!kh(t)}return!1}}class Wm{constructor(e,t,s,u){var h=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=u,this.user=Rn.UNAUTHENTICATED,this.clientId=ja.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var m=(0,se.Z)(function*(C){It("FirestoreClient","Received user=",C.uid),yield h.authCredentialListener(C),h.user=C});return function(C){return m.apply(this,arguments)}}()),this.appCheckCredentials.start(s,m=>(It("FirestoreClient","Received new app check token=",m),this.appCheckCredentialListener(m,this.user)))}getConfiguration(){var e=this;return(0,se.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new wt(ot.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new _i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,se.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const u=Hd(s,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function Of(i,e){return Nf.apply(this,arguments)}function Nf(){return Nf=(0,se.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),It("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,se.Z)(function*(h){s.isEqual(h)||(yield ef(e.localStore,h),s=h)});return function(h){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),Nf.apply(this,arguments)}function ug(i,e){return kf.apply(this,arguments)}function kf(){return kf=(0,se.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Pf(i);It("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield e.initialize(t,s),i.setCredentialChangeListener(u=>Mm(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,h)=>Mm(e.remoteStore,h)),i.onlineComponents=e}),kf.apply(this,arguments)}function Pf(i){return Ff.apply(this,arguments)}function Ff(){return Ff=(0,se.Z)(function*(i){return i.offlineComponents||(It("FirestoreClient","Using default OfflineComponentProvider"),yield Of(i,new ig)),i.offlineComponents}),Ff.apply(this,arguments)}function eh(i){return Lf.apply(this,arguments)}function Lf(){return Lf=(0,se.Z)(function*(i){return i.onlineComponents||(It("FirestoreClient","Using default OnlineComponentProvider"),yield ug(i,new og)),i.onlineComponents}),Lf.apply(this,arguments)}function lg(i){return Pf(i).then(e=>e.persistence)}function ec(i){return Pf(i).then(e=>e.localStore)}function Eu(i){return eh(i).then(e=>e.remoteStore)}function cg(i){return eh(i).then(e=>e.syncEngine)}function Sl(i){return Qu.apply(this,arguments)}function Qu(){return Qu=(0,se.Z)(function*(i){const e=yield eh(i),t=e.eventManager;return t.onListen=C_.bind(null,e.syncEngine),t.onUnlisten=Kp.bind(null,e.syncEngine),t}),Qu.apply(this,arguments)}function k_(i,e,t={}){const s=new _i;return i.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return function(u,h,m,C,F){const Z=new Xd({next:ve=>{h.enqueueAndForget(()=>ru(u,re));const Ke=ve.docs.has(m);!Ke&&ve.fromCache?F.reject(new wt(ot.UNAVAILABLE,"Failed to get document because the client is offline.")):Ke&&ve.fromCache&&C&&"server"===C.source?F.reject(new wt(ot.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):F.resolve(ve)},error:ve=>F.reject(ve)}),re=new mf(tl(m.path),Z,{includeMetadataChanges:!0,Nu:!0});return pf(u,re)}(yield Sl(i),i.asyncQueue,e,t,s)})),s.promise}function Ym(i,e,t={}){const s=new _i;return i.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return function(u,h,m,C,F){const Z=new Xd({next:ve=>{h.enqueueAndForget(()=>ru(u,re)),ve.fromCache&&"server"===C.source?F.reject(new wt(ot.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):F.resolve(ve)},error:ve=>F.reject(ve)}),re=new mf(m,Z,{includeMetadataChanges:!0,Nu:!0});return pf(u,re)}(yield Sl(i),i.asyncQueue,e,t,s)})),s.promise}class Ks{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new wl(this,"async_queue_retry"),this.Wc=()=>{const t=sf();t&&It("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=sf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=sf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new _i;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,se.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Ia(t))throw t;It("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(s=>{throw this.Kc=s,this.Gc=!1,vr("INTERNAL UNHANDLED ERROR: ",function(h){let m=h.message||"";return h.stack&&(m=h.stack.includes(h.message)?h.stack:h.message+"\n"+h.stack),m}(s)),s}).then(s=>(this.Gc=!1,s))));return this.Bc=t,t}enqueueAfterDelay(e,t,s){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const u=Pc.createAndSchedule(this,e,t,s,h=>this.Yc(h));return this.Uc.push(u),u}zc(){this.Kc&&jt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,se.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function Uf(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const u of["next","error","complete"])if(u in s&&"function"==typeof s[u])return!0;return!1}(i)}class L_{constructor(){this._progressObserver={},this._taskCompletionResolver=new _i,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Fi extends Qd{constructor(e,t,s,u){super(e,t,s,u),this.type="firestore",this._queue=new Ks,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||tc(this),this._firestoreClient.terminate()}}function ys(i){return i._firestoreClient||tc(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function tc(i){var e;const t=i._freezeSettings(),s=(h=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new hu(i._databaseId,h,i._persistenceKey,(C=t).host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,C.useFetchStreams));var h,C;i._firestoreClient=new Wm(i._authCredentials,i._appCheckCredentials,i._queue,s)}function fg(i,e,t){const s=new _i;return i.asyncQueue.enqueue((0,se.Z)(function*(){try{yield Of(i,t),yield ug(i,e),s.resolve()}catch(u){const h=u;if(!("FirebaseError"===(m=h).name?m.code===ot.FAILED_PRECONDITION||m.code===ot.UNIMPLEMENTED:!(typeof DOMException<"u"&&m instanceof DOMException)||22===m.code||20===m.code||11===m.code))throw h;br("Error enabling offline persistence. Falling back to persistence disabled: "+h),s.reject(h)}var m})).then(()=>s.promise)}function ty(i){if(i._initialized||i._terminated)throw new wt(ot.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ys{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ys(y.fromBase64String(e))}catch(t){throw new wt(ot.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ys(y.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Qs{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new wt(ot.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Al{constructor(e){this._methodName=e}}class th{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new wt(ot.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new wt(ot.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ln(this._lat,e._lat)||Ln(this._long,e._long)}}const Z_=/^__.*__$/;class G_{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Xa(e,this.data,this.fieldMask,t,this.fieldTransforms):new ju(e,this.data,t,this.fieldTransforms)}}class ny{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Xa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ry(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw jt()}}class Zc{constructor(e,t,s,u,h,m){this.settings=e,this.databaseId=t,this.yt=s,this.ignoreUndefinedProperties=u,void 0===h&&this.na(),this.fieldTransforms=h||[],this.fieldMask=m||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Zc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.ia({path:s,oa:!1});return u.ua(e),u}ca(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.ia({path:s,oa:!1});return u.na(),u}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return uh(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(ry(this.sa)&&Z_.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class nh{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=s||bl(e)}da(e,t,s,u=!1){return new Zc({sa:e,methodName:t,fa:s,path:Yr.emptyPath(),oa:!1,la:u},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function nc(i){const e=i._freezeSettings(),t=bl(i._databaseId);return new nh(i._databaseId,!!e.ignoreUndefinedProperties,t)}function rh(i,e,t,s,u,h={}){const m=i.da(h.merge||h.mergeFields?2:0,e,t,u);$f("Data must be an object, but it was:",m,s);const C=gg(s,m);let F,Z;if(h.merge)F=new Io(m.fieldMask),Z=m.fieldTransforms;else if(h.mergeFields){const re=[];for(const ve of h.mergeFields){const Ke=Hf(e,ve,t);if(!m.contains(Ke))throw new wt(ot.INVALID_ARGUMENT,`Field '${Ke}' is specified in your field mask but missing from your input data.`);oy(re,Ke)||re.push(Ke)}F=new Io(re),Z=m.fieldTransforms.filter(ve=>F.covers(ve.field))}else F=null,Z=m.fieldTransforms;return new G_(new Us(C),F,Z)}class ih extends Al{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ih}}function pg(i,e,t){return new Zc({sa:3,fa:e.settings.fa,methodName:i._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class Vf extends Al{_toFieldTransform(e){return new Ja(e.path,new sl)}isEqual(e){return e instanceof Vf}}class Bf extends Al{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=pg(this,e,!0),s=this._a.map(h=>xl(h,t)),u=new ca(s);return new Ja(e.path,u)}isEqual(e){return this===e}}class z_ extends Al{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=pg(this,e,!0),s=this._a.map(h=>xl(h,t)),u=new gu(s);return new Ja(e.path,u)}isEqual(e){return this===e}}class iy extends Al{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new mu(e.yt,rl(e.yt,this.wa));return new Ja(e.path,t)}isEqual(e){return this===e}}function jf(i,e,t,s){const u=i.da(1,e,t);$f("Data must be an object, but it was:",u,s);const h=[],m=Us.empty();wo(s,(F,Z)=>{const re=ah(e,F,t);Z=(0,Ye.m9)(Z);const ve=u.ca(re);if(Z instanceof ih)h.push(re);else{const Ke=xl(Z,ve);null!=Ke&&(h.push(re),m.set(re,Ke))}});const C=new Io(h);return new ny(m,C,u.fieldTransforms)}function sh(i,e,t,s,u,h){const m=i.da(1,e,t),C=[Hf(e,s,t)],F=[u];if(h.length%2!=0)throw new wt(ot.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ke=0;Ke<h.length;Ke+=2)C.push(Hf(e,h[Ke])),F.push(h[Ke+1]);const Z=[],re=Us.empty();for(let Ke=C.length-1;Ke>=0;--Ke)if(!oy(Z,C[Ke])){const bt=C[Ke];let St=F[Ke];St=(0,Ye.m9)(St);const en=m.ca(bt);if(St instanceof ih)Z.push(bt);else{const Dn=xl(St,en);null!=Dn&&(Z.push(bt),re.set(bt,Dn))}}const ve=new Io(Z);return new ny(re,ve,m.fieldTransforms)}function oh(i,e,t,s=!1){return xl(t,i.da(s?4:3,e))}function xl(i,e){if(mg(i=(0,Ye.m9)(i)))return $f("Unsupported field value:",e,i),gg(i,e);if(i instanceof Al)return function(t,s){if(!ry(s.sa))throw s.ha(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.ha(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(s);u&&s.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,s){const u=[];let h=0;for(const m of t){let C=xl(m,s.aa(h));null==C&&(C={nullValue:"NULL_VALUE"}),u.push(C),h++}return{arrayValue:{values:u}}}(i,e)}return function(t,s){if(null===(t=(0,Ye.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return rl(s.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=Kn.fromDate(t);return{timestampValue:pa(s.yt,u)}}if(t instanceof Kn){const u=new Kn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:pa(s.yt,u)}}if(t instanceof th)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ys)return{bytesValue:ul(s.yt,t._byteString)};if(t instanceof Ri){const u=s.databaseId,h=t.firestore._databaseId;if(!h.isEqual(u))throw s.ha(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ll(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.ha(`Unsupported field value: ${Hc(t)}`)}(i,e)}function gg(i,e){const t={};return Wa(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wo(i,(s,u)=>{const h=xl(u,e.ra(s));null!=h&&(t[s]=h)}),{mapValue:{fields:t}}}function mg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Kn||i instanceof th||i instanceof Ys||i instanceof Ri||i instanceof Al)}function $f(i,e,t){if(!mg(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Hc(t);throw e.ha("an object"===s?i+" a custom object":i+" "+s)}var s}function Hf(i,e,t){if((e=(0,Ye.m9)(e))instanceof Qs)return e._internalPath;if("string"==typeof e)return ah(i,e);throw uh("Field path arguments must be of type string or ",i,!1,void 0,t)}const sy=new RegExp("[~\\*/\\[\\]]");function ah(i,e,t){if(e.search(sy)>=0)throw uh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Qs(...e.split("."))._internalPath}catch{throw uh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function uh(i,e,t,s,u){const h=s&&!s.isEmpty(),m=void 0!==u;let C=`Function ${e}() called with invalid data`;t&&(C+=" (via `toFirestore()`)"),C+=". ";let F="";return(h||m)&&(F+=" (found",h&&(F+=` in field ${s}`),m&&(F+=` in document ${u}`),F+=")"),new wt(ot.INVALID_ARGUMENT,C+i+F)}function oy(i,e){return i.some(t=>t.isEqual(e))}class lh{constructor(e,t,s,u,h){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=u,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Ri(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new q_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Zf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class q_ extends lh{data(){return super.data()}}function Zf(i,e){return"string"==typeof e?ah(i,e):e instanceof Qs?e._internalPath:e._delegate._internalPath}function ay(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new wt(ot.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yg{}class ch extends yg{}function Ml(i,e,...t){let s=[];e instanceof yg&&s.push(e),s=s.concat(t),function(u){const h=u.filter(C=>C instanceof Gc).length,m=u.filter(C=>C instanceof dh).length;if(h>1||h>0&&m>0)throw new wt(ot.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const u of s)i=u._apply(i);return i}class dh extends ch{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new dh(e,t,s)}_apply(e){const t=this._parse(e);return Eg(e._query,t),new go(e.firestore,e.converter,Lu(e._query,t))}_parse(e){const t=nc(e.firestore);return function(u,h,m,C,F,Z,re){let ve;if(F.isKeyField()){if("array-contains"===Z||"array-contains-any"===Z)throw new wt(ot.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Z}' queries on documentId().`);if("in"===Z||"not-in"===Z){wg(re,Z);const Ke=[];for(const bt of re)Ke.push(bg(C,u,bt));ve={arrayValue:{values:Ke}}}else ve=bg(C,u,re)}else"in"!==Z&&"not-in"!==Z&&"array-contains-any"!==Z||wg(re,Z),ve=oh(m,"where",re,"in"===Z||"not-in"===Z);return xn.create(F,Z,ve)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Gc extends yg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Gc(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:Nr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,u){let h=s;const m=u.getFlattenedFilters();for(const C of m)Eg(h,C),h=Lu(h,C)}(e._query,t),new go(e.firestore,e.converter,Lu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class _g extends ch{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new _g(e,t)}_apply(e){const t=function(s,u,h){if(null!==s.startAt)throw new wt(ot.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new wt(ot.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const m=new fu(u,h);return function(C,F){if(null===co(C)){const Z=Fu(C);null!==Z&&Ig(0,Z,F.field)}}(s,m),m}(e._query,this._field,this._direction);return new go(e.firestore,e.converter,function(s,u){const h=s.explicitOrderBy.concat([u]);return new Ka(s.path,s.collectionGroup,h,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class Gf extends ch{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Gf(e,t,s)}_apply(e){return new go(e.firestore,e.converter,Vl(e._query,this._limit,this._limitType))}}class hh extends ch{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new hh(e,t,s)}_apply(e){const t=vg(e,this.type,this._docOrFields,this._inclusive);return new go(e.firestore,e.converter,(u=t,new Ka((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,u,s.endAt)));var s,u}}class fh extends ch{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new fh(e,t,s)}_apply(e){const t=vg(e,this.type,this._docOrFields,this._inclusive);return new go(e.firestore,e.converter,(u=t,new Ka((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,u)));var s,u}}function vg(i,e,t,s){if(t[0]=(0,Ye.m9)(t[0]),t[0]instanceof lh)return function(u,h,m,C,F){if(!C)throw new wt(ot.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${m}().`);const Z=[];for(const re of Ya(u))if(re.field.isKeyField())Z.push(Eo(h,C.key));else{const ve=C.data.field(re.field);if(Re(ve))throw new wt(ot.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+re.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ve){const Ke=re.field.canonicalString();throw new wt(ot.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ke}' (used as the orderBy) does not exist.`)}Z.push(ve)}return new un(Z,F)}(i._query,i.firestore._databaseId,e,t[0]._document,s);{const u=nc(i.firestore);return function(h,m,C,F,Z,re){const ve=h.explicitOrderBy;if(Z.length>ve.length)throw new wt(ot.INVALID_ARGUMENT,`Too many arguments provided to ${F}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ke=[];for(let bt=0;bt<Z.length;bt++){const St=Z[bt];if(ve[bt].field.isKeyField()){if("string"!=typeof St)throw new wt(ot.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${F}(), but got a ${typeof St}`);if(!Ul(h)&&-1!==St.indexOf("/"))throw new wt(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${F}() must be a plain document ID, but '${St}' contains a slash.`);const en=h.path.child(Gn.fromString(St));if(!kt.isDocumentKey(en))throw new wt(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${F}() must result in a valid document path, but '${en}' is not because it contains an odd number of segments.`);const Dn=new kt(en);Ke.push(Eo(m,Dn))}else{const en=oh(C,F,St);Ke.push(en)}}return new un(Ke,re)}(i._query,i.firestore._databaseId,u,e,t,s)}}function bg(i,e,t){if("string"==typeof(t=(0,Ye.m9)(t))){if(""===t)throw new wt(ot.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ul(e)&&-1!==t.indexOf("/"))throw new wt(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Gn.fromString(t));if(!kt.isDocumentKey(s))throw new wt(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Eo(i,new kt(s))}if(t instanceof Ri)return Eo(i,t._key);throw new wt(ot.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hc(t)}.`)}function wg(i,e){if(!Array.isArray(i)||0===i.length)throw new wt(ot.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new wt(ot.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Eg(i,e){if(e.isInequality()){const s=Fu(i),u=e.field;if(null!==s&&!s.isEqual(u))throw new wt(ot.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${u.toString()}'`);const h=co(i);null!==h&&Ig(0,u,h)}const t=function(s,u){for(const h of s)for(const m of h.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(i.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new wt(ot.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Ig(i,e,t){if(!t.isEqual(e))throw new wt(ot.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Cg{convertValue(e,t="none"){switch(ti(e)){case 0:return null;case 1:return e.booleanValue;case 2:return z(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(X(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw jt()}}convertObject(e,t){const s={};return wo(e.fields,(u,h)=>{s[u]=this.convertValue(h,t)}),s}convertGeoPoint(e){return new th(z(e.latitude),z(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=vt(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Gt(e));default:return null}}convertTimestamp(e){const t=N(e);return new Kn(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Gn.fromString(e);Jt(vd(s));const u=new Sr(s.get(1),s.get(3)),h=new kt(s.popFirst(5));return u.isEqual(t)||vr(`Document ${h} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),h}}function zf(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class zc extends Cg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ys(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ri(this.firestore,null,t)}}class qc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class su extends lh{constructor(e,t,s,u,h,m){super(e,t,s,u,m),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new qf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Zf("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class qf extends su{data(e={}){return super.data(e)}}class Ju{constructor(e,t,s,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new qc(u.hasPendingWrites,u.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new qf(this._firestore,this._userDataWriter,s.key,s,new qc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new wt(ot.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,u){if(s._snapshot.oldDocs.isEmpty()){let h=0;return s._snapshot.docChanges.map(m=>({type:"added",doc:new qf(s._firestore,s._userDataWriter,m.doc.key,m.doc,new qc(s._snapshot.mutatedKeys.has(m.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:h++}))}{let h=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(m=>u||3!==m.type).map(m=>{const C=new qf(s._firestore,s._userDataWriter,m.doc.key,m.doc,new qc(s._snapshot.mutatedKeys.has(m.doc.key),s._snapshot.fromCache),s.query.converter);let F=-1,Z=-1;return 0!==m.type&&(F=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),1!==m.type&&(h=h.add(m.doc),Z=h.indexOf(m.doc.key)),{type:hy(m.type),doc:C,oldIndex:F,newIndex:Z}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function hy(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return jt()}}function J_(i,e){return i instanceof su&&e instanceof su?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Ju&&e instanceof Ju&&i._firestore===e._firestore&&Rf(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class Ol extends Cg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ys(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ri(this.firestore,null,t)}}function ph(i,e,t){i=Vr(i,Ri);const s=Vr(i.firestore,Fi),u=zf(i.converter,e,t);return rc(s,[rh(nc(s),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,Ti.none())])}function ss(i,e,t,...s){i=Vr(i,Ri);const u=Vr(i.firestore,Fi),h=nc(u);let m;return m="string"==typeof(e=(0,Ye.m9)(e))||e instanceof Qs?sh(h,"updateDoc",i._key,e,t,s):jf(h,"updateDoc",i._key,e),rc(u,[m.toMutation(i._key,Ti.exists(!0))])}function Dg(i,...e){var t,s,u;i=(0,Ye.m9)(i);let h={includeMetadataChanges:!1},m=0;"object"!=typeof e[m]||Uf(e[m])||(h=e[m],m++);const C={includeMetadataChanges:h.includeMetadataChanges};if(Uf(e[m])){const ve=e[m];e[m]=null===(t=ve.next)||void 0===t?void 0:t.bind(ve),e[m+1]=null===(s=ve.error)||void 0===s?void 0:s.bind(ve),e[m+2]=null===(u=ve.complete)||void 0===u?void 0:u.bind(ve)}let F,Z,re;if(i instanceof Ri)Z=Vr(i.firestore,Fi),re=tl(i._key.path),F={next:ve=>{e[m]&&e[m](Kf(Z,i,ve))},error:e[m+1],complete:e[m+2]};else{const ve=Vr(i,go);Z=Vr(ve.firestore,Fi),re=ve._query;const Ke=new Ol(Z);F={next:bt=>{e[m]&&e[m](new Ju(Z,Ke,ve,bt))},error:e[m+1],complete:e[m+2]},ay(i._query)}return function(ve,Ke,bt,St){const en=new Xd(St),Dn=new mf(Ke,en,bt);return ve.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return pf(yield Sl(ve),Dn)})),()=>{en.bc(),ve.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return ru(yield Sl(ve),Dn)}))}}(ys(Z),re,C,F)}function rc(i,e){return function(t,s){const u=new _i;return t.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return function Qp(i,e,t){return Jp.apply(this,arguments)}(yield cg(t),s,u)})),u.promise}(ys(i),e)}function Kf(i,e,t){const s=t.docs.get(e._key),u=new Ol(i);return new su(i,u,e._key,s,new qc(t.hasPendingWrites,t.fromCache),e.converter)}const sv={maxAttempts:5};class py{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=nc(e)}set(e,t,s){this._verifyNotCommitted();const u=Nl(e,this._firestore),h=zf(u.converter,t,s),m=rh(this._dataReader,"WriteBatch.set",u._key,h,null!==u.converter,s);return this._mutations.push(m.toMutation(u._key,Ti.none())),this}update(e,t,s,...u){this._verifyNotCommitted();const h=Nl(e,this._firestore);let m;return m="string"==typeof(t=(0,Ye.m9)(t))||t instanceof Qs?sh(this._dataReader,"WriteBatch.update",h._key,t,s,u):jf(this._dataReader,"WriteBatch.update",h._key,t),this._mutations.push(m.toMutation(h._key,Ti.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Nl(e,this._firestore);return this._mutations=this._mutations.concat(new da(t._key,Ti.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new wt(ot.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Nl(i,e){if((i=(0,Ye.m9)(i)).firestore!==e)throw new wt(ot.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class gh extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=nc(e)}get(e){const t=Nl(e,this._firestore),s=new zc(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return jt();const h=u[0];if(h.isFoundDocument())return new lh(this._firestore,s,h.key,h,t.converter);if(h.isNoDocument())return new lh(this._firestore,s,t._key,null,t.converter);throw jt()})}set(e,t,s){const u=Nl(e,this._firestore),h=zf(u.converter,t,s),m=rh(this._dataReader,"Transaction.set",u._key,h,null!==u.converter,s);return this._transaction.set(u._key,m),this}update(e,t,s,...u){const h=Nl(e,this._firestore);let m;return m="string"==typeof(t=(0,Ye.m9)(t))||t instanceof Qs?sh(this._dataReader,"Transaction.update",h._key,t,s,u):jf(this._dataReader,"Transaction.update",h._key,t),this._transaction.update(h._key,m),this}delete(e){const t=Nl(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Nl(e,this._firestore),s=new Ol(this._firestore);return super.get(e).then(u=>new su(this._firestore,s,t._key,u._document,new qc(!1,!1),t.converter))}}function Tg(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new wt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function yy(){if(typeof Uint8Array>"u")throw new wt("unimplemented","Uint8Arrays are not available in this environment.")}function Sg(){if(!function E(){return typeof atob<"u"}())throw new wt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){Wn=$e.SDK_VERSION,(0,$e._registerComponent)(new Le.wA("firestore",(t,{instanceIdentifier:s,options:u})=>{const h=t.getProvider("app").getImmediate(),m=new Fi(new Va(t.getProvider("auth-internal")),new xu(t.getProvider("app-check-internal")),function(C,F){if(!Object.prototype.hasOwnProperty.apply(C.options,["projectId"]))throw new wt(ot.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sr(C.options.projectId,F)}(h,s),h);return u=Object.assign({useFetchStreams:e},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),(0,$e.registerVersion)(Zn,"3.8.0",i),(0,$e.registerVersion)(Zn,"3.8.0","esm2017")}();class Yc{constructor(e){this._delegate=e}static fromBase64String(e){return Sg(),new Yc(Ys.fromBase64String(e))}static fromUint8Array(e){return yy(),new Yc(Ys.fromUint8Array(e))}toBase64(){return Sg(),this._delegate.toBase64()}toUint8Array(){return yy(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Qf(i){return function dv(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(i,["next","error","complete"])}class _y{enableIndexedDbPersistence(e,t){return function B_(i,e){ty(i=Vr(i,Fi));const t=ys(i),s=i._freezeSettings(),u=new og;return fg(t,u,new sg(u,s.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function j_(i){ty(i=Vr(i,Fi));const e=ys(i),t=i._freezeSettings(),s=new og;return fg(e,s,new A_(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function $_(i){if(i._initialized&&!i._terminated)throw new wt(ot.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new _i;return i._queue.enqueueAndForgetEvenWhileRestricted((0,se.Z)(function*(){try{yield(t=(0,se.Z)(function*(s){if(!oo.C())return Promise.resolve();const u=s+"main";yield oo.delete(u)}),function(s){return t.apply(this,arguments)})(Qh(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class vy{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Sr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&br("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function Af(i,e,t,s={}){var u;const h=(i=Vr(i,Qd))._getSettings();if("firestore.googleapis.com"!==h.host&&h.host!==e&&br("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},h),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let m,C;if("string"==typeof s.mockUserToken)m=s.mockUserToken,C=Rn.MOCK_USER;else{m=(0,Ye.Sg)(s.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const F=s.mockUserToken.sub||s.mockUserToken.user_id;if(!F)throw new wt(ot.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");C=new Rn(F)}i._authCredentials=new wa(new Mo(m,C))}}(this._delegate,e,t,s)}enableNetwork(){return function c0(i){return function dg(i){return i.asyncQueue.enqueue((0,se.Z)(function*(){const e=yield lg(i),t=yield Eu(i);return e.setNetworkEnabled(!0),function(s){const u=zt(s);return u._u.delete(0),Oc(u)}(t)}))}(ys(i=Vr(i,Fi)))}(this._delegate)}disableNetwork(){return function Xm(i){return function N_(i){return i.asyncQueue.enqueue((0,se.Z)(function*(){const e=yield lg(i),t=yield Eu(i);return e.setNetworkEnabled(!1),(s=(0,se.Z)(function*(u){const h=zt(u);h._u.add(0),yield Nc(h),h.gu.set("Offline")}),function(u){return s.apply(this,arguments)})(t);var s}))}(ys(i=Vr(i,Fi)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Hm("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Jm(i){return function(e){const t=new _i;return e.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return function a0(i,e){return vf.apply(this,arguments)}(yield cg(e),t)})),t.promise}(ys(i=Vr(i,Fi)))}(this._delegate)}onSnapshotsInSync(e){return function nv(i,e){return function P_(i,e){const t=new Xd(e);return i.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return s=yield Sl(i),u=t,zt(s).Ru.add(u),void u.next();var s,u})),()=>{t.bc(),i.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return s=yield Sl(i),u=t,void zt(s).Ru.delete(u);var s,u}))}}(ys(i=Vr(i,Fi)),Uf(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new wt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Jc(this,xf(this._delegate,e))}catch(t){throw na(t,"collection()","Firestore.collection()")}}doc(e){try{return new ou(this,Jd(this._delegate,e))}catch(t){throw na(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new No(this,function Zm(i,e){if(i=Vr(i,Qd),Df("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new wt(ot.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new go(i,null,(t=e,new Ka(Gn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw na(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function ov(i,e,t){i=Vr(i,Fi);const s=Object.assign(Object.assign({},sv),t);return function(u){if(u.maxAttempts<1)throw new wt(ot.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(u,h,m){const C=new _i;return u.asyncQueue.enqueueAndForget((0,se.Z)(function*(){const F=yield function Km(i){return eh(i).then(e=>e.datastore)}(u);new O_(u.asyncQueue,F,m,h,C).run()})),C.promise}(ys(i),u=>e(new gh(i,u)),s)}(this._delegate,t=>e(new hv(this,t)))}batch(){return ys(this._delegate),new fv(new py(this._delegate,e=>rc(this._delegate,e)))}loadBundle(e){return function Iu(i,e){const t=ys(i=Vr(i,Fi)),s=new L_;return function Qm(i,e,t,s){const u=function(h,m){let C;return C="string"==typeof h?(new TextEncoder).encode(h):h,F=function(F,Z){if(F instanceof Uint8Array)return Gm(F,Z);if(F instanceof ArrayBuffer)return Gm(new Uint8Array(F),Z);if(F instanceof ReadableStream)return F.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(C),new zm(F,m);var F}(t,bl(e));i.asyncQueue.enqueueAndForget((0,se.Z)(function*(){!function $m(i,e,t){const s=zt(i);var u;(u=(0,se.Z)(function*(h,m,C){try{const F=yield m.getMetadata();if(yield function(Ke,bt){const St=zt(Ke),en=Yi(bt.createTime);return St.persistence.runTransaction("hasNewerBundle","readonly",Dn=>St.Ns.getBundleMetadata(Dn,bt.id)).then(Dn=>!!Dn&&Dn.createTime.compareTo(en)>=0)}(h.localStore,F))return yield m.close(),C._completeWith({taskState:"Success",documentsLoaded:(Ke=F).totalDocuments,bytesLoaded:Ke.totalBytes,totalDocuments:Ke.totalDocuments,totalBytes:Ke.totalBytes}),Promise.resolve(new Set);C._updateProgress(Lc(F));const Z=new v_(F,h.localStore,m.yt);let re=yield m.mc();for(;re;){const Ke=yield Z.Fu(re);Ke&&C._updateProgress(Ke),re=yield m.mc()}const ve=yield Z.complete();return yield Yu(h,ve.Lu,void 0),yield function(Ke,bt){const St=zt(Ke);return St.persistence.runTransaction("Save bundle","readwrite",en=>St.Ns.saveBundleMetadata(en,bt))}(h.localStore,F),C._completeWith(ve.progress),Promise.resolve(ve.Bu)}catch(F){return br("SyncEngine",`Loading bundle failed with ${F}`),C._failWith(F),Promise.resolve(new Set)}var Ke}),function(h,m,C){return u.apply(this,arguments)})(s,e,t).then(u=>{s.sharedClientState.notifyBundleLoaded(u)})}(yield cg(i),u,s)}))}(t,i._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function H_(i,e){return function F_(i,e){return i.asyncQueue.enqueue((0,se.Z)(function*(){return function(t,s){const u=zt(t);return u.persistence.runTransaction("Get named query","readonly",h=>u.Ns.getNamedQuery(h,s))}(yield ec(i),e)}))}(ys(i=Vr(i,Fi)),e).then(t=>t?new go(i,null,t.query):null)}(this._delegate,e).then(t=>t?new No(this,t):null)}}class Jf extends Cg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yc(new Ys(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ou.forKey(t,this.firestore,null)}}class hv{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Jf(e)}get(e){const t=ic(e);return this._delegate.get(t).then(s=>new _h(this._firestore,new su(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const u=ic(e);return s?(Tg("Transaction.set",s),this._delegate.set(u,t,s)):this._delegate.set(u,t),this}update(e,t,s,...u){const h=ic(e);return 2===arguments.length?this._delegate.update(h,t):this._delegate.update(h,t,s,...u),this}delete(e){const t=ic(e);return this._delegate.delete(t),this}}class fv{constructor(e){this._delegate=e}set(e,t,s){const u=ic(e);return s?(Tg("WriteBatch.set",s),this._delegate.set(u,t,s)):this._delegate.set(u,t),this}update(e,t,s,...u){const h=ic(e);return 2===arguments.length?this._delegate.update(h,t):this._delegate.update(h,t,s,...u),this}delete(e){const t=ic(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Qc{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new qf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new vh(this._firestore,s),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=Qc.INSTANCES;let u=s.get(e);u||(u=new WeakMap,s.set(e,u));let h=u.get(t);return h||(h=new Qc(e,new Jf(e),t),u.set(t,h)),h}}Qc.INSTANCES=new WeakMap;class ou{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Jf(e)}static forPath(e,t,s){if(e.length%2!=0)throw new wt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ou(t,new Ri(t._delegate,s,new kt(e)))}static forKey(e,t,s){return new ou(t,new Ri(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Jc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Jc(this.firestore,xf(this._delegate,e))}catch(t){throw na(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ye.m9)(e))instanceof Ri&&Mf(this._delegate,e)}set(e,t){t=Tg("DocumentReference.set",t);try{return t?ph(this._delegate,e,t):ph(this._delegate,e)}catch(s){throw na(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?ss(this._delegate,e):ss(this._delegate,e,t,...s)}catch(u){throw na(u,"updateDoc()","DocumentReference.update()")}}delete(){return function f0(i){return rc(Vr(i.firestore,Fi),[new da(i._key,Ti.none())])}(this._delegate)}onSnapshot(...e){const t=Ag(e),s=yh(e,u=>new _h(this.firestore,new su(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return Dg(this._delegate,t,s)}get(e){let t;return t="cache"===e?.source?function X_(i){i=Vr(i,Ri);const e=Vr(i.firestore,Fi),t=ys(e),s=new Ol(e);return function hg(i,e){const t=new _i;return i.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return(s=(0,se.Z)(function*(u,h,m){try{const C=yield function(F,Z){const re=zt(F);return re.persistence.runTransaction("read document","readonly",ve=>re.localDocuments.getDocument(ve,Z))}(u,h);C.isFoundDocument()?m.resolve(C):C.isNoDocument()?m.resolve(null):m.reject(new wt(ot.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(C){const F=Hd(C,`Failed to get document '${h} from cache`);m.reject(F)}}),function(u,h,m){return s.apply(this,arguments)})(yield ec(i),e,t);var s})),t.promise}(t,i._key).then(u=>new su(e,s,i._key,u,new qc(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function ev(i){i=Vr(i,Ri);const e=Vr(i.firestore,Fi);return k_(ys(e),i._key,{source:"server"}).then(t=>Kf(e,i,t))}(this._delegate):function jn(i){i=Vr(i,Ri);const e=Vr(i.firestore,Fi);return k_(ys(e),i._key).then(t=>Kf(e,i,t))}(this._delegate),t.then(s=>new _h(this.firestore,new su(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new ou(this.firestore,this._delegate.withConverter(e?Qc.getInstance(this.firestore,e):null))}}function na(i,e,t){return i.message=i.message.replace(e,t),i}function Ag(i){for(const e of i)if("object"==typeof e&&!Qf(e))return e;return{}}function yh(i,e){var t,s;let u;return u=Qf(i[0])?i[0]:Qf(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:h=>{u.next&&u.next(e(h))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(s=u.complete)||void 0===s?void 0:s.bind(u)}}class _h{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ou(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return J_(this._delegate,e._delegate)}}class vh extends _h{data(e){const t=this._delegate.data(e);return function oa(i,e){i||jt()}(void 0!==t),t}}class No{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Jf(e)}where(e,t,s){try{return new No(this.firestore,Ml(this._delegate,function W_(i,e,t){const s=e,u=Zf("where",i);return dh._create(u,s,t)}(e,t,s)))}catch(u){throw na(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new No(this.firestore,Ml(this._delegate,function K_(i,e="asc"){const t=e,s=Zf("orderBy",i);return _g._create(s,t)}(e,t)))}catch(s){throw na(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new No(this.firestore,Ml(this._delegate,function Y_(i){return Kd("limit",i),Gf._create("limit",i,"F")}(e)))}catch(t){throw na(t,"limit()","Query.limit()")}}limitToLast(e){try{return new No(this.firestore,Ml(this._delegate,function Q_(i){return Kd("limitToLast",i),Gf._create("limitToLast",i,"L")}(e)))}catch(t){throw na(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new No(this.firestore,Ml(this._delegate,function uy(...i){return hh._create("startAt",i,!0)}(...e)))}catch(t){throw na(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new No(this.firestore,Ml(this._delegate,function ly(...i){return hh._create("startAfter",i,!1)}(...e)))}catch(t){throw na(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new No(this.firestore,Ml(this._delegate,function cy(...i){return fh._create("endBefore",i,!1)}(...e)))}catch(t){throw na(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new No(this.firestore,Ml(this._delegate,function dy(...i){return fh._create("endAt",i,!0)}(...e)))}catch(t){throw na(t,"endAt()","Query.endAt()")}}isEqual(e){return Rf(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function tv(i){i=Vr(i,go);const e=Vr(i.firestore,Fi),t=ys(e),s=new Ol(e);return function u0(i,e){const t=new _i;return i.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return(s=(0,se.Z)(function*(u,h,m){try{const C=yield tf(u,h,!0),F=new Fm(h,C.Hi),Z=F.Wu(C.documents),re=F.applyChanges(Z,!1);m.resolve(re.snapshot)}catch(C){const F=Hd(C,`Failed to execute query '${h} against cache`);m.reject(F)}}),function(u,h,m){return s.apply(this,arguments)})(yield ec(i),e,t);var s})),t.promise}(t,i._query).then(u=>new Ju(e,s,i,u))}(this._delegate):"server"===e?.source?function Wf(i){i=Vr(i,go);const e=Vr(i.firestore,Fi),t=ys(e),s=new Ol(e);return Ym(t,i._query,{source:"server"}).then(u=>new Ju(e,s,i,u))}(this._delegate):function Wc(i){i=Vr(i,go);const e=Vr(i.firestore,Fi),t=ys(e),s=new Ol(e);return ay(i._query),Ym(t,i._query).then(u=>new Ju(e,s,i,u))}(this._delegate),t.then(s=>new xg(this.firestore,new Ju(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=Ag(e),s=yh(e,u=>new xg(this.firestore,new Ju(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return Dg(this._delegate,t,s)}withConverter(e){return new No(this.firestore,this._delegate.withConverter(e?Qc.getInstance(this.firestore,e):null))}}class bh{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new vh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class xg{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new No(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new vh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new bh(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new vh(this._firestore,s))})}isEqual(e){return J_(this._delegate,e._delegate)}}class Jc extends No{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ou(this.firestore,e):null}doc(e){try{return new ou(this.firestore,void 0===e?Jd(this._delegate):Jd(this._delegate,e))}catch(t){throw na(t,"doc()","CollectionReference.doc()")}}add(e){return function fy(i,e){const t=Vr(i.firestore,Fi),s=Jd(i),u=zf(i.converter,e);return rc(t,[rh(nc(i.firestore),"addDoc",s._key,u,null!==i.converter,{}).toMutation(s._key,Ti.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new ou(this.firestore,t))}isEqual(e){return Mf(this._delegate,e._delegate)}withConverter(e){return new Jc(this.firestore,this._delegate.withConverter(e?Qc.getInstance(this.firestore,e):null))}}function ic(i){return Vr(i,Ri)}class Mg{constructor(...e){this._delegate=new Qs(...e)}static documentId(){return new Mg(Yr.keyField().canonicalString())}isEqual(e){return(e=(0,Ye.m9)(e))instanceof Qs&&this._delegate._internalPath.isEqual(e._internalPath)}}class sc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function uv(){return new Vf("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new sc(e)}static delete(){const e=function av(){return new ih("deleteField")}();return e._methodName="FieldValue.delete",new sc(e)}static arrayUnion(...e){const t=function Yf(...i){return new Bf("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new sc(t)}static arrayRemove(...e){const t=function gy(...i){return new z_("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new sc(t)}static increment(e){const t=function my(i){return new iy("increment",i)}(e);return t._methodName="FieldValue.increment",new sc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const by={Firestore:vy,GeoPoint:th,Timestamp:Kn,Blob:Yc,Transaction:hv,WriteBatch:fv,DocumentReference:ou,DocumentSnapshot:_h,Query:No,QueryDocumentSnapshot:vh,QuerySnapshot:xg,CollectionReference:Jc,FieldPath:Mg,FieldValue:sc,setLogLevel:function g0(i){!function Vi(i){Cr.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function gv(i){(function pv(i,e){i.INTERNAL.registerComponent(new Le.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(s,u)},"PUBLIC").setServiceProps(Object.assign({},by)))})(i,(e,t)=>new vy(e,t,new _y)),i.registerVersion("@firebase/firestore-compat","0.3.0")}(et.Z);var Pa=L(1205),mv=L(6217);function Rg(i,e){return function _v(i,e=l.z){return new G.y(t=>{let s;return null!=e?e.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},t)}):s=i.onSnapshot({includeMetadataChanges:!0},t),()=>{s?.()}})}(i,e)}function Xf(i,e){return Rg(i,e).pipe((0,ie.U)(t=>({payload:t,type:"query"})))}function ep(i,e){return Xf(i,e).pipe((0,we.O)(void 0),ue(),(0,ie.U)(([t,s])=>{const u=s.payload.docChanges(),h=u.map(m=>({type:m.type,payload:m}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((m,C)=>{const F=u.find(re=>re.doc.ref.isEqual(m.ref)),Z=t?.payload.docs.find(re=>re.ref.isEqual(m.ref));F&&JSON.stringify(F.doc.metadata)===JSON.stringify(m.metadata)||!F&&Z&&JSON.stringify(Z.metadata)===JSON.stringify(m.metadata)||h.push({type:"modified",payload:{oldIndex:C,newIndex:C,type:"modified",doc:m}})}),h}))}function tp(i,e,t){return ep(i,t).pipe((0,pe.R)((s,u)=>function bv(i,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(i=function wy(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return np(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return np(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return np(i,e.oldIndex,1)}return i}(i,s))}),i}(s,u.map(h=>h.payload),e),[]),function qe(i,e=nt.y){return i=i??Qe,(0,Ae.e)((t,s)=>{let u,h=!0;t.subscribe((0,xe.x)(s,m=>{const C=e(m);(h||!i(u,C))&&(h=!1,u=C,s.next(m))}))})}(),(0,ie.U)(s=>s.map(u=>({type:u.type,payload:u}))))}function np(i,e,t,...s){const u=i.slice();return u.splice(e,t,...s),u}function Ey(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}L(9260);class Iy{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=ep(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ie.U)(s=>s.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,we.O)(void 0),ue(),(0,ct.h)(([s,u])=>u.length>0||!s),(0,ie.U)(([s,u])=>u),be.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,pe.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Ey(e);return tp(this.query,t,this.afs.schedulers.outsideAngular).pipe(be.iC)}valueChanges(e={}){return Xf(this.query,this.afs.schedulers.outsideAngular).pipe((0,ie.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),be.iC)}get(e){return(0,ge.D)(this.query.get(e)).pipe(be.iC)}add(e){return this.ref.add(e)}doc(e){return new Cy(this.ref.doc(e),this.afs)}}class Cy{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:u,query:h}=Ty(s,t);return new Iy(u,h,this.afs)}snapshotChanges(){return function vv(i,e){return Rg(i,e).pipe((0,we.O)(void 0),ue(),(0,ie.U)(([t,s])=>s.exists?t?.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(be.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ie.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ge.D)(this.ref.get(e)).pipe(be.iC)}}class Og{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ep(this.query,this.afs.schedulers.outsideAngular).pipe((0,ie.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,ct.h)(t=>t.length>0),be.iC):ep(this.query,this.afs.schedulers.outsideAngular).pipe(be.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,pe.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Ey(e);return tp(this.query,t,this.afs.schedulers.outsideAngular).pipe(be.iC)}valueChanges(e={}){return Xf(this.query,this.afs.schedulers.outsideAngular).pipe((0,ie.U)(s=>s.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),be.iC)}get(e){return(0,ge.D)(this.query.get(e)).pipe(be.iC)}}const wv=new g.OlP("angularfire2.enableFirestorePersistence"),Dy=new g.OlP("angularfire2.firestore.persistenceSettings"),Ev=new g.OlP("angularfire2.firestore.settings"),Iv=new g.OlP("angularfire2.firestore.use-emulator");function Ty(i,e=(t=>t)){return{query:e(i),ref:i}}let Cv=(()=>{class i{constructor(t,s,u,h,m,C,F,Z,re,ve,Ke,bt,St,en,Dn,hi,Qi){this.schedulers=F;const jr=(0,Ne.on)(t,C,s),Oi=re;ve&&(0,Pa.nw)(jr,C,Ke,St,en,Dn,bt,hi),[this.firestore,this.persistenceEnabled$]=(0,Ne.cc)(`${jr.name}.firestore`,"AngularFirestore",jr.name,()=>{const zr=C.runOutsideAngular(()=>jr.firestore());if(h&&zr.settings(h),Oi&&zr.useEmulator(...Oi),u&&!(0,Me.PM)(m)){const ri=()=>{try{return(0,ge.D)(zr.enablePersistence(Z||void 0).then(()=>!0,()=>!1))}catch(mo){return typeof console<"u"&&console.warn(mo),(0,U.of)(!1)}};return[zr,C.runOutsideAngular(ri)]}return[zr,(0,U.of)(!1)]},[h,Oi,u])}collection(t,s){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:h,query:m}=Ty(u,s),C=this.schedulers.ngZone.run(()=>h);return new Iy(C,m,this)}collectionGroup(t,s){const u=s||(m=>m),h=this.firestore.collectionGroup(t);return new Og(u(h),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>s);return new Cy(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(g.LFG(Ne.Dh),g.LFG(Ne.xv,8),g.LFG(wv,8),g.LFG(Ev,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(be.HU),g.LFG(Dy,8),g.LFG(Iv,8),g.LFG(Pa.zQ,8),g.LFG(Pa.Qv,8),g.LFG(Pa.L6,8),g.LFG(Pa._Q,8),g.LFG(Pa.rT,8),g.LFG(Pa.lh,8),g.LFG(Pa.f7,8),g.LFG(mv.nm,8))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})()},377:(Ut,ze,L)=>{L.d(ze,{Q1:()=>En});var g=L(9751),l=L(9646),G=L(8996),ge=L(4986),U=L(4482),be=L(5403),Ae=L(4004),xe=L(3900),ue=L(2122),ie=L(4650),pe=L(2011),nt=L(3942),qe=L(5861),Qe=L(9681),ct=L(2090),Ne=L(4859);const Me="firebasestorage.googleapis.com",Fe="storageBucket";class Le extends ct.ZR{constructor(P,ee,oe=0){super(ut(P),`Firebase Storage: ${ee} (${ut(P)})`),this.status_=oe,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Le.prototype)}get status(){return this.status_}set status(P){this.status_=P}_codeEquals(P){return ut(P)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(P){this.customData.serverResponse=P,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function ut($){return"storage/"+$}function Ye(){return new Le("unknown","An unknown error occurred, please check the error payload for server response.")}function Ie(){return new Le("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function lt(){return new Le("canceled","User canceled the upload/download.")}function Qt(){return new Le("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Wt($){return new Le("invalid-argument",$)}function qt(){return new Le("app-deleted","The Firebase app was deleted.")}function yn($){return new Le("invalid-root-operation","The operation '"+$+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function $t($,P){return new Le("invalid-format","String does not match format '"+$+"': "+P)}function On($){throw new Le("internal-error","Internal error: "+$)}class Nn{constructor(P,ee){this.bucket=P,this.path_=ee}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const P=encodeURIComponent;return"/b/"+P(this.bucket)+"/o/"+P(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(P,ee){let oe;try{oe=Nn.makeFromUrl(P,ee)}catch{return new Nn(P,"")}if(""===oe.path)return oe;throw function Ct($){return new Le("invalid-default-bucket","Invalid default bucket '"+$+"'.")}(P)}static makeFromUrl(P,ee){let oe=null;const Te="([A-Za-z0-9.\\-_]+)",S=new RegExp("^gs://"+Te+"(/(.*))?$","i");function Ee(si){si.path_=decodeURIComponent(si.path)}const In=ee.replace(/[.]/g,"\\."),Ur=[{regex:S,indices:{bucket:1,path:3},postModify:function I(si){"/"===si.path.charAt(si.path.length-1)&&(si.path_=si.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${In}/v[A-Za-z0-9_]+/b/${Te}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Ee},{regex:new RegExp(`^https?://${ee===Me?"(?:storage.googleapis.com|storage.cloud.google.com)":ee}/${Te}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Ee}];for(let si=0;si<Ur.length;si++){const ki=Ur[si],Kr=ki.regex.exec(P);if(Kr){let Ds=Kr[ki.indices.path];Ds||(Ds=""),oe=new Nn(Kr[ki.indices.bucket],Ds),ki.postModify(oe);break}}if(null==oe)throw function pt($){return new Le("invalid-url","Invalid URL '"+$+"'.")}(P);return oe}}class wr{constructor(P){this.promise_=Promise.reject(P)}getPromise(){return this.promise_}cancel(P=!1){}}function $n($){return"string"==typeof $||$ instanceof String}function Vn($){return Kt()&&$ instanceof Blob}function Kt(){return typeof Blob<"u"&&!(0,ct.UG)()}function He($,P,ee,oe){if(oe<P)throw Wt(`Invalid value for '${$}'. Expected ${P} or greater.`);if(oe>ee)throw Wt(`Invalid value for '${$}'. Expected ${ee} or less.`)}function q($,P,ee){let oe=P;return null==ee&&(oe=`https://${P}`),`${ee}://${oe}/v0${$}`}function ne($){const P=encodeURIComponent;let ee="?";for(const oe in $)$.hasOwnProperty(oe)&&(ee=ee+(P(oe)+"=")+P($[oe])+"&");return ee=ee.slice(0,-1),ee}var at=(()=>{return($=at||(at={}))[$.NO_ERROR=0]="NO_ERROR",$[$.NETWORK_ERROR=1]="NETWORK_ERROR",$[$.ABORT=2]="ABORT",at;var $})();function Dt($,P){const ee=$>=500&&$<600,Te=-1!==[408,429].indexOf($),I=-1!==P.indexOf($);return ee||Te||I}class Ht{constructor(P,ee,oe,Te,I,T,S,H,Ee,mt,In,An=!0){this.url_=P,this.method_=ee,this.headers_=oe,this.body_=Te,this.successCodes_=I,this.additionalRetryCodes_=T,this.callback_=S,this.errorCallback_=H,this.timeout_=Ee,this.progressCallback_=mt,this.connectionFactory_=In,this.retry=An,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((lr,hr)=>{this.resolve_=lr,this.reject_=hr,this.start_()})}start_(){const ee=(oe,Te)=>{const I=this.resolve_,T=this.reject_,S=Te.connection;if(Te.wasSuccessCode)try{const H=this.callback_(S,S.getResponse());!function kr($){return void 0!==$}(H)?I():I(H)}catch(H){T(H)}else if(null!==S){const H=Ye();H.serverResponse=S.getErrorText(),T(this.errorCallback_?this.errorCallback_(S,H):H)}else T(Te.canceled?this.appDelete_?qt():lt():Ie())};this.canceled_?ee(0,new Ge(!1,null,!0)):this.backoffId_=function kn($,P,ee){let oe=1,Te=null,I=null,T=!1,S=0;function H(){return 2===S}let Ee=!1;function mt(...Rr){Ee||(Ee=!0,P.apply(null,Rr))}function In(Rr){Te=setTimeout(()=>{Te=null,$(lr,H())},Rr)}function An(){I&&clearTimeout(I)}function lr(Rr,...Mi){if(Ee)return void An();if(Rr)return An(),void mt.call(null,Rr,...Mi);if(H()||T)return An(),void mt.call(null,Rr,...Mi);let Ur;oe<64&&(oe*=2),1===S?(S=2,Ur=0):Ur=1e3*(oe+Math.random()),In(Ur)}let hr=!1;function di(Rr){hr||(hr=!0,An(),!Ee&&(null!==Te?(Rr||(S=2),clearTimeout(Te),In(0)):Rr||(S=1)))}return In(0),I=setTimeout(()=>{T=!0,di(!0)},ee),di}((oe,Te)=>{if(Te)return void oe(!1,new Ge(!1,null,!0));const I=this.connectionFactory_();this.pendingConnection_=I;const T=S=>{null!==this.progressCallback_&&this.progressCallback_(S.loaded,S.lengthComputable?S.total:-1)};null!==this.progressCallback_&&I.addUploadProgressListener(T),I.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&I.removeUploadProgressListener(T),this.pendingConnection_=null;const S=I.getErrorCode()===at.NO_ERROR,H=I.getStatus();if((!S||Dt(H,this.additionalRetryCodes_))&&this.retry){const mt=I.getErrorCode()===at.ABORT;return void oe(!1,new Ge(!1,null,mt))}const Ee=-1!==this.successCodes_.indexOf(H);oe(!0,new Ge(Ee,I))})},ee,this.timeout_)}getPromise(){return this.promise_}cancel(P){this.canceled_=!0,this.appDelete_=P||!1,null!==this.backoffId_&&function _r($){$(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Ge{constructor(P,ee,oe){this.wasSuccessCode=P,this.connection=ee,this.canceled=!!oe}}function fi(...$){const P=function or(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==P){const ee=new P;for(let oe=0;oe<$.length;oe++)ee.append($[oe]);return ee.getBlob()}if(Kt())return new Blob($);throw new Le("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Tn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class qr{constructor(P,ee){this.data=P,this.contentType=ee||null}}function Mn($,P){switch($){case Tn.RAW:return new qr(rn(P));case Tn.BASE64:case Tn.BASE64URL:return new qr(Mt($,P));case Tn.DATA_URL:return new qr(function Zt($){const P=new ht($);return P.base64?Mt(Tn.BASE64,P.rest):function ai($){let P;try{P=decodeURIComponent($)}catch{throw $t(Tn.DATA_URL,"Malformed data URL.")}return rn(P)}(P.rest)}(P),function ln($){return new ht($).contentType}(P))}throw Ye()}function rn($){const P=[];for(let ee=0;ee<$.length;ee++){let oe=$.charCodeAt(ee);oe<=127?P.push(oe):oe<=2047?P.push(192|oe>>6,128|63&oe):55296==(64512&oe)?ee<$.length-1&&56320==(64512&$.charCodeAt(ee+1))?(oe=65536|(1023&oe)<<10|1023&$.charCodeAt(++ee),P.push(240|oe>>18,128|oe>>12&63,128|oe>>6&63,128|63&oe)):P.push(239,191,189):56320==(64512&oe)?P.push(239,191,189):P.push(224|oe>>12,128|oe>>6&63,128|63&oe)}return new Uint8Array(P)}function Mt($,P){switch($){case Tn.BASE64:{const Te=-1!==P.indexOf("-"),I=-1!==P.indexOf("_");if(Te||I)throw $t($,"Invalid character '"+(Te?"-":"_")+"' found: is it base64url encoded?");break}case Tn.BASE64URL:{const Te=-1!==P.indexOf("+"),I=-1!==P.indexOf("/");if(Te||I)throw $t($,"Invalid character '"+(Te?"+":"/")+"' found: is it base64 encoded?");P=P.replace(/-/g,"+").replace(/_/g,"/");break}}let ee;try{ee=function Bi($){if(typeof atob>"u")throw function Et($){return new Le("unsupported-environment",`${$} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob($)}(P)}catch(Te){throw Te.message.includes("polyfill")?Te:$t($,"Invalid character found")}const oe=new Uint8Array(ee.length);for(let Te=0;Te<ee.length;Te++)oe[Te]=ee.charCodeAt(Te);return oe}class ht{constructor(P){this.base64=!1,this.contentType=null;const ee=P.match(/^data:([^,]+)?,/);if(null===ee)throw $t(Tn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const oe=ee[1]||null;null!=oe&&(this.base64=function pn($,P){return $.length>=P.length&&$.substring($.length-P.length)===P}(oe,";base64"),this.contentType=this.base64?oe.substring(0,oe.length-7):oe),this.rest=P.substring(P.indexOf(",")+1)}}class sn{constructor(P,ee){let oe=0,Te="";Vn(P)?(this.data_=P,oe=P.size,Te=P.type):P instanceof ArrayBuffer?(ee?this.data_=new Uint8Array(P):(this.data_=new Uint8Array(P.byteLength),this.data_.set(new Uint8Array(P))),oe=this.data_.length):P instanceof Uint8Array&&(ee?this.data_=P:(this.data_=new Uint8Array(P.length),this.data_.set(P)),oe=P.length),this.size_=oe,this.type_=Te}size(){return this.size_}type(){return this.type_}slice(P,ee){if(Vn(this.data_)){const Te=function $r($,P,ee){return $.webkitSlice?$.webkitSlice(P,ee):$.mozSlice?$.mozSlice(P,ee):$.slice?$.slice(P,ee):null}(this.data_,P,ee);return null===Te?null:new sn(Te)}{const oe=new Uint8Array(this.data_.buffer,P,ee-P);return new sn(oe,!0)}}static getBlob(...P){if(Kt()){const ee=P.map(oe=>oe instanceof sn?oe.data_:oe);return new sn(fi.apply(null,ee))}{const ee=P.map(T=>$n(T)?Mn(Tn.RAW,T).data:T.data_);let oe=0;ee.forEach(T=>{oe+=T.byteLength});const Te=new Uint8Array(oe);let I=0;return ee.forEach(T=>{for(let S=0;S<T.length;S++)Te[I++]=T[S]}),new sn(Te,!0)}}uploadData(){return this.data_}}function ye($){let P;try{P=JSON.parse($)}catch{return null}return function zn($){return"object"==typeof $&&!Array.isArray($)}(P)?P:null}function st($){const P=$.lastIndexOf("/",$.length-2);return-1===P?$:$.slice(P+1)}function Ze($,P){return P}class Rt{constructor(P,ee,oe,Te){this.server=P,this.local=ee||P,this.writable=!!oe,this.xform=Te||Ze}}let vn=null;function ar(){if(vn)return vn;const $=[];$.push(new Rt("bucket")),$.push(new Rt("generation")),$.push(new Rt("metageneration")),$.push(new Rt("name","fullPath",!0));const ee=new Rt("name");ee.xform=function P(I,T){return function Fn($){return!$n($)||$.length<2?$:st($)}(T)},$.push(ee);const Te=new Rt("size");return Te.xform=function oe(I,T){return void 0!==T?Number(T):T},$.push(Te),$.push(new Rt("timeCreated")),$.push(new Rt("updated")),$.push(new Rt("md5Hash",null,!0)),$.push(new Rt("cacheControl",null,!0)),$.push(new Rt("contentDisposition",null,!0)),$.push(new Rt("contentEncoding",null,!0)),$.push(new Rt("contentLanguage",null,!0)),$.push(new Rt("contentType",null,!0)),$.push(new Rt("metadata","customMetadata",!0)),vn=$,vn}function me($,P,ee){const oe=ye(P);return null===oe?null:function Be($,P,ee){const oe={type:"file"},Te=ee.length;for(let I=0;I<Te;I++){const T=ee[I];oe[T.local]=T.xform(oe,P[T.server])}return function cn($,P){Object.defineProperty($,"ref",{get:function ee(){const I=new Nn($.bucket,$.fullPath);return P._makeStorageReference(I)}})}(oe,$),oe}($,oe,ee)}function Xe($,P){const ee={},oe=P.length;for(let Te=0;Te<oe;Te++){const I=P[Te];I.writable&&(ee[I.server]=$[I.local])}return JSON.stringify(ee)}const ft="prefixes";class Qn{constructor(P,ee,oe,Te){this.url=P,this.method=ee,this.handler=oe,this.timeout=Te,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function xr($){if(!$)throw Ye()}function Li($,P){return function ee(oe,Te){const I=me($,Te,P);return xr(null!==I),I}}function ji($){return function P(ee,oe){let Te;return Te=401===ee.getStatus()?ee.getErrorText().includes("Firebase App Check token is invalid")?function te(){return new Le("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function W(){return new Le("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===ee.getStatus()?function Oe($){return new Le("quota-exceeded","Quota for bucket '"+$+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}($.bucket):403===ee.getStatus()?function ae($){return new Le("unauthorized","User does not have permission to access '"+$+"'.")}($.path):oe,Te.status=ee.getStatus(),Te.serverResponse=oe.serverResponse,Te}}function Si($){const P=ji($);return function ee(oe,Te){let I=P(oe,Te);return 404===oe.getStatus()&&(I=function de($){return new Le("object-not-found","Object '"+$+"' does not exist.")}($.path)),I.serverResponse=Te.serverResponse,I}}function os($,P,ee){const Te=q(P.fullServerUrl(),$.host,$._protocol),T=$.maxOperationRetryTime,S=new Qn(Te,"GET",Li($,ee),T);return S.errorHandler=Si(P),S}function Jn($,P,ee,oe,Te){const I={};I.prefix=P.isRoot?"":P.path+"/",ee&&ee.length>0&&(I.delimiter=ee),oe&&(I.pageToken=oe),Te&&(I.maxResults=Te);const S=q(P.bucketOnlyServerUrl(),$.host,$._protocol),Ee=$.maxOperationRetryTime,mt=new Qn(S,"GET",function nr($,P){return function ee(oe,Te){const I=function Pn($,P,ee){const oe=ye(ee);return null===oe?null:function on($,P,ee){const oe={prefixes:[],items:[],nextPageToken:ee.nextPageToken};if(ee[ft])for(const Te of ee[ft]){const I=Te.replace(/\/$/,""),T=$._makeStorageReference(new Nn(P,I));oe.prefixes.push(T)}if(ee.items)for(const Te of ee.items){const I=$._makeStorageReference(new Nn(P,Te.name));oe.items.push(I)}return oe}($,P,oe)}($,P,Te);return xr(null!==I),I}}($,P.bucket),Ee);return mt.urlParams=I,mt.errorHandler=ji(P),mt}function Bt($,P,ee){const oe=Object.assign({},ee);return oe.fullPath=$.path,oe.size=P.size(),oe.contentType||(oe.contentType=function Ai($,P){return $&&$.contentType||P&&P.type()||"application/octet-stream"}(null,P)),oe}class mr{constructor(P,ee,oe,Te){this.current=P,this.total=ee,this.finalized=!!oe,this.metadata=Te||null}}function pi($,P){let ee=null;try{ee=$.getResponseHeader("X-Goog-Upload-Status")}catch{xr(!1)}return xr(!!ee&&-1!==(P||["active"]).indexOf(ee)),ee}const as={STATE_CHANGED:"state_changed"},Fr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Sn($){switch($){case"running":case"pausing":case"canceling":return Fr.RUNNING;case"paused":return Fr.PAUSED;case"success":return Fr.SUCCESS;case"canceled":return Fr.CANCELED;default:return Fr.ERROR}}class wi{constructor(P,ee,oe){if(function nn($){return"function"==typeof $}(P)||null!=ee||null!=oe)this.next=P,this.error=ee??void 0,this.complete=oe??void 0;else{const I=P;this.next=I.next,this.error=I.error,this.complete=I.complete}}}function Ei($){return(...P)=>{Promise.resolve().then(()=>$(...P))}}class Xr{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=at.NO_ERROR,this.sendPromise_=new Promise(P=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=at.ABORT,P()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=at.NETWORK_ERROR,P()}),this.xhr_.addEventListener("load",()=>{P()})})}send(P,ee,oe,Te){if(this.sent_)throw On("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(ee,P,!0),void 0!==Te)for(const I in Te)Te.hasOwnProperty(I)&&this.xhr_.setRequestHeader(I,Te[I].toString());return void 0!==oe?this.xhr_.send(oe):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw On("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw On("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw On("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw On("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(P){return this.xhr_.getResponseHeader(P)}addUploadProgressListener(P){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",P)}removeUploadProgressListener(P){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",P)}}class yr extends Xr{initXhr(){this.xhr_.responseType="text"}}function Br(){return new yr}class Ce{constructor(P,ee,oe=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=P,this._blob=ee,this._metadata=oe,this._mappings=ar(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=Te=>{if(this._request=void 0,this._chunkMultiplier=1,Te._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const I=this.isExponentialBackoffExpired();if(Dt(Te.status,[])){if(!I)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();Te=Ie()}this._error=Te,this._transition("error")}},this._metadataErrorHandler=Te=>{this._request=void 0,Te._codeEquals("canceled")?this.completeTransitions_():(this._error=Te,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((Te,I)=>{this._resolve=Te,this._reject=I,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const P=this._transferred;return ee=>this._updateProgress(P+ee)}_shouldDoResumable(P){return P.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(P){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([ee,oe])=>{switch(this._state){case"running":P(ee,oe);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((P,ee)=>{const oe=function Jr($,P,ee,oe,Te){const I=P.bucketOnlyServerUrl(),T=Bt(P,oe,Te),S={name:T.fullPath},H=q(I,$.host,$._protocol),mt={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${oe.size()}`,"X-Goog-Upload-Header-Content-Type":T.contentType,"Content-Type":"application/json; charset=utf-8"},In=Xe(T,ee),hr=new Qn(H,"POST",function lr(di){let Rr;pi(di);try{Rr=di.getResponseHeader("X-Goog-Upload-URL")}catch{xr(!1)}return xr($n(Rr)),Rr},$.maxUploadRetryTime);return hr.urlParams=S,hr.headers=mt,hr.body=In,hr.errorHandler=ji(P),hr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Te=this._ref.storage._makeRequest(oe,Br,P,ee);this._request=Te,Te.getPromise().then(I=>{this._request=void 0,this._uploadUrl=I,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const P=this._uploadUrl;this._resolveToken((ee,oe)=>{const Te=function Pr($,P,ee,oe){const H=new Qn(ee,"POST",function I(Ee){const mt=pi(Ee,["active","final"]);let In=null;try{In=Ee.getResponseHeader("X-Goog-Upload-Size-Received")}catch{xr(!1)}In||xr(!1);const An=Number(In);return xr(!isNaN(An)),new mr(An,oe.size(),"final"===mt)},$.maxUploadRetryTime);return H.headers={"X-Goog-Upload-Command":"query"},H.errorHandler=ji(P),H}(this._ref.storage,this._ref._location,P,this._blob),I=this._ref.storage._makeRequest(Te,Br,ee,oe);this._request=I,I.getPromise().then(T=>{this._request=void 0,this._updateProgress(T.current),this._needToFetchStatus=!1,T.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const P=262144*this._chunkMultiplier,ee=new mr(this._transferred,this._blob.size()),oe=this._uploadUrl;this._resolveToken((Te,I)=>{let T;try{T=function ur($,P,ee,oe,Te,I,T,S){const H=new mr(0,0);if(T?(H.current=T.current,H.total=T.total):(H.current=0,H.total=oe.size()),oe.size()!==H.total)throw function Nt(){return new Le("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const Ee=H.total-H.current;let mt=Ee;Te>0&&(mt=Math.min(mt,Te));const In=H.current;let lr="";lr=0===mt?"finalize":Ee===mt?"upload, finalize":"upload";const hr={"X-Goog-Upload-Command":lr,"X-Goog-Upload-Offset":`${H.current}`},di=oe.slice(In,In+mt);if(null===di)throw Qt();const Ur=new Qn(ee,"POST",function Rr(si,ki){const Kr=pi(si,["active","final"]),Bo=H.current+mt,Ds=oe.size();let Ts;return Ts="final"===Kr?Li(P,I)(si,ki):null,new mr(Bo,Ds,"final"===Kr,Ts)},P.maxUploadRetryTime);return Ur.headers=hr,Ur.body=di.uploadData(),Ur.progressCallback=S||null,Ur.errorHandler=ji($),Ur}(this._ref._location,this._ref.storage,oe,this._blob,P,this._mappings,ee,this._makeProgressCallback())}catch(H){return this._error=H,void this._transition("error")}const S=this._ref.storage._makeRequest(T,Br,Te,I,!1);this._request=S,S.getPromise().then(H=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(H.current),H.finalized?(this._metadata=H.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((P,ee)=>{const oe=os(this._ref.storage,this._ref._location,this._mappings),Te=this._ref.storage._makeRequest(oe,Br,P,ee);this._request=Te,Te.getPromise().then(I=>{this._request=void 0,this._metadata=I,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((P,ee)=>{const oe=function gn($,P,ee,oe,Te){const I=P.bucketOnlyServerUrl(),T={"X-Goog-Upload-Protocol":"multipart"},H=function S(){let Ur="";for(let si=0;si<2;si++)Ur+=Math.random().toString().slice(2);return Ur}();T["Content-Type"]="multipart/related; boundary="+H;const Ee=Bt(P,oe,Te),mt=Xe(Ee,ee),lr=sn.getBlob("--"+H+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+mt+"\r\n--"+H+"\r\nContent-Type: "+Ee.contentType+"\r\n\r\n",oe,"\r\n--"+H+"--");if(null===lr)throw Qt();const hr={name:Ee.fullPath},di=q(I,$.host,$._protocol),Mi=$.maxUploadRetryTime,Xn=new Qn(di,"POST",Li($,ee),Mi);return Xn.urlParams=hr,Xn.headers=T,Xn.body=lr.uploadData(),Xn.errorHandler=ji(P),Xn}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Te=this._ref.storage._makeRequest(oe,Br,P,ee);this._request=Te,Te.getPromise().then(I=>{this._request=void 0,this._metadata=I,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(P){const ee=this._transferred;this._transferred=P,this._transferred!==ee&&this._notifyObservers()}_transition(P){if(this._state!==P)switch(P){case"canceling":case"pausing":this._state=P,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const ee="paused"===this._state;this._state=P,ee&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=P,this._notifyObservers();break;case"canceled":this._error=lt(),this._state=P,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const P=Sn(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:P,metadata:this._metadata,task:this,ref:this._ref}}on(P,ee,oe,Te){const I=new wi(ee||void 0,oe||void 0,Te||void 0);return this._addObserver(I),()=>{this._removeObserver(I)}}then(P,ee){return this._promise.then(P,ee)}catch(P){return this.then(null,P)}_addObserver(P){this._observers.push(P),this._notifyObserver(P)}_removeObserver(P){const ee=this._observers.indexOf(P);-1!==ee&&this._observers.splice(ee,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(ee=>{this._notifyObserver(ee)})}_finishPromise(){if(void 0!==this._resolve){let P=!0;switch(Sn(this._state)){case Fr.SUCCESS:Ei(this._resolve.bind(null,this.snapshot))();break;case Fr.CANCELED:case Fr.ERROR:Ei(this._reject.bind(null,this._error))();break;default:P=!1}P&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(P){switch(Sn(this._state)){case Fr.RUNNING:case Fr.PAUSED:P.next&&Ei(P.next.bind(P,this.snapshot))();break;case Fr.SUCCESS:P.complete&&Ei(P.complete.bind(P))();break;default:P.error&&Ei(P.error.bind(P,this._error))()}}resume(){const P="paused"===this._state||"pausing"===this._state;return P&&this._transition("running"),P}pause(){const P="running"===this._state;return P&&this._transition("pausing"),P}cancel(){const P="running"===this._state||"pausing"===this._state;return P&&this._transition("canceling"),P}}class Se{constructor(P,ee){this._service=P,this._location=ee instanceof Nn?ee:Nn.makeFromUrl(ee,P.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(P,ee){return new Se(P,ee)}get root(){const P=new Nn(this._location.bucket,"");return this._newRef(this._service,P)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return st(this._location.path)}get storage(){return this._service}get parent(){const P=function he($){if(0===$.length)return null;const P=$.lastIndexOf("/");return-1===P?"":$.slice(0,P)}(this._location.path);if(null===P)return null;const ee=new Nn(this._location.bucket,P);return new Se(this._service,ee)}_throwIfRoot(P){if(""===this._location.path)throw yn(P)}}function ir($,P,ee){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,qe.Z)(function*($,P,ee){const Te=yield li($,{pageToken:ee});P.prefixes.push(...Te.prefixes),P.items.push(...Te.items),null!=Te.nextPageToken&&(yield ir($,P,Te.nextPageToken))})).apply(this,arguments)}function li($,P){null!=P&&"number"==typeof P.maxResults&&He("options.maxResults",1,1e3,P.maxResults);const ee=P||{},oe=Jn($.storage,$._location,"/",ee.pageToken,ee.maxResults);return $.storage.makeRequestWithTokens(oe,Br)}function Hi($){$._throwIfRoot("getDownloadURL");const P=function Dr($,P,ee){const Te=q(P.fullServerUrl(),$.host,$._protocol),T=$.maxOperationRetryTime,S=new Qn(Te,"GET",function Rs($,P){return function ee(oe,Te){const I=me($,Te,P);return xr(null!==I),function ce($,P,ee,oe){const Te=ye(P);if(null===Te||!$n(Te.downloadTokens))return null;const I=Te.downloadTokens;if(0===I.length)return null;const T=encodeURIComponent;return I.split(",").map(Ee=>{const In=$.fullPath;return q("/b/"+T($.bucket)+"/o/"+T(In),ee,oe)+ne({alt:"media",token:Ee})})[0]}(I,Te,$.host,$._protocol)}}($,ee),T);return S.errorHandler=Si(P),S}($.storage,$._location,ar());return $.storage.makeRequestWithTokens(P,Br).then(ee=>{if(null===ee)throw function Pt(){return new Le("no-download-url","The given file does not have any download URLs.")}();return ee})}function ws($,P){const ee=function De($,P){const ee=P.split("/").filter(oe=>oe.length>0).join("/");return 0===$.length?ee:$+"/"+ee}($._location.path,P),oe=new Nn($._location.bucket,ee);return new Se($.storage,oe)}function gi($,P){if($ instanceof Ns){const ee=$;if(null==ee._bucket)throw function Ot(){return new Le("no-default-bucket","No default bucket found. Did you set the '"+Fe+"' property when initializing the app?")}();const oe=new Se(ee,ee._bucket);return null!=P?gi(oe,P):oe}return void 0!==P?ws($,P):$}function us($,P){if(P&&function Xs($){return/^[A-Za-z]+:\/\//.test($)}(P)){if($ instanceof Ns)return function js($,P){return new Se($,P)}($,P);throw Wt("To use ref(service, url), the first argument must be a Storage instance.")}return gi($,P)}function $s($,P){const ee=P?.[Fe];return null==ee?null:Nn.makeFromBucketSpec(ee,$)}class Ns{constructor(P,ee,oe,Te,I){this.app=P,this._authProvider=ee,this._appCheckProvider=oe,this._url=Te,this._firebaseVersion=I,this._bucket=null,this._host=Me,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=Te?Nn.makeFromBucketSpec(Te,this._host):$s(this._host,this.app.options)}get host(){return this._host}set host(P){this._host=P,this._bucket=null!=this._url?Nn.makeFromBucketSpec(this._url,P):$s(P,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(P){He("time",0,Number.POSITIVE_INFINITY,P),this._maxUploadRetryTime=P}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(P){He("time",0,Number.POSITIVE_INFINITY,P),this._maxOperationRetryTime=P}_getAuthToken(){var P=this;return(0,qe.Z)(function*(){if(P._overrideAuthToken)return P._overrideAuthToken;const ee=P._authProvider.getImmediate({optional:!0});if(ee){const oe=yield ee.getToken();if(null!==oe)return oe.accessToken}return null})()}_getAppCheckToken(){var P=this;return(0,qe.Z)(function*(){const ee=P._appCheckProvider.getImmediate({optional:!0});return ee?(yield ee.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(P=>P.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(P){return new Se(this,P)}_makeRequest(P,ee,oe,Te,I=!0){if(this._deleted)return new wr(qt());{const T=function qn($,P,ee,oe,Te,I,T=!0){const S=ne($.urlParams),H=$.url+S,Ee=Object.assign({},$.headers);return function Ft($,P){P&&($["X-Firebase-GMPID"]=P)}(Ee,P),function We($,P){null!==P&&P.length>0&&($.Authorization="Firebase "+P)}(Ee,ee),function Ue($,P){$["X-Firebase-Storage-Version"]="webjs/"+(P??"AppManager")}(Ee,I),function Er($,P){null!==P&&($["X-Firebase-AppCheck"]=P)}(Ee,oe),new Ht(H,$.method,Ee,$.body,$.successCodes,$.additionalRetryCodes,$.handler,$.errorHandler,$.timeout,$.progressCallback,Te,T)}(P,this._appId,oe,Te,ee,this._firebaseVersion,I);return this._requests.add(T),T.getPromise().then(()=>this._requests.delete(T),()=>this._requests.delete(T)),T}}makeRequestWithTokens(P,ee){var oe=this;return(0,qe.Z)(function*(){const[Te,I]=yield Promise.all([oe._getAuthToken(),oe._getAppCheckToken()]);return oe._makeRequest(P,ee,Te,I).getPromise()})()}}const Es="@firebase/storage";function Ji($,P){return us($=(0,ct.m9)($),P)}function xi($,{instanceIdentifier:P}){const ee=$.getProvider("app").getImmediate(),oe=$.getProvider("auth-internal"),Te=$.getProvider("app-check-internal");return new Ns(ee,oe,Te,P,Qe.SDK_VERSION)}!function zs(){(0,Qe._registerComponent)(new Ne.wA("storage",xi,"PUBLIC").setMultipleInstances(!0)),(0,Qe.registerVersion)(Es,"0.10.0",""),(0,Qe.registerVersion)(Es,"0.10.0","esm2017")}();class qs{constructor(P,ee,oe){this._delegate=P,this.task=ee,this.ref=oe}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class to{constructor(P,ee){this._delegate=P,this._ref=ee,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new qs(this._delegate.snapshot,this,this._ref)}then(P,ee){return this._delegate.then(oe=>{if(P)return P(new qs(oe,this,this._ref))},ee)}on(P,ee,oe,Te){let I;return ee&&(I="function"==typeof ee?T=>ee(new qs(T,this,this._ref)):{next:ee.next?T=>ee.next(new qs(T,this,this._ref)):void 0,complete:ee.complete||void 0,error:ee.error||void 0}),this._delegate.on(P,I,oe||void 0,Te||void 0)}}class yo{constructor(P,ee){this._delegate=P,this._service=ee}get prefixes(){return this._delegate.prefixes.map(P=>new Wr(P,this._service))}get items(){return this._delegate.items.map(P=>new Wr(P,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Wr{constructor(P,ee){this._delegate=P,this.storage=ee}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(P){const ee=function zi($,P){return ws($,P)}(this._delegate,P);return new Wr(ee,this.storage)}get root(){return new Wr(this._delegate.root,this.storage)}get parent(){const P=this._delegate.parent;return null==P?null:new Wr(P,this.storage)}put(P,ee){return this._throwIfRoot("put"),new to(function ko($,P,ee){return function an($,P,ee){return $._throwIfRoot("uploadBytesResumable"),new Ce($,new sn(P),ee)}($=(0,ct.m9)($),P,ee)}(this._delegate,P,ee),this)}putString(P,ee=Tn.RAW,oe){this._throwIfRoot("putString");const Te=Mn(ee,P),I=Object.assign({},oe);return null==I.contentType&&null!=Te.contentType&&(I.contentType=Te.contentType),new to(new Ce(this._delegate,new sn(Te.data,!0),I),this)}listAll(){return function ls($){return function Bn($){const P={prefixes:[],items:[]};return ir($,P).then(()=>P)}($=(0,ct.m9)($))}(this._delegate).then(P=>new yo(P,this.storage))}list(P){return function eo($,P){return li($=(0,ct.m9)($),P)}(this._delegate,P||void 0).then(ee=>new yo(ee,this.storage))}getMetadata(){return function So($){return function ei($){$._throwIfRoot("getMetadata");const P=os($.storage,$._location,ar());return $.storage.makeRequestWithTokens(P,Br)}($=(0,ct.m9)($))}(this._delegate)}updateMetadata(P){return function mi($,P){return function ci($,P){$._throwIfRoot("updateMetadata");const ee=function Tr($,P,ee,oe){const I=q(P.fullServerUrl(),$.host,$._protocol),S=Xe(ee,oe),Ee=$.maxOperationRetryTime,mt=new Qn(I,"PATCH",Li($,oe),Ee);return mt.headers={"Content-Type":"application/json; charset=utf-8"},mt.body=S,mt.errorHandler=Si(P),mt}($.storage,$._location,P,ar());return $.storage.makeRequestWithTokens(ee,Br)}($=(0,ct.m9)($),P)}(this._delegate,P)}getDownloadURL(){return function cs($){return Hi($=(0,ct.m9)($))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Gs($){return function ii($){$._throwIfRoot("deleteObject");const P=function Qr($,P){const oe=q(P.fullServerUrl(),$.host,$._protocol),S=new Qn(oe,"DELETE",function T(H,Ee){},$.maxOperationRetryTime);return S.successCodes=[200,204],S.errorHandler=Si(P),S}($.storage,$._location);return $.storage.makeRequestWithTokens(P,Br)}($=(0,ct.m9)($))}(this._delegate)}_throwIfRoot(P){if(""===this._delegate._location.path)throw yn(P)}}class Ir{constructor(P,ee){this.app=P,this._delegate=ee}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(P){if(Ii(P))throw Wt("ref() expected a child path but got a URL, use refFromURL instead.");return new Wr(Ji(this._delegate,P),this)}refFromURL(P){if(!Ii(P))throw Wt("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Nn.makeFromUrl(P,this._delegate.host)}catch{throw Wt("refFromUrl() expected a valid full URL but got an invalid one.")}return new Wr(Ji(this._delegate,P),this)}setMaxUploadRetryTime(P){this._delegate.maxUploadRetryTime=P}setMaxOperationRetryTime(P){this._delegate.maxOperationRetryTime=P}useEmulator(P,ee,oe={}){!function Ni($,P,ee,oe={}){!function Os($,P,ee,oe={}){$.host=`${P}:${ee}`,$._protocol="http";const{mockUserToken:Te}=oe;Te&&($._overrideAuthToken="string"==typeof Te?Te:(0,ct.Sg)(Te,$.app.options.projectId))}($,P,ee,oe)}(this._delegate,P,ee,oe)}}function Ii($){return/^[A-Za-z]+:\/\//.test($)}function dr($,{instanceIdentifier:P}){const ee=$.getProvider("app-compat").getImmediate(),oe=$.getProvider("storage").getImmediate({identifier:P});return new Ir(ee,oe)}!function Ao($){const P={TaskState:Fr,TaskEvent:as,StringFormat:Tn,Storage:Ir,Reference:Wr};$.INTERNAL.registerComponent(new Ne.wA("storage-compat",dr,"PUBLIC").setServiceProps(P).setMultipleInstances(!0)),$.registerVersion("@firebase/storage-compat","0.2.0")}(nt.Z);var ds=L(6217);function Cs($){const P=function yi($){return new g.y(P=>{const ee=T=>P.next(T);ee($.snapshot);const I=$.on("state_changed",ee);return $.then(T=>{ee(T),P.complete()},T=>{ee($.snapshot),(T=>{P.error(T)})(T)}),function(){I()}}).pipe(function we($,P=ge.z){return(0,U.e)((ee,oe)=>{let Te=null,I=null,T=null;const S=()=>{if(Te){Te.unsubscribe(),Te=null;const Ee=I;I=null,oe.next(Ee)}};function H(){const Ee=T+$,mt=P.now();if(mt<Ee)return Te=this.schedule(void 0,Ee-mt),void oe.add(Te);S()}ee.subscribe((0,be.x)(oe,Ee=>{I=Ee,T=P.now(),Te||(Te=P.schedule(H,$),oe.add(Te))},()=>{S(),oe.complete()},void 0,()=>{I=Te=null}))})}(0))}($);return{task:$,then:$.then.bind($),catch:$.catch.bind($),pause:$.pause.bind($),cancel:$.cancel.bind($),resume:$.resume.bind($),snapshotChanges:()=>P,percentageChanges:()=>P.pipe((0,Ae.U)(ee=>ee.bytesTransferred/ee.totalBytes*100))}}function es($){return{getDownloadURL:()=>(0,l.of)(void 0).pipe(ue.fc,(0,xe.w)(()=>$.getDownloadURL()),ue.iC),getMetadata:()=>(0,l.of)(void 0).pipe(ue.fc,(0,xe.w)(()=>$.getMetadata()),ue.iC),delete:()=>(0,G.D)($.delete()),child:P=>es($.child(P)),updateMetadata:P=>(0,G.D)($.updateMetadata(P)),put:(P,ee)=>Cs($.put(P,ee)),putString:(P,ee,oe)=>Cs($.putString(P,ee,oe)),list:P=>(0,G.D)($.list(P)),listAll:()=>(0,G.D)($.listAll())}}L(9260);const _o=new ie.OlP("angularfire2.storageBucket"),ts=new ie.OlP("angularfire2.storage.maxUploadRetryTime"),qi=new ie.OlP("angularfire2.storage.maxOperationRetryTime"),hs=new ie.OlP("angularfire2.storage.use-emulator");let En=(()=>{class ${constructor(ee,oe,Te,I,T,S,H,Ee,mt,In){const An=(0,pe.on)(ee,T,oe);this.storage=(0,pe.cc)(`${An.name}.storage.${Te}`,"AngularFireStorage",An.name,()=>{const lr=T.runOutsideAngular(()=>An.storage(Te||void 0)),hr=mt;return hr&&lr.useEmulator(...hr),H&&lr.setMaxUploadRetryTime(H),Ee&&lr.setMaxOperationRetryTime(Ee),lr},[H,Ee])}ref(ee){return es(this.storage.ref(ee))}refFromURL(ee){return es(this.storage.refFromURL(ee))}upload(ee,oe,Te){return es(this.storage.ref(ee)).put(oe,Te)}}return $.\u0275fac=function(ee){return new(ee||$)(ie.LFG(pe.Dh),ie.LFG(pe.xv,8),ie.LFG(_o,8),ie.LFG(ie.Lbi),ie.LFG(ie.R0b),ie.LFG(ue.HU),ie.LFG(ts,8),ie.LFG(qi,8),ie.LFG(hs,8),ie.LFG(ds.nm,8))},$.\u0275prov=ie.Yz7({token:$,factory:$.\u0275fac,providedIn:"any"}),$})()},2011:(Ut,ze,L)=>{L.d(ze,{Dh:()=>Ae,GT:()=>be,cc:()=>qe,hO:()=>nt,on:()=>ue,pX:()=>U,xv:()=>xe});var g=L(4650),l=L(9260),G=L(2122);Ut=L.hmd(Ut);const ge=["ngOnDestroy"],U=(Me,Fe,et,se={})=>new Proxy(Me,{get:($e,Le)=>et.runOutsideAngular(()=>{var ut;if(Me[Le])return!(null===(ut=se?.spy)||void 0===ut)&&ut.get&&se.spy.get(Le,Me[Le]),Me[Le];if(ge.indexOf(Le)>-1)return()=>{};const Ye=Fe.toPromise().then(de=>{const Oe=de&&de[Le];return"function"==typeof Oe?Oe.bind(de):Oe&&Oe.then?Oe.then(W=>et.run(()=>W)):et.run(()=>Oe)});return new Proxy(()=>{},{get:(de,Oe)=>Ye[Oe],apply:(de,Oe,W)=>Ye.then(te=>{var ae;const Ie=te&&te(...W);return!(null===(ae=se?.spy)||void 0===ae)&&ae.apply&&se.spy.apply(Le,W,Ie),Ie})})})}),be=(Me,Fe)=>{Fe.forEach(et=>{Object.getOwnPropertyNames(et.prototype||et).forEach(se=>{Object.defineProperty(Me.prototype,se,Object.getOwnPropertyDescriptor(et.prototype||et,se))})})};class we{constructor(Fe){return Fe}}const Ae=new g.OlP("angularfire2.app.options"),xe=new g.OlP("angularfire2.app.name");function ue(Me,Fe,et){const $e="object"==typeof et&&et||{};$e.name=$e.name||"string"==typeof et&&et||"[DEFAULT]";const ut=l.Z.apps.filter(Ye=>Ye&&Ye.name===$e.name)[0]||Fe.runOutsideAngular(()=>l.Z.initializeApp(Me,$e));try{JSON.stringify(Me)!==JSON.stringify(ut.options)&&ie("error",`${ut.name} Firebase App already initialized with different options${Ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new we(ut)}const ie=(Me,...Fe)=>{(0,g.X6Q)()&&typeof console<"u"&&console[Me](...Fe)},pe={provide:we,useFactory:ue,deps:[Ae,g.R0b,[new g.FiY,xe]]};let nt=(()=>{class Me{constructor(et){l.Z.registerVersion("angularfire",G.q4.full,"core"),l.Z.registerVersion("angularfire",G.q4.full,"app-compat"),l.Z.registerVersion("angular",g.q4F.full,et.toString())}static initializeApp(et,se){return{ngModule:Me,providers:[{provide:Ae,useValue:et},{provide:xe,useValue:se}]}}}return Me.\u0275fac=function(et){return new(et||Me)(g.LFG(g.Lbi))},Me.\u0275mod=g.oAB({type:Me}),Me.\u0275inj=g.cJS({providers:[pe]}),Me})();function qe(Me,Fe,et,se,$e){const[,Le,ut]=globalThis.\u0275AngularfireInstanceCache.find(Ye=>Ye[0]===Me)||[];if(Le)return function Qe(Me,Fe){try{return Me.toString()===Fe.toString()}catch{return Me===Fe}}($e,ut)||(Ne("error",`${Fe} was already initialized on the ${et} Firebase App with different settings.${ct?" You may need to reload as Firebase is not HMR aware.":""}`),Ne("warn",{is:$e,was:ut})),Le;{const Ye=se();return globalThis.\u0275AngularfireInstanceCache.push([Me,Ye,$e]),Ye}}const ct=!!Ut.hot,Ne=(Me,...Fe)=>{(0,g.X6Q)()&&typeof console<"u"&&console[Me](...Fe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(Ut,ze,L)=>{L.d(ze,{q4:()=>wo,iC:()=>Vo,fc:()=>ao,HU:()=>ti,vb:()=>vt,JM:()=>Re});var g=L(4650),l=L(259),G=L(5861),ge=L(9681),U=L(2090),be=L(4859),we=L(1877),Ae=L(8766);const xe="@firebase/installations",pe="w:0.6.0",nt="FIS_v2",Fe=new U.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function et(O){return O instanceof U.ZR&&O.code.includes("request-failed")}function se({projectId:O}){return`https://firebaseinstallations.googleapis.com/v1/projects/${O}/installations`}function $e(O){return{token:O.token,requestStatus:2,expiresIn:te(O.expiresIn),creationTime:Date.now()}}function Le(O,k){return ut.apply(this,arguments)}function ut(){return(ut=(0,G.Z)(function*(O,k){const fe=(yield k.json()).error;return Fe.create("request-failed",{requestName:O,serverCode:fe.code,serverMessage:fe.message,serverStatus:fe.status})})).apply(this,arguments)}function Ye({apiKey:O}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":O})}function de(O,{refreshToken:k}){const K=Ye(O);return K.append("Authorization",function ae(O){return`${nt} ${O}`}(k)),K}function Oe(O){return W.apply(this,arguments)}function W(){return(W=(0,G.Z)(function*(O){const k=yield O();return k.status>=500&&k.status<600?O():k})).apply(this,arguments)}function te(O){return Number(O.replace("s","000"))}function Ie(O,k){return lt.apply(this,arguments)}function lt(){return(lt=(0,G.Z)(function*({appConfig:O,heartbeatServiceProvider:k},{fid:K}){const fe=se(O),Ve=Ye(O),rt=k.getImmediate({optional:!0});if(rt){const un=yield rt.getHeartbeatsHeader();un&&Ve.append("x-firebase-client",un)}const hn={method:"POST",headers:Ve,body:JSON.stringify({fid:K,authVersion:nt,appId:O.appId,sdkVersion:pe})},bn=yield Oe(()=>fetch(fe,hn));if(bn.ok){const un=yield bn.json();return{fid:un.fid||K,registrationStatus:2,refreshToken:un.refreshToken,authToken:$e(un.authToken)}}throw yield Le("Create Installation",bn)})).apply(this,arguments)}function pt(O){return new Promise(k=>{setTimeout(k,O)})}const Ot=/^[cdef][\w-]{21}$/;function Nt(){try{const O=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(O),O[0]=112+O[0]%16;const K=function Pt(O){return function Ct(O){return btoa(String.fromCharCode(...O)).replace(/\+/g,"-").replace(/\//g,"_")}(O).substr(0,22)}(O);return Ot.test(K)?K:""}catch{return""}}function Et(O){return`${O.appName}!${O.appId}`}const Wt=new Map;function qt(O,k){const K=Et(O);On(K,k),function Nn(O,k){const K=function kn(){return!wr&&"BroadcastChannel"in self&&(wr=new BroadcastChannel("[Firebase] FID Change"),wr.onmessage=O=>{On(O.data.key,O.data.fid)}),wr}();K&&K.postMessage({key:O,fid:k}),function _r(){0===Wt.size&&wr&&(wr.close(),wr=null)}()}(K,k)}function On(O,k){const K=Wt.get(O);if(K)for(const fe of K)fe(k)}let wr=null;const zn="firebase-installations-store";let $n=null;function Vn(){return $n||($n=(0,Ae.X3)("firebase-installations-database",1,{upgrade:(O,k)=>{0===k&&O.createObjectStore(zn)}})),$n}function Kt(O,k){return He.apply(this,arguments)}function He(){return(He=(0,G.Z)(function*(O,k){const K=Et(O),Ve=(yield Vn()).transaction(zn,"readwrite"),rt=Ve.objectStore(zn),Tt=yield rt.get(K);return yield rt.put(k,K),yield Ve.done,(!Tt||Tt.fid!==k.fid)&&qt(O,k.fid),k})).apply(this,arguments)}function q(O){return ne.apply(this,arguments)}function ne(){return(ne=(0,G.Z)(function*(O){const k=Et(O),fe=(yield Vn()).transaction(zn,"readwrite");yield fe.objectStore(zn).delete(k),yield fe.done})).apply(this,arguments)}function at(O,k){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,G.Z)(function*(O,k){const K=Et(O),Ve=(yield Vn()).transaction(zn,"readwrite"),rt=Ve.objectStore(zn),Tt=yield rt.get(K),hn=k(Tt);return void 0===hn?yield rt.delete(K):yield rt.put(hn,K),yield Ve.done,hn&&(!Tt||Tt.fid!==hn.fid)&&qt(O,hn.fid),hn})).apply(this,arguments)}function Ht(O){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,G.Z)(function*(O){let k;const K=yield at(O.appConfig,fe=>{const Ve=We(fe),rt=Ue(O,Ve);return k=rt.registrationPromise,rt.installationEntry});return""===K.fid?{installationEntry:yield k}:{installationEntry:K,registrationPromise:k}})).apply(this,arguments)}function We(O){return $r(O||{fid:Nt(),registrationStatus:0})}function Ue(O,k){if(0===k.registrationStatus){if(!navigator.onLine)return{installationEntry:k,registrationPromise:Promise.reject(Fe.create("app-offline"))};const K={fid:k.fid,registrationStatus:1,registrationTime:Date.now()},fe=function Ft(O,k){return Er.apply(this,arguments)}(O,K);return{installationEntry:K,registrationPromise:fe}}return 1===k.registrationStatus?{installationEntry:k,registrationPromise:qn(O)}:{installationEntry:k}}function Er(){return(Er=(0,G.Z)(function*(O,k){try{const K=yield Ie(O,k);return Kt(O.appConfig,K)}catch(K){throw et(K)&&409===K.customData.serverCode?yield q(O.appConfig):yield Kt(O.appConfig,{fid:k.fid,registrationStatus:0}),K}})).apply(this,arguments)}function qn(O){return or.apply(this,arguments)}function or(){return(or=(0,G.Z)(function*(O){let k=yield fi(O.appConfig);for(;1===k.registrationStatus;)yield pt(100),k=yield fi(O.appConfig);if(0===k.registrationStatus){const{installationEntry:K,registrationPromise:fe}=yield Ht(O);return fe||K}return k})).apply(this,arguments)}function fi(O){return at(O,k=>{if(!k)throw Fe.create("installation-not-found");return $r(k)})}function $r(O){return function Bi(O){return 1===O.registrationStatus&&O.registrationTime+1e4<Date.now()}(O)?{fid:O.fid,registrationStatus:0}:O}function Tn(O,k){return qr.apply(this,arguments)}function qr(){return(qr=(0,G.Z)(function*({appConfig:O,heartbeatServiceProvider:k},K){const fe=Mn(O,K),Ve=de(O,K),rt=k.getImmediate({optional:!0});if(rt){const un=yield rt.getHeartbeatsHeader();un&&Ve.append("x-firebase-client",un)}const hn={method:"POST",headers:Ve,body:JSON.stringify({installation:{sdkVersion:pe,appId:O.appId}})},bn=yield Oe(()=>fetch(fe,hn));if(bn.ok)return $e(yield bn.json());throw yield Le("Generate Auth Token",bn)})).apply(this,arguments)}function Mn(O,{fid:k}){return`${se(O)}/${k}/authTokens:generate`}function rn(O){return ai.apply(this,arguments)}function ai(){return(ai=(0,G.Z)(function*(O,k=!1){let K;const fe=yield at(O.appConfig,rt=>{if(!sn(rt))throw Fe.create("not-registered");const Tt=rt.authToken;if(!k&&ye(Tt))return rt;if(1===Tt.requestStatus)return K=Mt(O,k),rt;{if(!navigator.onLine)throw Fe.create("app-offline");const hn=De(rt);return K=ln(O,hn),hn}});return K?yield K:fe.authToken})).apply(this,arguments)}function Mt(O,k){return ht.apply(this,arguments)}function ht(){return(ht=(0,G.Z)(function*(O,k){let K=yield Zt(O.appConfig);for(;1===K.authToken.requestStatus;)yield pt(100),K=yield Zt(O.appConfig);const fe=K.authToken;return 0===fe.requestStatus?rn(O,k):fe})).apply(this,arguments)}function Zt(O){return at(O,k=>{if(!sn(k))throw Fe.create("not-registered");return function st(O){return 1===O.requestStatus&&O.requestTime+1e4<Date.now()}(k.authToken)?Object.assign(Object.assign({},k),{authToken:{requestStatus:0}}):k})}function ln(O,k){return pn.apply(this,arguments)}function pn(){return(pn=(0,G.Z)(function*(O,k){try{const K=yield Tn(O,k),fe=Object.assign(Object.assign({},k),{authToken:K});return yield Kt(O.appConfig,fe),K}catch(K){if(!et(K)||401!==K.customData.serverCode&&404!==K.customData.serverCode){const fe=Object.assign(Object.assign({},k),{authToken:{requestStatus:0}});yield Kt(O.appConfig,fe)}else yield q(O.appConfig);throw K}})).apply(this,arguments)}function sn(O){return void 0!==O&&2===O.registrationStatus}function ye(O){return 2===O.requestStatus&&!function he(O){const k=Date.now();return k<O.creationTime||O.creationTime+O.expiresIn<k+36e5}(O)}function De(O){const k={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},O),{authToken:k})}function Rt(){return(Rt=(0,G.Z)(function*(O){const k=O,{installationEntry:K,registrationPromise:fe}=yield Ht(k);return fe?fe.catch(console.error):rn(k).catch(console.error),K.fid})).apply(this,arguments)}function Fn(){return(Fn=(0,G.Z)(function*(O,k=!1){const K=O;return yield ar(K),(yield rn(K,k)).token})).apply(this,arguments)}function ar(O){return cn.apply(this,arguments)}function cn(){return(cn=(0,G.Z)(function*(O){const{registrationPromise:k}=yield Ht(O);k&&(yield k)})).apply(this,arguments)}function Qn(O){return Fe.create("missing-app-config-values",{valueName:O})}const xr="installations",nr=O=>{const k=O.getProvider("app").getImmediate(),K=function Pn(O){if(!O||!O.options)throw Qn("App Configuration");if(!O.name)throw Qn("App Name");const k=["projectId","apiKey","appId"];for(const K of k)if(!O.options[K])throw Qn(K);return{appName:O.name,projectId:O.options.projectId,apiKey:O.options.apiKey,appId:O.options.appId}}(k);return{app:k,appConfig:K,heartbeatServiceProvider:(0,ge._getProvider)(k,"heartbeat"),_delete:()=>Promise.resolve()}},Rs=O=>{const k=O.getProvider("app").getImmediate(),K=(0,ge._getProvider)(k,xr).getImmediate();return{getId:()=>function Ze(O){return Rt.apply(this,arguments)}(K),getToken:Ve=>function vn(O){return Fn.apply(this,arguments)}(K,Ve)}};(function ji(){(0,ge._registerComponent)(new be.wA(xr,nr,"PUBLIC")),(0,ge._registerComponent)(new be.wA("installations-internal",Rs,"PRIVATE"))})(),(0,ge.registerVersion)(xe,"0.6.0"),(0,ge.registerVersion)(xe,"0.6.0","esm2017");const Si="@firebase/remote-config",Tr=new U.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class vs{constructor(k,K,fe,Ve){this.client=k,this.storage=K,this.storageCache=fe,this.logger=Ve}isCachedDataFresh(k,K){if(!K)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const fe=Date.now()-K,Ve=fe<=k;return this.logger.debug(`Config fetch cache check. Cache age millis: ${fe}. Cache max age millis (minimumFetchIntervalMillis setting): ${k}. Is cache hit: ${Ve}.`),Ve}fetch(k){var K=this;return(0,G.Z)(function*(){const[fe,Ve]=yield Promise.all([K.storage.getLastSuccessfulFetchTimestampMillis(),K.storage.getLastSuccessfulFetchResponse()]);if(Ve&&K.isCachedDataFresh(k.cacheMaxAgeMillis,fe))return Ve;k.eTag=Ve&&Ve.eTag;const rt=yield K.client.fetch(k),Tt=[K.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===rt.status&&Tt.push(K.storage.setLastSuccessfulFetchResponse(rt)),yield Promise.all(Tt),rt})()}}function ui(O=navigator){return O.languages&&O.languages[0]||O.language}class bs{constructor(k,K,fe,Ve,rt,Tt){this.firebaseInstallations=k,this.sdkVersion=K,this.namespace=fe,this.projectId=Ve,this.apiKey=rt,this.appId=Tt}fetch(k){var K=this;return(0,G.Z)(function*(){const[fe,Ve]=yield Promise.all([K.firebaseInstallations.getId(),K.firebaseInstallations.getToken()]),Tt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${K.projectId}/namespaces/${K.namespace}:fetch?key=${K.apiKey}`,hn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":k.eTag||"*"},bn={sdk_version:K.sdkVersion,app_instance_id:fe,app_instance_id_token:Ve,app_id:K.appId,language_code:ui()},un={method:"POST",headers:hn,body:JSON.stringify(bn)},tr=fetch(Tt,un),Hn=new Promise((Oo,Qo)=>{k.signal.addEventListener(()=>{const xa=new Error("The operation was aborted.");xa.name="AbortError",Qo(xa)})});let uo;try{yield Promise.race([tr,Hn]),uo=yield tr}catch(Oo){let Qo="fetch-client-network";throw"AbortError"===Oo?.name&&(Qo="fetch-timeout"),Tr.create(Qo,{originalErrorMessage:Oo?.message})}let xn=uo.status;const Nr=uo.headers.get("ETag")||void 0;let Sa,Aa;if(200===uo.status){let Oo;try{Oo=yield uo.json()}catch(Qo){throw Tr.create("fetch-client-parse",{originalErrorMessage:Qo?.message})}Sa=Oo.entries,Aa=Oo.state}if("INSTANCE_STATE_UNSPECIFIED"===Aa?xn=500:"NO_CHANGE"===Aa?xn=304:("NO_TEMPLATE"===Aa||"EMPTY_CONFIG"===Aa)&&(Sa={}),304!==xn&&200!==xn)throw Tr.create("fetch-status",{httpStatus:xn});return{status:xn,eTag:Nr,config:Sa}})()}}class Se{constructor(k,K){this.client=k,this.storage=K}fetch(k){var K=this;return(0,G.Z)(function*(){const fe=(yield K.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return K.attemptFetch(k,fe)})()}attemptFetch(k,{throttleEndTimeMillis:K,backoffCount:fe}){var Ve=this;return(0,G.Z)(function*(){yield function rr(O,k){return new Promise((K,fe)=>{const Ve=Math.max(k-Date.now(),0),rt=setTimeout(K,Ve);O.addEventListener(()=>{clearTimeout(rt),fe(Tr.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}(k.signal,K);try{const rt=yield Ve.client.fetch(k);return yield Ve.storage.deleteThrottleMetadata(),rt}catch(rt){if(!function Ce(O){if(!(O instanceof U.ZR&&O.customData))return!1;const k=Number(O.customData.httpStatus);return 429===k||500===k||503===k||504===k}(rt))throw rt;const Tt={throttleEndTimeMillis:Date.now()+(0,U.$s)(fe),backoffCount:fe+1};return yield Ve.storage.setThrottleMetadata(Tt),Ve.attemptFetch(k,Tt)}})()}}class At{constructor(k,K,fe,Ve,rt){this.app=k,this._client=K,this._storageCache=fe,this._storage=Ve,this._logger=rt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function an(O,k){const K=O.target.error||void 0;return Tr.create(k,{originalErrorMessage:K&&K?.message})}const _n="app_namespace_store";class li{constructor(k,K,fe,Ve=function Lr(){return new Promise((O,k)=>{try{const K=indexedDB.open("firebase_remote_config",1);K.onerror=fe=>{k(an(fe,"storage-open"))},K.onsuccess=fe=>{O(fe.target.result)},K.onupgradeneeded=fe=>{0===fe.oldVersion&&fe.target.result.createObjectStore(_n,{keyPath:"compositeKey"})}}catch(K){k(Tr.create("storage-open",{originalErrorMessage:K?.message}))}})}()){this.appId=k,this.appName=K,this.namespace=fe,this.openDbPromise=Ve}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(k){return this.set("last_fetch_status",k)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(k){return this.set("last_successful_fetch_timestamp_millis",k)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(k){return this.set("last_successful_fetch_response",k)}getActiveConfig(){return this.get("active_config")}setActiveConfig(k){return this.set("active_config",k)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(k){return this.set("active_config_etag",k)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(k){return this.set("throttle_metadata",k)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(k){var K=this;return(0,G.Z)(function*(){const fe=yield K.openDbPromise;return new Promise((Ve,rt)=>{const hn=fe.transaction([_n],"readonly").objectStore(_n),bn=K.createCompositeKey(k);try{const un=hn.get(bn);un.onerror=tr=>{rt(an(tr,"storage-get"))},un.onsuccess=tr=>{const Hn=tr.target.result;Ve(Hn?Hn.value:void 0)}}catch(un){rt(Tr.create("storage-get",{originalErrorMessage:un?.message}))}})})()}set(k,K){var fe=this;return(0,G.Z)(function*(){const Ve=yield fe.openDbPromise;return new Promise((rt,Tt)=>{const bn=Ve.transaction([_n],"readwrite").objectStore(_n),un=fe.createCompositeKey(k);try{const tr=bn.put({compositeKey:un,value:K});tr.onerror=Hn=>{Tt(an(Hn,"storage-set"))},tr.onsuccess=()=>{rt()}}catch(tr){Tt(Tr.create("storage-set",{originalErrorMessage:tr?.message}))}})})()}delete(k){var K=this;return(0,G.Z)(function*(){const fe=yield K.openDbPromise;return new Promise((Ve,rt)=>{const hn=fe.transaction([_n],"readwrite").objectStore(_n),bn=K.createCompositeKey(k);try{const un=hn.delete(bn);un.onerror=tr=>{rt(an(tr,"storage-delete"))},un.onsuccess=()=>{Ve()}}catch(un){rt(Tr.create("storage-delete",{originalErrorMessage:un?.message}))}})})()}createCompositeKey(k){return[this.appId,this.appName,this.namespace,k].join()}}class ei{constructor(k){this.storage=k}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var k=this;return(0,G.Z)(function*(){const K=k.storage.getLastFetchStatus(),fe=k.storage.getLastSuccessfulFetchTimestampMillis(),Ve=k.storage.getActiveConfig(),rt=yield K;rt&&(k.lastFetchStatus=rt);const Tt=yield fe;Tt&&(k.lastSuccessfulFetchTimestampMillis=Tt);const hn=yield Ve;hn&&(k.activeConfig=hn)})()}setLastFetchStatus(k){return this.lastFetchStatus=k,this.storage.setLastFetchStatus(k)}setLastSuccessfulFetchTimestampMillis(k){return this.lastSuccessfulFetchTimestampMillis=k,this.storage.setLastSuccessfulFetchTimestampMillis(k)}setActiveConfig(k){return this.activeConfig=k,this.storage.setActiveConfig(k)}}function ws(){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,G.Z)(function*(){if(!(0,U.hl)())return!1;try{return yield(0,U.eu)()}catch{return!1}})).apply(this,arguments)}!function ci(){(0,ge._registerComponent)(new be.wA("remote-config",function O(k,{instanceIdentifier:K}){const fe=k.getProvider("app").getImmediate(),Ve=k.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Tr.create("registration-window");if(!(0,U.hl)())throw Tr.create("indexed-db-unavailable");const{projectId:rt,apiKey:Tt,appId:hn}=fe.options;if(!rt)throw Tr.create("registration-project-id");if(!Tt)throw Tr.create("registration-api-key");if(!hn)throw Tr.create("registration-app-id");const bn=new li(hn,fe.name,K=K||"firebase"),un=new ei(bn),tr=new we.Yd(Si);tr.logLevel=we.in.ERROR;const Hn=new bs(Ve,ge.SDK_VERSION,K,rt,Tt,hn),uo=new Se(Hn,bn),xn=new vs(uo,bn,un,tr),Nr=new At(fe,xn,un,bn,tr);return function ur(O){const k=(0,U.m9)(O);k._initializePromise||(k._initializePromise=k._storageCache.loadFromStorage().then(()=>{k._isInitializationComplete=!0}))}(Nr),Nr},"PUBLIC").setMultipleInstances(!0)),(0,ge.registerVersion)(Si,"0.4.0"),(0,ge.registerVersion)(Si,"0.4.0","esm2017")}();const js="/firebase-messaging-sw.js",gi="/firebase-cloud-messaging-push-scope",us="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Os="google.c.a.c_id",Ns="google.c.a.c_l",Es="google.c.a.ts",Hs="google.c.a.e";var Zi=(()=>{return(O=Zi||(Zi={})).PUSH_RECEIVED="push-received",O.NOTIFICATION_CLICKED="notification-clicked",Zi;var O})();function Gi(O){const k=new Uint8Array(O);return btoa(String.fromCharCode(...k)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Zs(O){const K=(O+"=".repeat((4-O.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),fe=atob(K),Ve=new Uint8Array(fe.length);for(let rt=0;rt<fe.length;++rt)Ve[rt]=fe.charCodeAt(rt);return Ve}const ko="fcm_token_details_db",mi="fcm_token_object_Store";function eo(O){return ls.apply(this,arguments)}function ls(){return ls=(0,G.Z)(function*(O){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(rt=>rt.name).includes(ko))return null;let k=null;return(yield(0,Ae.X3)(ko,5,{upgrade:(fe=(0,G.Z)(function*(Ve,rt,Tt,hn){var bn;if(rt<2||!Ve.objectStoreNames.contains(mi))return;const un=hn.objectStore(mi),tr=yield un.index("fcmSenderId").get(O);if(yield un.clear(),tr)if(2===rt){const Hn=tr;if(!Hn.auth||!Hn.p256dh||!Hn.endpoint)return;k={token:Hn.fcmToken,createTime:null!==(bn=Hn.createTime)&&void 0!==bn?bn:Date.now(),subscriptionOptions:{auth:Hn.auth,p256dh:Hn.p256dh,endpoint:Hn.endpoint,swScope:Hn.swScope,vapidKey:"string"==typeof Hn.vapidKey?Hn.vapidKey:Gi(Hn.vapidKey)}}}else if(3===rt){const Hn=tr;k={token:Hn.fcmToken,createTime:Hn.createTime,subscriptionOptions:{auth:Gi(Hn.auth),p256dh:Gi(Hn.p256dh),endpoint:Hn.endpoint,swScope:Hn.swScope,vapidKey:Gi(Hn.vapidKey)}}}else if(4===rt){const Hn=tr;k={token:Hn.fcmToken,createTime:Hn.createTime,subscriptionOptions:{auth:Gi(Hn.auth),p256dh:Gi(Hn.p256dh),endpoint:Hn.endpoint,swScope:Hn.swScope,vapidKey:Gi(Hn.vapidKey)}}}}),function(rt,Tt,hn,bn){return fe.apply(this,arguments)})})).close(),yield(0,Ae.Lj)(ko),yield(0,Ae.Lj)("fcm_vapid_details_db"),yield(0,Ae.Lj)("undefined"),cs(k)?k:null;var fe}),ls.apply(this,arguments)}function cs(O){if(!O||!O.subscriptionOptions)return!1;const{subscriptionOptions:k}=O;return"number"==typeof O.createTime&&O.createTime>0&&"string"==typeof O.token&&O.token.length>0&&"string"==typeof k.auth&&k.auth.length>0&&"string"==typeof k.p256dh&&k.p256dh.length>0&&"string"==typeof k.endpoint&&k.endpoint.length>0&&"string"==typeof k.swScope&&k.swScope.length>0&&"string"==typeof k.vapidKey&&k.vapidKey.length>0}const zi="firebase-messaging-store";let cr=null;function Ni(){return cr||(cr=(0,Ae.X3)("firebase-messaging-database",1,{upgrade:(O,k)=>{0===k&&O.createObjectStore(zi)}})),cr}function ks(O){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,G.Z)(function*(O){const k=yo(O),fe=yield(yield Ni()).transaction(zi).objectStore(zi).get(k);if(fe)return fe;{const Ve=yield eo(O.appConfig.senderId);if(Ve)return yield xi(O,Ve),Ve}})).apply(this,arguments)}function xi(O,k){return zs.apply(this,arguments)}function zs(){return(zs=(0,G.Z)(function*(O,k){const K=yo(O),Ve=(yield Ni()).transaction(zi,"readwrite");return yield Ve.objectStore(zi).put(k,K),yield Ve.done,k})).apply(this,arguments)}function qs(O){return to.apply(this,arguments)}function to(){return(to=(0,G.Z)(function*(O){const k=yo(O),fe=(yield Ni()).transaction(zi,"readwrite");yield fe.objectStore(zi).delete(k),yield fe.done})).apply(this,arguments)}function yo({appConfig:O}){return O.appId}const Ir=new U.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ii(O,k){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,G.Z)(function*(O,k){const K=yield Is(O),fe=Cs(k),Ve={method:"POST",headers:K,body:JSON.stringify(fe)};let rt;try{rt=yield(yield fetch(ds(O.appConfig),Ve)).json()}catch(Tt){throw Ir.create("token-subscribe-failed",{errorInfo:Tt?.toString()})}if(rt.error)throw Ir.create("token-subscribe-failed",{errorInfo:rt.error.message});if(!rt.token)throw Ir.create("token-subscribe-no-token");return rt.token})).apply(this,arguments)}function Ws(O,k){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,G.Z)(function*(O,k){const K=yield Is(O),fe=Cs(k.subscriptionOptions),Ve={method:"PATCH",headers:K,body:JSON.stringify(fe)};let rt;try{rt=yield(yield fetch(`${ds(O.appConfig)}/${k.token}`,Ve)).json()}catch(Tt){throw Ir.create("token-update-failed",{errorInfo:Tt?.toString()})}if(rt.error)throw Ir.create("token-update-failed",{errorInfo:rt.error.message});if(!rt.token)throw Ir.create("token-update-no-token");return rt.token})).apply(this,arguments)}function dr(O,k){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,G.Z)(function*(O,k){const fe={method:"DELETE",headers:yield Is(O)};try{const rt=yield(yield fetch(`${ds(O.appConfig)}/${k}`,fe)).json();if(rt.error)throw Ir.create("token-unsubscribe-failed",{errorInfo:rt.error.message})}catch(Ve){throw Ir.create("token-unsubscribe-failed",{errorInfo:Ve?.toString()})}})).apply(this,arguments)}function ds({projectId:O}){return`https://fcmregistrations.googleapis.com/v1/projects/${O}/registrations`}function Is(O){return yi.apply(this,arguments)}function yi(){return(yi=(0,G.Z)(function*({appConfig:O,installations:k}){const K=yield k.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":O.apiKey,"x-goog-firebase-installations-auth":`FIS ${K}`})})).apply(this,arguments)}function Cs({p256dh:O,auth:k,endpoint:K,vapidKey:fe}){const Ve={web:{endpoint:K,auth:k,p256dh:O}};return fe!==us&&(Ve.web.applicationPubKey=fe),Ve}const es=6048e5;function _o(O){return ts.apply(this,arguments)}function ts(){return(ts=(0,G.Z)(function*(O){const k=yield $(O.swRegistration,O.vapidKey),K={vapidKey:O.vapidKey,swScope:O.swRegistration.scope,endpoint:k.endpoint,auth:Gi(k.getKey("auth")),p256dh:Gi(k.getKey("p256dh"))},fe=yield ks(O.firebaseDependencies);if(fe){if(ee(fe.subscriptionOptions,K))return Date.now()>=fe.createTime+es?En(O,{token:fe.token,createTime:Date.now(),subscriptionOptions:K}):fe.token;try{yield dr(O.firebaseDependencies,fe.token)}catch(Ve){console.warn(Ve)}return vo(O.firebaseDependencies,K)}return vo(O.firebaseDependencies,K)})).apply(this,arguments)}function qi(O){return hs.apply(this,arguments)}function hs(){return(hs=(0,G.Z)(function*(O){const k=yield ks(O.firebaseDependencies);k&&(yield dr(O.firebaseDependencies,k.token),yield qs(O.firebaseDependencies));const K=yield O.swRegistration.pushManager.getSubscription();return!K||K.unsubscribe()})).apply(this,arguments)}function En(O,k){return xo.apply(this,arguments)}function xo(){return(xo=(0,G.Z)(function*(O,k){try{const K=yield Ws(O.firebaseDependencies,k),fe=Object.assign(Object.assign({},k),{token:K,createTime:Date.now()});return yield xi(O.firebaseDependencies,fe),K}catch(K){throw yield qi(O),K}})).apply(this,arguments)}function vo(O,k){return no.apply(this,arguments)}function no(){return(no=(0,G.Z)(function*(O,k){const fe={token:yield Ii(O,k),createTime:Date.now(),subscriptionOptions:k};return yield xi(O,fe),fe.token})).apply(this,arguments)}function $(O,k){return P.apply(this,arguments)}function P(){return(P=(0,G.Z)(function*(O,k){return(yield O.pushManager.getSubscription())||O.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Zs(k)})})).apply(this,arguments)}function ee(O,k){return k.vapidKey===O.vapidKey&&k.endpoint===O.endpoint&&k.auth===O.auth&&k.p256dh===O.p256dh}function oe(O){const k={from:O.from,collapseKey:O.collapse_key,messageId:O.fcmMessageId};return function Te(O,k){if(!k.notification)return;O.notification={};const K=k.notification.title;K&&(O.notification.title=K);const fe=k.notification.body;fe&&(O.notification.body=fe);const Ve=k.notification.image;Ve&&(O.notification.image=Ve);const rt=k.notification.icon;rt&&(O.notification.icon=rt)}(k,O),function I(O,k){!k.data||(O.data=k.data)}(k,O),function T(O,k){var K,fe,Ve,rt,Tt;if(!(k.fcmOptions||null!==(K=k.notification)&&void 0!==K&&K.click_action))return;O.fcmOptions={};const hn=null!==(Ve=null===(fe=k.fcmOptions)||void 0===fe?void 0:fe.link)&&void 0!==Ve?Ve:null===(rt=k.notification)||void 0===rt?void 0:rt.click_action;hn&&(O.fcmOptions.link=hn);const bn=null===(Tt=k.fcmOptions)||void 0===Tt?void 0:Tt.analytics_label;bn&&(O.fcmOptions.analyticsLabel=bn)}(k,O),k}function S(O){return"object"==typeof O&&!!O&&Os in O}function H(O,k){const K=[];for(let fe=0;fe<O.length;fe++)K.push(O.charAt(fe)),fe<k.length&&K.push(k.charAt(fe));return K.join("")}function mt(O){return Ir.create("missing-app-config-values",{valueName:O})}H("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),H("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class In{constructor(k,K,fe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ve=function Ee(O){if(!O||!O.options)throw mt("App Configuration Object");if(!O.name)throw mt("App Name");const k=["projectId","apiKey","appId","messagingSenderId"],{options:K}=O;for(const fe of k)if(!K[fe])throw mt(fe);return{appName:O.name,projectId:K.projectId,apiKey:K.apiKey,appId:K.appId,senderId:K.messagingSenderId}}(k);this.firebaseDependencies={app:k,appConfig:Ve,installations:K,analyticsProvider:fe}}_delete(){return Promise.resolve()}}function An(O){return lr.apply(this,arguments)}function lr(){return(lr=(0,G.Z)(function*(O){try{O.swRegistration=yield navigator.serviceWorker.register(js,{scope:gi}),O.swRegistration.update().catch(()=>{})}catch(k){throw Ir.create("failed-service-worker-registration",{browserErrorMessage:k?.message})}})).apply(this,arguments)}function hr(O,k){return di.apply(this,arguments)}function di(){return(di=(0,G.Z)(function*(O,k){if(!k&&!O.swRegistration&&(yield An(O)),k||!O.swRegistration){if(!(k instanceof ServiceWorkerRegistration))throw Ir.create("invalid-sw-registration");O.swRegistration=k}})).apply(this,arguments)}function Rr(O,k){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,G.Z)(function*(O,k){k?O.vapidKey=k:O.vapidKey||(O.vapidKey=us)})).apply(this,arguments)}function Ur(){return(Ur=(0,G.Z)(function*(O,k){if(!navigator)throw Ir.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Ir.create("permission-blocked");return yield Rr(O,k?.vapidKey),yield hr(O,k?.serviceWorkerRegistration),_o(O)})).apply(this,arguments)}function si(O,k,K){return ki.apply(this,arguments)}function ki(){return(ki=(0,G.Z)(function*(O,k,K){const fe=Kr(k);(yield O.firebaseDependencies.analyticsProvider.get()).logEvent(fe,{message_id:K[Os],message_name:K[Ns],message_time:K[Es],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Kr(O){switch(O){case Zi.NOTIFICATION_CLICKED:return"notification_open";case Zi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ds(){return(Ds=(0,G.Z)(function*(O,k){const K=k.data;if(!K.isFirebaseMessaging)return;O.onMessageHandler&&K.messageType===Zi.PUSH_RECEIVED&&("function"==typeof O.onMessageHandler?O.onMessageHandler(oe(K)):O.onMessageHandler.next(oe(K)));const fe=K.data;S(fe)&&"1"===fe[Hs]&&(yield si(O,K.messageType,fe))})).apply(this,arguments)}const Ts="@firebase/messaging",ra=O=>{const k=new In(O.getProvider("app").getImmediate(),O.getProvider("installations-internal").getImmediate(),O.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",K=>function Bo(O,k){return Ds.apply(this,arguments)}(k,K)),k},Po=O=>{const k=O.getProvider("messaging").getImmediate();return{getToken:fe=>function Xn(O,k){return Ur.apply(this,arguments)}(k,fe)}};function ro(){return va.apply(this,arguments)}function va(){return(va=(0,G.Z)(function*(){try{yield(0,U.eu)()}catch{return!1}return typeof window<"u"&&(0,U.hl)()&&(0,U.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Fa(){(0,ge._registerComponent)(new be.wA("messaging",ra,"PUBLIC")),(0,ge._registerComponent)(new be.wA("messaging-internal",Po,"PRIVATE")),(0,ge.registerVersion)(Ts,"0.12.0"),(0,ge.registerVersion)(Ts,"0.12.0","esm2017")}();const ba="analytics",fs="firebase_id",io="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ns="https://www.googletagmanager.com/gtag/js",Pi=new we.Yd("@firebase/analytics");function au(O){return Promise.all(O.map(k=>k.catch(K=>K)))}function sa(O,k){const K=document.createElement("script");K.src=`${ns}?l=${O}&id=${k}`,K.async=!0,document.head.appendChild(K)}function j(O,k,K,fe,Ve,rt){return M.apply(this,arguments)}function M(){return(M=(0,G.Z)(function*(O,k,K,fe,Ve,rt){const Tt=fe[Ve];try{if(Tt)yield k[Tt];else{const bn=(yield au(K)).find(un=>un.measurementId===Ve);bn&&(yield k[bn.appId])}}catch(hn){Pi.error(hn)}O("config",Ve,rt)})).apply(this,arguments)}function Y(O,k,K,fe,Ve){return _e.apply(this,arguments)}function _e(){return(_e=(0,G.Z)(function*(O,k,K,fe,Ve){try{let rt=[];if(Ve&&Ve.send_to){let Tt=Ve.send_to;Array.isArray(Tt)||(Tt=[Tt]);const hn=yield au(K);for(const bn of Tt){const un=hn.find(Hn=>Hn.measurementId===bn),tr=un&&k[un.appId];if(!tr){rt=[];break}rt.push(tr)}}0===rt.length&&(rt=Object.values(k)),yield Promise.all(rt),O("event",fe,Ve||{})}catch(rt){Pi.error(rt)}})).apply(this,arguments)}function Yt(O){const k=window.document.getElementsByTagName("script");for(const K of Object.values(k))if(K.src&&K.src.includes(ns)&&K.src.includes(O))return K;return null}const Zn=new U.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Or=new class Cr{constructor(k={},K=1e3){this.throttleMetadata=k,this.intervalMillis=K}getThrottleMetadata(k){return this.throttleMetadata[k]}setThrottleMetadata(k,K){this.throttleMetadata[k]=K}deleteThrottleMetadata(k){delete this.throttleMetadata[k]}};function Vi(O){return new Headers({Accept:"application/json","x-goog-api-key":O})}function It(O){return vr.apply(this,arguments)}function vr(){return(vr=(0,G.Z)(function*(O){var k;const{appId:K,apiKey:fe}=O,Ve={method:"GET",headers:Vi(fe)},rt=io.replace("{app-id}",K),Tt=yield fetch(rt,Ve);if(200!==Tt.status&&304!==Tt.status){let hn="";try{const bn=yield Tt.json();null!==(k=bn.error)&&void 0!==k&&k.message&&(hn=bn.error.message)}catch{}throw Zn.create("config-fetch-failed",{httpStatus:Tt.status,responseMessage:hn})}return Tt.json()})).apply(this,arguments)}function br(O){return ps.apply(this,arguments)}function ps(){return(ps=(0,G.Z)(function*(O,k=Or,K){const{appId:fe,apiKey:Ve,measurementId:rt}=O.options;if(!fe)throw Zn.create("no-app-id");if(!Ve){if(rt)return{measurementId:rt,appId:fe};throw Zn.create("no-api-key")}const Tt=k.getThrottleMetadata(fe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},hn=new ot;return setTimeout((0,G.Z)(function*(){hn.abort()}),void 0!==K?K:6e4),jt({appId:fe,apiKey:Ve,measurementId:rt},Tt,hn,k)})).apply(this,arguments)}function jt(O,k,K){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,G.Z)(function*(O,{throttleEndTimeMillis:k,backoffCount:K},fe,Ve=Or){var rt;const{appId:Tt,measurementId:hn}=O;try{yield oa(fe,k)}catch(bn){if(hn)return Pi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${hn} provided in the "measurementId" field in the local Firebase config. [${bn?.message}]`),{appId:Tt,measurementId:hn};throw bn}try{const bn=yield It(O);return Ve.deleteThrottleMetadata(Tt),bn}catch(bn){const un=bn;if(!zt(un)){if(Ve.deleteThrottleMetadata(Tt),hn)return Pi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${hn} provided in the "measurementId" field in the local Firebase config. [${un?.message}]`),{appId:Tt,measurementId:hn};throw bn}const tr=503===Number(null===(rt=un?.customData)||void 0===rt?void 0:rt.httpStatus)?(0,U.$s)(K,Ve.intervalMillis,30):(0,U.$s)(K,Ve.intervalMillis),Hn={throttleEndTimeMillis:Date.now()+tr,backoffCount:K+1};return Ve.setThrottleMetadata(Tt,Hn),Pi.debug(`Calling attemptFetch again in ${tr} millis`),jt(O,Hn,fe,Ve)}})).apply(this,arguments)}function oa(O,k){return new Promise((K,fe)=>{const Ve=Math.max(k-Date.now(),0),rt=setTimeout(K,Ve);O.addEventListener(()=>{clearTimeout(rt),fe(Zn.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}function zt(O){if(!(O instanceof U.ZR&&O.customData))return!1;const k=Number(O.customData.httpStatus);return 429===k||500===k||503===k||504===k}class ot{constructor(){this.listeners=[]}addEventListener(k){this.listeners.push(k)}abort(){this.listeners.forEach(k=>k())}}let wt,Go;function Mo(){return(Mo=(0,G.Z)(function*(O,k,K,fe,Ve){if(Ve&&Ve.global)O("event",K,fe);else{const rt=yield k;O("event",K,Object.assign(Object.assign({},fe),{send_to:rt}))}})).apply(this,arguments)}function ja(O){Go=O}function Ln(O){wt=O}function zo(){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,G.Z)(function*(){if(!(0,U.hl)())return Pi.warn(Zn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,U.eu)()}catch(O){return Pi.warn(Zn.create("indexeddb-unavailable",{errorInfo:O?.toString()}).message),!1}return!0})).apply(this,arguments)}function mn(){return(mn=(0,G.Z)(function*(O,k,K,fe,Ve,rt,Tt){var hn;const bn=br(O);bn.then(xn=>{K[xn.measurementId]=xn.appId,O.options.measurementId&&xn.measurementId!==O.options.measurementId&&Pi.warn(`The measurement ID in the local Firebase config (${O.options.measurementId}) does not match the measurement ID fetched from the server (${xn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(xn=>Pi.error(xn)),k.push(bn);const un=zo().then(xn=>{if(xn)return fe.getId()}),[tr,Hn]=yield Promise.all([bn,un]);Yt(rt)||sa(rt,tr.measurementId),Go&&(Ve("consent","default",Go),ja(void 0)),Ve("js",new Date);const uo=null!==(hn=Tt?.config)&&void 0!==hn?hn:{};return uo.origin="firebase",uo.update=!0,null!=Hn&&(uo[fs]=Hn),Ve("config",tr.measurementId,uo),wt&&(Ve("set",wt),Ln(void 0)),tr.measurementId})).apply(this,arguments)}class Lo{constructor(k){this.app=k}_delete(){return delete Gn[this.app.options.appId],Promise.resolve()}}let Gn={},lu=[];const Yr={};let Ha,Wi,kt="dataLayer",so=!1;function Wo(O,k,K){!function Pl(){const O=[];if((0,U.ru)()&&O.push("This is a browser extension environment."),(0,U.zI)()||O.push("Cookies are not available."),O.length>0){const k=O.map((fe,Ve)=>`(${Ve+1}) ${fe}`).join(" "),K=Zn.create("invalid-analytics-context",{errorInfo:k});Pi.warn(K.message)}}();const fe=O.options.appId;if(!fe)throw Zn.create("no-app-id");if(!O.options.apiKey){if(!O.options.measurementId)throw Zn.create("no-api-key");Pi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${O.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Gn[fe])throw Zn.create("already-exists",{id:fe});if(!so){!function x(O){let k=[];Array.isArray(window[O])?k=window[O]:window[O]=k}(kt);const{wrappedGtag:rt,gtagCore:Tt}=function yt(O,k,K,fe,Ve){let rt=function(...Tt){window[fe].push(arguments)};return window[Ve]&&"function"==typeof window[Ve]&&(rt=window[Ve]),window[Ve]=function it(O,k,K,fe){function rt(){return(rt=(0,G.Z)(function*(Tt,hn,bn){try{"event"===Tt?yield Y(O,k,K,hn,bn):"config"===Tt?yield j(O,k,K,fe,hn,bn):"consent"===Tt?O("consent","update",bn):O("set",hn)}catch(un){Pi.error(un)}})).apply(this,arguments)}return function Ve(Tt,hn,bn){return rt.apply(this,arguments)}}(rt,O,k,K),{gtagCore:rt,wrappedGtag:window[Ve]}}(Gn,lu,Yr,kt,"gtag");Wi=rt,Ha=Tt,so=!0}return Gn[fe]=function Kn(O,k,K,fe,Ve,rt,Tt){return mn.apply(this,arguments)}(O,lu,Yr,k,Ha,kt,K),new Lo(O)}function Ss(){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,G.Z)(function*(){if((0,U.ru)()||!(0,U.zI)()||!(0,U.hl)())return!1;try{return yield(0,U.eu)()}catch{return!1}})).apply(this,arguments)}const Gr="@firebase/analytics";!function Ia(){(0,ge._registerComponent)(new be.wA(ba,(k,{options:K})=>Wo(k.getProvider("app").getImmediate(),k.getProvider("installations-internal").getImmediate(),K),"PUBLIC")),(0,ge._registerComponent)(new be.wA("analytics-internal",function O(k){try{const K=k.getProvider(ba).getImmediate();return{logEvent:(fe,Ve,rt)=>function Ru(O,k,K,fe){O=(0,U.m9)(O),function _i(O,k,K,fe,Ve){return Mo.apply(this,arguments)}(Wi,Gn[O.app.options.appId],k,K,fe).catch(Ve=>Pi.error(Ve))}(K,fe,Ve,rt)}}catch(K){throw Zn.create("interop-component-reg-failed",{reason:K})}},"PRIVATE")),(0,ge.registerVersion)(Gr,"0.9.0"),(0,ge.registerVersion)(Gr,"0.9.0","esm2017")}();var Ca=L(4408),cu=L(7565);const el=new class qa extends cu.v{}(class za extends Ca.o{constructor(k,K){super(k,K),this.scheduler=k,this.work=K}schedule(k,K=0){return K>0?super.schedule(k,K):(this.delay=K,this.state=k,this.scheduler.flush(this),this)}execute(k,K){return K>0||this.closed?super.execute(k,K):this._execute(k,K)}requestAsyncId(k,K,fe=0){return null!=fe&&fe>0||null==fe&&this.delay>0?super.requestAsyncId(k,K,fe):(k.flush(this),0)}});var Fs=L(4986),hu=L(8505),Sr=L(5363),Da=L(9468);const wo=new g.GfV("7.5.0"),Wa="__angularfire_symbol__analyticsIsSupportedValue",Ki="__angularfire_symbol__analyticsIsSupported",Ls="__angularfire_symbol__remoteConfigIsSupportedValue",b="__angularfire_symbol__remoteConfigIsSupported",E="__angularfire_symbol__messagingIsSupportedValue",y="__angularfire_symbol__messagingIsSupported";function Re(O,k,K){if(k){if(1===k.length)return k[0];const rt=k.filter(Tt=>Tt.app===K);if(1===rt.length)return rt[0]}return K.container.getProvider(O).getImmediate({optional:!0})}globalThis[Ki]||(globalThis[Ki]=Ss().then(O=>globalThis[Wa]=O).catch(()=>globalThis[Wa]=!1)),globalThis[y]||(globalThis[y]=ro().then(O=>globalThis[E]=O).catch(()=>globalThis[E]=!1)),globalThis[b]||(globalThis[b]=ws().then(O=>globalThis[Ls]=O).catch(()=>globalThis[Ls]=!1));const vt=(O,k)=>{const K=k?[k]:(0,l.C6)(),fe=[];return K.forEach(Ve=>{Ve.container.getProvider(O).instances.forEach(Tt=>{fe.includes(Tt)||fe.push(Tt)})}),fe};function Gt(){}class Xt{constructor(k,K=el){this.zone=k,this.delegate=K}now(){return this.delegate.now()}schedule(k,K,fe){const Ve=this.zone;return this.delegate.schedule(function(Tt){Ve.runGuarded(()=>{k.apply(this,[Tt])})},K,fe)}}class er{constructor(k){this.zone=k,this.task=null}call(k,K){const fe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Gt,{},Gt,Gt)),K.pipe((0,hu.b)({next:fe,complete:fe,error:fe})).subscribe(k).add(fe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ti=(()=>{class O{constructor(K){this.ngZone=K,this.outsideAngular=K.runOutsideAngular(()=>new Xt(Zone.current)),this.insideAngular=K.run(()=>new Xt(Zone.current,Fs.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return O.\u0275fac=function(K){return new(K||O)(g.LFG(g.R0b))},O.\u0275prov=g.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();function oi(){const O=globalThis.\u0275AngularFireScheduler;if(!O)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return O}function ao(O){return O.pipe((0,Sr.Q)(oi().outsideAngular))}function Vo(O){return oi(),function Eo(O){return function(K){return(K=K.lift(new er(O.ngZone))).pipe((0,Da.R)(O.outsideAngular),(0,Sr.Q)(O.insideAngular))}}(oi())(O)}},2090:(Ut,ze,L)=>{L.d(ze,{$s:()=>Zt,BH:()=>Qt,G6:()=>Le,L:()=>Ae,LL:()=>Wt,Pz:()=>Ot,Sg:()=>Nt,UG:()=>Qe,US:()=>be,ZB:()=>ie,ZR:()=>Et,aH:()=>Ct,b$:()=>Me,eu:()=>Ye,hl:()=>ut,jU:()=>ct,m9:()=>sn,ne:()=>Ge,pd:()=>Dt,r3:()=>nn,ru:()=>Ne,tV:()=>xe,uI:()=>qe,vZ:()=>Kt,w1:()=>et,xO:()=>ne,xb:()=>$n,z$:()=>nt,zI:()=>de,zd:()=>at});const ge=function(ye){const he=[];let De=0;for(let st=0;st<ye.length;st++){let Ze=ye.charCodeAt(st);Ze<128?he[De++]=Ze:Ze<2048?(he[De++]=Ze>>6|192,he[De++]=63&Ze|128):55296==(64512&Ze)&&st+1<ye.length&&56320==(64512&ye.charCodeAt(st+1))?(Ze=65536+((1023&Ze)<<10)+(1023&ye.charCodeAt(++st)),he[De++]=Ze>>18|240,he[De++]=Ze>>12&63|128,he[De++]=Ze>>6&63|128,he[De++]=63&Ze|128):(he[De++]=Ze>>12|224,he[De++]=Ze>>6&63|128,he[De++]=63&Ze|128)}return he},be={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ye,he){if(!Array.isArray(ye))throw Error("encodeByteArray takes an array as a parameter");this.init_();const De=he?this.byteToCharMapWebSafe_:this.byteToCharMap_,st=[];for(let Ze=0;Ze<ye.length;Ze+=3){const Rt=ye[Ze],vn=Ze+1<ye.length,Fn=vn?ye[Ze+1]:0,ar=Ze+2<ye.length,cn=ar?ye[Ze+2]:0;let ce=(15&Fn)<<2|cn>>6,Xe=63&cn;ar||(Xe=64,vn||(ce=64)),st.push(De[Rt>>2],De[(3&Rt)<<4|Fn>>4],De[ce],De[Xe])}return st.join("")},encodeString(ye,he){return this.HAS_NATIVE_SUPPORT&&!he?btoa(ye):this.encodeByteArray(ge(ye),he)},decodeString(ye,he){return this.HAS_NATIVE_SUPPORT&&!he?atob(ye):function(ye){const he=[];let De=0,st=0;for(;De<ye.length;){const Ze=ye[De++];if(Ze<128)he[st++]=String.fromCharCode(Ze);else if(Ze>191&&Ze<224){const Rt=ye[De++];he[st++]=String.fromCharCode((31&Ze)<<6|63&Rt)}else if(Ze>239&&Ze<365){const ar=((7&Ze)<<18|(63&ye[De++])<<12|(63&ye[De++])<<6|63&ye[De++])-65536;he[st++]=String.fromCharCode(55296+(ar>>10)),he[st++]=String.fromCharCode(56320+(1023&ar))}else{const Rt=ye[De++],vn=ye[De++];he[st++]=String.fromCharCode((15&Ze)<<12|(63&Rt)<<6|63&vn)}}return he.join("")}(this.decodeStringToByteArray(ye,he))},decodeStringToByteArray(ye,he){this.init_();const De=he?this.charToByteMapWebSafe_:this.charToByteMap_,st=[];for(let Ze=0;Ze<ye.length;){const Rt=De[ye.charAt(Ze++)],Fn=Ze<ye.length?De[ye.charAt(Ze)]:0;++Ze;const cn=Ze<ye.length?De[ye.charAt(Ze)]:64;++Ze;const me=Ze<ye.length?De[ye.charAt(Ze)]:64;if(++Ze,null==Rt||null==Fn||null==cn||null==me)throw Error();st.push(Rt<<2|Fn>>4),64!==cn&&(st.push(Fn<<4&240|cn>>2),64!==me&&st.push(cn<<6&192|me))}return st},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ye=0;ye<this.ENCODED_VALS.length;ye++)this.byteToCharMap_[ye]=this.ENCODED_VALS.charAt(ye),this.charToByteMap_[this.byteToCharMap_[ye]]=ye,this.byteToCharMapWebSafe_[ye]=this.ENCODED_VALS_WEBSAFE.charAt(ye),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ye]]=ye,ye>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ye)]=ye,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ye)]=ye)}}},Ae=function(ye){return function(ye){const he=ge(ye);return be.encodeByteArray(he,!0)}(ye).replace(/\./g,"")},xe=function(ye){try{return be.decodeString(ye,!0)}catch(he){console.error("base64Decode failed: ",he)}return null};function ie(ye,he){if(!(he instanceof Object))return he;switch(he.constructor){case Date:return new Date(he.getTime());case Object:void 0===ye&&(ye={});break;case Array:ye=[];break;default:return he}for(const De in he)!he.hasOwnProperty(De)||!pe(De)||(ye[De]=ie(ye[De],he[De]));return ye}function pe(ye){return"__proto__"!==ye}function nt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function qe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nt())}function Qe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ct(){return"object"==typeof self&&self.self===self}function Ne(){const ye="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ye&&void 0!==ye.id}function Me(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function et(){const ye=nt();return ye.indexOf("MSIE ")>=0||ye.indexOf("Trident/")>=0}function Le(){return!Qe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ut(){try{return"object"==typeof indexedDB}catch{return!1}}function Ye(){return new Promise((ye,he)=>{try{let De=!0;const st="validate-browser-context-for-indexeddb-analytics-module",Ze=self.indexedDB.open(st);Ze.onsuccess=()=>{Ze.result.close(),De||self.indexedDB.deleteDatabase(st),ye(!0)},Ze.onupgradeneeded=()=>{De=!1},Ze.onerror=()=>{var Rt;he((null===(Rt=Ze.error)||void 0===Rt?void 0:Rt.message)||"")}}catch(De){he(De)}})}function de(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const Ie=()=>{try{return function Oe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ye=process.env.__FIREBASE_DEFAULTS__;return ye?JSON.parse(ye):void 0})()||(()=>{if(typeof document>"u")return;let ye;try{ye=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const he=ye&&xe(ye[1]);return he&&JSON.parse(he)})()}catch(ye){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ye}`)}},Ct=()=>{var ye;return null===(ye=Ie())||void 0===ye?void 0:ye.config},Ot=ye=>{var he;return null===(he=Ie())||void 0===he?void 0:he[`_${ye}`]};class Qt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((he,De)=>{this.resolve=he,this.reject=De})}wrapCallback(he){return(De,st)=>{De?this.reject(De):this.resolve(st),"function"==typeof he&&(this.promise.catch(()=>{}),1===he.length?he(De):he(De,st))}}}function Nt(ye,he){if(ye.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const st=he||"demo-project",Ze=ye.iat||0,Rt=ye.sub||ye.user_id;if(!Rt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const vn=Object.assign({iss:`https://securetoken.google.com/${st}`,aud:st,iat:Ze,exp:Ze+3600,auth_time:Ze,sub:Rt,user_id:Rt,firebase:{sign_in_provider:"custom",identities:{}}},ye);return[Ae(JSON.stringify({alg:"none",type:"JWT"})),Ae(JSON.stringify(vn)),""].join(".")}class Et extends Error{constructor(he,De,st){super(De),this.code=he,this.customData=st,this.name="FirebaseError",Object.setPrototypeOf(this,Et.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wt.prototype.create)}}class Wt{constructor(he,De,st){this.service=he,this.serviceName=De,this.errors=st}create(he,...De){const st=De[0]||{},Ze=`${this.service}/${he}`,Rt=this.errors[he],vn=Rt?function qt(ye,he){return ye.replace(yn,(De,st)=>{const Ze=he[st];return null!=Ze?String(Ze):`<${st}?>`})}(Rt,st):"Error";return new Et(Ze,`${this.serviceName}: ${vn} (${Ze}).`,st)}}const yn=/\{\$([^}]+)}/g;function nn(ye,he){return Object.prototype.hasOwnProperty.call(ye,he)}function $n(ye){for(const he in ye)if(Object.prototype.hasOwnProperty.call(ye,he))return!1;return!0}function Kt(ye,he){if(ye===he)return!0;const De=Object.keys(ye),st=Object.keys(he);for(const Ze of De){if(!st.includes(Ze))return!1;const Rt=ye[Ze],vn=he[Ze];if(He(Rt)&&He(vn)){if(!Kt(Rt,vn))return!1}else if(Rt!==vn)return!1}for(const Ze of st)if(!De.includes(Ze))return!1;return!0}function He(ye){return null!==ye&&"object"==typeof ye}function ne(ye){const he=[];for(const[De,st]of Object.entries(ye))Array.isArray(st)?st.forEach(Ze=>{he.push(encodeURIComponent(De)+"="+encodeURIComponent(Ze))}):he.push(encodeURIComponent(De)+"="+encodeURIComponent(st));return he.length?"&"+he.join("&"):""}function at(ye){const he={};return ye.replace(/^\?/,"").split("&").forEach(st=>{if(st){const[Ze,Rt]=st.split("=");he[decodeURIComponent(Ze)]=decodeURIComponent(Rt)}}),he}function Dt(ye){const he=ye.indexOf("?");if(!he)return"";const De=ye.indexOf("#",he);return ye.substring(he,De>0?De:void 0)}function Ge(ye,he){const De=new We(ye,he);return De.subscribe.bind(De)}class We{constructor(he,De){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=De,this.task.then(()=>{he(this)}).catch(st=>{this.error(st)})}next(he){this.forEachObserver(De=>{De.next(he)})}error(he){this.forEachObserver(De=>{De.error(he)}),this.close(he)}complete(){this.forEachObserver(he=>{he.complete()}),this.close()}subscribe(he,De,st){let Ze;if(void 0===he&&void 0===De&&void 0===st)throw new Error("Missing Observer.");Ze=function Ft(ye,he){if("object"!=typeof ye||null===ye)return!1;for(const De of he)if(De in ye&&"function"==typeof ye[De])return!0;return!1}(he,["next","error","complete"])?he:{next:he,error:De,complete:st},void 0===Ze.next&&(Ze.next=Er),void 0===Ze.error&&(Ze.error=Er),void 0===Ze.complete&&(Ze.complete=Er);const Rt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ze.error(this.finalError):Ze.complete()}catch{}}),this.observers.push(Ze),Rt}unsubscribeOne(he){void 0===this.observers||void 0===this.observers[he]||(delete this.observers[he],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(he){if(!this.finalized)for(let De=0;De<this.observers.length;De++)this.sendOne(De,he)}sendOne(he,De){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[he])try{De(this.observers[he])}catch(st){typeof console<"u"&&console.error&&console.error(st)}})}close(he){this.finalized||(this.finalized=!0,void 0!==he&&(this.finalError=he),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Er(){}function Zt(ye,he=1e3,De=2){const st=he*Math.pow(De,ye),Ze=Math.round(.5*st*(Math.random()-.5)*2);return Math.min(144e5,st+Ze)}function sn(ye){return ye&&ye._delegate?ye._delegate:ye}},9751:(Ut,ze,L)=>{L.d(ze,{y:()=>Ae});var g=L(2961),l=L(727),G=L(8822),ge=L(9635),U=L(2416),be=L(576),we=L(2806);let Ae=(()=>{class pe{constructor(qe){qe&&(this._subscribe=qe)}lift(qe){const Qe=new pe;return Qe.source=this,Qe.operator=qe,Qe}subscribe(qe,Qe,ct){const Ne=function ie(pe){return pe&&pe instanceof g.Lv||function ue(pe){return pe&&(0,be.m)(pe.next)&&(0,be.m)(pe.error)&&(0,be.m)(pe.complete)}(pe)&&(0,l.Nn)(pe)}(qe)?qe:new g.Hp(qe,Qe,ct);return(0,we.x)(()=>{const{operator:Me,source:Fe}=this;Ne.add(Me?Me.call(Ne,Fe):Fe?this._subscribe(Ne):this._trySubscribe(Ne))}),Ne}_trySubscribe(qe){try{return this._subscribe(qe)}catch(Qe){qe.error(Qe)}}forEach(qe,Qe){return new(Qe=xe(Qe))((ct,Ne)=>{const Me=new g.Hp({next:Fe=>{try{qe(Fe)}catch(et){Ne(et),Me.unsubscribe()}},error:Ne,complete:ct});this.subscribe(Me)})}_subscribe(qe){var Qe;return null===(Qe=this.source)||void 0===Qe?void 0:Qe.subscribe(qe)}[G.L](){return this}pipe(...qe){return(0,ge.U)(qe)(this)}toPromise(qe){return new(qe=xe(qe))((Qe,ct)=>{let Ne;this.subscribe(Me=>Ne=Me,Me=>ct(Me),()=>Qe(Ne))})}}return pe.create=nt=>new pe(nt),pe})();function xe(pe){var nt;return null!==(nt=pe??U.v.Promise)&&void 0!==nt?nt:Promise}},7579:(Ut,ze,L)=>{L.d(ze,{x:()=>we});var g=L(9751),l=L(727);const ge=(0,L(3888).d)(xe=>function(){xe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var U=L(8737),be=L(2806);let we=(()=>{class xe extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ie){const pe=new Ae(this,this);return pe.operator=ie,pe}_throwIfClosed(){if(this.closed)throw new ge}next(ie){(0,be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const pe of this.currentObservers)pe.next(ie)}})}error(ie){(0,be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ie;const{observers:pe}=this;for(;pe.length;)pe.shift().error(ie)}})}complete(){(0,be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ie}=this;for(;ie.length;)ie.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ie;return(null===(ie=this.observers)||void 0===ie?void 0:ie.length)>0}_trySubscribe(ie){return this._throwIfClosed(),super._trySubscribe(ie)}_subscribe(ie){return this._throwIfClosed(),this._checkFinalizedStatuses(ie),this._innerSubscribe(ie)}_innerSubscribe(ie){const{hasError:pe,isStopped:nt,observers:qe}=this;return pe||nt?l.Lc:(this.currentObservers=null,qe.push(ie),new l.w0(()=>{this.currentObservers=null,(0,U.P)(qe,ie)}))}_checkFinalizedStatuses(ie){const{hasError:pe,thrownError:nt,isStopped:qe}=this;pe?ie.error(nt):qe&&ie.complete()}asObservable(){const ie=new g.y;return ie.source=this,ie}}return xe.create=(ue,ie)=>new Ae(ue,ie),xe})();class Ae extends we{constructor(ue,ie){super(),this.destination=ue,this.source=ie}next(ue){var ie,pe;null===(pe=null===(ie=this.destination)||void 0===ie?void 0:ie.next)||void 0===pe||pe.call(ie,ue)}error(ue){var ie,pe;null===(pe=null===(ie=this.destination)||void 0===ie?void 0:ie.error)||void 0===pe||pe.call(ie,ue)}complete(){var ue,ie;null===(ie=null===(ue=this.destination)||void 0===ue?void 0:ue.complete)||void 0===ie||ie.call(ue)}_subscribe(ue){var ie,pe;return null!==(pe=null===(ie=this.source)||void 0===ie?void 0:ie.subscribe(ue))&&void 0!==pe?pe:l.Lc}}},2961:(Ut,ze,L)=>{L.d(ze,{Hp:()=>ct,Lv:()=>pe});var g=L(576),l=L(727),G=L(2416),ge=L(7849);function U(){}const be=xe("C",void 0,void 0);function xe(se,$e,Le){return{kind:se,value:$e,error:Le}}var ue=L(3410),ie=L(2806);class pe extends l.w0{constructor($e){super(),this.isStopped=!1,$e?(this.destination=$e,(0,l.Nn)($e)&&$e.add(this)):this.destination=et}static create($e,Le,ut){return new ct($e,Le,ut)}next($e){this.isStopped?Fe(function Ae(se){return xe("N",se,void 0)}($e),this):this._next($e)}error($e){this.isStopped?Fe(function we(se){return xe("E",void 0,se)}($e),this):(this.isStopped=!0,this._error($e))}complete(){this.isStopped?Fe(be,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next($e){this.destination.next($e)}_error($e){try{this.destination.error($e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const nt=Function.prototype.bind;function qe(se,$e){return nt.call(se,$e)}class Qe{constructor($e){this.partialObserver=$e}next($e){const{partialObserver:Le}=this;if(Le.next)try{Le.next($e)}catch(ut){Ne(ut)}}error($e){const{partialObserver:Le}=this;if(Le.error)try{Le.error($e)}catch(ut){Ne(ut)}else Ne($e)}complete(){const{partialObserver:$e}=this;if($e.complete)try{$e.complete()}catch(Le){Ne(Le)}}}class ct extends pe{constructor($e,Le,ut){let Ye;if(super(),(0,g.m)($e)||!$e)Ye={next:$e??void 0,error:Le??void 0,complete:ut??void 0};else{let de;this&&G.v.useDeprecatedNextContext?(de=Object.create($e),de.unsubscribe=()=>this.unsubscribe(),Ye={next:$e.next&&qe($e.next,de),error:$e.error&&qe($e.error,de),complete:$e.complete&&qe($e.complete,de)}):Ye=$e}this.destination=new Qe(Ye)}}function Ne(se){G.v.useDeprecatedSynchronousErrorHandling?(0,ie.O)(se):(0,ge.h)(se)}function Fe(se,$e){const{onStoppedNotification:Le}=G.v;Le&&ue.z.setTimeout(()=>Le(se,$e))}const et={closed:!0,next:U,error:function Me(se){throw se},complete:U}},727:(Ut,ze,L)=>{L.d(ze,{Lc:()=>be,w0:()=>U,Nn:()=>we});var g=L(576);const G=(0,L(3888).d)(xe=>function(ie){xe(this),this.message=ie?`${ie.length} errors occurred during unsubscription:\n${ie.map((pe,nt)=>`${nt+1}) ${pe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ie});var ge=L(8737);class U{constructor(ue){this.initialTeardown=ue,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ue;if(!this.closed){this.closed=!0;const{_parentage:ie}=this;if(ie)if(this._parentage=null,Array.isArray(ie))for(const qe of ie)qe.remove(this);else ie.remove(this);const{initialTeardown:pe}=this;if((0,g.m)(pe))try{pe()}catch(qe){ue=qe instanceof G?qe.errors:[qe]}const{_finalizers:nt}=this;if(nt){this._finalizers=null;for(const qe of nt)try{Ae(qe)}catch(Qe){ue=ue??[],Qe instanceof G?ue=[...ue,...Qe.errors]:ue.push(Qe)}}if(ue)throw new G(ue)}}add(ue){var ie;if(ue&&ue!==this)if(this.closed)Ae(ue);else{if(ue instanceof U){if(ue.closed||ue._hasParent(this))return;ue._addParent(this)}(this._finalizers=null!==(ie=this._finalizers)&&void 0!==ie?ie:[]).push(ue)}}_hasParent(ue){const{_parentage:ie}=this;return ie===ue||Array.isArray(ie)&&ie.includes(ue)}_addParent(ue){const{_parentage:ie}=this;this._parentage=Array.isArray(ie)?(ie.push(ue),ie):ie?[ie,ue]:ue}_removeParent(ue){const{_parentage:ie}=this;ie===ue?this._parentage=null:Array.isArray(ie)&&(0,ge.P)(ie,ue)}remove(ue){const{_finalizers:ie}=this;ie&&(0,ge.P)(ie,ue),ue instanceof U&&ue._removeParent(this)}}U.EMPTY=(()=>{const xe=new U;return xe.closed=!0,xe})();const be=U.EMPTY;function we(xe){return xe instanceof U||xe&&"closed"in xe&&(0,g.m)(xe.remove)&&(0,g.m)(xe.add)&&(0,g.m)(xe.unsubscribe)}function Ae(xe){(0,g.m)(xe)?xe():xe.unsubscribe()}},2416:(Ut,ze,L)=>{L.d(ze,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(Ut,ze,L)=>{L.d(ze,{z:()=>U});var g=L(8189),G=L(7669),ge=L(8996);function U(...be){return function l(){return(0,g.J)(1)}()((0,ge.D)(be,(0,G.yG)(be)))}},515:(Ut,ze,L)=>{L.d(ze,{E:()=>l});const l=new(L(9751).y)(U=>U.complete())},8996:(Ut,ze,L)=>{L.d(ze,{D:()=>$e});var g=L(8421),l=L(5363),G=L(9468),be=L(9751),Ae=L(2202),xe=L(576),ue=L(9672);function pe(Le,ut){if(!Le)throw new Error("Iterable cannot be null");return new be.y(Ye=>{(0,ue.f)(Ye,ut,()=>{const de=Le[Symbol.asyncIterator]();(0,ue.f)(Ye,ut,()=>{de.next().then(Oe=>{Oe.done?Ye.complete():Ye.next(Oe.value)})},0,!0)})})}var nt=L(3670),qe=L(8239),Qe=L(1144),ct=L(6495),Ne=L(2206),Me=L(4532),Fe=L(3260);function $e(Le,ut){return ut?function se(Le,ut){if(null!=Le){if((0,nt.c)(Le))return function ge(Le,ut){return(0,g.Xf)(Le).pipe((0,G.R)(ut),(0,l.Q)(ut))}(Le,ut);if((0,Qe.z)(Le))return function we(Le,ut){return new be.y(Ye=>{let de=0;return ut.schedule(function(){de===Le.length?Ye.complete():(Ye.next(Le[de++]),Ye.closed||this.schedule())})})}(Le,ut);if((0,qe.t)(Le))return function U(Le,ut){return(0,g.Xf)(Le).pipe((0,G.R)(ut),(0,l.Q)(ut))}(Le,ut);if((0,Ne.D)(Le))return pe(Le,ut);if((0,ct.T)(Le))return function ie(Le,ut){return new be.y(Ye=>{let de;return(0,ue.f)(Ye,ut,()=>{de=Le[Ae.h](),(0,ue.f)(Ye,ut,()=>{let Oe,W;try{({value:Oe,done:W}=de.next())}catch(te){return void Ye.error(te)}W?Ye.complete():Ye.next(Oe)},0,!0)}),()=>(0,xe.m)(de?.return)&&de.return()})}(Le,ut);if((0,Fe.L)(Le))return function et(Le,ut){return pe((0,Fe.Q)(Le),ut)}(Le,ut)}throw(0,Me.z)(Le)}(Le,ut):(0,g.Xf)(Le)}},8421:(Ut,ze,L)=>{L.d(ze,{Xf:()=>nt});var g=L(655),l=L(1144),G=L(8239),ge=L(9751),U=L(3670),be=L(2206),we=L(4532),Ae=L(6495),xe=L(3260),ue=L(576),ie=L(7849),pe=L(8822);function nt(se){if(se instanceof ge.y)return se;if(null!=se){if((0,U.c)(se))return function qe(se){return new ge.y($e=>{const Le=se[pe.L]();if((0,ue.m)(Le.subscribe))return Le.subscribe($e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(se);if((0,l.z)(se))return function Qe(se){return new ge.y($e=>{for(let Le=0;Le<se.length&&!$e.closed;Le++)$e.next(se[Le]);$e.complete()})}(se);if((0,G.t)(se))return function ct(se){return new ge.y($e=>{se.then(Le=>{$e.closed||($e.next(Le),$e.complete())},Le=>$e.error(Le)).then(null,ie.h)})}(se);if((0,be.D)(se))return Me(se);if((0,Ae.T)(se))return function Ne(se){return new ge.y($e=>{for(const Le of se)if($e.next(Le),$e.closed)return;$e.complete()})}(se);if((0,xe.L)(se))return function Fe(se){return Me((0,xe.Q)(se))}(se)}throw(0,we.z)(se)}function Me(se){return new ge.y($e=>{(function et(se,$e){var Le,ut,Ye,de;return(0,g.mG)(this,void 0,void 0,function*(){try{for(Le=(0,g.KL)(se);!(ut=yield Le.next()).done;)if($e.next(ut.value),$e.closed)return}catch(Oe){Ye={error:Oe}}finally{try{ut&&!ut.done&&(de=Le.return)&&(yield de.call(Le))}finally{if(Ye)throw Ye.error}}$e.complete()})})(se,$e).catch(Le=>$e.error(Le))})}},6451:(Ut,ze,L)=>{L.d(ze,{T:()=>be});var g=L(8189),l=L(8421),G=L(515),ge=L(7669),U=L(8996);function be(...we){const Ae=(0,ge.yG)(we),xe=(0,ge._6)(we,1/0),ue=we;return ue.length?1===ue.length?(0,l.Xf)(ue[0]):(0,g.J)(xe)((0,U.D)(ue,Ae)):G.E}},9646:(Ut,ze,L)=>{L.d(ze,{of:()=>G});var g=L(7669),l=L(8996);function G(...ge){const U=(0,g.yG)(ge);return(0,l.D)(ge,U)}},5403:(Ut,ze,L)=>{L.d(ze,{x:()=>l});var g=L(2961);function l(ge,U,be,we,Ae){return new G(ge,U,be,we,Ae)}class G extends g.Lv{constructor(U,be,we,Ae,xe,ue){super(U),this.onFinalize=xe,this.shouldUnsubscribe=ue,this._next=be?function(ie){try{be(ie)}catch(pe){U.error(pe)}}:super._next,this._error=Ae?function(ie){try{Ae(ie)}catch(pe){U.error(pe)}finally{this.unsubscribe()}}:super._error,this._complete=we?function(){try{we()}catch(ie){U.error(ie)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var U;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:be}=this;super.unsubscribe(),!be&&(null===(U=this.onFinalize)||void 0===U||U.call(this))}}}},6590:(Ut,ze,L)=>{L.d(ze,{d:()=>G});var g=L(4482),l=L(5403);function G(ge){return(0,g.e)((U,be)=>{let we=!1;U.subscribe((0,l.x)(be,Ae=>{we=!0,be.next(Ae)},()=>{we||be.next(ge),be.complete()}))})}},9300:(Ut,ze,L)=>{L.d(ze,{h:()=>G});var g=L(4482),l=L(5403);function G(ge,U){return(0,g.e)((be,we)=>{let Ae=0;be.subscribe((0,l.x)(we,xe=>ge.call(U,xe,Ae++)&&we.next(xe)))})}},590:(Ut,ze,L)=>{L.d(ze,{P:()=>we});var g=L(6805),l=L(9300),G=L(5698),ge=L(6590),U=L(8068),be=L(4671);function we(Ae,xe){const ue=arguments.length>=2;return ie=>ie.pipe(Ae?(0,l.h)((pe,nt)=>Ae(pe,nt,ie)):be.y,(0,G.q)(1),ue?(0,ge.d)(xe):(0,U.T)(()=>new g.K))}},4004:(Ut,ze,L)=>{L.d(ze,{U:()=>G});var g=L(4482),l=L(5403);function G(ge,U){return(0,g.e)((be,we)=>{let Ae=0;be.subscribe((0,l.x)(we,xe=>{we.next(ge.call(U,xe,Ae++))}))})}},8189:(Ut,ze,L)=>{L.d(ze,{J:()=>G});var g=L(5577),l=L(4671);function G(ge=1/0){return(0,g.z)(l.y,ge)}},5577:(Ut,ze,L)=>{L.d(ze,{z:()=>Ae});var g=L(4004),l=L(8421),G=L(4482),ge=L(9672),U=L(5403),we=L(576);function Ae(xe,ue,ie=1/0){return(0,we.m)(ue)?Ae((pe,nt)=>(0,g.U)((qe,Qe)=>ue(pe,qe,nt,Qe))((0,l.Xf)(xe(pe,nt))),ie):("number"==typeof ue&&(ie=ue),(0,G.e)((pe,nt)=>function be(xe,ue,ie,pe,nt,qe,Qe,ct){const Ne=[];let Me=0,Fe=0,et=!1;const se=()=>{et&&!Ne.length&&!Me&&ue.complete()},$e=ut=>Me<pe?Le(ut):Ne.push(ut),Le=ut=>{qe&&ue.next(ut),Me++;let Ye=!1;(0,l.Xf)(ie(ut,Fe++)).subscribe((0,U.x)(ue,de=>{nt?.(de),qe?$e(de):ue.next(de)},()=>{Ye=!0},void 0,()=>{if(Ye)try{for(Me--;Ne.length&&Me<pe;){const de=Ne.shift();Qe?(0,ge.f)(ue,Qe,()=>Le(de)):Le(de)}se()}catch(de){ue.error(de)}}))};return xe.subscribe((0,U.x)(ue,$e,()=>{et=!0,se()})),()=>{ct?.()}}(pe,nt,xe,ie)))}},5363:(Ut,ze,L)=>{L.d(ze,{Q:()=>ge});var g=L(9672),l=L(4482),G=L(5403);function ge(U,be=0){return(0,l.e)((we,Ae)=>{we.subscribe((0,G.x)(Ae,xe=>(0,g.f)(Ae,U,()=>Ae.next(xe),be),()=>(0,g.f)(Ae,U,()=>Ae.complete(),be),xe=>(0,g.f)(Ae,U,()=>Ae.error(xe),be)))})}},5026:(Ut,ze,L)=>{L.d(ze,{R:()=>ge});var g=L(4482),l=L(5403);function G(U,be,we,Ae,xe){return(ue,ie)=>{let pe=we,nt=be,qe=0;ue.subscribe((0,l.x)(ie,Qe=>{const ct=qe++;nt=pe?U(nt,Qe,ct):(pe=!0,Qe),Ae&&ie.next(nt)},xe&&(()=>{pe&&ie.next(nt),ie.complete()})))}}function ge(U,be){return(0,g.e)(G(U,be,arguments.length>=2,!0))}},3099:(Ut,ze,L)=>{L.d(ze,{B:()=>U});var g=L(8421),l=L(7579),G=L(2961),ge=L(4482);function U(we={}){const{connector:Ae=(()=>new l.x),resetOnError:xe=!0,resetOnComplete:ue=!0,resetOnRefCountZero:ie=!0}=we;return pe=>{let nt,qe,Qe,ct=0,Ne=!1,Me=!1;const Fe=()=>{qe?.unsubscribe(),qe=void 0},et=()=>{Fe(),nt=Qe=void 0,Ne=Me=!1},se=()=>{const $e=nt;et(),$e?.unsubscribe()};return(0,ge.e)(($e,Le)=>{ct++,!Me&&!Ne&&Fe();const ut=Qe=Qe??Ae();Le.add(()=>{ct--,0===ct&&!Me&&!Ne&&(qe=be(se,ie))}),ut.subscribe(Le),!nt&&ct>0&&(nt=new G.Hp({next:Ye=>ut.next(Ye),error:Ye=>{Me=!0,Fe(),qe=be(et,xe,Ye),ut.error(Ye)},complete:()=>{Ne=!0,Fe(),qe=be(et,ue),ut.complete()}}),(0,g.Xf)($e).subscribe(nt))})(pe)}}function be(we,Ae,...xe){if(!0===Ae)return void we();if(!1===Ae)return;const ue=new G.Hp({next:()=>{ue.unsubscribe(),we()}});return Ae(...xe).subscribe(ue)}},8675:(Ut,ze,L)=>{L.d(ze,{O:()=>ge});var g=L(7272),l=L(7669),G=L(4482);function ge(...U){const be=(0,l.yG)(U);return(0,G.e)((we,Ae)=>{(be?(0,g.z)(U,we,be):(0,g.z)(U,we)).subscribe(Ae)})}},9468:(Ut,ze,L)=>{L.d(ze,{R:()=>l});var g=L(4482);function l(G,ge=0){return(0,g.e)((U,be)=>{be.add(G.schedule(()=>U.subscribe(be),ge))})}},3900:(Ut,ze,L)=>{L.d(ze,{w:()=>ge});var g=L(8421),l=L(4482),G=L(5403);function ge(U,be){return(0,l.e)((we,Ae)=>{let xe=null,ue=0,ie=!1;const pe=()=>ie&&!xe&&Ae.complete();we.subscribe((0,G.x)(Ae,nt=>{xe?.unsubscribe();let qe=0;const Qe=ue++;(0,g.Xf)(U(nt,Qe)).subscribe(xe=(0,G.x)(Ae,ct=>Ae.next(be?be(nt,ct,Qe,qe++):ct),()=>{xe=null,pe()}))},()=>{ie=!0,pe()}))})}},5698:(Ut,ze,L)=>{L.d(ze,{q:()=>ge});var g=L(515),l=L(4482),G=L(5403);function ge(U){return U<=0?()=>g.E:(0,l.e)((be,we)=>{let Ae=0;be.subscribe((0,G.x)(we,xe=>{++Ae<=U&&(we.next(xe),U<=Ae&&we.complete())}))})}},8505:(Ut,ze,L)=>{L.d(ze,{b:()=>U});var g=L(576),l=L(4482),G=L(5403),ge=L(4671);function U(be,we,Ae){const xe=(0,g.m)(be)||we||Ae?{next:be,error:we,complete:Ae}:be;return xe?(0,l.e)((ue,ie)=>{var pe;null===(pe=xe.subscribe)||void 0===pe||pe.call(xe);let nt=!0;ue.subscribe((0,G.x)(ie,qe=>{var Qe;null===(Qe=xe.next)||void 0===Qe||Qe.call(xe,qe),ie.next(qe)},()=>{var qe;nt=!1,null===(qe=xe.complete)||void 0===qe||qe.call(xe),ie.complete()},qe=>{var Qe;nt=!1,null===(Qe=xe.error)||void 0===Qe||Qe.call(xe,qe),ie.error(qe)},()=>{var qe,Qe;nt&&(null===(qe=xe.unsubscribe)||void 0===qe||qe.call(xe)),null===(Qe=xe.finalize)||void 0===Qe||Qe.call(xe)}))}):ge.y}},8068:(Ut,ze,L)=>{L.d(ze,{T:()=>ge});var g=L(6805),l=L(4482),G=L(5403);function ge(be=U){return(0,l.e)((we,Ae)=>{let xe=!1;we.subscribe((0,G.x)(Ae,ue=>{xe=!0,Ae.next(ue)},()=>xe?Ae.complete():Ae.error(be())))})}function U(){return new g.K}},4408:(Ut,ze,L)=>{L.d(ze,{o:()=>U});var g=L(727);class l extends g.w0{constructor(we,Ae){super()}schedule(we,Ae=0){return this}}const G={setInterval(be,we,...Ae){const{delegate:xe}=G;return xe?.setInterval?xe.setInterval(be,we,...Ae):setInterval(be,we,...Ae)},clearInterval(be){const{delegate:we}=G;return(we?.clearInterval||clearInterval)(be)},delegate:void 0};var ge=L(8737);class U extends l{constructor(we,Ae){super(we,Ae),this.scheduler=we,this.work=Ae,this.pending=!1}schedule(we,Ae=0){var xe;if(this.closed)return this;this.state=we;const ue=this.id,ie=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId(ie,ue,Ae)),this.pending=!0,this.delay=Ae,this.id=null!==(xe=this.id)&&void 0!==xe?xe:this.requestAsyncId(ie,this.id,Ae),this}requestAsyncId(we,Ae,xe=0){return G.setInterval(we.flush.bind(we,this),xe)}recycleAsyncId(we,Ae,xe=0){if(null!=xe&&this.delay===xe&&!1===this.pending)return Ae;null!=Ae&&G.clearInterval(Ae)}execute(we,Ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const xe=this._execute(we,Ae);if(xe)return xe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(we,Ae){let ue,xe=!1;try{this.work(we)}catch(ie){xe=!0,ue=ie||new Error("Scheduled action threw falsy error")}if(xe)return this.unsubscribe(),ue}unsubscribe(){if(!this.closed){const{id:we,scheduler:Ae}=this,{actions:xe}=Ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ge.P)(xe,this),null!=we&&(this.id=this.recycleAsyncId(Ae,we,null)),this.delay=null,super.unsubscribe()}}}},7565:(Ut,ze,L)=>{L.d(ze,{v:()=>G});var g=L(6063);class l{constructor(U,be=l.now){this.schedulerActionCtor=U,this.now=be}schedule(U,be=0,we){return new this.schedulerActionCtor(this,U).schedule(we,be)}}l.now=g.l.now;class G extends l{constructor(U,be=l.now){super(U,be),this.actions=[],this._active=!1}flush(U){const{actions:be}=this;if(this._active)return void be.push(U);let we;this._active=!0;do{if(we=U.execute(U.state,U.delay))break}while(U=be.shift());if(this._active=!1,we){for(;U=be.shift();)U.unsubscribe();throw we}}}},4986:(Ut,ze,L)=>{L.d(ze,{z:()=>G});var g=L(4408);const G=new(L(7565).v)(g.o)},6063:(Ut,ze,L)=>{L.d(ze,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(Ut,ze,L)=>{L.d(ze,{z:()=>g});const g={setTimeout(l,G,...ge){const{delegate:U}=g;return U?.setTimeout?U.setTimeout(l,G,...ge):setTimeout(l,G,...ge)},clearTimeout(l){const{delegate:G}=g;return(G?.clearTimeout||clearTimeout)(l)},delegate:void 0}},2202:(Ut,ze,L)=>{L.d(ze,{h:()=>l});const l=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Ut,ze,L)=>{L.d(ze,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Ut,ze,L)=>{L.d(ze,{K:()=>l});const l=(0,L(3888).d)(G=>function(){G(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(Ut,ze,L)=>{L.d(ze,{_6:()=>be,jO:()=>ge,yG:()=>U});var g=L(576);function G(we){return we[we.length-1]}function ge(we){return(0,g.m)(G(we))?we.pop():void 0}function U(we){return function l(we){return we&&(0,g.m)(we.schedule)}(G(we))?we.pop():void 0}function be(we,Ae){return"number"==typeof G(we)?we.pop():Ae}},4742:(Ut,ze,L)=>{L.d(ze,{D:()=>U});const{isArray:g}=Array,{getPrototypeOf:l,prototype:G,keys:ge}=Object;function U(we){if(1===we.length){const Ae=we[0];if(g(Ae))return{args:Ae,keys:null};if(function be(we){return we&&"object"==typeof we&&l(we)===G}(Ae)){const xe=ge(Ae);return{args:xe.map(ue=>Ae[ue]),keys:xe}}}return{args:we,keys:null}}},8737:(Ut,ze,L)=>{function g(l,G){if(l){const ge=l.indexOf(G);0<=ge&&l.splice(ge,1)}}L.d(ze,{P:()=>g})},3888:(Ut,ze,L)=>{function g(l){const ge=l(U=>{Error.call(U),U.stack=(new Error).stack});return ge.prototype=Object.create(Error.prototype),ge.prototype.constructor=ge,ge}L.d(ze,{d:()=>g})},1810:(Ut,ze,L)=>{function g(l,G){return l.reduce((ge,U,be)=>(ge[U]=G[be],ge),{})}L.d(ze,{n:()=>g})},2806:(Ut,ze,L)=>{L.d(ze,{O:()=>ge,x:()=>G});var g=L(2416);let l=null;function G(U){if(g.v.useDeprecatedSynchronousErrorHandling){const be=!l;if(be&&(l={errorThrown:!1,error:null}),U(),be){const{errorThrown:we,error:Ae}=l;if(l=null,we)throw Ae}}else U()}function ge(U){g.v.useDeprecatedSynchronousErrorHandling&&l&&(l.errorThrown=!0,l.error=U)}},9672:(Ut,ze,L)=>{function g(l,G,ge,U=0,be=!1){const we=G.schedule(function(){ge(),be?l.add(this.schedule(null,U)):this.unsubscribe()},U);if(l.add(we),!be)return we}L.d(ze,{f:()=>g})},4671:(Ut,ze,L)=>{function g(l){return l}L.d(ze,{y:()=>g})},1144:(Ut,ze,L)=>{L.d(ze,{z:()=>g});const g=l=>l&&"number"==typeof l.length&&"function"!=typeof l},2206:(Ut,ze,L)=>{L.d(ze,{D:()=>l});var g=L(576);function l(G){return Symbol.asyncIterator&&(0,g.m)(G?.[Symbol.asyncIterator])}},576:(Ut,ze,L)=>{function g(l){return"function"==typeof l}L.d(ze,{m:()=>g})},3670:(Ut,ze,L)=>{L.d(ze,{c:()=>G});var g=L(8822),l=L(576);function G(ge){return(0,l.m)(ge[g.L])}},6495:(Ut,ze,L)=>{L.d(ze,{T:()=>G});var g=L(2202),l=L(576);function G(ge){return(0,l.m)(ge?.[g.h])}},8239:(Ut,ze,L)=>{L.d(ze,{t:()=>l});var g=L(576);function l(G){return(0,g.m)(G?.then)}},3260:(Ut,ze,L)=>{L.d(ze,{L:()=>ge,Q:()=>G});var g=L(655),l=L(576);function G(U){return(0,g.FC)(this,arguments,function*(){const we=U.getReader();try{for(;;){const{value:Ae,done:xe}=yield(0,g.qq)(we.read());if(xe)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(Ae)}}finally{we.releaseLock()}})}function ge(U){return(0,l.m)(U?.getReader)}},4482:(Ut,ze,L)=>{L.d(ze,{A:()=>l,e:()=>G});var g=L(576);function l(ge){return(0,g.m)(ge?.lift)}function G(ge){return U=>{if(l(U))return U.lift(function(be){try{return ge(be,this)}catch(we){this.error(we)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Ut,ze,L)=>{L.d(ze,{Z:()=>ge});var g=L(4004);const{isArray:l}=Array;function ge(U){return(0,g.U)(be=>function G(U,be){return l(be)?U(...be):U(be)}(U,be))}},9635:(Ut,ze,L)=>{L.d(ze,{U:()=>G,z:()=>l});var g=L(4671);function l(...ge){return G(ge)}function G(ge){return 0===ge.length?g.y:1===ge.length?ge[0]:function(be){return ge.reduce((we,Ae)=>Ae(we),be)}}},7849:(Ut,ze,L)=>{L.d(ze,{h:()=>G});var g=L(2416),l=L(3410);function G(ge){l.z.setTimeout(()=>{const{onUnhandledError:U}=g.v;if(!U)throw ge;U(ge)})}},4532:(Ut,ze,L)=>{function g(l){return new TypeError(`You provided ${null!==l&&"object"==typeof l?"an invalid object":`'${l}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(ze,{z:()=>g})},655:(Ut,ze,L)=>{function ge(W,te){var ae={};for(var Ie in W)Object.prototype.hasOwnProperty.call(W,Ie)&&te.indexOf(Ie)<0&&(ae[Ie]=W[Ie]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var lt=0;for(Ie=Object.getOwnPropertySymbols(W);lt<Ie.length;lt++)te.indexOf(Ie[lt])<0&&Object.prototype.propertyIsEnumerable.call(W,Ie[lt])&&(ae[Ie[lt]]=W[Ie[lt]])}return ae}function Ae(W,te,ae,Ie){return new(ae||(ae=Promise))(function(pt,Ct){function Ot(Pt){try{Nt(Ie.next(Pt))}catch(Et){Ct(Et)}}function Qt(Pt){try{Nt(Ie.throw(Pt))}catch(Et){Ct(Et)}}function Nt(Pt){Pt.done?pt(Pt.value):function lt(pt){return pt instanceof ae?pt:new ae(function(Ct){Ct(pt)})}(Pt.value).then(Ot,Qt)}Nt((Ie=Ie.apply(W,te||[])).next())})}function Ne(W){return this instanceof Ne?(this.v=W,this):new Ne(W)}function Me(W,te,ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var lt,Ie=ae.apply(W,te||[]),pt=[];return lt={},Ct("next"),Ct("throw"),Ct("return"),lt[Symbol.asyncIterator]=function(){return this},lt;function Ct(Wt){Ie[Wt]&&(lt[Wt]=function(qt){return new Promise(function(yn,$t){pt.push([Wt,qt,yn,$t])>1||Ot(Wt,qt)})})}function Ot(Wt,qt){try{!function Qt(Wt){Wt.value instanceof Ne?Promise.resolve(Wt.value.v).then(Nt,Pt):Et(pt[0][2],Wt)}(Ie[Wt](qt))}catch(yn){Et(pt[0][3],yn)}}function Nt(Wt){Ot("next",Wt)}function Pt(Wt){Ot("throw",Wt)}function Et(Wt,qt){Wt(qt),pt.shift(),pt.length&&Ot(pt[0][0],pt[0][1])}}function et(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae,te=W[Symbol.asyncIterator];return te?te.call(W):(W=function pe(W){var te="function"==typeof Symbol&&Symbol.iterator,ae=te&&W[te],Ie=0;if(ae)return ae.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&Ie>=W.length&&(W=void 0),{value:W&&W[Ie++],done:!W}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),ae={},Ie("next"),Ie("throw"),Ie("return"),ae[Symbol.asyncIterator]=function(){return this},ae);function Ie(pt){ae[pt]=W[pt]&&function(Ct){return new Promise(function(Ot,Qt){!function lt(pt,Ct,Ot,Qt){Promise.resolve(Qt).then(function(Nt){pt({value:Nt,done:Ot})},Ct)}(Ot,Qt,(Ct=W[pt](Ct)).done,Ct.value)})}}}L.d(ze,{FC:()=>Me,KL:()=>et,_T:()=>ge,mG:()=>Ae,qq:()=>Ne})},6895:(Ut,ze,L)=>{L.d(ze,{Do:()=>Fe,EM:()=>zi,HT:()=>ge,JF:()=>xi,K0:()=>be,Mx:()=>Qr,O5:()=>ur,PM:()=>ls,S$:()=>ct,V_:()=>xe,Ye:()=>et,b0:()=>Me,bD:()=>Zs,ez:()=>Gi,mk:()=>Ai,q:()=>G,sg:()=>Jr,w_:()=>U});var g=L(4650);let l=null;function G(){return l}function ge(x){l||(l=x)}class U{}const be=new g.OlP("DocumentToken");let we=(()=>{class x{historyGo(M){throw new Error("Not implemented")}}return x.\u0275fac=function(M){return new(M||x)},x.\u0275prov=g.Yz7({token:x,factory:function(){return function Ae(){return(0,g.LFG)(ue)}()},providedIn:"platform"}),x})();const xe=new g.OlP("Location Initialized");let ue=(()=>{class x extends we{constructor(M){super(),this._doc=M,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return G().getBaseHref(this._doc)}onPopState(M){const Y=G().getGlobalEventTarget(this._doc,"window");return Y.addEventListener("popstate",M,!1),()=>Y.removeEventListener("popstate",M)}onHashChange(M){const Y=G().getGlobalEventTarget(this._doc,"window");return Y.addEventListener("hashchange",M,!1),()=>Y.removeEventListener("hashchange",M)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(M){this.location.pathname=M}pushState(M,Y,_e){ie()?this._history.pushState(M,Y,_e):this.location.hash=_e}replaceState(M,Y,_e){ie()?this._history.replaceState(M,Y,_e):this.location.hash=_e}forward(){this._history.forward()}back(){this._history.back()}historyGo(M=0){this._history.go(M)}getState(){return this._history.state}}return x.\u0275fac=function(M){return new(M||x)(g.LFG(be))},x.\u0275prov=g.Yz7({token:x,factory:function(){return function pe(){return new ue((0,g.LFG)(be))}()},providedIn:"platform"}),x})();function ie(){return!!window.history.pushState}function nt(x,j){if(0==x.length)return j;if(0==j.length)return x;let M=0;return x.endsWith("/")&&M++,j.startsWith("/")&&M++,2==M?x+j.substring(1):1==M?x+j:x+"/"+j}function qe(x){const j=x.match(/#|\?|$/),M=j&&j.index||x.length;return x.slice(0,M-("/"===x[M-1]?1:0))+x.slice(M)}function Qe(x){return x&&"?"!==x[0]?"?"+x:x}let ct=(()=>{class x{historyGo(M){throw new Error("Not implemented")}}return x.\u0275fac=function(M){return new(M||x)},x.\u0275prov=g.Yz7({token:x,factory:function(){return(0,g.f3M)(Me)},providedIn:"root"}),x})();const Ne=new g.OlP("appBaseHref");let Me=(()=>{class x extends ct{constructor(M,Y){super(),this._platformLocation=M,this._removeListenerFns=[],this._baseHref=Y??this._platformLocation.getBaseHrefFromDOM()??(0,g.f3M)(be).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(M){this._removeListenerFns.push(this._platformLocation.onPopState(M),this._platformLocation.onHashChange(M))}getBaseHref(){return this._baseHref}prepareExternalUrl(M){return nt(this._baseHref,M)}path(M=!1){const Y=this._platformLocation.pathname+Qe(this._platformLocation.search),_e=this._platformLocation.hash;return _e&&M?`${Y}${_e}`:Y}pushState(M,Y,_e,it){const yt=this.prepareExternalUrl(_e+Qe(it));this._platformLocation.pushState(M,Y,yt)}replaceState(M,Y,_e,it){const yt=this.prepareExternalUrl(_e+Qe(it));this._platformLocation.replaceState(M,Y,yt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(M=0){this._platformLocation.historyGo?.(M)}}return x.\u0275fac=function(M){return new(M||x)(g.LFG(we),g.LFG(Ne,8))},x.\u0275prov=g.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})(),Fe=(()=>{class x extends ct{constructor(M,Y){super(),this._platformLocation=M,this._baseHref="",this._removeListenerFns=[],null!=Y&&(this._baseHref=Y)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(M){this._removeListenerFns.push(this._platformLocation.onPopState(M),this._platformLocation.onHashChange(M))}getBaseHref(){return this._baseHref}path(M=!1){let Y=this._platformLocation.hash;return null==Y&&(Y="#"),Y.length>0?Y.substring(1):Y}prepareExternalUrl(M){const Y=nt(this._baseHref,M);return Y.length>0?"#"+Y:Y}pushState(M,Y,_e,it){let yt=this.prepareExternalUrl(_e+Qe(it));0==yt.length&&(yt=this._platformLocation.pathname),this._platformLocation.pushState(M,Y,yt)}replaceState(M,Y,_e,it){let yt=this.prepareExternalUrl(_e+Qe(it));0==yt.length&&(yt=this._platformLocation.pathname),this._platformLocation.replaceState(M,Y,yt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(M=0){this._platformLocation.historyGo?.(M)}}return x.\u0275fac=function(M){return new(M||x)(g.LFG(we),g.LFG(Ne,8))},x.\u0275prov=g.Yz7({token:x,factory:x.\u0275fac}),x})(),et=(()=>{class x{constructor(M){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=M;const Y=this._locationStrategy.getBaseHref();this._basePath=function ut(x){if(/^(https?:)?\/\//.test(x)){const[,j]=x.split(/\/\/[^\/]+/);return j}return x}(qe(Le(Y))),this._locationStrategy.onPopState(_e=>{this._subject.emit({url:this.path(!0),pop:!0,state:_e.state,type:_e.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(M=!1){return this.normalize(this._locationStrategy.path(M))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(M,Y=""){return this.path()==this.normalize(M+Qe(Y))}normalize(M){return x.stripTrailingSlash(function $e(x,j){return x&&j.startsWith(x)?j.substring(x.length):j}(this._basePath,Le(M)))}prepareExternalUrl(M){return M&&"/"!==M[0]&&(M="/"+M),this._locationStrategy.prepareExternalUrl(M)}go(M,Y="",_e=null){this._locationStrategy.pushState(_e,"",M,Y),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+Qe(Y)),_e)}replaceState(M,Y="",_e=null){this._locationStrategy.replaceState(_e,"",M,Y),this._notifyUrlChangeListeners(this.prepareExternalUrl(M+Qe(Y)),_e)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(M=0){this._locationStrategy.historyGo?.(M)}onUrlChange(M){return this._urlChangeListeners.push(M),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Y=>{this._notifyUrlChangeListeners(Y.url,Y.state)})),()=>{const Y=this._urlChangeListeners.indexOf(M);this._urlChangeListeners.splice(Y,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(M="",Y){this._urlChangeListeners.forEach(_e=>_e(M,Y))}subscribe(M,Y,_e){return this._subject.subscribe({next:M,error:Y,complete:_e})}}return x.normalizeQueryParams=Qe,x.joinWithSlash=nt,x.stripTrailingSlash=qe,x.\u0275fac=function(M){return new(M||x)(g.LFG(ct))},x.\u0275prov=g.Yz7({token:x,factory:function(){return function se(){return new et((0,g.LFG)(ct))}()},providedIn:"root"}),x})();function Le(x){return x.replace(/\/index.html$/,"")}function Qr(x,j){j=encodeURIComponent(j);for(const M of x.split(";")){const Y=M.indexOf("="),[_e,it]=-1==Y?[M,""]:[M.slice(0,Y),M.slice(Y+1)];if(_e.trim()===j)return decodeURIComponent(it)}return null}let Ai=(()=>{class x{constructor(M,Y,_e,it){this._iterableDiffers=M,this._keyValueDiffers=Y,this._ngEl=_e,this._renderer=it,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(M){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof M?M.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(M){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof M?M.split(/\s+/):M,this._rawClass&&((0,g.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const M=this._iterableDiffer.diff(this._rawClass);M&&this._applyIterableChanges(M)}else if(this._keyValueDiffer){const M=this._keyValueDiffer.diff(this._rawClass);M&&this._applyKeyValueChanges(M)}}_applyKeyValueChanges(M){M.forEachAddedItem(Y=>this._toggleClass(Y.key,Y.currentValue)),M.forEachChangedItem(Y=>this._toggleClass(Y.key,Y.currentValue)),M.forEachRemovedItem(Y=>{Y.previousValue&&this._toggleClass(Y.key,!1)})}_applyIterableChanges(M){M.forEachAddedItem(Y=>{if("string"!=typeof Y.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,g.AaK)(Y.item)}`);this._toggleClass(Y.item,!0)}),M.forEachRemovedItem(Y=>this._toggleClass(Y.item,!1))}_applyClasses(M){M&&(Array.isArray(M)||M instanceof Set?M.forEach(Y=>this._toggleClass(Y,!0)):Object.keys(M).forEach(Y=>this._toggleClass(Y,!!M[Y])))}_removeClasses(M){M&&(Array.isArray(M)||M instanceof Set?M.forEach(Y=>this._toggleClass(Y,!1)):Object.keys(M).forEach(Y=>this._toggleClass(Y,!1)))}_toggleClass(M,Y){(M=M.trim())&&M.split(/\s+/g).forEach(_e=>{Y?this._renderer.addClass(this._ngEl.nativeElement,_e):this._renderer.removeClass(this._ngEl.nativeElement,_e)})}}return x.\u0275fac=function(M){return new(M||x)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))},x.\u0275dir=g.lG2({type:x,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),x})();class pi{constructor(j,M,Y,_e){this.$implicit=j,this.ngForOf=M,this.index=Y,this.count=_e}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Jr=(()=>{class x{constructor(M,Y,_e){this._viewContainer=M,this._template=Y,this._differs=_e,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(M){this._ngForOf=M,this._ngForOfDirty=!0}set ngForTrackBy(M){this._trackByFn=M}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(M){M&&(this._template=M)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const M=this._ngForOf;!this._differ&&M&&(this._differ=this._differs.find(M).create(this.ngForTrackBy))}if(this._differ){const M=this._differ.diff(this._ngForOf);M&&this._applyChanges(M)}}_applyChanges(M){const Y=this._viewContainer;M.forEachOperation((_e,it,yt)=>{if(null==_e.previousIndex)Y.createEmbeddedView(this._template,new pi(_e.item,this._ngForOf,-1,-1),null===yt?void 0:yt);else if(null==yt)Y.remove(null===it?void 0:it);else if(null!==it){const Yt=Y.get(it);Y.move(Yt,yt),Pr(Yt,_e)}});for(let _e=0,it=Y.length;_e<it;_e++){const Yt=Y.get(_e).context;Yt.index=_e,Yt.count=it,Yt.ngForOf=this._ngForOf}M.forEachIdentityChange(_e=>{Pr(Y.get(_e.currentIndex),_e)})}static ngTemplateContextGuard(M,Y){return!0}}return x.\u0275fac=function(M){return new(M||x)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},x.\u0275dir=g.lG2({type:x,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),x})();function Pr(x,j){x.context.$implicit=j.item}let ur=(()=>{class x{constructor(M,Y){this._viewContainer=M,this._context=new as,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Y}set ngIf(M){this._context.$implicit=this._context.ngIf=M,this._updateView()}set ngIfThen(M){Fr("ngIfThen",M),this._thenTemplateRef=M,this._thenViewRef=null,this._updateView()}set ngIfElse(M){Fr("ngIfElse",M),this._elseTemplateRef=M,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(M,Y){return!0}}return x.\u0275fac=function(M){return new(M||x)(g.Y36(g.s_b),g.Y36(g.Rgc))},x.\u0275dir=g.lG2({type:x,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),x})();class as{constructor(){this.$implicit=null,this.ngIf=null}}function Fr(x,j){if(j&&!j.createEmbeddedView)throw new Error(`${x} must be a TemplateRef, but received '${(0,g.AaK)(j)}'.`)}let Gi=(()=>{class x{}return x.\u0275fac=function(M){return new(M||x)},x.\u0275mod=g.oAB({type:x}),x.\u0275inj=g.cJS({}),x})();const Zs="browser";function ls(x){return"server"===x}let zi=(()=>{class x{}return x.\u0275prov=(0,g.Yz7)({token:x,providedIn:"root",factory:()=>new cr((0,g.LFG)(be),window)}),x})();class cr{constructor(j,M){this.document=j,this.window=M,this.offset=()=>[0,0]}setOffset(j){this.offset=Array.isArray(j)?()=>j:j}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(j){this.supportsScrolling()&&this.window.scrollTo(j[0],j[1])}scrollToAnchor(j){if(!this.supportsScrolling())return;const M=function ks(x,j){const M=x.getElementById(j)||x.getElementsByName(j)[0];if(M)return M;if("function"==typeof x.createTreeWalker&&x.body&&(x.body.createShadowRoot||x.body.attachShadow)){const Y=x.createTreeWalker(x.body,NodeFilter.SHOW_ELEMENT);let _e=Y.currentNode;for(;_e;){const it=_e.shadowRoot;if(it){const yt=it.getElementById(j)||it.querySelector(`[name="${j}"]`);if(yt)return yt}_e=Y.nextNode()}}return null}(this.document,j);M&&(this.scrollToElement(M),M.focus())}setHistoryScrollRestoration(j){if(this.supportScrollRestoration()){const M=this.window.history;M&&M.scrollRestoration&&(M.scrollRestoration=j)}}scrollToElement(j){const M=j.getBoundingClientRect(),Y=M.left+this.window.pageXOffset,_e=M.top+this.window.pageYOffset,it=this.offset();this.window.scrollTo(Y-it[0],_e-it[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const j=Ni(this.window.history)||Ni(Object.getPrototypeOf(this.window.history));return!(!j||!j.writable&&!j.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ni(x){return Object.getOwnPropertyDescriptor(x,"scrollRestoration")}class xi{}},4650:(Ut,ze,L)=>{L.d(ze,{$8M:()=>Ss,$Z:()=>Em,AFp:()=>lb,AaK:()=>Ae,CHM:()=>S,CRH:()=>B0,CZH:()=>Ry,CqO:()=>Jd,D6c:()=>xE,EJc:()=>Gw,EpF:()=>iu,F4k:()=>Zm,FYo:()=>Dd,FiY:()=>Ta,Gf:()=>U0,GfV:()=>Sd,Gpc:()=>ie,JOm:()=>la,KtG:()=>H,LFG:()=>Mt,LSH:()=>hp,Lbi:()=>$w,Lck:()=>ri,MAs:()=>ag,MMx:()=>Tv,NdJ:()=>Mf,O4$:()=>io,OlP:()=>Gr,Oqu:()=>sh,P3R:()=>fp,PXZ:()=>oE,Q6J:()=>Tf,QGY:()=>xf,QP$:()=>Tr,Qsj:()=>Xy,R0b:()=>Du,RDi:()=>eu,Rgc:()=>Pg,SBq:()=>Cd,Sil:()=>qw,Suo:()=>V0,TTD:()=>cr,TgZ:()=>Kd,VKq:()=>C0,WLB:()=>D0,X6Q:()=>dE,XFs:()=>q,Xpm:()=>Pn,Xts:()=>bd,Y36:()=>Kl,YKP:()=>zr,YNc:()=>Df,Yjl:()=>os,Yz7:()=>$t,Z0I:()=>kn,ZZ4:()=>Qv,_Bn:()=>jr,_UZ:()=>Sf,_Vd:()=>ql,_c5:()=>SE,_uU:()=>jf,aQg:()=>Jv,c2e:()=>Hw,cJS:()=>Nn,cg1:()=>su,dDg:()=>nE,dqk:()=>We,eFA:()=>Eb,ekj:()=>ey,eoX:()=>vb,f3M:()=>Zt,g9A:()=>db,h0i:()=>Oi,hGG:()=>AE,hij:()=>oh,iGM:()=>L0,ifc:()=>Fn,ip1:()=>ub,jDz:()=>y0,kEZ:()=>T0,kL8:()=>Ju,kcU:()=>Pi,lG2:()=>Si,lqb:()=>ya,lri:()=>yb,n5z:()=>Pl,oAB:()=>nr,oxw:()=>qm,q4F:()=>Ac,qLn:()=>gl,qOj:()=>Kp,qZA:()=>Yd,rWj:()=>_b,sBO:()=>hE,sIi:()=>Vc,s_b:()=>Ay,soG:()=>Oy,tb:()=>hb,tp0:()=>k,uIk:()=>rg,vHH:()=>Ne,vpe:()=>kl,wAp:()=>jn,xp6:()=>cm,z2F:()=>Ny,zSh:()=>gp,zs3:()=>_l});var g=L(7579),l=L(727),G=L(9751),ge=L(6451),U=L(3099);function be(n){for(let r in n)if(n[r]===be)return r;throw Error("Could not find renamed property on target object.")}function we(n,r){for(const o in r)r.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=r[o])}function Ae(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ae).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function xe(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const ue=be({__forward_ref__:be});function ie(n){return n.__forward_ref__=ie,n.toString=function(){return Ae(this())},n}function pe(n){return nt(n)?n():n}function nt(n){return"function"==typeof n&&n.hasOwnProperty(ue)&&n.__forward_ref__===ie}function qe(n){return n&&!!n.\u0275providers}const ct="https://g.co/ng/security#xss";class Ne extends Error{constructor(r,o){super(function Me(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,o)),this.code=r}}function Fe(n){return"string"==typeof n?n:null==n?"":String(n)}function ut(n,r){throw new Ne(-201,!1)}function Pt(n,r){null==n&&function Et(n,r,o,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${o} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function $t(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Nn(n){return{providers:n.providers||[],imports:n.imports||[]}}function wr(n){return _r(n,$n)||_r(n,Kt)}function kn(n){return null!==wr(n)}function _r(n,r){return n.hasOwnProperty(r)?n[r]:null}function zn(n){return n&&(n.hasOwnProperty(Vn)||n.hasOwnProperty(He))?n[Vn]:null}const $n=be({\u0275prov:be}),Vn=be({\u0275inj:be}),Kt=be({ngInjectableDef:be}),He=be({ngInjectorDef:be});var q=(()=>((q=q||{})[q.Default=0]="Default",q[q.Host=1]="Host",q[q.Self=2]="Self",q[q.SkipSelf=4]="SkipSelf",q[q.Optional=8]="Optional",q))();let ne;function Dt(n){const r=ne;return ne=n,r}function Ht(n,r,o){const a=wr(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:o&q.Optional?null:void 0!==r?r:void ut(Ae(n))}const We=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),qn={},or="__NG_DI_FLAG__",fi="ngTempTokenPath",Bi=/\n/gm,qr="__source";let Mn;function rn(n){const r=Mn;return Mn=n,r}function ai(n,r=q.Default){if(void 0===Mn)throw new Ne(-203,!1);return null===Mn?Ht(n,void 0,r):Mn.get(n,r&q.Optional?null:void 0,r)}function Mt(n,r=q.Default){return(function at(){return ne}()||ai)(pe(n),r)}function Zt(n,r=q.Default){return Mt(n,ln(r))}function ln(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function pn(n){const r=[];for(let o=0;o<n.length;o++){const a=pe(n[o]);if(Array.isArray(a)){if(0===a.length)throw new Ne(900,!1);let c,f=q.Default;for(let v=0;v<a.length;v++){const D=a[v],R=ye(D);"number"==typeof R?-1===R?c=D.token:f|=R:c=D}r.push(Mt(c,f))}else r.push(Mt(a))}return r}function sn(n,r){return n[or]=r,n.prototype[or]=r,n}function ye(n){return n[or]}function st(n){return{toString:n}.toString()}var Ze=(()=>((Ze=Ze||{})[Ze.OnPush=0]="OnPush",Ze[Ze.Default=1]="Default",Ze))(),Fn=(()=>{return(n=Fn||(Fn={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Fn;var n})();const ar={},cn=[],Be=be({\u0275cmp:be}),me=be({\u0275dir:be}),ce=be({\u0275pipe:be}),Xe=be({\u0275mod:be}),ft=be({\u0275fac:be}),dn=be({__NG_ELEMENT_ID__:be});let on=0;function Pn(n){return st(()=>{const o=!0===n.standalone,a={},c={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Ze.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||cn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Fn.Emulated,id:"c"+on++,styles:n.styles||cn,_:null,setInput:null,schemas:n.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},f=n.dependencies,v=n.features;return c.inputs=ji(n.inputs,a),c.outputs=ji(n.outputs),v&&v.forEach(D=>D(c)),c.directiveDefs=f?()=>("function"==typeof f?f():f).map(xr).filter(Li):null,c.pipeDefs=f?()=>("function"==typeof f?f():f).map(Dr).filter(Li):null,c})}function xr(n){return Jn(n)||Mr(n)}function Li(n){return null!==n}function nr(n){return st(()=>({type:n.type,bootstrap:n.bootstrap||cn,declarations:n.declarations||cn,imports:n.imports||cn,exports:n.exports||cn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function ji(n,r){if(null==n)return ar;const o={};for(const a in n)if(n.hasOwnProperty(a)){let c=n[a],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),o[c]=a,r&&(r[c]=f)}return o}const Si=Pn;function os(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Jn(n){return n[Be]||null}function Mr(n){return n[me]||null}function Dr(n){return n[ce]||null}function Tr(n){const r=Jn(n)||Mr(n)||Dr(n);return null!==r&&r.standalone}function Qr(n,r){const o=n[Xe]||null;if(!o&&!0===r)throw new Error(`Type ${Ae(n)} does not have '\u0275mod' property.`);return o}function Lr(n){return Array.isArray(n)&&"object"==typeof n[1]}function li(n){return Array.isArray(n)&&!0===n[1]}function ei(n){return 0!=(4&n.flags)}function ci(n){return n.componentOffset>-1}function Hi(n){return 1==(1&n.flags)}function ii(n){return null!==n.template}function ws(n){return 0!=(256&n[2])}function Ji(n,r){return n.hasOwnProperty(ft)?n[ft]:null}class zi{constructor(r,o,a){this.previousValue=r,this.currentValue=o,this.firstChange=a}isFirstChange(){return this.firstChange}}function cr(){return Ni}function Ni(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ps),ks}function ks(){const n=zs(this),r=n?.current;if(r){const o=n.previous;if(o===ar)n.previous=r;else for(let a in r)o[a]=r[a];n.current=null,this.ngOnChanges(r)}}function Ps(n,r,o,a){const c=this.declaredInputs[o],f=zs(n)||function qs(n,r){return n[xi]=r}(n,{previous:ar,current:null}),v=f.current||(f.current={}),D=f.previous,R=D[c];v[c]=new zi(R&&R.currentValue,r,D===ar),n[a]=r}cr.ngInherit=!0;const xi="__ngSimpleChanges__";function zs(n){return n[xi]||null}function Hr(n){for(;Array.isArray(n);)n=n[0];return n}function Xi(n,r){return Hr(r[n])}function dr(n,r){return Hr(r[n.index])}function ds(n,r){return n.data[r]}function yi(n,r){const o=r[n];return Lr(o)?o:o[0]}function es(n){return 64==(64&n[2])}function ts(n,r){return null==r?null:n[r]}function qi(n){n[18]=0}function hs(n,r){n[5]+=r;let o=n,a=n[3];for(;null!==a&&(1===r&&1===o[5]||-1===r&&0===o[5]);)a[5]+=r,o=a,a=a[3]}const En={lFrame:Tu(null),bindingsEnabled:!0};function ee(){return En.bindingsEnabled}function I(){return En.lFrame.lView}function T(){return En.lFrame.tView}function S(n){return En.lFrame.contextLView=n,n[8]}function H(n){return En.lFrame.contextLView=null,n}function Ee(){let n=mt();for(;null!==n&&64===n.type;)n=n.parent;return n}function mt(){return En.lFrame.currentTNode}function An(n,r){const o=En.lFrame;o.currentTNode=n,o.isParent=r}function lr(){return En.lFrame.isParent}function Xn(){const n=En.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function ki(){return En.lFrame.bindingIndex++}function Ts(n,r){const o=En.lFrame;o.bindingIndex=o.bindingRootIndex=n,ra(r)}function ra(n){En.lFrame.currentDirectiveIndex=n}function Fa(){return En.lFrame.currentQueryIndex}function ro(n){En.lFrame.currentQueryIndex=n}function va(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function La(n,r,o){if(o&q.SkipSelf){let c=r,f=n;for(;!(c=c.parent,null!==c||o&q.Host||(c=va(f),null===c||(f=f[15],10&c.type))););if(null===c)return!1;r=c,n=f}const a=En.lFrame=$o();return a.currentTNode=r,a.lView=n,!0}function bo(n){const r=$o(),o=n[1];En.lFrame=r,r.currentTNode=o.firstChild,r.lView=n,r.tView=o,r.contextLView=n,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function $o(){const n=En.lFrame,r=null===n?null:n.child;return null===r?Tu(n):r}function Tu(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Fo(){const n=En.lFrame;return En.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Ho=Fo;function Su(){const n=Fo();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function fs(){return En.lFrame.selectedIndex}function Zo(n){En.lFrame.selectedIndex=n}function Zr(){const n=En.lFrame;return ds(n.tView,n.selectedIndex)}function io(){En.lFrame.currentNamespace="svg"}function Pi(){!function au(){En.lFrame.currentNamespace=null}()}function j(n,r){for(let o=r.directiveStart,a=r.directiveEnd;o<a;o++){const f=n.data[o].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:D,ngAfterViewInit:R,ngAfterViewChecked:V,ngOnDestroy:Q}=f;v&&(n.contentHooks||(n.contentHooks=[])).push(-o,v),D&&((n.contentHooks||(n.contentHooks=[])).push(o,D),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,D)),R&&(n.viewHooks||(n.viewHooks=[])).push(-o,R),V&&((n.viewHooks||(n.viewHooks=[])).push(o,V),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,V)),null!=Q&&(n.destroyHooks||(n.destroyHooks=[])).push(o,Q)}}function M(n,r,o){it(n,r,3,o)}function Y(n,r,o,a){(3&n[2])===o&&it(n,r,o,a)}function _e(n,r){let o=n[2];(3&o)===r&&(o&=2047,o+=1,n[2]=o)}function it(n,r,o,a){const f=a??-1,v=r.length-1;let D=0;for(let R=void 0!==a?65535&n[18]:0;R<v;R++)if("number"==typeof r[R+1]){if(D=r[R],null!=a&&D>=a)break}else r[R]<0&&(n[18]+=65536),(D<f||-1==f)&&(yt(n,o,r,R),n[18]=(4294901760&n[18])+R+2),R++}function yt(n,r,o,a){const c=o[a]<0,f=o[a+1],D=n[c?-o[a]:o[a]];if(c){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{f.call(D)}finally{}}}else try{f.call(D)}finally{}}class pr{constructor(r,o,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=a}}function br(n,r,o){let a=0;for(;a<o.length;){const c=o[a];if("number"==typeof c){if(0!==c)break;a++;const f=o[a++],v=o[a++],D=o[a++];n.setAttribute(r,v,D,f)}else{const f=c,v=o[++a];jt(f)?n.setProperty(r,f,v):n.setAttribute(r,f,v),a++}}return a}function ps(n){return 3===n||4===n||6===n}function jt(n){return 64===n.charCodeAt(0)}function Jt(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let o=-1;for(let a=0;a<r.length;a++){const c=r[a];"number"==typeof c?o=c:0===o||oa(n,o,c,null,-1===o||2===o?r[++a]:null)}}return n}function oa(n,r,o,a,c){let f=0,v=n.length;if(-1===r)v=-1;else for(;f<n.length;){const D=n[f++];if("number"==typeof D){if(D===r){v=-1;break}if(D>r){v=f-1;break}}}for(;f<n.length;){const D=n[f];if("number"==typeof D)break;if(D===o){if(null===a)return void(null!==c&&(n[f+1]=c));if(a===n[f+1])return void(n[f+2]=c)}f++,null!==a&&f++,null!==c&&f++}-1!==v&&(n.splice(v,0,r),f=v+1),n.splice(f++,0,o),null!==a&&n.splice(f++,0,a),null!==c&&n.splice(f++,0,c)}function zt(n){return-1!==n}function ot(n){return 32767&n}function _i(n,r){let o=function wt(n){return n>>16}(n),a=r;for(;o>0;)a=a[15],o--;return a}let Mo=!0;function Ua(n){const r=Mo;return Mo=n,r}let Au=0;const rs={};function Ba(n,r){const o=ja(n,r);if(-1!==o)return o;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,Go(a.data,n),Go(r,null),Go(a.blueprint,null));const c=Ln(n,r),f=n.injectorIndex;if(zt(c)){const v=ot(c),D=_i(c,r),R=D[1].data;for(let V=0;V<8;V++)r[f+V]=D[v+V]|R[v+V]}return r[f+8]=c,f}function Go(n,r){n.push(0,0,0,0,0,0,0,0,r)}function ja(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Ln(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,a=null,c=r;for(;null!==c;){if(a=Za(c),null===a)return-1;if(o++,c=c[15],-1!==a.injectorIndex)return a.injectorIndex|o<<16}return-1}function zo(n,r,o){!function xu(n,r,o){let a;"string"==typeof o?a=o.charCodeAt(0)||0:o.hasOwnProperty(dn)&&(a=o[dn]),null==a&&(a=o[dn]=Au++);const c=255&a;r.data[n+(c>>5)]|=1<<c}(n,r,o)}function Kn(n,r,o){if(o&q.Optional||void 0!==n)return n;ut()}function mn(n,r,o,a){if(o&q.Optional&&void 0===a&&(a=null),0==(o&(q.Self|q.Host))){const c=n[9],f=Dt(void 0);try{return c?c.get(r,a,o&q.Optional):Ht(r,a,o&q.Optional)}finally{Dt(f)}}return Kn(a,0,o)}function Lo(n,r,o,a=q.Default,c){if(null!==n){if(1024&r[2]){const v=function Ko(n,r,o,a,c){let f=n,v=r;for(;null!==f&&null!==v&&1024&v[2]&&!(256&v[2]);){const D=Gn(f,v,o,a|q.Self,rs);if(D!==rs)return D;let R=f.parent;if(!R){const V=v[21];if(V){const Q=V.get(o,rs,a);if(Q!==rs)return Q}R=Za(v),v=v[15]}f=R}return c}(n,r,o,a,rs);if(v!==rs)return v}const f=Gn(n,r,o,a,rs);if(f!==rs)return f}return mn(r,o,a,c)}function Gn(n,r,o,a,c){const f=function $a(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(dn)?n[dn]:void 0;return"number"==typeof r?r>=0?255&r:qo:r}(o);if("function"==typeof f){if(!La(r,n,a))return a&q.Host?Kn(c,0,a):mn(r,o,a,c);try{const v=f(a);if(null!=v||a&q.Optional)return v;ut()}finally{Ho()}}else if("number"==typeof f){let v=null,D=ja(n,r),R=-1,V=a&q.Host?r[16][6]:null;for((-1===D||a&q.SkipSelf)&&(R=-1===D?Ln(n,r):r[D+8],-1!==R&&Wi(a,!1)?(v=r[1],D=ot(R),r=_i(R,r)):D=-1);-1!==D;){const Q=r[1];if(Ha(f,D,Q.data)){const le=lu(D,r,o,v,a,V);if(le!==rs)return le}R=r[D+8],-1!==R&&Wi(a,r[1].data[D+8]===V)&&Ha(f,D,r)?(v=Q,D=ot(R),r=_i(R,r)):D=-1}}return c}function lu(n,r,o,a,c,f){const v=r[1],D=v.data[n+8],Q=Yr(D,v,o,null==a?ci(D)&&Mo:a!=v&&0!=(3&D.type),c&q.Host&&f===D);return null!==Q?kt(r,v,Q,D):rs}function Yr(n,r,o,a,c){const f=n.providerIndexes,v=r.data,D=1048575&f,R=n.directiveStart,Q=f>>20,Pe=c?D+Q:n.directiveEnd;for(let Je=a?D:D+Q;Je<Pe;Je++){const _t=v[Je];if(Je<R&&o===_t||Je>=R&&_t.type===o)return Je}if(c){const Je=v[R];if(Je&&ii(Je)&&Je.type===o)return R}return null}function kt(n,r,o,a){let c=n[o];const f=r.data;if(function Zn(n){return n instanceof pr}(c)){const v=c;v.resolving&&function se(n,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Ne(-200,`Circular dependency in DI detected for ${n}${o}`)}(function et(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Fe(n)}(f[o]));const D=Ua(v.canSeeViewProviders);v.resolving=!0;const R=v.injectImpl?Dt(v.injectImpl):null;La(n,a,q.Default);try{c=n[o]=v.factory(void 0,f,n,a),r.firstCreatePass&&o>=a.directiveStart&&function x(n,r,o){const{ngOnChanges:a,ngOnInit:c,ngDoCheck:f}=r.type.prototype;if(a){const v=Ni(r);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,v),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,v)}c&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,c),f&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,f),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,f))}(o,f[o],r)}finally{null!==R&&Dt(R),Ua(D),v.resolving=!1,Ho()}}return c}function Ha(n,r,o){return!!(o[r+(n>>5)]&1<<n)}function Wi(n,r){return!(n&q.Self||n&q.Host&&r)}class so{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,a){return Lo(this._tNode,this._lView,r,ln(a),o)}}function qo(){return new so(Ee(),I())}function Pl(n){return st(()=>{const r=n.prototype.constructor,o=r[ft]||Wo(r),a=Object.prototype;let c=Object.getPrototypeOf(n.prototype).constructor;for(;c&&c!==a;){const f=c[ft]||Wo(c);if(f&&f!==o)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function Wo(n){return nt(n)?()=>{const r=Wo(pe(n));return r&&r()}:Ji(n)}function Za(n){const r=n[1],o=r.type;return 2===o?r.declTNode:1===o?n[6]:null}function Ss(n){return function Mu(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const o=n.attrs;if(o){const a=o.length;let c=0;for(;c<a;){const f=o[c];if(ps(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<a&&"string"==typeof o[c];)c++;else{if(f===r)return o[c+1];c+=2}}}return null}(Ee(),n)}const Ga="__parameters__";function tt(n,r,o){return st(()=>{const a=function Ea(n){return function(...o){if(n){const a=n(...o);for(const c in a)this[c]=a[c]}}}(r);function c(...f){if(this instanceof c)return a.apply(this,f),this;const v=new c(...f);return D.annotation=v,D;function D(R,V,Q){const le=R.hasOwnProperty(Ga)?R[Ga]:Object.defineProperty(R,Ga,{value:[]})[Ga];for(;le.length<=Q;)le.push(null);return(le[Q]=le[Q]||[]).push(v),R}}return o&&(c.prototype=Object.create(o.prototype)),c.prototype.ngMetadataName=n,c.annotationCls=c,c})}class Gr{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=$t({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ls(n,r){n.forEach(o=>Array.isArray(o)?Ls(o,r):r(o))}function b(n,r,o){r>=n.length?n.push(o):n.splice(r,0,o)}function E(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function Re(n,r,o){let a=Gt(n,r);return a>=0?n[1|a]=o:(a=~a,function z(n,r,o,a){let c=n.length;if(c==r)n.push(o,a);else if(1===c)n.push(a,n[0]),n[0]=o;else{for(c--,n.push(n[c-1],n[c]);c>r;)n[c]=n[c-2],c--;n[r]=o,n[r+1]=a}}(n,a,r,o)),a}function vt(n,r){const o=Gt(n,r);if(o>=0)return n[1|o]}function Gt(n,r){return function er(n,r,o){let a=0,c=n.length>>o;for(;c!==a;){const f=a+(c-a>>1),v=n[f<<o];if(r===v)return f<<o;v>r?c=f:a=f+1}return~(c<<o)}(n,r,1)}const Ta=sn(tt("Optional"),8),k=sn(tt("SkipSelf"),4);var la=(()=>((la=la||{})[la.Important=1]="Important",la[la.DashCase=2]="DashCase",la))();const pu=new Map;let Dh=0;const Ya="__ngContext__";function ni(n,r){Lr(r)?(n[Ya]=r[20],function Ka(n){pu.set(n[20],n)}(r)):n[Ya]=r}function il(n,r){return undefined(n,r)}function Uu(n){const r=n[3];return li(r)?r[3]:r}function ca(n){return gu(n[13])}function fc(n){return gu(n[4])}function gu(n){for(;null!==n&&!li(n);)n=n[4];return n}function Vu(n,r,o,a,c){if(null!=a){let f,v=!1;li(a)?f=a:Lr(a)&&(v=!0,a=a[0]);const D=Hr(a);0===n&&null!==o?null==c?da(r,o,D):yu(r,o,D,c||null,!0):1===n&&null!==o?yu(r,o,D,c||null,!0):2===n?function fa(n,r,o){const a=Ar(n,r);a&&function Nh(n,r,o,a){n.removeChild(r,o,a)}(n,a,r,o)}(r,D,v):3===n&&r.destroyNode(D),null!=f&&function wc(n,r,o,a,c){const f=o[7];f!==Hr(o)&&Vu(r,n,a,f,c);for(let D=10;D<o.length;D++){const R=o[D];jl(R[1],R,n,r,a,f)}}(r,n,f,o,c)}}function Ja(n,r,o){return n.createElement(r,o)}function Bl(n,r){const o=n[9],a=o.indexOf(r),c=r[3];512&r[2]&&(r[2]&=-513,hs(c,-1)),o.splice(a,1)}function Bu(n,r){if(n.length<=10)return;const o=10+r,a=n[o];if(a){const c=a[17];null!==c&&c!==n&&Bl(c,a),r>0&&(n[o-1][4]=a[4]);const f=E(n,10+r);!function ap(n,r){jl(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const v=f[19];null!==v&&v.detachView(f[1]),a[3]=null,a[4]=null,a[2]&=-65}return a}function Oh(n,r){if(!(128&r[2])){const o=r[11];o.destroyNode&&jl(n,r,o,3,null,null),function ol(n){let r=n[13];if(!r)return gc(n[1],n);for(;r;){let o=null;if(Lr(r))o=r[13];else{const a=r[10];a&&(o=a)}if(!o){for(;r&&!r[4]&&r!==n;)Lr(r)&&gc(r[1],r),r=r[3];null===r&&(r=n),Lr(r)&&gc(r[1],r),o=r&&r[4]}r=o}}(r)}}function gc(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function Xa(n,r){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let a=0;a<o.length;a+=2){const c=r[o[a]];if(!(c instanceof pr)){const f=o[a+1];if(Array.isArray(f))for(let v=0;v<f.length;v+=2){const D=c[f[v]],R=f[v+1];try{R.call(D)}finally{}}else try{f.call(c)}finally{}}}}(n,r),function ju(n,r){const o=n.cleanup,a=r[7];let c=-1;if(null!==o)for(let f=0;f<o.length-1;f+=2)if("string"==typeof o[f]){const v=o[f+3];v>=0?a[c=v]():a[c=-v].unsubscribe(),f+=2}else{const v=a[c=o[f+1]];o[f].call(v)}if(null!==a){for(let f=c+1;f<a.length;f++)(0,a[f])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const o=r[17];if(null!==o&&li(r[3])){o!==r[3]&&Bl(o,r);const a=r[19];null!==a&&a.detachView(n)}!function tl(n){pu.delete(n[20])}(r)}}function cd(n,r,o){return function dd(n,r,o){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return o[0];{const{componentOffset:c}=a;if(c>-1){const{encapsulation:f}=n.data[a.directiveStart+c];if(f===Fn.None||f===Fn.Emulated)return null}return dr(a,o)}}(n,r.parent,o)}function yu(n,r,o,a,c){n.insertBefore(r,o,a,c)}function da(n,r,o){n.appendChild(r,o)}function mc(n,r,o,a,c){null!==a?yu(n,r,o,a,c):da(n,r,o)}function Ar(n,r){return n.parentNode(r)}let gd,ul,yc=function Ma(n,r,o){return 40&n.type?dr(n,o):null};function _u(n,r,o,a){const c=cd(n,a,r),f=r[11],D=function hd(n,r,o){return yc(n,r,o)}(a.parent||r[6],a,r);if(null!=c)if(Array.isArray(o))for(let R=0;R<o.length;R++)mc(f,c,o[R],D,!1);else mc(f,c,o,D,!1)}function $u(n,r){if(null!==r){const o=r.type;if(3&o)return dr(r,n);if(4&o)return ho(-1,n[r.index]);if(8&o){const a=r.child;if(null!==a)return $u(n,a);{const c=n[r.index];return li(c)?ho(-1,c):Hr(c)}}if(32&o)return il(r,n)()||Hr(n[r.index]);{const a=ha(n,r);return null!==a?Array.isArray(a)?a[0]:$u(Uu(n[16]),a):$u(n,r.next)}}return null}function ha(n,r){return null!==r?n[16][6].projection[r.projection]:null}function ho(n,r){const o=10+n+1;if(o<r.length){const a=r[o],c=a[1].firstChild;if(null!==c)return $u(a,c)}return r[7]}function vc(n,r,o,a,c,f,v){for(;null!=o;){const D=a[o.index],R=o.type;if(v&&0===r&&(D&&ni(Hr(D),a),o.flags|=2),32!=(32&o.flags))if(8&R)vc(n,r,o.child,a,c,f,!1),Vu(r,n,c,D,f);else if(32&R){const V=il(o,a);let Q;for(;Q=V();)Vu(r,n,c,Q,f);Vu(r,n,c,D,f)}else 16&R?bc(n,r,a,o,c,f):Vu(r,n,c,D,f);o=v?o.projectionNext:o.next}}function jl(n,r,o,a,c,f){vc(o,a,n.firstChild,r,c,f,!1)}function bc(n,r,o,a,c,f){const v=o[16],R=v[6].projection[a.projection];if(Array.isArray(R))for(let V=0;V<R.length;V++)Vu(r,n,c,R[V],f);else vc(n,r,R,v[3],c,f,!0)}function Jo(n,r,o){""===o?n.removeAttribute(r,"class"):n.setAttribute(r,"class",o)}function Ec(n,r,o){const{mergedAttrs:a,classes:c,styles:f}=o;null!==a&&br(n,r,a),null!==c&&Jo(n,r,c),null!==f&&function $l(n,r,o){n.setAttribute(r,"style",o)}(n,r,f)}function eu(n){gd=n}function md(n){return function Cc(){if(void 0===ul&&(ul=null,We.trustedTypes))try{ul=We.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ul}()?.createScriptURL(n)||n}class cl{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ct})`}}function w(n){return n instanceof cl?n.changingThisBreaksApplicationSecurity:n}function B(n,r){const o=function J(n){return n instanceof cl&&n.getTypeName()||null}(n);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see ${ct})`)}return o===r}const Fh=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Bs=(()=>((Bs=Bs||{})[Bs.NONE=0]="NONE",Bs[Bs.HTML=1]="HTML",Bs[Bs.STYLE=2]="STYLE",Bs[Bs.SCRIPT=3]="SCRIPT",Bs[Bs.URL=4]="URL",Bs[Bs.RESOURCE_URL=5]="RESOURCE_URL",Bs))();function hp(n){const r=ms();return r?r.sanitize(Bs.URL,n)||"":B(n,"URL")?w(n):function Gl(n){return(n=String(n)).match(Fh)?n:"unsafe:"+n}(Fe(n))}function Hg(n){const r=ms();if(r)return md(r.sanitize(Bs.RESOURCE_URL,n)||"");if(B(n,"ResourceURL"))return md(w(n));throw new Ne(904,!1)}function fp(n,r,o){return function Gg(n,r){return"src"===r&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===r&&("base"===n||"link"===n)?Hg:hp}(r,o)(n)}function ms(){const n=I();return n&&n[12]}const bd=new Gr("ENVIRONMENT_INITIALIZER"),Uh=new Gr("INJECTOR",-1),Vh=new Gr("INJECTOR_DEF_TYPES");class Zu{get(r,o=qn){if(o===qn){const a=new Error(`NullInjectorError: No provider for ${Ae(r)}!`);throw a.name="NullInjectorError",a}return o}}function Ky(...n){return{\u0275providers:pp(0,n),\u0275fromNgModule:!0}}function pp(n,...r){const o=[],a=new Set;let c;return Ls(r,f=>{const v=f;Gu(v,o,[],a)&&(c||(c=[]),c.push(v))}),void 0!==c&&wd(c,o),o}function wd(n,r){for(let o=0;o<n.length;o++){const{providers:c}=n[o];zu(c,f=>{r.push(f)})}}function Gu(n,r,o,a){if(!(n=pe(n)))return!1;let c=null,f=zn(n);const v=!f&&Jn(n);if(f||v){if(v&&!v.standalone)return!1;c=n}else{const R=n.ngModule;if(f=zn(R),!f)return!1;c=R}const D=a.has(c);if(v){if(D)return!1;if(a.add(c),v.dependencies){const R="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const V of R)Gu(V,r,o,a)}}else{if(!f)return!1;{if(null!=f.imports&&!D){let V;a.add(c);try{Ls(f.imports,Q=>{Gu(Q,r,o,a)&&(V||(V=[]),V.push(Q))})}finally{}void 0!==V&&wd(V,r)}if(!D){const V=Ji(c)||(()=>new c);r.push({provide:c,useFactory:V,deps:cn},{provide:Vh,useValue:c,multi:!0},{provide:bd,useValue:()=>Mt(c),multi:!0})}const R=f.providers;null==R||D||zu(R,Q=>{r.push(Q)})}}return c!==n&&void 0!==n.providers}function zu(n,r){for(let o of n)qe(o)&&(o=o.\u0275providers),Array.isArray(o)?zu(o,r):r(o)}const Ed=be({provide:String,useValue:be});function Bh(n){return null!==n&&"object"==typeof n&&Ed in n}function hl(n){return"function"==typeof n}const gp=new Gr("Set Injector scope."),Id={},Wg={};let Sc;function fl(){return void 0===Sc&&(Sc=new Zu),Sc}class ya{}class Kg extends ya{constructor(r,o,a,c){super(),this.parent=o,this.source=a,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,mp(r,v=>this.processProvider(v)),this.records.set(Uh,vu(void 0,this)),c.has("environment")&&this.records.set(ya,vu(void 0,this));const f=this.records.get(gp);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(Vh.multi,cn,q.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const o=rn(this),a=Dt(void 0);try{return r()}finally{rn(o),Dt(a)}}get(r,o=qn,a=q.Default){this.assertNotDestroyed(),a=ln(a);const c=rn(this),f=Dt(void 0);try{if(!(a&q.SkipSelf)){let D=this.records.get(r);if(void 0===D){const R=function Qg(n){return"function"==typeof n||"object"==typeof n&&n instanceof Gr}(r)&&wr(r);D=R&&this.injectableDefInScope(R)?vu(Hh(r),Id):null,this.records.set(r,D)}if(null!=D)return this.hydrate(r,D)}return(a&q.Self?fl():this.parent).get(r,o=a&q.Optional&&o===qn?null:o)}catch(v){if("NullInjectorError"===v.name){if((v[fi]=v[fi]||[]).unshift(Ae(r)),c)throw v;return function he(n,r,o,a){const c=n[fi];throw r[qr]&&c.unshift(r[qr]),n.message=function De(n,r,o,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let c=Ae(r);if(Array.isArray(r))c=r.map(Ae).join(" -> ");else if("object"==typeof r){let f=[];for(let v in r)if(r.hasOwnProperty(v)){let D=r[v];f.push(v+":"+("string"==typeof D?JSON.stringify(D):Ae(D)))}c=`{${f.join(", ")}}`}return`${o}${a?"("+a+")":""}[${c}]: ${n.replace(Bi,"\n  ")}`}("\n"+n.message,c,o,a),n.ngTokenPath=c,n[fi]=null,n}(v,r,"R3InjectorError",this.source)}throw v}finally{Dt(f),rn(c)}}resolveInjectorInitializers(){const r=rn(this),o=Dt(void 0);try{const a=this.get(bd.multi,cn,q.Self);for(const c of a)c()}finally{rn(r),Dt(o)}}toString(){const r=[],o=this.records;for(const a of o.keys())r.push(Ae(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ne(205,!1)}processProvider(r){let o=hl(r=pe(r))?r:pe(r&&r.provide);const a=function Qy(n){return Bh(n)?vu(void 0,n.useValue):vu(Yg(n),Id)}(r);if(hl(r)||!0!==r.multi)this.records.get(o);else{let c=this.records.get(o);c||(c=vu(void 0,Id,!0),c.factory=()=>pn(c.multi),this.records.set(o,c)),o=r,c.multi.push(r)}this.records.set(o,a)}hydrate(r,o){return o.value===Id&&(o.value=Wg,o.value=o.factory()),"object"==typeof o.value&&o.value&&function pl(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=pe(r.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function Hh(n){const r=wr(n),o=null!==r?r.factory:Ji(n);if(null!==o)return o;if(n instanceof Gr)throw new Ne(204,!1);if(n instanceof Function)return function Yy(n){const r=n.length;if(r>0)throw function y(n,r){const o=[];for(let a=0;a<n;a++)o.push(r);return o}(r,"?"),new Ne(204,!1);const o=function kr(n){const r=n&&(n[$n]||n[Kt]);if(r){const o=function nn(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),r}return null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new Ne(204,!1)}function Yg(n,r,o){let a;if(hl(n)){const c=pe(n);return Ji(c)||Hh(c)}if(Bh(n))a=()=>pe(n.useValue);else if(function $h(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...pn(n.deps||[]));else if(function jh(n){return!(!n||!n.useExisting)}(n))a=()=>Mt(pe(n.useExisting));else{const c=pe(n&&(n.useClass||n.provide));if(!function zl(n){return!!n.deps}(n))return Ji(c)||Hh(c);a=()=>new c(...pn(n.deps))}return a}function vu(n,r,o=!1){return{factory:n,value:r,multi:o?[]:void 0}}function mp(n,r){for(const o of n)Array.isArray(o)?mp(o,r):o&&qe(o)?mp(o.\u0275providers,r):r(o)}class Jg{}class Xg{}class _p{resolveComponentFactory(r){throw function yp(n){const r=Error(`No component factory found for ${Ae(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let ql=(()=>{class n{}return n.NULL=new _p,n})();function em(){return qu(Ee(),I())}function qu(n,r){return new Cd(dr(n,r))}let Cd=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=em,n})();function vp(n){return n instanceof Cd?n.nativeElement:n}class Dd{}let Xy=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function tm(){const n=I(),o=yi(Ee().index,n);return(Lr(o)?o:n)[11]}(),n})(),Td=(()=>{class n{}return n.\u0275prov=$t({token:n,providedIn:"root",factory:()=>null}),n})();class Sd{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Ac=new Sd("15.0.3"),Gh={};function qh(n){return n.ngOriginalError}class gl{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r);this._console.error("ERROR",r),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&qh(r);for(;o&&qh(o);)o=qh(o);return o||null}}function bu(n){return n instanceof Function?n():n}function Ad(n,r,o){let a=n.length;for(;;){const c=n.indexOf(r,o);if(-1===c)return c;if(0===c||n.charCodeAt(c-1)<=32){const f=r.length;if(c+f===a||n.charCodeAt(c+f)<=32)return c}o=c+1}}const bp="ng-template";function t_(n,r,o){let a=0;for(;a<n.length;){let c=n[a++];if(o&&"class"===c){if(c=n[a],-1!==Ad(c.toLowerCase(),r,0))return!0}else if(1===c){for(;a<n.length&&"string"==typeof(c=n[a++]);)if(c.toLowerCase()===r)return!0;return!1}}return!1}function wp(n){return 4===n.type&&n.value!==bp}function n_(n,r,o){return r===(4!==n.type||o?n.value:bp)}function om(n,r,o){let a=4;const c=n.attrs||[],f=function r_(n){for(let r=0;r<n.length;r++)if(ps(n[r]))return r;return n.length}(c);let v=!1;for(let D=0;D<r.length;D++){const R=r[D];if("number"!=typeof R){if(!v)if(4&a){if(a=2|1&a,""!==R&&!n_(n,R,o)||""===R&&1===r.length){if(To(a))return!1;v=!0}}else{const V=8&a?R:r[++D];if(8&a&&null!==n.attrs){if(!t_(n.attrs,V,o)){if(To(a))return!1;v=!0}continue}const le=xd(8&a?"class":R,c,wp(n),o);if(-1===le){if(To(a))return!1;v=!0;continue}if(""!==V){let Pe;Pe=le>f?"":c[le+1].toLowerCase();const Je=8&a?Pe:null;if(Je&&-1!==Ad(Je,V,0)||2&a&&V!==Pe){if(To(a))return!1;v=!0}}}}else{if(!v&&!To(a)&&!To(R))return!1;if(v&&To(R))continue;v=!1,a=R|1&a}}return To(a)||v}function To(n){return 0==(1&n)}function xd(n,r,o,a){if(null===r)return-1;let c=0;if(a||!o){let f=!1;for(;c<r.length;){const v=r[c];if(v===n)return c;if(3===v||6===v)f=!0;else{if(1===v||2===v){let D=r[++c];for(;"string"==typeof D;)D=r[++c];continue}if(4===v)break;if(0===v){c+=4;continue}}c+=f?1:2}return-1}return function um(n,r){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const a=n[o];if("number"==typeof a)return-1;if(a===r)return o;o++}return-1}(r,n)}function Ep(n,r,o=!1){for(let a=0;a<r.length;a++)if(om(n,r[a],o))return!0;return!1}function lm(n,r){return n?":not("+r.trim()+")":r}function Ip(n){let r=n[0],o=1,a=2,c="",f=!1;for(;o<n.length;){let v=n[o];if("string"==typeof v)if(2&a){const D=n[++o];c+="["+v+(D.length>0?'="'+D+'"':"")+"]"}else 8&a?c+="."+v:4&a&&(c+=" "+v);else""!==c&&!To(v)&&(r+=lm(f,c),c=""),a=v,f=f||!To(a);o++}return""!==c&&(r+=lm(f,c)),r}const fr={};function cm(n){dm(T(),I(),fs()+n,!1)}function dm(n,r,o,a){if(!a)if(3==(3&r[2])){const f=n.preOrderCheckHooks;null!==f&&M(r,f,o)}else{const f=n.preOrderHooks;null!==f&&Y(r,f,0,o)}Zo(o)}function Qh(n,r=null,o=null,a){const c=Jh(n,r,o,a);return c.resolveInjectorInitializers(),c}function Jh(n,r=null,o=null,a,c=new Set){const f=[o||cn,Ky(n)];return a=a||("object"==typeof n?void 0:Ae(n)),new Kg(f,r||fl(),a||null,c)}let _l=(()=>{class n{static create(o,a){if(Array.isArray(o))return Qh({name:""},a,o,"");{const c=o.name??"";return Qh({name:c},o.parent,o.providers,c)}}}return n.THROW_IF_NOT_FOUND=qn,n.NULL=new Zu,n.\u0275prov=$t({token:n,providedIn:"any",factory:()=>Mt(Uh)}),n.__NG_ELEMENT_ID__=-1,n})();function Kl(n,r=q.Default){const o=I();return null===o?Mt(n,r):Lo(Ee(),o,pe(n),r)}function Em(){throw new Error("invalid")}function Im(n,r){const o=n.contentQueries;if(null!==o)for(let a=0;a<o.length;a+=2){const c=o[a],f=o[a+1];if(-1!==f){const v=n.data[f];ro(c),v.contentQueries(2,r[f],f)}}}function bl(n,r,o,a,c,f,v,D,R,V,Q){const le=r.blueprint.slice();return le[0]=c,le[2]=76|a,(null!==Q||n&&1024&n[2])&&(le[2]|=1024),qi(le),le[3]=le[15]=n,le[8]=o,le[10]=v||n&&n[10],le[11]=D||n&&n[11],le[12]=R||n&&n[12]||null,le[9]=V||n&&n[9]||null,le[6]=f,le[20]=function uc(){return Dh++}(),le[21]=Q,le[16]=2==r.type?n[16]:le,le}function wl(n,r,o,a,c){let f=n.data[r];if(null===f)f=function af(n,r,o,a,c){const f=mt(),v=lr(),R=n.data[r]=function Bd(n,r,o,a,c,f){return{type:o,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?f:f&&f.parent,o,r,a,c);return null===n.firstChild&&(n.firstChild=R),null!==f&&(v?null==f.child&&null!==R.parent&&(f.child=R):null===f.next&&(f.next=R)),R}(n,r,o,a,c),function Bo(){return En.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=o,f.value=a,f.attrs=c;const v=function In(){const n=En.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();f.injectorIndex=null===v?-1:v.injectorIndex}return An(f,!0),f}function Fd(n,r,o,a){if(0===o)return-1;const c=r.length;for(let f=0;f<o;f++)r.push(a),n.blueprint.push(a),n.data.push(null);return c}function Rp(n,r,o){bo(r);try{const a=n.viewQuery;null!==a&&El(1,a,o);const c=n.template;null!==c&&Dm(n,r,c,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Im(n,r),n.staticViewQueries&&El(2,n.viewQuery,o);const f=n.components;null!==f&&function sf(n,r){for(let o=0;o<r.length;o++)Zp(n,r[o])}(r,f)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,Su()}}function uf(n,r,o,a){const c=r[2];if(128!=(128&c)){bo(r);try{qi(r),function si(n){return En.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&Dm(n,r,o,2,a);const v=3==(3&c);if(v){const V=n.preOrderCheckHooks;null!==V&&M(r,V,null)}else{const V=n.preOrderHooks;null!==V&&Y(r,V,0,null),_e(r,0)}if(function Hp(n){for(let r=ca(n);null!==r;r=fc(r)){if(!r[2])continue;const o=r[9];for(let a=0;a<o.length;a++){const c=o[a],f=c[3];0==(512&c[2])&&hs(f,1),c[2]|=512}}}(r),function y_(n){for(let r=ca(n);null!==r;r=fc(r))for(let o=10;o<r.length;o++){const a=r[o],c=a[1];es(a)&&uf(c,a,c.template,a[8])}}(r),null!==n.contentQueries&&Im(n,r),v){const V=n.contentCheckHooks;null!==V&&M(r,V)}else{const V=n.contentHooks;null!==V&&Y(r,V,1),_e(r,1)}!function c_(n,r){const o=n.hostBindingOpCodes;if(null!==o)try{for(let a=0;a<o.length;a++){const c=o[a];if(c<0)Zo(~c);else{const f=c,v=o[++a],D=o[++a];Ts(v,f),D(2,r[f])}}}finally{Zo(-1)}}(n,r);const D=n.components;null!==D&&function Cm(n,r){for(let o=0;o<r.length;o++)Mm(n,r[o])}(r,D);const R=n.viewQuery;if(null!==R&&El(2,R,a),v){const V=n.viewCheckHooks;null!==V&&M(r,V)}else{const V=n.viewHooks;null!==V&&Y(r,V,2),_e(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,hs(r[3],-1))}finally{Su()}}}function Dm(n,r,o,a,c){const f=fs(),v=2&a;try{Zo(-1),v&&r.length>22&&dm(n,r,22,!1),o(a,c)}finally{Zo(f)}}function Ld(n,r,o){if(ei(r)){const c=r.directiveEnd;for(let f=r.directiveStart;f<c;f++){const v=n.data[f];v.contentQueries&&v.contentQueries(1,o[f],f)}}}function Op(n,r,o){!ee()||(function df(n,r,o,a){const c=o.directiveStart,f=o.directiveEnd;ci(o)&&function g_(n,r,o){const a=dr(r,n),c=Oc(o),f=n[10],v=Wu(n,bl(n,c,null,o.onPush?32:16,a,r,f,f.createRenderer(a,o),null,null,null));n[r.index]=v}(r,o,n.data[c+o.componentOffset]),n.firstCreatePass||Ba(o,r),ni(a,r);const v=o.initialInputs;for(let D=c;D<f;D++){const R=n.data[D],V=kt(r,n,D,o);ni(V,r),null!==v&&$p(0,D-c,V,R,0,v),ii(R)&&(yi(o.index,r)[8]=kt(r,n,D,o))}}(n,r,o,dr(o,r)),64==(64&o.flags)&&hf(n,r,o))}function Np(n,r,o=dr){const a=r.localNames;if(null!==a){let c=r.index+1;for(let f=0;f<a.length;f+=2){const v=a[f+1],D=-1===v?o(r,n):n[v];n[c++]=D}}}function Oc(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Ud(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Ud(n,r,o,a,c,f,v,D,R,V){const Q=22+a,le=Q+c,Pe=function Nc(n,r){const o=[];for(let a=0;a<r;a++)o.push(a<n?null:fr);return o}(Q,le),Je="function"==typeof V?V():V;return Pe[1]={type:n,blueprint:Pe,template:o,queries:null,viewQuery:D,declTNode:r,data:Pe.slice().fill(null,Q),bindingStartIndex:Q,expandoStartIndex:le,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:R,consts:Je,incompleteFirstPass:!1}}function Vd(n,r,o,a){const c=Yl(r);null===o?c.push(a):(c.push(o),n.firstCreatePass&&Rm(n).push(a,c.length-1))}function lf(n,r,o,a){for(let c in n)if(n.hasOwnProperty(c)){o=null===o?{}:o;const f=n[c];null===a?Pp(o,r,c,f):a.hasOwnProperty(c)&&Pp(o,r,a[c],f)}return o}function Pp(n,r,o,a){n.hasOwnProperty(o)?n[o].push(r,a):n[o]=[r,a]}function Up(n,r){const o=yi(r,n);16&o[2]||(o[2]|=32)}function Vp(n,r,o,a){let c=!1;if(ee()){const f=null===a?null:{"":-1},v=function kc(n,r){const o=n.directiveRegistry;let a=null,c=null;if(o)for(let f=0;f<o.length;f++){const v=o[f];if(Ep(r,v.selectors,!1))if(a||(a=[]),ii(v))if(null!==v.findHostDirectiveDefs){const D=[];c=c||new Map,v.findHostDirectiveDefs(v,D,c),a.unshift(...D,v),jd(n,r,D.length)}else a.unshift(v),jd(n,r,0);else c=c||new Map,v.findHostDirectiveDefs?.(v,a,c),a.push(v)}return null===a?null:[a,c]}(n,o);let D,R;null===v?D=R=null:[D,R]=v,null!==D&&(c=!0,cf(n,r,o,D,f,R)),f&&function f_(n,r,o){if(r){const a=n.localNames=[];for(let c=0;c<r.length;c+=2){const f=o[r[c+1]];if(null==f)throw new Ne(-301,!1);a.push(r[c],f)}}}(o,a,f)}return o.mergedAttrs=Jt(o.mergedAttrs,o.attrs),c}function cf(n,r,o,a,c,f){for(let V=0;V<a.length;V++)zo(Ba(o,r),n,a[V].type);!function Am(n,r,o){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+o,n.providerIndexes=r}(o,n.data.length,a.length);for(let V=0;V<a.length;V++){const Q=a[V];Q.providersResolver&&Q.providersResolver(Q)}let v=!1,D=!1,R=Fd(n,r,a.length,null);for(let V=0;V<a.length;V++){const Q=a[V];o.mergedAttrs=Jt(o.mergedAttrs,Q.hostAttrs),xm(n,o,r,R,Q),p_(R,Q,c),null!==Q.contentQueries&&(o.flags|=4),(null!==Q.hostBindings||null!==Q.hostAttrs||0!==Q.hostVars)&&(o.flags|=64);const le=Q.type.prototype;!v&&(le.ngOnChanges||le.ngOnInit||le.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),v=!0),!D&&(le.ngOnChanges||le.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),D=!0),R++}!function Fp(n,r,o){const c=r.directiveEnd,f=n.data,v=r.attrs,D=[];let R=null,V=null;for(let Q=r.directiveStart;Q<c;Q++){const le=f[Q],Pe=o?o.get(le):null,_t=Pe?Pe.outputs:null;R=lf(le.inputs,Q,R,Pe?Pe.inputs:null),V=lf(le.outputs,Q,V,_t);const Lt=null===R||null===v||wp(r)?null:m_(R,Q,v);D.push(Lt)}null!==R&&(R.hasOwnProperty("class")&&(r.flags|=8),R.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=D,r.inputs=R,r.outputs=V}(n,o,f)}function hf(n,r,o){const a=o.directiveStart,c=o.directiveEnd,f=o.index,v=function jo(){return En.lFrame.currentDirectiveIndex}();try{Zo(f);for(let D=a;D<c;D++){const R=n.data[D],V=r[D];ra(D),(null!==R.hostBindings||0!==R.hostVars||null!==R.hostAttrs)&&Sm(R,V)}}finally{Zo(-1),ra(v)}}function Sm(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function jd(n,r,o){r.componentOffset=o,(n.components||(n.components=[])).push(r.index)}function p_(n,r,o){if(o){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)o[r.exportAs[a]]=n;ii(r)&&(o[""]=n)}}function xm(n,r,o,a,c){n.data[a]=c;const f=c.factory||(c.factory=Ji(c.type)),v=new pr(f,ii(c),Kl);n.blueprint[a]=v,o[a]=v,function h_(n,r,o,a,c){const f=c.hostBindings;if(f){let v=n.hostBindingOpCodes;null===v&&(v=n.hostBindingOpCodes=[]);const D=~r.index;(function Bp(n){let r=n.length;for(;r>0;){const o=n[--r];if("number"==typeof o&&o<0)return o}return 0})(v)!=D&&v.push(D),v.push(o,a,f)}}(n,r,a,Fd(n,o,c.hostVars,fr),c)}function Na(n,r,o,a,c,f){const v=dr(n,r);!function jp(n,r,o,a,c,f,v){if(null==f)n.removeAttribute(r,c,o);else{const D=null==v?Fe(f):v(f,a||"",c);n.setAttribute(r,c,D,o)}}(r[11],v,f,n.value,o,a,c)}function $p(n,r,o,a,c,f){const v=f[r];if(null!==v){const D=a.setInput;for(let R=0;R<v.length;){const V=v[R++],Q=v[R++],le=v[R++];null!==D?a.setInput(o,le,V,Q):o[Q]=le}}}function m_(n,r,o){let a=null,c=0;for(;c<o.length;){const f=o[c];if(0!==f)if(5!==f){if("number"==typeof f)break;if(n.hasOwnProperty(f)){null===a&&(a=[]);const v=n[f];for(let D=0;D<v.length;D+=2)if(v[D]===r){a.push(f,v[D+1],o[c+1]);break}}c+=2}else c+=2;else c+=4}return a}function ff(n,r,o,a){return[n,!0,!1,r,null,0,a,o,null,null]}function Mm(n,r){const o=yi(r,n);if(es(o)){const a=o[1];48&o[2]?uf(a,o,a.template,o[8]):o[5]>0&&$d(o)}}function $d(n){for(let a=ca(n);null!==a;a=fc(a))for(let c=10;c<a.length;c++){const f=a[c];if(es(f))if(512&f[2]){const v=f[1];uf(v,f,v.template,f[8])}else f[5]>0&&$d(f)}const o=n[1].components;if(null!==o)for(let a=0;a<o.length;a++){const c=yi(o[a],n);es(c)&&c[5]>0&&$d(c)}}function Zp(n,r){const o=yi(r,n),a=o[1];(function Gp(n,r){for(let o=r.length;o<n.blueprint.length;o++)r.push(n.blueprint[o])})(a,o),Rp(a,o,o[8])}function Wu(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function wu(n){for(;n;){n[2]|=32;const r=Uu(n);if(ws(n)&&!r)return n;n=r}return null}function Pc(n,r,o,a=!0){const c=r[10];c.begin&&c.begin();try{uf(n,r,n.template,o)}catch(v){throw a&&pf(r,v),v}finally{c.end&&c.end()}}function El(n,r,o){ro(0),r(n,o)}function Yl(n){return n[7]||(n[7]=[])}function Rm(n){return n.cleanup||(n.cleanup=[])}function pf(n,r){const o=n[9],a=o?o.get(gl,null):null;a&&a.handleError(r)}function Zd(n,r,o,a,c){for(let f=0;f<o.length;){const v=o[f++],D=o[f++],R=r[v],V=n.data[v];null!==V.setInput?V.setInput(R,c,a,D):R[D]=c}}function Fc(n,r,o){let a=o?n.styles:null,c=o?n.classes:null,f=0;if(null!==r)for(let v=0;v<r.length;v++){const D=r[v];"number"==typeof D?f=D:1==f?c=xe(c,D):2==f&&(a=xe(a,D+": "+r[++v]+";"))}o?n.styles=a:n.stylesWithoutHost=a,o?n.classes=c:n.classesWithoutHost=c}function gf(n,r,o,a,c=!1){for(;null!==o;){const f=r[o.index];if(null!==f&&a.push(Hr(f)),li(f))for(let D=10;D<f.length;D++){const R=f[D],V=R[1].firstChild;null!==V&&gf(R[1],R,V,a)}const v=o.type;if(8&v)gf(n,r,o.child,a);else if(32&v){const D=il(o,r);let R;for(;R=D();)a.push(R)}else if(16&v){const D=ha(r,o);if(Array.isArray(D))a.push(...D);else{const R=Uu(r[16]);gf(R[1],R,D,a,!0)}}o=c?o.projectionNext:o.next}return a}class Gd{constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,o=r[1];return gf(o,r,o.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(li(r)){const o=r[8],a=o?o.indexOf(this):-1;a>-1&&(Bu(r,a),E(o,a))}this._attachedToViewContainer=!1}Oh(this._lView[1],this._lView)}onDestroy(r){Vd(this._lView[1],this._lView,null,r)}markForCheck(){wu(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Pc(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ne(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ti(n,r){jl(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Ne(902,!1);this._appRef=r}}class zp extends Gd{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Pc(r[1],r,r[8],!1)}checkNoChanges(){}get context(){return null}}class mf extends ql{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=Jn(r);return new Lc(o,this.ngModule)}}function Nm(n){const r=[];for(let o in n)n.hasOwnProperty(o)&&r.push({propName:n[o],templateName:o});return r}class v_{constructor(r,o){this.injector=r,this.parentInjector=o}get(r,o,a){a=ln(a);const c=this.injector.get(r,Gh,a);return c!==Gh||o===Gh?c:this.parentInjector.get(r,o,a)}}class Lc extends Xg{constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function fo(n){return n.map(Ip).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return Nm(this.componentDef.inputs)}get outputs(){return Nm(this.componentDef.outputs)}create(r,o,a,c){let f=(c=c||this.ngModule)instanceof ya?c:c?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const v=f?new v_(r,f):r,D=v.get(Dd,null);if(null===D)throw new Ne(407,!1);const R=v.get(Td,null),V=D.createRenderer(null,this.componentDef),Q=this.componentDef.selectors[0][0]||"div",le=a?function kp(n,r,o){return n.selectRootElement(r,o===Fn.ShadowDom)}(V,a,this.componentDef.encapsulation):Ja(V,Q,function km(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Q)),Pe=this.componentDef.onPush?288:272,Je=Ud(0,null,null,1,0,null,null,null,null,null),_t=bl(null,Je,null,Pe,null,null,D,V,R,v,null);let Lt,tn;bo(_t);try{const wn=this.componentDef;let Yn,xt=null;wn.findHostDirectiveDefs?(Yn=[],xt=new Map,wn.findHostDirectiveDefs(wn,Yn,xt),Yn.push(wn)):Yn=[wn];const gr=function Fm(n,r){const o=n[1];return n[22]=r,wl(o,22,2,"#host",null)}(_t,le),_s=function w_(n,r,o,a,c,f,v,D){const R=c[1];!function E_(n,r,o,a){for(const c of n)r.mergedAttrs=Jt(r.mergedAttrs,c.hostAttrs);null!==r.mergedAttrs&&(Fc(r,r.mergedAttrs,!0),null!==o&&Ec(a,o,r))}(a,n,r,v);const V=f.createRenderer(r,o),Q=bl(c,Oc(o),null,o.onPush?32:16,c[n.index],n,f,V,D||null,null,null);return R.firstCreatePass&&jd(R,n,a.length-1),Wu(c,Q),c[n.index]=Q}(gr,le,wn,Yn,_t,D,V);tn=ds(Je,22),le&&function C_(n,r,o,a){if(a)br(n,o,["ng-version",Ac.full]);else{const{attrs:c,classes:f}=function s_(n){const r=[],o=[];let a=1,c=2;for(;a<n.length;){let f=n[a];if("string"==typeof f)2===c?""!==f&&r.push(f,n[++a]):8===c&&o.push(f);else{if(!To(c))break;c=f}a++}return{attrs:r,classes:o}}(r.selectors[0]);c&&br(n,o,c),f&&f.length>0&&Jo(n,o,f.join(" "))}}(V,wn,le,a),void 0!==o&&function qp(n,r,o){const a=n.projection=[];for(let c=0;c<r.length;c++){const f=o[c];a.push(null!=f?Array.from(f):null)}}(tn,this.ngContentSelectors,o),Lt=function I_(n,r,o,a,c,f){const v=Ee(),D=c[1],R=dr(v,c);cf(D,c,v,o,null,a);for(let Q=0;Q<o.length;Q++)ni(kt(c,D,v.directiveStart+Q,v),c);hf(D,c,v),R&&ni(R,c);const V=kt(c,D,v.directiveStart+v.componentOffset,v);if(n[8]=c[8]=V,null!==f)for(const Q of f)Q(V,r);return Ld(D,v,n),V}(_s,wn,Yn,xt,_t,[Wp]),Rp(Je,_t,null)}finally{Su()}return new Pm(this.componentType,Lt,qu(tn,_t),_t,tn)}}class Pm extends Jg{constructor(r,o,a,c,f){super(),this.location=a,this._rootLView=c,this._tNode=f,this.instance=o,this.hostView=this.changeDetectorRef=new zp(c),this.componentType=r}setInput(r,o){const a=this._tNode.inputs;let c;if(null!==a&&(c=a[r])){const f=this._rootLView;Zd(f[1],f,c,r,o),Up(f,this._tNode.index)}}get injector(){return new so(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Wp(){const n=Ee();j(I()[1],n)}function Kp(n){let r=function yf(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const a=[n];for(;r;){let c;if(ii(n))c=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Ne(903,!1);c=r.\u0275dir}if(c){if(o){a.push(c);const v=n;v.inputs=Qp(n.inputs),v.declaredInputs=Qp(n.declaredInputs),v.outputs=Qp(n.outputs);const D=c.hostBindings;D&&Xp(n,D);const R=c.viewQuery,V=c.contentQueries;if(R&&Jp(n,R),V&&Lm(n,V),we(n.inputs,c.inputs),we(n.declaredInputs,c.declaredInputs),we(n.outputs,c.outputs),ii(c)&&c.data.animation){const Q=n.data;Q.animation=(Q.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let v=0;v<f.length;v++){const D=f[v];D&&D.ngInherit&&D(n),D===Kp&&(o=!1)}}r=Object.getPrototypeOf(r)}!function Yp(n){let r=0,o=null;for(let a=n.length-1;a>=0;a--){const c=n[a];c.hostVars=r+=c.hostVars,c.hostAttrs=Jt(c.hostAttrs,o=Jt(o,c.hostAttrs))}}(a)}function Qp(n){return n===ar?{}:n===cn?[]:n}function Jp(n,r){const o=n.viewQuery;n.viewQuery=o?(a,c)=>{r(a,c),o(a,c)}:r}function Lm(n,r){const o=n.contentQueries;n.contentQueries=o?(a,c,f)=>{r(a,c,f),o(a,c,f)}:r}function Xp(n,r){const o=n.hostBindings;n.hostBindings=o?(a,c)=>{r(a,c),o(a,c)}:r}let Uc=null;function Ku(){if(!Uc){const n=We.Symbol;if(n&&n.iterator)Uc=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<r.length;++o){const a=r[o];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(Uc=a)}}}return Uc}function Vc(n){return!!qd(n)&&(Array.isArray(n)||!(n instanceof Map)&&Ku()in n)}function qd(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ka(n,r,o){return n[r]=o}function po(n,r,o){return!Object.is(n[r],o)&&(n[r]=o,!0)}function Ql(n,r,o,a){const c=po(n,r,o);return po(n,r+1,a)||c}function rg(n,r,o,a){const c=I();return po(c,ki(),r)&&(T(),Na(Zr(),c,n,r,o,a)),rg}function Df(n,r,o,a,c,f,v,D){const R=I(),V=T(),Q=n+22,le=V.firstCreatePass?function og(n,r,o,a,c,f,v,D,R){const V=r.consts,Q=wl(r,n,4,v||null,ts(V,D));Vp(r,o,Q,ts(V,R)),j(r,Q);const le=Q.tViews=Ud(2,Q,a,c,f,r.directiveRegistry,r.pipeRegistry,null,r.schemas,V);return null!==r.queries&&(r.queries.template(r,Q),le.queries=r.queries.embeddedTView(Q)),Q}(Q,V,R,r,o,a,c,f,v):V.data[Q];An(le,!1);const Pe=R[11].createComment("");_u(V,R,Pe,le),ni(Pe,R),Wu(R,R[Q]=ff(Pe,R,Pe,le)),Hi(le)&&Op(V,R,le),null!=v&&Np(R,le,D)}function ag(n){return function Is(n,r){return n[r]}(function di(){return En.lFrame.contextLView}(),22+n)}function Tf(n,r,o){const a=I();return po(a,ki(),r)&&function Ms(n,r,o,a,c,f,v,D){const R=dr(r,o);let Q,V=r.inputs;!D&&null!=V&&(Q=V[a])?(Zd(n,o,Q,a,c),ci(r)&&Up(o,r.index)):3&r.type&&(a=function Lp(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),c=null!=v?v(c,r.value||"",a):c,f.setProperty(R,a,c))}(T(),Zr(),a,n,r,a[11],o,!1),Tf}function Hc(n,r,o,a,c){const v=c?"class":"style";Zd(n,o,r.inputs[v],v,a)}function Kd(n,r,o,a){const c=I(),f=T(),v=22+n,D=c[11],R=c[v]=Ja(D,r,function sa(){return En.lFrame.currentNamespace}()),V=f.firstCreatePass?function Vr(n,r,o,a,c,f,v){const D=r.consts,V=wl(r,n,2,c,ts(D,f));return Vp(r,o,V,ts(D,v)),null!==V.attrs&&Fc(V,V.attrs,!1),null!==V.mergedAttrs&&Fc(V,V.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,V),V}(v,f,c,0,r,o,a):f.data[v];return An(V,!0),Ec(D,R,V),32!=(32&V.flags)&&_u(f,c,R,V),0===function no(){return En.lFrame.elementDepthCount}()&&ni(R,c),function $(){En.lFrame.elementDepthCount++}(),Hi(V)&&(Op(f,c,V),Ld(f,V,c)),null!==a&&Np(c,V),Kd}function Yd(){let n=Ee();lr()?function hr(){En.lFrame.isParent=!1}():(n=n.parent,An(n,!1));const r=n;!function P(){En.lFrame.elementDepthCount--}();const o=T();return o.firstCreatePass&&(j(o,n),ei(n)&&o.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Or(n){return 0!=(8&n.flags)}(r)&&Hc(o,r,I(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Vi(n){return 0!=(16&n.flags)}(r)&&Hc(o,r,I(),r.stylesWithoutHost,!1),Yd}function Sf(n,r,o,a){return Kd(n,r,o,a),Yd(),Sf}function iu(){return I()}function xf(n){return!!n&&"function"==typeof n.then}function Zm(n){return!!n&&"function"==typeof n.subscribe}const Jd=Zm;function Mf(n,r,o,a){const c=I(),f=T(),v=Ee();return function Xd(n,r,o,a,c,f,v){const D=Hi(a),V=n.firstCreatePass&&Rm(n),Q=r[8],le=Yl(r);let Pe=!0;if(3&a.type||v){const Lt=dr(a,r),tn=v?v(Lt):Lt,wn=le.length,Yn=v?gr=>v(Hr(gr[a.index])):a.index;let xt=null;if(!v&&D&&(xt=function Gm(n,r,o,a){const c=n.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const v=c[f];if(v===o&&c[f+1]===a){const D=r[7],R=c[f+2];return D.length>R?D[R]:null}"string"==typeof v&&(f+=2)}return null}(n,r,c,a.index)),null!==xt)(xt.__ngLastListenerFn__||xt).__ngNextListenerFn__=f,xt.__ngLastListenerFn__=f,Pe=!1;else{f=x_(a,r,Q,f,!1);const gr=o.listen(tn,c,f);le.push(f,gr),V&&V.push(c,Yn,wn,wn+1)}}else f=x_(a,r,Q,f,!1);const Je=a.outputs;let _t;if(Pe&&null!==Je&&(_t=Je[c])){const Lt=_t.length;if(Lt)for(let tn=0;tn<Lt;tn+=2){const _s=r[_t[tn]][_t[tn+1]].subscribe(f),Js=le.length;le.push(f,_s),V&&V.push(c,a.index,Js,-(Js+1))}}}(f,c,c[11],v,n,r,a),Mf}function zm(n,r,o,a){try{return!1!==o(a)}catch(c){return pf(n,c),!1}}function x_(n,r,o,a,c){return function f(v){if(v===Function)return a;wu(n.componentOffset>-1?yi(n.index,r):r);let R=zm(r,0,a,v),V=f.__ngNextListenerFn__;for(;V;)R=zm(r,0,V,v)&&R,V=V.__ngNextListenerFn__;return c&&!1===R&&(v.preventDefault(),v.returnValue=!1),R}}function qm(n=1){return function ia(n){return(En.lFrame.contextLView=function ba(n,r){for(;n>0;)r=r[15],n--;return r}(n,En.lFrame.contextLView))[8]}(n)}function ec(n,r){return n<<17|r<<2}function Eu(n){return n>>17&32767}function Sl(n){return 2|n}function Qu(n){return(131068&n)>>2}function dg(n,r){return-131069&n|r<<2}function hg(n){return 1|n}function Qm(n,r,o,a,c){const f=n[o+1],v=null===r;let D=a?Eu(f):Qu(f),R=!1;for(;0!==D&&(!1===R||v);){const Q=n[D+1];F_(n[D],r)&&(R=!0,n[D+1]=a?hg(Q):Sl(Q)),D=a?Eu(Q):Qu(Q)}R&&(n[o+1]=a?Sl(f):hg(f))}function F_(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&Gt(n,r)>=0}function ey(n,r){return function Qs(n,r,o,a){const c=I(),f=T(),v=function Kr(n){const r=En.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,o}(2);f.firstUpdatePass&&function th(n,r,o,a){const c=n.data;if(null===c[o+1]){const f=c[fs()],v=function Al(n,r){return r>=n.expandoStartIndex}(n,o);(function iy(n,r){return 0!=(n.flags&(r?8:16))})(f,a)&&null===r&&!v&&(r=!1),r=function Z_(n,r,o,a){const c=function Po(n){const r=En.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let f=a?r.residualClasses:r.residualStyles;if(null===c)0===(a?r.classBindings:r.styleBindings)&&(o=nh(o=Zc(null,n,r,o,a),r.attrs,a),f=null);else{const v=r.directiveStylingLast;if(-1===v||n[v]!==c)if(o=Zc(c,n,r,o,a),null===f){let R=function G_(n,r,o){const a=o?r.classBindings:r.styleBindings;if(0!==Qu(a))return n[Eu(a)]}(n,r,a);void 0!==R&&Array.isArray(R)&&(R=Zc(null,n,r,R[1],a),R=nh(R,r.attrs,a),function ny(n,r,o,a){n[Eu(o?r.classBindings:r.styleBindings)]=a}(n,r,a,R))}else f=function ry(n,r,o){let a;const c=r.directiveEnd;for(let f=1+r.directiveStylingLast;f<c;f++)a=nh(a,n[f].hostAttrs,o);return nh(a,r.attrs,o)}(n,r,a)}return void 0!==f&&(a?r.residualClasses=f:r.residualStyles=f),o}(c,f,r,a),function Ym(n,r,o,a,c,f){let v=f?r.classBindings:r.styleBindings,D=Eu(v),R=Qu(v);n[a]=o;let Q,V=!1;if(Array.isArray(o)){const le=o;Q=le[1],(null===Q||Gt(le,Q)>0)&&(V=!0)}else Q=o;if(c)if(0!==R){const Pe=Eu(n[D+1]);n[a+1]=ec(Pe,D),0!==Pe&&(n[Pe+1]=dg(n[Pe+1],a)),n[D+1]=function Km(n,r){return 131071&n|r<<17}(n[D+1],a)}else n[a+1]=ec(D,0),0!==D&&(n[D+1]=dg(n[D+1],a)),D=a;else n[a+1]=ec(R,0),0===D?D=a:n[R+1]=dg(n[R+1],a),R=a;V&&(n[a+1]=Sl(n[a+1])),Qm(n,Q,a,!0),Qm(n,Q,a,!1),function P_(n,r,o,a,c){const f=c?n.residualClasses:n.residualStyles;null!=f&&"string"==typeof r&&Gt(f,r)>=0&&(o[a+1]=hg(o[a+1]))}(r,Q,n,a,f),v=ec(D,R),f?r.classBindings=v:r.styleBindings=v}(c,f,r,o,v,a)}}(f,n,v,a),r!==fr&&po(c,v,r)&&function pg(n,r,o,a,c,f,v,D){if(!(3&r.type))return;const R=n.data,V=R[D+1],Q=function N_(n){return 1==(1&n)}(V)?Vf(R,r,o,c,Qu(V),v):void 0;Bf(Q)||(Bf(f)||function cg(n){return 2==(2&n)}(V)&&(f=Vf(R,null,o,c,D,v)),function al(n,r,o,a,c){if(r)c?n.addClass(o,a):n.removeClass(o,a);else{let f=-1===a.indexOf("-")?void 0:la.DashCase;null==c?n.removeStyle(o,a,f):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),f|=la.Important),n.setStyle(o,a,c,f))}}(a,v,Xi(fs(),o),c,f))}(f,f.data[fs()],c,c[11],n,c[v+1]=function z_(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Ae(w(n)))),n}(r,o),a,v)}(n,r,null,!0),ey}function Zc(n,r,o,a,c){let f=null;const v=o.directiveEnd;let D=o.directiveStylingLast;for(-1===D?D=o.directiveStart:D++;D<v&&(f=r[D],a=nh(a,f.hostAttrs,c),f!==n);)D++;return null!==n&&(o.directiveStylingLast=D),a}function nh(n,r,o){const a=o?1:2;let c=-1;if(null!==r)for(let f=0;f<r.length;f++){const v=r[f];"number"==typeof v?c=v:c===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Re(n,v,!!o||r[++f]))}return void 0===n?null:n}function Vf(n,r,o,a,c,f){const v=null===r;let D;for(;c>0;){const R=n[c],V=Array.isArray(R),Q=V?R[1]:R,le=null===Q;let Pe=o[c+1];Pe===fr&&(Pe=le?cn:void 0);let Je=le?vt(Pe,a):Q===a?Pe:void 0;if(V&&!Bf(Je)&&(Je=vt(R,a)),Bf(Je)&&(D=Je,v))return D;const _t=n[c+1];c=v?Eu(_t):Qu(_t)}if(null!==r){let R=f?r.residualClasses:r.residualStyles;null!=R&&(D=vt(R,a))}return D}function Bf(n){return void 0!==n}function jf(n,r=""){const o=I(),a=T(),c=n+22,f=a.firstCreatePass?wl(a,c,1,r,null):a.data[c],v=o[c]=function mu(n,r){return n.createText(r)}(o[11],r);_u(a,o,v,f),An(f,!1)}function sh(n){return oh("",n,""),sh}function oh(n,r,o){const a=I(),c=function Bc(n,r,o,a){return po(n,ki(),o)?r+Fe(o)+a:fr}(a,n,r,o);return c!==fr&&function ru(n,r,o){const a=Xi(r,n);!function ud(n,r,o){n.setValue(r,o)}(n[11],a,o)}(a,fs(),c),oh}const Rl=void 0;var zf=["en",[["a","p"],["AM","PM"],Rl],[["AM","PM"],Rl,Rl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Rl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Rl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Rl,"{1} 'at' {0}",Rl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Cg(n){const o=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===a?1:5}];let zc={};function su(n){const r=function Ol(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=hy(r);if(o)return o;const a=r.split("-")[0];if(o=hy(a),o)return o;if("en"===a)return zf;throw new Ne(701,!1)}function Ju(n){return su(n)[jn.PluralCase]}function hy(n){return n in zc||(zc[n]=We.ng&&We.ng.common&&We.ng.common.locales&&We.ng.common.locales[n]),zc[n]}var jn=(()=>((jn=jn||{})[jn.LocaleId=0]="LocaleId",jn[jn.DayPeriodsFormat=1]="DayPeriodsFormat",jn[jn.DayPeriodsStandalone=2]="DayPeriodsStandalone",jn[jn.DaysFormat=3]="DaysFormat",jn[jn.DaysStandalone=4]="DaysStandalone",jn[jn.MonthsFormat=5]="MonthsFormat",jn[jn.MonthsStandalone=6]="MonthsStandalone",jn[jn.Eras=7]="Eras",jn[jn.FirstDayOfWeek=8]="FirstDayOfWeek",jn[jn.WeekendRange=9]="WeekendRange",jn[jn.DateFormat=10]="DateFormat",jn[jn.TimeFormat=11]="TimeFormat",jn[jn.DateTimeFormat=12]="DateTimeFormat",jn[jn.NumberSymbols=13]="NumberSymbols",jn[jn.NumberFormats=14]="NumberFormats",jn[jn.CurrencyCode=15]="CurrencyCode",jn[jn.CurrencySymbol=16]="CurrencySymbol",jn[jn.CurrencyName=17]="CurrencyName",jn[jn.Currencies=18]="Currencies",jn[jn.Directionality=19]="Directionality",jn[jn.PluralCase=20]="PluralCase",jn[jn.ExtraData=21]="ExtraData",jn))();const Wc="en-US";let fy=Wc;function ve(n,r,o,a,c){if(n=pe(n),Array.isArray(n))for(let f=0;f<n.length;f++)ve(n[f],r,o,a,c);else{const f=T(),v=I();let D=hl(n)?n:pe(n.provide),R=Yg(n);const V=Ee(),Q=1048575&V.providerIndexes,le=V.directiveStart,Pe=V.providerIndexes>>20;if(hl(n)||!n.multi){const Je=new pr(R,c,Kl),_t=St(D,r,c?Q:Q+Pe,le);-1===_t?(zo(Ba(V,v),f,D),Ke(f,n,r.length),r.push(D),V.directiveStart++,V.directiveEnd++,c&&(V.providerIndexes+=1048576),o.push(Je),v.push(Je)):(o[_t]=Je,v[_t]=Je)}else{const Je=St(D,r,Q+Pe,le),_t=St(D,r,Q,Q+Pe),Lt=Je>=0&&o[Je],tn=_t>=0&&o[_t];if(c&&!tn||!c&&!Lt){zo(Ba(V,v),f,D);const wn=function Qi(n,r,o,a,c){const f=new pr(n,o,Kl);return f.multi=[],f.index=r,f.componentProviders=0,bt(f,c,a&&!o),f}(c?Dn:en,o.length,c,a,R);!c&&tn&&(o[_t].providerFactory=wn),Ke(f,n,r.length,0),r.push(D),V.directiveStart++,V.directiveEnd++,c&&(V.providerIndexes+=1048576),o.push(wn),v.push(wn)}else Ke(f,n,Je>-1?Je:_t,bt(o[c?_t:Je],R,!c&&a));!c&&a&&tn&&o[_t].componentProviders++}}}function Ke(n,r,o,a){const c=hl(r),f=function qg(n){return!!n.useClass}(r);if(c||f){const R=(f?pe(r.useClass):r).prototype.ngOnDestroy;if(R){const V=n.destroyHooks||(n.destroyHooks=[]);if(!c&&r.multi){const Q=V.indexOf(o);-1===Q?V.push(o,[a,R]):V[Q+1].push(a,R)}else V.push(o,R)}}}function bt(n,r,o){return o&&n.componentProviders++,n.multi.push(r)-1}function St(n,r,o,a){for(let c=o;c<a;c++)if(r[c]===n)return c;return-1}function en(n,r,o,a){return hi(this.multi,[])}function Dn(n,r,o,a){const c=this.multi;let f;if(this.providerFactory){const v=this.providerFactory.componentProviders,D=kt(o,o[1],this.providerFactory.index,a);f=D.slice(0,v),hi(c,f);for(let R=v;R<D.length;R++)f.push(D[R])}else f=[],hi(c,f);return f}function hi(n,r){for(let o=0;o<n.length;o++)r.push((0,n[o])());return r}function jr(n,r=[]){return o=>{o.providersResolver=(a,c)=>function re(n,r,o){const a=T();if(a.firstCreatePass){const c=ii(n);ve(o,a.data,a.blueprint,c,!0),ve(r,a.data,a.blueprint,c,!1)}}(a,c?c(n):n,r)}}class Oi{}class zr{}function ri(n,r){return new Xc(n,r??null)}class Xc extends Oi{constructor(r,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new mf(this);const a=Qr(r);this._bootstrapComponents=bu(a.bootstrap),this._r3Injector=Jh(r,o,[{provide:Oi,useValue:this},{provide:ql,useValue:this.componentFactoryResolver}],Ae(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class Dv extends zr{constructor(r){super(),this.moduleType=r}create(r){return new Xc(this.moduleType,r)}}class Vb extends Oi{constructor(r,o,a){super(),this.componentFactoryResolver=new mf(this),this.instance=null;const c=new Kg([...r,{provide:Oi,useValue:this},{provide:ql,useValue:this.componentFactoryResolver}],o||fl(),a,new Set(["environment"]));this.injector=c,c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function Tv(n,r,o=null){return new Vb(n,r,o).injector}let Bb=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const a=pp(0,o.type),c=a.length>0?Tv([a],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,c)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=$t({token:n,providedIn:"environment",factory:()=>new n(Mt(ya))}),n})();function y0(n){n.getStandaloneInjector=r=>r.get(Bb).getOrCreateStandaloneInjector(n)}function C0(n,r,o,a){return function S0(n,r,o,a,c,f){const v=r+o;return po(n,v,c)?ka(n,v+1,f?a.call(f,c):a(c)):Ng(n,v+1)}(I(),Xn(),n,r,o,a)}function D0(n,r,o,a,c){return function A0(n,r,o,a,c,f,v){const D=r+o;return Ql(n,D,c,f)?ka(n,D+2,v?a.call(v,c,f):a(c,f)):Ng(n,D+2)}(I(),Xn(),n,r,o,a,c)}function T0(n,r,o,a,c,f){return function x0(n,r,o,a,c,f,v,D){const R=r+o;return function bf(n,r,o,a,c){const f=Ql(n,r,o,a);return po(n,r+2,c)||f}(n,R,c,f,v)?ka(n,R+3,D?a.call(D,c,f,v):a(c,f,v)):Ng(n,R+3)}(I(),Xn(),n,r,o,a,c,f)}function Ng(n,r){const o=n[r];return o===fr?void 0:o}function Av(n){return r=>{setTimeout(n,void 0,r)}}const kl=class lw extends g.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,a){let c=r,f=o||(()=>null),v=a;if(r&&"object"==typeof r){const R=r;c=R.next?.bind(R),f=R.error?.bind(R),v=R.complete?.bind(R)}this.__isAsync&&(f=Av(f),c&&(c=Av(c)),v&&(v=Av(v)));const D=super.subscribe({next:c,error:f,complete:v});return r instanceof l.w0&&r.add(D),D}};function cw(){return this._results[Ku()]()}class xv{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=Ku(),a=xv.prototype;a[o]||(a[o]=cw)}get changes(){return this._changes||(this._changes=new kl)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const a=this;a.dirty=!1;const c=function Ki(n){return n.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function Wa(n,r,o){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let c=n[a],f=r[a];if(o&&(c=o(c),f=o(f)),f!==c)return!1}return!0}(a._results,c,o))&&(a._results=c,a.length=c.length,a.last=c[this.length-1],a.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Pg=(()=>{class n{}return n.__NG_ELEMENT_ID__=fw,n})();const dw=Pg,hw=class extends dw{constructor(r,o,a){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=a}createEmbeddedView(r,o){const a=this._declarationTContainer.tViews,c=bl(this._declarationLView,a,r,16,null,a.declTNode,null,null,null,null,o||null);c[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(c[19]=v.createEmbeddedView(a)),Rp(a,c,r),new Gd(c)}};function fw(){return Sy(Ee(),I())}function Sy(n,r){return 4&n.type?new hw(r,n,qu(n,r)):null}let Ay=(()=>{class n{}return n.__NG_ELEMENT_ID__=pw,n})();function pw(){return k0(Ee(),I())}const gw=Ay,O0=class extends gw{constructor(r,o,a){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=a}get element(){return qu(this._hostTNode,this._hostLView)}get injector(){return new so(this._hostTNode,this._hostLView)}get parentInjector(){const r=Ln(this._hostTNode,this._hostLView);if(zt(r)){const o=_i(r,this._hostLView),a=ot(r);return new so(o[1].data[a+8],o)}return new so(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=N0(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,o,a){let c,f;"number"==typeof a?c=a:null!=a&&(c=a.index,f=a.injector);const v=r.createEmbeddedView(o||{},f);return this.insert(v,c),v}createComponent(r,o,a,c,f){const v=r&&!function wo(n){return"function"==typeof n}(r);let D;if(v)D=o;else{const le=o||{};D=le.index,a=le.injector,c=le.projectableNodes,f=le.environmentInjector||le.ngModuleRef}const R=v?r:new Lc(Jn(r)),V=a||this.parentInjector;if(!f&&null==R.ngModule){const Pe=(v?V:this.parentInjector).get(ya,null);Pe&&(f=Pe)}const Q=R.create(V,c,void 0,f);return this.insert(Q.hostView,D),Q}insert(r,o){const a=r._lView,c=a[1];if(function _o(n){return li(n[3])}(a)){const Q=this.indexOf(r);if(-1!==Q)this.detach(Q);else{const le=a[3],Pe=new O0(le,le[6],le[3]);Pe.detach(Pe.indexOf(r))}}const f=this._adjustIndex(o),v=this._lContainer;!function pc(n,r,o,a){const c=10+a,f=o.length;a>0&&(o[c-1][4]=r),a<f-10?(r[4]=o[c],b(o,10+a,r)):(o.push(r),r[4]=null),r[3]=o;const v=r[17];null!==v&&o!==v&&function Rh(n,r){const o=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===o?n[9]=[r]:o.push(r)}(v,r);const D=r[19];null!==D&&D.insertView(n),r[2]|=64}(c,a,v,f);const D=ho(f,v),R=a[11],V=Ar(R,v[7]);return null!==V&&function up(n,r,o,a,c,f){a[0]=c,a[6]=r,jl(n,a,o,1,c,f)}(c,v[6],R,a,V,D),r.attachToViewContainerRef(),b(Mv(v),f,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=N0(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),a=Bu(this._lContainer,o);a&&(E(Mv(this._lContainer),o),Oh(a[1],a))}detach(r){const o=this._adjustIndex(r,-1),a=Bu(this._lContainer,o);return a&&null!=E(Mv(this._lContainer),o)?new Gd(a):null}_adjustIndex(r,o=0){return r??this.length+o}};function N0(n){return n[8]}function Mv(n){return n[8]||(n[8]=[])}function k0(n,r){let o;const a=r[n.index];if(li(a))o=a;else{let c;if(8&n.type)c=Hr(a);else{const f=r[11];c=f.createComment("");const v=dr(n,r);yu(f,Ar(f,v),c,function kh(n,r){return n.nextSibling(r)}(f,v),!1)}r[n.index]=o=ff(a,r,c,n),Wu(r,o)}return new O0(o,n,r)}class Rv{constructor(r){this.queryList=r,this.matches=null}clone(){return new Rv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ov{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const a=null!==r.contentQueries?r.contentQueries[0]:o.length,c=[];for(let f=0;f<a;f++){const v=o.getByIndex(f);c.push(this.queries[v.indexInDeclarationView].clone())}return new Ov(c)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==H0(r,o).matches&&this.queries[o].setDirty()}}class P0{constructor(r,o,a=null){this.predicate=r,this.flags=o,this.read=a}}class Nv{constructor(r=[]){this.queries=r}elementStart(r,o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let a=0;a<this.length;a++){const c=null!==o?o.length:0,f=this.getByIndex(a).embeddedTView(r,c);f&&(f.indexInDeclarationView=a,null!==o?o.push(f):o=[f])}return null!==o?new Nv(o):null}template(r,o){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class kv{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new kv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==o;)a=a.parent;return o===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const a=this.metadata.predicate;if(Array.isArray(a))for(let c=0;c<a.length;c++){const f=a[c];this.matchTNodeWithReadOption(r,o,mw(o,f)),this.matchTNodeWithReadOption(r,o,Yr(o,r,f,!1,!1))}else a===Pg?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,Yr(o,r,a,!1,!1))}matchTNodeWithReadOption(r,o,a){if(null!==a){const c=this.metadata.read;if(null!==c)if(c===Cd||c===Ay||c===Pg&&4&o.type)this.addMatch(o.index,-2);else{const f=Yr(o,r,c,!1,!1);null!==f&&this.addMatch(o.index,f)}else this.addMatch(o.index,a)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function mw(n,r){const o=n.localNames;if(null!==o)for(let a=0;a<o.length;a+=2)if(o[a]===r)return o[a+1];return null}function _w(n,r,o,a){return-1===o?function yw(n,r){return 11&n.type?qu(n,r):4&n.type?Sy(n,r):null}(r,n):-2===o?function vw(n,r,o){return o===Cd?qu(r,n):o===Pg?Sy(r,n):o===Ay?k0(r,n):void 0}(n,r,a):kt(n,n[1],o,r)}function F0(n,r,o,a){const c=r[19].queries[a];if(null===c.matches){const f=n.data,v=o.matches,D=[];for(let R=0;R<v.length;R+=2){const V=v[R];D.push(V<0?null:_w(r,f[V],v[R+1],o.metadata.read))}c.matches=D}return c.matches}function Pv(n,r,o,a){const c=n.queries.getByIndex(o),f=c.matches;if(null!==f){const v=F0(n,r,c,o);for(let D=0;D<f.length;D+=2){const R=f[D];if(R>0)a.push(v[D/2]);else{const V=f[D+1],Q=r[-R];for(let le=10;le<Q.length;le++){const Pe=Q[le];Pe[17]===Pe[3]&&Pv(Pe[1],Pe,V,a)}if(null!==Q[9]){const le=Q[9];for(let Pe=0;Pe<le.length;Pe++){const Je=le[Pe];Pv(Je[1],Je,V,a)}}}}}return a}function L0(n){const r=I(),o=T(),a=Fa();ro(a+1);const c=H0(o,a);if(n.dirty&&function Cs(n){return 4==(4&n[2])}(r)===(2==(2&c.metadata.flags))){if(null===c.matches)n.reset([]);else{const f=c.crossesNgTemplate?Pv(o,r,a,[]):F0(o,r,c,a);n.reset(f,vp),n.notifyOnChanges()}return!0}return!1}function U0(n,r,o){const a=T();a.firstCreatePass&&($0(a,new P0(n,r,o),-1),2==(2&r)&&(a.staticViewQueries=!0)),j0(a,I(),r)}function V0(n,r,o,a){const c=T();if(c.firstCreatePass){const f=Ee();$0(c,new P0(r,o,a),f.index),function ww(n,r){const o=n.contentQueries||(n.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,r)}(c,n),2==(2&o)&&(c.staticContentQueries=!0)}j0(c,I(),o)}function B0(){return function bw(n,r){return n[19].queries[r].queryList}(I(),Fa())}function j0(n,r,o){const a=new xv(4==(4&o));Vd(n,r,a,a.destroy),null===r[19]&&(r[19]=new Ov),r[19].queries.push(new Rv(a))}function $0(n,r,o){null===n.queries&&(n.queries=new Nv),n.queries.track(new kv(r,o))}function H0(n,r){return n.queries.getByIndex(r)}function My(...n){}const ub=new Gr("Application Initializer");let Ry=(()=>{class n{constructor(o){this.appInits=o,this.resolve=My,this.reject=My,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c})}runInitializers(){if(this.initialized)return;const o=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const f=this.appInits[c]();if(xf(f))o.push(f);else if(Jd(f)){const v=new Promise((D,R)=>{f.subscribe({complete:D,error:R})});o.push(v)}}Promise.all(o).then(()=>{a()}).catch(c=>{this.reject(c)}),0===o.length&&a(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(Mt(ub,8))},n.\u0275prov=$t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lb=new Gr("AppId",{providedIn:"root",factory:function cb(){return`${Bv()}${Bv()}${Bv()}`}});function Bv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const db=new Gr("Platform Initializer"),$w=new Gr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),hb=new Gr("appBootstrapListener");let Hw=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=$t({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Oy=new Gr("LocaleId",{providedIn:"root",factory:()=>Zt(Oy,q.Optional|q.SkipSelf)||function Zw(){return typeof $localize<"u"&&$localize.locale||Wc}()}),Gw=new Gr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class zw{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}let qw=(()=>{class n{compileModuleSync(o){return new Dv(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const a=this.compileModuleSync(o),f=bu(Qr(o).declarations).reduce((v,D)=>{const R=Jn(D);return R&&v.push(new Lc(R)),v},[]);return new zw(a,f)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=$t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Yw=(()=>Promise.resolve(0))();function jv(n){typeof Zone>"u"?Yw.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Du{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new kl(!1),this.onMicrotaskEmpty=new kl(!1),this.onStable=new kl(!1),this.onError=new kl(!1),typeof Zone>"u")throw new Ne(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!a&&o,c.shouldCoalesceRunChangeDetection=a,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function Qw(){let n=We.requestAnimationFrame,r=We.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function eE(n){const r=()=>{!function Xw(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(We,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Hv(n),n.isCheckStableRunning=!0,$v(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Hv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,a,c,f,v,D)=>{try{return gb(n),o.invokeTask(c,f,v,D)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||n.shouldCoalesceRunChangeDetection)&&r(),mb(n)}},onInvoke:(o,a,c,f,v,D,R)=>{try{return gb(n),o.invoke(c,f,v,D,R)}finally{n.shouldCoalesceRunChangeDetection&&r(),mb(n)}},onHasTask:(o,a,c,f)=>{o.hasTask(c,f),a===c&&("microTask"==f.change?(n._hasPendingMicrotasks=f.microTask,Hv(n),$v(n)):"macroTask"==f.change&&(n.hasPendingMacrotasks=f.macroTask))},onHandleError:(o,a,c,f)=>(o.handleError(c,f),n.runOutsideAngular(()=>n.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Du.isInAngularZone())throw new Ne(909,!1)}static assertNotInAngularZone(){if(Du.isInAngularZone())throw new Ne(909,!1)}run(r,o,a){return this._inner.run(r,o,a)}runTask(r,o,a,c){const f=this._inner,v=f.scheduleEventTask("NgZoneEvent: "+c,r,Jw,My,My);try{return f.runTask(v,o,a)}finally{f.cancelTask(v)}}runGuarded(r,o,a){return this._inner.runGuarded(r,o,a)}runOutsideAngular(r){return this._outer.run(r)}}const Jw={};function $v(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Hv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function gb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function mb(n){n._nesting--,$v(n)}class tE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new kl,this.onMicrotaskEmpty=new kl,this.onStable=new kl,this.onError=new kl}run(r,o,a){return r.apply(o,a)}runGuarded(r,o,a){return r.apply(o,a)}runOutsideAngular(r){return r()}runTask(r,o,a,c){return r.apply(o,a)}}const yb=new Gr(""),_b=new Gr("");let Zv,nE=(()=>{class n{constructor(o,a,c){this._ngZone=o,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Zv||(function rE(n){Zv=n}(c),c.addToWindow(a)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Du.assertNotInAngularZone(),jv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())jv(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(o)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,a,c){let f=-1;a&&a>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==f),o(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:o,timeoutId:f,updateCb:c})}whenStable(o,a,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,a,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,a,c){return[]}}return n.\u0275fac=function(o){return new(o||n)(Mt(Du),Mt(vb),Mt(_b))},n.\u0275prov=$t({token:n,factory:n.\u0275fac}),n})(),vb=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,a){this._applications.set(o,a)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,a=!0){return Zv?.findTestabilityInTree(this,o,a)??null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=$t({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),ed=null;const bb=new Gr("AllowMultipleToken"),Gv=new Gr("PlatformDestroyListeners");class oE{constructor(r,o){this.name=r,this.token=o}}function Eb(n,r,o=[]){const a=`Platform: ${r}`,c=new Gr(a);return(f=[])=>{let v=zv();if(!v||v.injector.get(bb,!1)){const D=[...o,...f,{provide:c,useValue:!0}];n?n(D):function aE(n){if(ed&&!ed.get(bb,!1))throw new Ne(400,!1);ed=n;const r=n.get(Cb);(function wb(n){const r=n.get(db,null);r&&r.forEach(o=>o())})(n)}(function Ib(n=[],r){return _l.create({name:r,providers:[{provide:gp,useValue:"platform"},{provide:Gv,useValue:new Set([()=>ed=null])},...n]})}(D,a))}return function lE(n){const r=zv();if(!r)throw new Ne(401,!1);return r}()}}function zv(){return ed?.get(Cb)??null}let Cb=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,a){const c=function Tb(n,r){let o;return o="noop"===n?new tE:("zone.js"===n?void 0:n)||new Du(r),o}(a?.ngZone,function Db(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(a)),f=[{provide:Du,useValue:c}];return c.run(()=>{const v=_l.create({providers:f,parent:this.injector,name:o.moduleType.name}),D=o.create(v),R=D.injector.get(gl,null);if(!R)throw new Ne(402,!1);return c.runOutsideAngular(()=>{const V=c.onError.subscribe({next:Q=>{R.handleError(Q)}});D.onDestroy(()=>{ky(this._modules,D),V.unsubscribe()})}),function Sb(n,r,o){try{const a=o();return xf(a)?a.catch(c=>{throw r.runOutsideAngular(()=>n.handleError(c)),c}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(R,c,()=>{const V=D.injector.get(Ry);return V.runInitializers(),V.donePromise.then(()=>(function Dg(n){Pt(n,"Expected localeId to be defined"),"string"==typeof n&&(fy=n.toLowerCase().replace(/_/g,"-"))}(D.injector.get(Oy,Wc)||Wc),this._moduleDoBootstrap(D),D))})})}bootstrapModule(o,a=[]){const c=Ab({},a);return function iE(n,r,o){const a=new Dv(o);return Promise.resolve(a)}(0,0,o).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(o){const a=o.injector.get(Ny);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(c=>a.bootstrap(c));else{if(!o.instance.ngDoBootstrap)throw new Ne(403,!1);o.instance.ngDoBootstrap(a)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ne(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const o=this._injector.get(Gv,null);o&&(o.forEach(a=>a()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(Mt(_l))},n.\u0275prov=$t({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function Ab(n,r){return Array.isArray(r)?r.reduce(Ab,n):{...n,...r}}let Ny=(()=>{class n{constructor(o,a,c){this._zone=o,this._injector=a,this._exceptionHandler=c,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new G.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),v=new G.y(D=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{Du.assertNotInAngularZone(),jv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{Du.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{R.unsubscribe(),V.unsubscribe()}});this.isStable=(0,ge.T)(f,v.pipe((0,U.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,a){const c=o instanceof Xg;if(!this._injector.get(Ry).done)throw!c&&Tr(o),new Ne(405,false);let v;v=c?o:this._injector.get(ql).resolveComponentFactory(o),this.componentTypes.push(v.componentType);const D=function sE(n){return n.isBoundToModule}(v)?void 0:this._injector.get(Oi),V=v.create(_l.NULL,[],a||v.selector,D),Q=V.location.nativeElement,le=V.injector.get(yb,null);return le?.registerApplication(Q),V.onDestroy(()=>{this.detachView(V.hostView),ky(this.components,V),le?.unregisterApplication(Q)}),this._loadComponent(V),V}tick(){if(this._runningTick)throw new Ne(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const a=o;this._views.push(a),a.attachToAppRef(this)}detachView(o){const a=o;ky(this._views,a),a.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(hb,[]).concat(this._bootstrapListeners).forEach(c=>c(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>ky(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Ne(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)(Mt(Du),Mt(ya),Mt(gl))},n.\u0275prov=$t({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ky(n,r){const o=n.indexOf(r);o>-1&&n.splice(o,1)}function dE(){return!1}let hE=(()=>{class n{}return n.__NG_ELEMENT_ID__=fE,n})();function fE(n){return function pE(n,r,o){if(ci(n)&&!o){const a=yi(n.index,r);return new Gd(a,a)}return 47&n.type?new Gd(r[16],r):null}(Ee(),I(),16==(16&n))}class Nb{constructor(){}supports(r){return Vc(r)}create(r){return new bE(r)}}const vE=(n,r)=>r;class bE{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||vE}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,a=this._removalsHead,c=0,f=null;for(;o||a;){const v=!a||o&&o.currentIndex<Pb(a,c,f)?o:a,D=Pb(v,c,f),R=v.currentIndex;if(v===a)c--,a=a._nextRemoved;else if(o=o._next,null==v.previousIndex)c++;else{f||(f=[]);const V=D-c,Q=R-c;if(V!=Q){for(let Pe=0;Pe<V;Pe++){const Je=Pe<f.length?f[Pe]:f[Pe]=0,_t=Je+Pe;Q<=_t&&_t<V&&(f[Pe]=Je+1)}f[v.previousIndex]=Q-V}}D!==R&&r(v,D,R)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!Vc(r))throw new Ne(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let c,f,v,o=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let D=0;D<this.length;D++)f=r[D],v=this._trackByFn(D,f),null!==o&&Object.is(o.trackById,v)?(a&&(o=this._verifyReinsertion(o,f,v,D)),Object.is(o.item,f)||this._addIdentityChange(o,f)):(o=this._mismatch(o,f,v,D),a=!0),o=o._next}else c=0,function S_(n,r){if(Array.isArray(n))for(let o=0;o<n.length;o++)r(n[o]);else{const o=n[Ku()]();let a;for(;!(a=o.next()).done;)r(a.value)}}(r,D=>{v=this._trackByFn(c,D),null!==o&&Object.is(o.trackById,v)?(a&&(o=this._verifyReinsertion(o,D,v,c)),Object.is(o.item,D)||this._addIdentityChange(o,D)):(o=this._mismatch(o,D,v,c),a=!0),o=o._next,c++}),this.length=c;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,a,c){let f;return null===r?f=this._itTail:(f=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,f,c)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,c))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,f,c)):r=this._addAfter(new wE(o,a),f,c),r}_verifyReinsertion(r,o,a,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==f?r=this._reinsertAfter(f,r._prev,c):r.currentIndex!=c&&(r.currentIndex=c,this._addToMoves(r,c)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const c=r._prevRemoved,f=r._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(r,o,a),this._addToMoves(r,a),r}_moveAfter(r,o,a){return this._unlink(r),this._insertAfter(r,o,a),this._addToMoves(r,a),r}_addAfter(r,o,a){return this._insertAfter(r,o,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,a){const c=null===o?this._itHead:o._next;return r._next=c,r._prev=o,null===c?this._itTail=r:c._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new kb),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,a=r._next;return null===o?this._itHead=a:o._next=a,null===a?this._itTail=o:a._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new kb),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class wE{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class EE{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===o||o<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const o=r._prevDup,a=r._nextDup;return null===o?this._head=a:o._nextDup=a,null===a?this._tail=o:a._prevDup=o,null===this._head}}class kb{constructor(){this.map=new Map}put(r){const o=r.trackById;let a=this.map.get(o);a||(a=new EE,this.map.set(o,a)),a.add(r)}get(r,o){const c=this.map.get(r);return c?c.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Pb(n,r,o){const a=n.previousIndex;if(null===a)return a;let c=0;return o&&a<o.length&&(c=o[a]),a+r+c}class Fb{constructor(){}supports(r){return r instanceof Map||qd(r)}create(){return new IE}}class IE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||qd(r)))throw new Ne(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,c)=>{if(o&&o.key===c)this._maybeAddToChanges(o,a),this._appendAfter=o,o=o._next;else{const f=this._getOrCreateRecordForKey(c,a);o=this._insertBeforeOrAppend(o,f)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let a=o;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const a=r._prev;return o._next=r,o._prev=a,r._prev=o,a&&(a._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const c=this._records.get(r);this._maybeAddToChanges(c,o);const f=c._prev,v=c._next;return f&&(f._next=v),v&&(v._prev=f),c._next=null,c._prev=null,c}const a=new CE(r);return this._records.set(r,a),a.currentValue=o,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(a=>o(r[a],a))}}class CE{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Lb(){return new Qv([new Nb])}let Qv=(()=>{class n{constructor(o){this.factories=o}static create(o,a){if(null!=a){const c=a.factories.slice();o=o.concat(c)}return new n(o)}static extend(o){return{provide:n,useFactory:a=>n.create(o,a||Lb()),deps:[[n,new k,new Ta]]}}find(o){const a=this.factories.find(c=>c.supports(o));if(null!=a)return a;throw new Ne(901,!1)}}return n.\u0275prov=$t({token:n,providedIn:"root",factory:Lb}),n})();function Ub(){return new Jv([new Fb])}let Jv=(()=>{class n{constructor(o){this.factories=o}static create(o,a){if(a){const c=a.factories.slice();o=o.concat(c)}return new n(o)}static extend(o){return{provide:n,useFactory:a=>n.create(o,a||Ub()),deps:[[n,new k,new Ta]]}}find(o){const a=this.factories.find(c=>c.supports(o));if(a)return a;throw new Ne(901,!1)}}return n.\u0275prov=$t({token:n,providedIn:"root",factory:Ub}),n})();const SE=Eb(null,"core",[]);let AE=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(Mt(Ny))},n.\u0275mod=nr({type:n}),n.\u0275inj=Nn({}),n})();function xE(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},433:(Ut,ze,L)=>{L.d(ze,{Fj:()=>se,qu:()=>P,NI:()=>yr,u:()=>Zs,cw:()=>me,sg:()=>Os,u5:()=>hs,JJ:()=>Ge,JL:()=>We,YN:()=>ls,UX:()=>En,Q7:()=>Ii,EJ:()=>eo,kI:()=>W,_Y:()=>Bn,Kr:()=>Ni});var g=L(4650),l=L(6895),G=L(8996),ge=L(9751),U=L(4742),be=L(8421),we=L(7669),Ae=L(5403),xe=L(3268),ue=L(1810),pe=L(4004);let nt=(()=>{class I{constructor(S,H){this._renderer=S,this._elementRef=H,this.onChange=Ee=>{},this.onTouched=()=>{}}setProperty(S,H){this._renderer.setProperty(this._elementRef.nativeElement,S,H)}registerOnTouched(S){this.onTouched=S}registerOnChange(S){this.onChange=S}setDisabledState(S){this.setProperty("disabled",S)}}return I.\u0275fac=function(S){return new(S||I)(g.Y36(g.Qsj),g.Y36(g.SBq))},I.\u0275dir=g.lG2({type:I}),I})(),qe=(()=>{class I extends nt{}return I.\u0275fac=function(){let T;return function(H){return(T||(T=g.n5z(I)))(H||I)}}(),I.\u0275dir=g.lG2({type:I,features:[g.qOj]}),I})();const Qe=new g.OlP("NgValueAccessor"),Me={provide:Qe,useExisting:(0,g.Gpc)(()=>se),multi:!0},et=new g.OlP("CompositionEventMode");let se=(()=>{class I extends nt{constructor(S,H,Ee){super(S,H),this._compositionMode=Ee,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Fe(){const I=(0,l.q)()?(0,l.q)().getUserAgent():"";return/android (\d+)/.test(I.toLowerCase())}())}writeValue(S){this.setProperty("value",S??"")}_handleInput(S){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(S)}_compositionStart(){this._composing=!0}_compositionEnd(S){this._composing=!1,this._compositionMode&&this.onChange(S)}}return I.\u0275fac=function(S){return new(S||I)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(et,8))},I.\u0275dir=g.lG2({type:I,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(S,H){1&S&&g.NdJ("input",function(mt){return H._handleInput(mt.target.value)})("blur",function(){return H.onTouched()})("compositionstart",function(){return H._compositionStart()})("compositionend",function(mt){return H._compositionEnd(mt.target.value)})},features:[g._Bn([Me]),g.qOj]}),I})();function Le(I){return null==I||("string"==typeof I||Array.isArray(I))&&0===I.length}function ut(I){return null!=I&&"number"==typeof I.length}const Ye=new g.OlP("NgValidators"),de=new g.OlP("NgAsyncValidators"),Oe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class W{static min(T){return function te(I){return T=>{if(Le(T.value)||Le(I))return null;const S=parseFloat(T.value);return!isNaN(S)&&S<I?{min:{min:I,actual:T.value}}:null}}(T)}static max(T){return function ae(I){return T=>{if(Le(T.value)||Le(I))return null;const S=parseFloat(T.value);return!isNaN(S)&&S>I?{max:{max:I,actual:T.value}}:null}}(T)}static required(T){return Ie(T)}static requiredTrue(T){return function lt(I){return!0===I.value?null:{required:!0}}(T)}static email(T){return function pt(I){return Le(I.value)||Oe.test(I.value)?null:{email:!0}}(T)}static minLength(T){return function Ct(I){return T=>Le(T.value)||!ut(T.value)?null:T.value.length<I?{minlength:{requiredLength:I,actualLength:T.value.length}}:null}(T)}static maxLength(T){return function Ot(I){return T=>ut(T.value)&&T.value.length>I?{maxlength:{requiredLength:I,actualLength:T.value.length}}:null}(T)}static pattern(T){return function Qt(I){if(!I)return Nt;let T,S;return"string"==typeof I?(S="","^"!==I.charAt(0)&&(S+="^"),S+=I,"$"!==I.charAt(I.length-1)&&(S+="$"),T=new RegExp(S)):(S=I.toString(),T=I),H=>{if(Le(H.value))return null;const Ee=H.value;return T.test(Ee)?null:{pattern:{requiredPattern:S,actualValue:Ee}}}}(T)}static nullValidator(T){return null}static compose(T){return On(T)}static composeAsync(T){return wr(T)}}function Ie(I){return Le(I.value)?{required:!0}:null}function Nt(I){return null}function Pt(I){return null!=I}function Et(I){return(0,g.QGY)(I)?(0,G.D)(I):I}function Wt(I){let T={};return I.forEach(S=>{T=null!=S?{...T,...S}:T}),0===Object.keys(T).length?null:T}function qt(I,T){return T.map(S=>S(I))}function $t(I){return I.map(T=>function yn(I){return!I.validate}(T)?T:S=>T.validate(S))}function On(I){if(!I)return null;const T=I.filter(Pt);return 0==T.length?null:function(S){return Wt(qt(S,T))}}function Nn(I){return null!=I?On($t(I)):null}function wr(I){if(!I)return null;const T=I.filter(Pt);return 0==T.length?null:function(S){return function ie(...I){const T=(0,we.jO)(I),{args:S,keys:H}=(0,U.D)(I),Ee=new ge.y(mt=>{const{length:In}=S;if(!In)return void mt.complete();const An=new Array(In);let lr=In,hr=In;for(let di=0;di<In;di++){let Rr=!1;(0,be.Xf)(S[di]).subscribe((0,Ae.x)(mt,Mi=>{Rr||(Rr=!0,hr--),An[di]=Mi},()=>lr--,void 0,()=>{(!lr||!Rr)&&(hr||mt.next(H?(0,ue.n)(H,An):An),mt.complete())}))}});return T?Ee.pipe((0,xe.Z)(T)):Ee}(qt(S,T).map(Et)).pipe((0,pe.U)(Wt))}}function kn(I){return null!=I?wr($t(I)):null}function _r(I,T){return null===I?[T]:Array.isArray(I)?[...I,T]:[I,T]}function kr(I){return I._rawValidators}function nn(I){return I._rawAsyncValidators}function zn(I){return I?Array.isArray(I)?I:[I]:[]}function $n(I,T){return Array.isArray(I)?I.includes(T):I===T}function Vn(I,T){const S=zn(T);return zn(I).forEach(Ee=>{$n(S,Ee)||S.push(Ee)}),S}function Kt(I,T){return zn(T).filter(S=>!$n(I,S))}class He{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(T){this._rawValidators=T||[],this._composedValidatorFn=Nn(this._rawValidators)}_setAsyncValidators(T){this._rawAsyncValidators=T||[],this._composedAsyncValidatorFn=kn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(T){this._onDestroyCallbacks.push(T)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(T=>T()),this._onDestroyCallbacks=[]}reset(T){this.control&&this.control.reset(T)}hasError(T,S){return!!this.control&&this.control.hasError(T,S)}getError(T,S){return this.control?this.control.getError(T,S):null}}class q extends He{get formDirective(){return null}get path(){return null}}class ne extends He{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class at{constructor(T){this._cd=T}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ge=(()=>{class I extends at{constructor(S){super(S)}}return I.\u0275fac=function(S){return new(S||I)(g.Y36(ne,2))},I.\u0275dir=g.lG2({type:I,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(S,H){2&S&&g.ekj("ng-untouched",H.isUntouched)("ng-touched",H.isTouched)("ng-pristine",H.isPristine)("ng-dirty",H.isDirty)("ng-valid",H.isValid)("ng-invalid",H.isInvalid)("ng-pending",H.isPending)},features:[g.qOj]}),I})(),We=(()=>{class I extends at{constructor(S){super(S)}}return I.\u0275fac=function(S){return new(S||I)(g.Y36(q,10))},I.\u0275dir=g.lG2({type:I,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(S,H){2&S&&g.ekj("ng-untouched",H.isUntouched)("ng-touched",H.isTouched)("ng-pristine",H.isPristine)("ng-dirty",H.isDirty)("ng-valid",H.isValid)("ng-invalid",H.isInvalid)("ng-pending",H.isPending)("ng-submitted",H.isSubmitted)},features:[g.qOj]}),I})();const sn="VALID",ye="INVALID",he="PENDING",De="DISABLED";function st(I){return(Fn(I)?I.validators:I)||null}function Rt(I,T){return(Fn(T)?T.asyncValidators:I)||null}function Fn(I){return null!=I&&!Array.isArray(I)&&"object"==typeof I}function ar(I,T,S){const H=I.controls;if(!(T?Object.keys(H):H).length)throw new g.vHH(1e3,"");if(!H[S])throw new g.vHH(1001,"")}function cn(I,T,S){I._forEachChild((H,Ee)=>{if(void 0===S[Ee])throw new g.vHH(1002,"")})}class Be{constructor(T,S){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(T),this._assignAsyncValidators(S)}get validator(){return this._composedValidatorFn}set validator(T){this._rawValidators=this._composedValidatorFn=T}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(T){this._rawAsyncValidators=this._composedAsyncValidatorFn=T}get parent(){return this._parent}get valid(){return this.status===sn}get invalid(){return this.status===ye}get pending(){return this.status==he}get disabled(){return this.status===De}get enabled(){return this.status!==De}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(T){this._assignValidators(T)}setAsyncValidators(T){this._assignAsyncValidators(T)}addValidators(T){this.setValidators(Vn(T,this._rawValidators))}addAsyncValidators(T){this.setAsyncValidators(Vn(T,this._rawAsyncValidators))}removeValidators(T){this.setValidators(Kt(T,this._rawValidators))}removeAsyncValidators(T){this.setAsyncValidators(Kt(T,this._rawAsyncValidators))}hasValidator(T){return $n(this._rawValidators,T)}hasAsyncValidator(T){return $n(this._rawAsyncValidators,T)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(T={}){this.touched=!0,this._parent&&!T.onlySelf&&this._parent.markAsTouched(T)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(T=>T.markAllAsTouched())}markAsUntouched(T={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(S=>{S.markAsUntouched({onlySelf:!0})}),this._parent&&!T.onlySelf&&this._parent._updateTouched(T)}markAsDirty(T={}){this.pristine=!1,this._parent&&!T.onlySelf&&this._parent.markAsDirty(T)}markAsPristine(T={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(S=>{S.markAsPristine({onlySelf:!0})}),this._parent&&!T.onlySelf&&this._parent._updatePristine(T)}markAsPending(T={}){this.status=he,!1!==T.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!T.onlySelf&&this._parent.markAsPending(T)}disable(T={}){const S=this._parentMarkedDirty(T.onlySelf);this.status=De,this.errors=null,this._forEachChild(H=>{H.disable({...T,onlySelf:!0})}),this._updateValue(),!1!==T.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...T,skipPristineCheck:S}),this._onDisabledChange.forEach(H=>H(!0))}enable(T={}){const S=this._parentMarkedDirty(T.onlySelf);this.status=sn,this._forEachChild(H=>{H.enable({...T,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:T.emitEvent}),this._updateAncestors({...T,skipPristineCheck:S}),this._onDisabledChange.forEach(H=>H(!1))}_updateAncestors(T){this._parent&&!T.onlySelf&&(this._parent.updateValueAndValidity(T),T.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(T){this._parent=T}getRawValue(){return this.value}updateValueAndValidity(T={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===sn||this.status===he)&&this._runAsyncValidator(T.emitEvent)),!1!==T.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!T.onlySelf&&this._parent.updateValueAndValidity(T)}_updateTreeValidity(T={emitEvent:!0}){this._forEachChild(S=>S._updateTreeValidity(T)),this.updateValueAndValidity({onlySelf:!0,emitEvent:T.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?De:sn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(T){if(this.asyncValidator){this.status=he,this._hasOwnPendingAsyncValidator=!0;const S=Et(this.asyncValidator(this));this._asyncValidationSubscription=S.subscribe(H=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(H,{emitEvent:T})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(T,S={}){this.errors=T,this._updateControlsErrors(!1!==S.emitEvent)}get(T){let S=T;return null==S||(Array.isArray(S)||(S=S.split(".")),0===S.length)?null:S.reduce((H,Ee)=>H&&H._find(Ee),this)}getError(T,S){const H=S?this.get(S):this;return H&&H.errors?H.errors[T]:null}hasError(T,S){return!!this.getError(T,S)}get root(){let T=this;for(;T._parent;)T=T._parent;return T}_updateControlsErrors(T){this.status=this._calculateStatus(),T&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(T)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?De:this.errors?ye:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(he)?he:this._anyControlsHaveStatus(ye)?ye:sn}_anyControlsHaveStatus(T){return this._anyControls(S=>S.status===T)}_anyControlsDirty(){return this._anyControls(T=>T.dirty)}_anyControlsTouched(){return this._anyControls(T=>T.touched)}_updatePristine(T={}){this.pristine=!this._anyControlsDirty(),this._parent&&!T.onlySelf&&this._parent._updatePristine(T)}_updateTouched(T={}){this.touched=this._anyControlsTouched(),this._parent&&!T.onlySelf&&this._parent._updateTouched(T)}_registerOnCollectionChange(T){this._onCollectionChange=T}_setUpdateStrategy(T){Fn(T)&&null!=T.updateOn&&(this._updateOn=T.updateOn)}_parentMarkedDirty(T){return!T&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(T){return null}_assignValidators(T){this._rawValidators=Array.isArray(T)?T.slice():T,this._composedValidatorFn=function Ze(I){return Array.isArray(I)?Nn(I):I||null}(this._rawValidators)}_assignAsyncValidators(T){this._rawAsyncValidators=Array.isArray(T)?T.slice():T,this._composedAsyncValidatorFn=function vn(I){return Array.isArray(I)?kn(I):I||null}(this._rawAsyncValidators)}}class me extends Be{constructor(T,S,H){super(st(S),Rt(H,S)),this.controls=T,this._initObservables(),this._setUpdateStrategy(S),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(T,S){return this.controls[T]?this.controls[T]:(this.controls[T]=S,S.setParent(this),S._registerOnCollectionChange(this._onCollectionChange),S)}addControl(T,S,H={}){this.registerControl(T,S),this.updateValueAndValidity({emitEvent:H.emitEvent}),this._onCollectionChange()}removeControl(T,S={}){this.controls[T]&&this.controls[T]._registerOnCollectionChange(()=>{}),delete this.controls[T],this.updateValueAndValidity({emitEvent:S.emitEvent}),this._onCollectionChange()}setControl(T,S,H={}){this.controls[T]&&this.controls[T]._registerOnCollectionChange(()=>{}),delete this.controls[T],S&&this.registerControl(T,S),this.updateValueAndValidity({emitEvent:H.emitEvent}),this._onCollectionChange()}contains(T){return this.controls.hasOwnProperty(T)&&this.controls[T].enabled}setValue(T,S={}){cn(this,0,T),Object.keys(T).forEach(H=>{ar(this,!0,H),this.controls[H].setValue(T[H],{onlySelf:!0,emitEvent:S.emitEvent})}),this.updateValueAndValidity(S)}patchValue(T,S={}){null!=T&&(Object.keys(T).forEach(H=>{const Ee=this.controls[H];Ee&&Ee.patchValue(T[H],{onlySelf:!0,emitEvent:S.emitEvent})}),this.updateValueAndValidity(S))}reset(T={},S={}){this._forEachChild((H,Ee)=>{H.reset(T[Ee],{onlySelf:!0,emitEvent:S.emitEvent})}),this._updatePristine(S),this._updateTouched(S),this.updateValueAndValidity(S)}getRawValue(){return this._reduceChildren({},(T,S,H)=>(T[H]=S.getRawValue(),T))}_syncPendingControls(){let T=this._reduceChildren(!1,(S,H)=>!!H._syncPendingControls()||S);return T&&this.updateValueAndValidity({onlySelf:!0}),T}_forEachChild(T){Object.keys(this.controls).forEach(S=>{const H=this.controls[S];H&&T(H,S)})}_setUpControls(){this._forEachChild(T=>{T.setParent(this),T._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(T){for(const[S,H]of Object.entries(this.controls))if(this.contains(S)&&T(H))return!0;return!1}_reduceValue(){return this._reduceChildren({},(S,H,Ee)=>((H.enabled||this.disabled)&&(S[Ee]=H.value),S))}_reduceChildren(T,S){let H=T;return this._forEachChild((Ee,mt)=>{H=S(H,Ee,mt)}),H}_allControlsDisabled(){for(const T of Object.keys(this.controls))if(this.controls[T].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(T){return this.controls.hasOwnProperty(T)?this.controls[T]:null}}class ft extends me{}const on=new g.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Pn}),Pn="always";function xr(I,T,S=Pn){ji(I,T),T.valueAccessor.writeValue(I.value),(I.disabled||"always"===S)&&T.valueAccessor.setDisabledState?.(I.disabled),function os(I,T){T.valueAccessor.registerOnChange(S=>{I._pendingValue=S,I._pendingChange=!0,I._pendingDirty=!0,"change"===I.updateOn&&Mr(I,T)})}(I,T),function Dr(I,T){const S=(H,Ee)=>{T.valueAccessor.writeValue(H),Ee&&T.viewToModelUpdate(H)};I.registerOnChange(S),T._registerOnDestroy(()=>{I._unregisterOnChange(S)})}(I,T),function Jn(I,T){T.valueAccessor.registerOnTouched(()=>{I._pendingTouched=!0,"blur"===I.updateOn&&I._pendingChange&&Mr(I,T),"submit"!==I.updateOn&&I.markAsTouched()})}(I,T),function Rs(I,T){if(T.valueAccessor.setDisabledState){const S=H=>{T.valueAccessor.setDisabledState(H)};I.registerOnDisabledChange(S),T._registerOnDestroy(()=>{I._unregisterOnDisabledChange(S)})}}(I,T)}function Li(I,T,S=!0){const H=()=>{};T.valueAccessor&&(T.valueAccessor.registerOnChange(H),T.valueAccessor.registerOnTouched(H)),Si(I,T),I&&(T._invokeOnDestroyCallbacks(),I._registerOnCollectionChange(()=>{}))}function nr(I,T){I.forEach(S=>{S.registerOnValidatorChange&&S.registerOnValidatorChange(T)})}function ji(I,T){const S=kr(I);null!==T.validator?I.setValidators(_r(S,T.validator)):"function"==typeof S&&I.setValidators([S]);const H=nn(I);null!==T.asyncValidator?I.setAsyncValidators(_r(H,T.asyncValidator)):"function"==typeof H&&I.setAsyncValidators([H]);const Ee=()=>I.updateValueAndValidity();nr(T._rawValidators,Ee),nr(T._rawAsyncValidators,Ee)}function Si(I,T){let S=!1;if(null!==I){if(null!==T.validator){const Ee=kr(I);if(Array.isArray(Ee)&&Ee.length>0){const mt=Ee.filter(In=>In!==T.validator);mt.length!==Ee.length&&(S=!0,I.setValidators(mt))}}if(null!==T.asyncValidator){const Ee=nn(I);if(Array.isArray(Ee)&&Ee.length>0){const mt=Ee.filter(In=>In!==T.asyncValidator);mt.length!==Ee.length&&(S=!0,I.setAsyncValidators(mt))}}}const H=()=>{};return nr(T._rawValidators,H),nr(T._rawAsyncValidators,H),S}function Mr(I,T){I._pendingDirty&&I.markAsDirty(),I.setValue(I._pendingValue,{emitModelToViewChange:!1}),T.viewToModelUpdate(I._pendingValue),I._pendingChange=!1}function $i(I,T){const S=I.indexOf(T);S>-1&&I.splice(S,1)}function Xr(I){return"object"==typeof I&&null!==I&&2===Object.keys(I).length&&"value"in I&&"disabled"in I}const yr=class extends Be{constructor(T=null,S,H){super(st(S),Rt(H,S)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(T),this._setUpdateStrategy(S),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Fn(S)&&(S.nonNullable||S.initialValueIsDefault)&&(this.defaultValue=Xr(T)?T.value:T)}setValue(T,S={}){this.value=this._pendingValue=T,this._onChange.length&&!1!==S.emitModelToViewChange&&this._onChange.forEach(H=>H(this.value,!1!==S.emitViewToModelChange)),this.updateValueAndValidity(S)}patchValue(T,S={}){this.setValue(T,S)}reset(T=this.defaultValue,S={}){this._applyFormState(T),this.markAsPristine(S),this.markAsUntouched(S),this.setValue(this.value,S),this._pendingChange=!1}_updateValue(){}_anyControls(T){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(T){this._onChange.push(T)}_unregisterOnChange(T){$i(this._onChange,T)}registerOnDisabledChange(T){this._onDisabledChange.push(T)}_unregisterOnDisabledChange(T){$i(this._onDisabledChange,T)}_forEachChild(T){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(T){Xr(T)?(this.value=this._pendingValue=T.value,T.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=T}};let Bn=(()=>{class I{}return I.\u0275fac=function(S){return new(S||I)},I.\u0275dir=g.lG2({type:I,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),I})(),ci=(()=>{class I{}return I.\u0275fac=function(S){return new(S||I)},I.\u0275mod=g.oAB({type:I}),I.\u0275inj=g.cJS({}),I})();const js=new g.OlP("NgModelWithFormControlWarning"),$s={provide:q,useExisting:(0,g.Gpc)(()=>Os)};let Os=(()=>{class I extends q{constructor(S,H,Ee){super(),this.callSetDisabledState=Ee,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(S),this._setAsyncValidators(H)}ngOnChanges(S){this._checkFormPresent(),S.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Si(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(S){const H=this.form.get(S.path);return xr(H,S,this.callSetDisabledState),H.updateValueAndValidity({emitEvent:!1}),this.directives.push(S),H}getControl(S){return this.form.get(S.path)}removeControl(S){Li(S.control||null,S,!1),function as(I,T){const S=I.indexOf(T);S>-1&&I.splice(S,1)}(this.directives,S)}addFormGroup(S){this._setUpFormContainer(S)}removeFormGroup(S){this._cleanUpFormContainer(S)}getFormGroup(S){return this.form.get(S.path)}addFormArray(S){this._setUpFormContainer(S)}removeFormArray(S){this._cleanUpFormContainer(S)}getFormArray(S){return this.form.get(S.path)}updateModel(S,H){this.form.get(S.path).setValue(H)}onSubmit(S){return this.submitted=!0,function bi(I,T){I._syncPendingControls(),T.forEach(S=>{const H=S.control;"submit"===H.updateOn&&H._pendingChange&&(S.viewToModelUpdate(H._pendingValue),H._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(S),"dialog"===S?.target?.method}onReset(){this.resetForm()}resetForm(S){this.form.reset(S),this.submitted=!1}_updateDomValue(){this.directives.forEach(S=>{const H=S.control,Ee=this.form.get(S.path);H!==Ee&&(Li(H||null,S),(I=>I instanceof yr)(Ee)&&(xr(Ee,S,this.callSetDisabledState),S.control=Ee))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(S){const H=this.form.get(S.path);(function Tr(I,T){ji(I,T)})(H,S),H.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(S){if(this.form){const H=this.form.get(S.path);H&&function Qr(I,T){return Si(I,T)}(H,S)&&H.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ji(this.form,this),this._oldForm&&Si(this._oldForm,this)}_checkFormPresent(){}}return I.\u0275fac=function(S){return new(S||I)(g.Y36(Ye,10),g.Y36(de,10),g.Y36(on,8))},I.\u0275dir=g.lG2({type:I,selectors:[["","formGroup",""]],hostBindings:function(S,H){1&S&&g.NdJ("submit",function(mt){return H.onSubmit(mt)})("reset",function(){return H.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([$s]),g.qOj,g.TTD]}),I})();const Gi={provide:ne,useExisting:(0,g.Gpc)(()=>Zs)};let Zs=(()=>{class I extends ne{constructor(S,H,Ee,mt,In){super(),this._ngModelWarningConfig=In,this._added=!1,this.update=new g.vpe,this._ngModelWarningSent=!1,this._parent=S,this._setValidators(H),this._setAsyncValidators(Ee),this.valueAccessor=function ur(I,T){if(!T)return null;let S,H,Ee;return Array.isArray(T),T.forEach(mt=>{mt.constructor===se?S=mt:function Pr(I){return Object.getPrototypeOf(I.constructor)===qe}(mt)?H=mt:Ee=mt}),Ee||H||S||null}(0,mt)}set isDisabled(S){}ngOnChanges(S){this._added||this._setUpControl(),function Jr(I,T){if(!I.hasOwnProperty("model"))return!1;const S=I.model;return!!S.isFirstChange()||!Object.is(T,S.currentValue)}(S,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(S){this.viewModel=S,this.update.emit(S)}get path(){return function Qn(I,T){return[...T.path,I]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return I._ngModelWarningSentOnce=!1,I.\u0275fac=function(S){return new(S||I)(g.Y36(q,13),g.Y36(Ye,10),g.Y36(de,10),g.Y36(Qe,10),g.Y36(js,8))},I.\u0275dir=g.lG2({type:I,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g._Bn([Gi]),g.qOj,g.TTD]}),I})();const ko={provide:Qe,useExisting:(0,g.Gpc)(()=>eo),multi:!0};function So(I,T){return null==I?`${T}`:(T&&"object"==typeof T&&(T="Object"),`${I}: ${T}`.slice(0,50))}let eo=(()=>{class I extends qe{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(S){this._compareWith=S}writeValue(S){this.value=S;const Ee=So(this._getOptionId(S),S);this.setProperty("value",Ee)}registerOnChange(S){this.onChange=H=>{this.value=this._getOptionValue(H),S(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(S){for(const H of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(H),S))return H;return null}_getOptionValue(S){const H=function mi(I){return I.split(":")[0]}(S);return this._optionMap.has(H)?this._optionMap.get(H):S}}return I.\u0275fac=function(){let T;return function(H){return(T||(T=g.n5z(I)))(H||I)}}(),I.\u0275dir=g.lG2({type:I,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(S,H){1&S&&g.NdJ("change",function(mt){return H.onChange(mt.target.value)})("blur",function(){return H.onTouched()})},inputs:{compareWith:"compareWith"},features:[g._Bn([ko]),g.qOj]}),I})(),ls=(()=>{class I{constructor(S,H,Ee){this._element=S,this._renderer=H,this._select=Ee,this._select&&(this.id=this._select._registerOption())}set ngValue(S){null!=this._select&&(this._select._optionMap.set(this.id,S),this._setElementValue(So(this.id,S)),this._select.writeValue(this._select.value))}set value(S){this._setElementValue(S),this._select&&this._select.writeValue(this._select.value)}_setElementValue(S){this._renderer.setProperty(this._element.nativeElement,"value",S)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return I.\u0275fac=function(S){return new(S||I)(g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(eo,9))},I.\u0275dir=g.lG2({type:I,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),I})();const cs={provide:Qe,useExisting:(0,g.Gpc)(()=>cr),multi:!0};function Gs(I,T){return null==I?`${T}`:("string"==typeof T&&(T=`'${T}'`),T&&"object"==typeof T&&(T="Object"),`${I}: ${T}`.slice(0,50))}let cr=(()=>{class I extends qe{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(S){this._compareWith=S}writeValue(S){let H;if(this.value=S,Array.isArray(S)){const Ee=S.map(mt=>this._getOptionId(mt));H=(mt,In)=>{mt._setSelected(Ee.indexOf(In.toString())>-1)}}else H=(Ee,mt)=>{Ee._setSelected(!1)};this._optionMap.forEach(H)}registerOnChange(S){this.onChange=H=>{const Ee=[],mt=H.selectedOptions;if(void 0!==mt){const In=mt;for(let An=0;An<In.length;An++){const hr=this._getOptionValue(In[An].value);Ee.push(hr)}}else{const In=H.options;for(let An=0;An<In.length;An++){const lr=In[An];if(lr.selected){const hr=this._getOptionValue(lr.value);Ee.push(hr)}}}this.value=Ee,S(Ee)}}_registerOption(S){const H=(this._idCounter++).toString();return this._optionMap.set(H,S),H}_getOptionId(S){for(const H of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(H)._value,S))return H;return null}_getOptionValue(S){const H=function Ji(I){return I.split(":")[0]}(S);return this._optionMap.has(H)?this._optionMap.get(H)._value:S}}return I.\u0275fac=function(){let T;return function(H){return(T||(T=g.n5z(I)))(H||I)}}(),I.\u0275dir=g.lG2({type:I,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(S,H){1&S&&g.NdJ("change",function(mt){return H.onChange(mt.target)})("blur",function(){return H.onTouched()})},inputs:{compareWith:"compareWith"},features:[g._Bn([cs]),g.qOj]}),I})(),Ni=(()=>{class I{constructor(S,H,Ee){this._element=S,this._renderer=H,this._select=Ee,this._select&&(this.id=this._select._registerOption(this))}set ngValue(S){null!=this._select&&(this._value=S,this._setElementValue(Gs(this.id,S)),this._select.writeValue(this._select.value))}set value(S){this._select?(this._value=S,this._setElementValue(Gs(this.id,S)),this._select.writeValue(this._select.value)):this._setElementValue(S)}_setElementValue(S){this._renderer.setProperty(this._element.nativeElement,"value",S)}_setSelected(S){this._renderer.setProperty(this._element.nativeElement,"selected",S)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return I.\u0275fac=function(S){return new(S||I)(g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(cr,9))},I.\u0275dir=g.lG2({type:I,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),I})(),xi=(()=>{class I{constructor(){this._validator=Nt}ngOnChanges(S){if(this.inputName in S){const H=this.normalizeInput(S[this.inputName].currentValue);this._enabled=this.enabled(H),this._validator=this._enabled?this.createValidator(H):Nt,this._onChange&&this._onChange()}}validate(S){return this._validator(S)}registerOnValidatorChange(S){this._onChange=S}enabled(S){return null!=S}}return I.\u0275fac=function(S){return new(S||I)},I.\u0275dir=g.lG2({type:I,features:[g.TTD]}),I})();const Wr={provide:Ye,useExisting:(0,g.Gpc)(()=>Ii),multi:!0};let Ii=(()=>{class I extends xi{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=g.D6c,this.createValidator=S=>Ie}enabled(S){return S}}return I.\u0275fac=function(){let T;return function(H){return(T||(T=g.n5z(I)))(H||I)}}(),I.\u0275dir=g.lG2({type:I,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(S,H){2&S&&g.uIk("required",H._enabled?"":null)},inputs:{required:"required"},features:[g._Bn([Wr]),g.qOj]}),I})(),qi=(()=>{class I{}return I.\u0275fac=function(S){return new(S||I)},I.\u0275mod=g.oAB({type:I}),I.\u0275inj=g.cJS({imports:[ci]}),I})(),hs=(()=>{class I{static withConfig(S){return{ngModule:I,providers:[{provide:on,useValue:S.callSetDisabledState??Pn}]}}}return I.\u0275fac=function(S){return new(S||I)},I.\u0275mod=g.oAB({type:I}),I.\u0275inj=g.cJS({imports:[qi]}),I})(),En=(()=>{class I{static withConfig(S){return{ngModule:I,providers:[{provide:js,useValue:S.warnOnNgModelWithFormControl??"always"},{provide:on,useValue:S.callSetDisabledState??Pn}]}}}return I.\u0275fac=function(S){return new(S||I)},I.\u0275mod=g.oAB({type:I}),I.\u0275inj=g.cJS({imports:[qi]}),I})();class xo extends Be{constructor(T,S,H){super(st(S),Rt(H,S)),this.controls=T,this._initObservables(),this._setUpdateStrategy(S),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(T){return this.controls[this._adjustIndex(T)]}push(T,S={}){this.controls.push(T),this._registerControl(T),this.updateValueAndValidity({emitEvent:S.emitEvent}),this._onCollectionChange()}insert(T,S,H={}){this.controls.splice(T,0,S),this._registerControl(S),this.updateValueAndValidity({emitEvent:H.emitEvent})}removeAt(T,S={}){let H=this._adjustIndex(T);H<0&&(H=0),this.controls[H]&&this.controls[H]._registerOnCollectionChange(()=>{}),this.controls.splice(H,1),this.updateValueAndValidity({emitEvent:S.emitEvent})}setControl(T,S,H={}){let Ee=this._adjustIndex(T);Ee<0&&(Ee=0),this.controls[Ee]&&this.controls[Ee]._registerOnCollectionChange(()=>{}),this.controls.splice(Ee,1),S&&(this.controls.splice(Ee,0,S),this._registerControl(S)),this.updateValueAndValidity({emitEvent:H.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(T,S={}){cn(this,0,T),T.forEach((H,Ee)=>{ar(this,!1,Ee),this.at(Ee).setValue(H,{onlySelf:!0,emitEvent:S.emitEvent})}),this.updateValueAndValidity(S)}patchValue(T,S={}){null!=T&&(T.forEach((H,Ee)=>{this.at(Ee)&&this.at(Ee).patchValue(H,{onlySelf:!0,emitEvent:S.emitEvent})}),this.updateValueAndValidity(S))}reset(T=[],S={}){this._forEachChild((H,Ee)=>{H.reset(T[Ee],{onlySelf:!0,emitEvent:S.emitEvent})}),this._updatePristine(S),this._updateTouched(S),this.updateValueAndValidity(S)}getRawValue(){return this.controls.map(T=>T.getRawValue())}clear(T={}){this.controls.length<1||(this._forEachChild(S=>S._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:T.emitEvent}))}_adjustIndex(T){return T<0?T+this.length:T}_syncPendingControls(){let T=this.controls.reduce((S,H)=>!!H._syncPendingControls()||S,!1);return T&&this.updateValueAndValidity({onlySelf:!0}),T}_forEachChild(T){this.controls.forEach((S,H)=>{T(S,H)})}_updateValue(){this.value=this.controls.filter(T=>T.enabled||this.disabled).map(T=>T.value)}_anyControls(T){return this.controls.some(S=>S.enabled&&T(S))}_setUpControls(){this._forEachChild(T=>this._registerControl(T))}_allControlsDisabled(){for(const T of this.controls)if(T.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(T){T.setParent(this),T._registerOnCollectionChange(this._onCollectionChange)}_find(T){return this.at(T)??null}}function $(I){return!!I&&(void 0!==I.asyncValidators||void 0!==I.validators||void 0!==I.updateOn)}let P=(()=>{class I{constructor(){this.useNonNullable=!1}get nonNullable(){const S=new I;return S.useNonNullable=!0,S}group(S,H=null){const Ee=this._reduceControls(S);let mt={};return $(H)?mt=H:null!==H&&(mt.validators=H.validator,mt.asyncValidators=H.asyncValidator),new me(Ee,mt)}record(S,H=null){const Ee=this._reduceControls(S);return new ft(Ee,H)}control(S,H,Ee){let mt={};return this.useNonNullable?($(H)?mt=H:(mt.validators=H,mt.asyncValidators=Ee),new yr(S,{...mt,nonNullable:!0})):new yr(S,H,Ee)}array(S,H,Ee){const mt=S.map(In=>this._createControl(In));return new xo(mt,H,Ee)}_reduceControls(S){const H={};return Object.keys(S).forEach(Ee=>{H[Ee]=this._createControl(S[Ee])}),H}_createControl(S){return S instanceof yr||S instanceof Be?S:Array.isArray(S)?this.control(S[0],S.length>1?S[1]:null,S.length>2?S[2]:null):this.control(S)}}return I.\u0275fac=function(S){return new(S||I)},I.\u0275prov=g.Yz7({token:I,factory:I.\u0275fac,providedIn:En}),I})()},1481:(Ut,ze,L)=>{L.d(ze,{Dx:()=>Ge,b2:()=>q,q6:()=>$n});var g=L(6895),l=L(4650);class G extends g.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ge extends G{static makeCurrent(){(0,g.HT)(new ge)}onAndCancel(me,ce,Xe){return me.addEventListener(ce,Xe,!1),()=>{me.removeEventListener(ce,Xe,!1)}}dispatchEvent(me,ce){me.dispatchEvent(ce)}remove(me){me.parentNode&&me.parentNode.removeChild(me)}createElement(me,ce){return(ce=ce||this.getDefaultDocument()).createElement(me)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(me){return me.nodeType===Node.ELEMENT_NODE}isShadowRoot(me){return me instanceof DocumentFragment}getGlobalEventTarget(me,ce){return"window"===ce?window:"document"===ce?me:"body"===ce?me.body:null}getBaseHref(me){const ce=function be(){return U=U||document.querySelector("base"),U?U.getAttribute("href"):null}();return null==ce?null:function Ae(Be){we=we||document.createElement("a"),we.setAttribute("href",Be);const me=we.pathname;return"/"===me.charAt(0)?me:`/${me}`}(ce)}resetBaseElement(){U=null}getUserAgent(){return window.navigator.userAgent}getCookie(me){return(0,g.Mx)(document.cookie,me)}}let we,U=null;const xe=new l.OlP("TRANSITION_ID"),ie=[{provide:l.ip1,useFactory:function ue(Be,me,ce){return()=>{ce.get(l.CZH).donePromise.then(()=>{const Xe=(0,g.q)(),ft=me.querySelectorAll(`style[ng-transition="${Be}"]`);for(let dn=0;dn<ft.length;dn++)Xe.remove(ft[dn])})}},deps:[xe,g.K0,l.zs3],multi:!0}];let nt=(()=>{class Be{build(){return new XMLHttpRequest}}return Be.\u0275fac=function(ce){return new(ce||Be)},Be.\u0275prov=l.Yz7({token:Be,factory:Be.\u0275fac}),Be})();const qe=new l.OlP("EventManagerPlugins");let Qe=(()=>{class Be{constructor(ce,Xe){this._zone=Xe,this._eventNameToPlugin=new Map,ce.forEach(ft=>ft.manager=this),this._plugins=ce.slice().reverse()}addEventListener(ce,Xe,ft){return this._findPluginFor(Xe).addEventListener(ce,Xe,ft)}addGlobalEventListener(ce,Xe,ft){return this._findPluginFor(Xe).addGlobalEventListener(ce,Xe,ft)}getZone(){return this._zone}_findPluginFor(ce){const Xe=this._eventNameToPlugin.get(ce);if(Xe)return Xe;const ft=this._plugins;for(let dn=0;dn<ft.length;dn++){const on=ft[dn];if(on.supports(ce))return this._eventNameToPlugin.set(ce,on),on}throw new Error(`No event manager plugin found for event ${ce}`)}}return Be.\u0275fac=function(ce){return new(ce||Be)(l.LFG(qe),l.LFG(l.R0b))},Be.\u0275prov=l.Yz7({token:Be,factory:Be.\u0275fac}),Be})();class ct{constructor(me){this._doc=me}addGlobalEventListener(me,ce,Xe){const ft=(0,g.q)().getGlobalEventTarget(this._doc,me);if(!ft)throw new Error(`Unsupported event target ${ft} for event ${ce}`);return this.addEventListener(ft,ce,Xe)}}let Ne=(()=>{class Be{constructor(){this._stylesSet=new Set}addStyles(ce){const Xe=new Set;ce.forEach(ft=>{this._stylesSet.has(ft)||(this._stylesSet.add(ft),Xe.add(ft))}),this.onStylesAdded(Xe)}onStylesAdded(ce){}getAllStyles(){return Array.from(this._stylesSet)}}return Be.\u0275fac=function(ce){return new(ce||Be)},Be.\u0275prov=l.Yz7({token:Be,factory:Be.\u0275fac}),Be})(),Me=(()=>{class Be extends Ne{constructor(ce){super(),this._doc=ce,this._hostNodes=new Map,this._hostNodes.set(ce.head,[])}_addStylesToHost(ce,Xe,ft){ce.forEach(dn=>{const on=this._doc.createElement("style");on.textContent=dn,ft.push(Xe.appendChild(on))})}addHost(ce){const Xe=[];this._addStylesToHost(this._stylesSet,ce,Xe),this._hostNodes.set(ce,Xe)}removeHost(ce){const Xe=this._hostNodes.get(ce);Xe&&Xe.forEach(Fe),this._hostNodes.delete(ce)}onStylesAdded(ce){this._hostNodes.forEach((Xe,ft)=>{this._addStylesToHost(ce,ft,Xe)})}ngOnDestroy(){this._hostNodes.forEach(ce=>ce.forEach(Fe))}}return Be.\u0275fac=function(ce){return new(ce||Be)(l.LFG(g.K0))},Be.\u0275prov=l.Yz7({token:Be,factory:Be.\u0275fac}),Be})();function Fe(Be){(0,g.q)().remove(Be)}const et={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},se=/%COMP%/g;function W(Be,me){return me.flat(100).map(ce=>ce.replace(se,Be))}function te(Be){return me=>{if("__ngUnwrap__"===me)return Be;!1===Be(me)&&(me.preventDefault(),me.returnValue=!1)}}let Ie=(()=>{class Be{constructor(ce,Xe,ft){this.eventManager=ce,this.sharedStylesHost=Xe,this.appId=ft,this.rendererByCompId=new Map,this.defaultRenderer=new lt(ce)}createRenderer(ce,Xe){if(!ce||!Xe)return this.defaultRenderer;switch(Xe.encapsulation){case l.ifc.Emulated:{let ft=this.rendererByCompId.get(Xe.id);return ft||(ft=new Qt(this.eventManager,this.sharedStylesHost,Xe,this.appId),this.rendererByCompId.set(Xe.id,ft)),ft.applyToHost(ce),ft}case 1:case l.ifc.ShadowDom:return new Nt(this.eventManager,this.sharedStylesHost,ce,Xe);default:if(!this.rendererByCompId.has(Xe.id)){const ft=W(Xe.id,Xe.styles);this.sharedStylesHost.addStyles(ft),this.rendererByCompId.set(Xe.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Be.\u0275fac=function(ce){return new(ce||Be)(l.LFG(Qe),l.LFG(Me),l.LFG(l.AFp))},Be.\u0275prov=l.Yz7({token:Be,factory:Be.\u0275fac}),Be})();class lt{constructor(me){this.eventManager=me,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(me,ce){return ce?document.createElementNS(et[ce]||ce,me):document.createElement(me)}createComment(me){return document.createComment(me)}createText(me){return document.createTextNode(me)}appendChild(me,ce){(Ot(me)?me.content:me).appendChild(ce)}insertBefore(me,ce,Xe){me&&(Ot(me)?me.content:me).insertBefore(ce,Xe)}removeChild(me,ce){me&&me.removeChild(ce)}selectRootElement(me,ce){let Xe="string"==typeof me?document.querySelector(me):me;if(!Xe)throw new Error(`The selector "${me}" did not match any elements`);return ce||(Xe.textContent=""),Xe}parentNode(me){return me.parentNode}nextSibling(me){return me.nextSibling}setAttribute(me,ce,Xe,ft){if(ft){ce=ft+":"+ce;const dn=et[ft];dn?me.setAttributeNS(dn,ce,Xe):me.setAttribute(ce,Xe)}else me.setAttribute(ce,Xe)}removeAttribute(me,ce,Xe){if(Xe){const ft=et[Xe];ft?me.removeAttributeNS(ft,ce):me.removeAttribute(`${Xe}:${ce}`)}else me.removeAttribute(ce)}addClass(me,ce){me.classList.add(ce)}removeClass(me,ce){me.classList.remove(ce)}setStyle(me,ce,Xe,ft){ft&(l.JOm.DashCase|l.JOm.Important)?me.style.setProperty(ce,Xe,ft&l.JOm.Important?"important":""):me.style[ce]=Xe}removeStyle(me,ce,Xe){Xe&l.JOm.DashCase?me.style.removeProperty(ce):me.style[ce]=""}setProperty(me,ce,Xe){me[ce]=Xe}setValue(me,ce){me.nodeValue=ce}listen(me,ce,Xe){return"string"==typeof me?this.eventManager.addGlobalEventListener(me,ce,te(Xe)):this.eventManager.addEventListener(me,ce,te(Xe))}}function Ot(Be){return"TEMPLATE"===Be.tagName&&void 0!==Be.content}class Qt extends lt{constructor(me,ce,Xe,ft){super(me),this.component=Xe;const dn=W(ft+"-"+Xe.id,Xe.styles);ce.addStyles(dn),this.contentAttr=function de(Be){return"_ngcontent-%COMP%".replace(se,Be)}(ft+"-"+Xe.id),this.hostAttr=function Oe(Be){return"_nghost-%COMP%".replace(se,Be)}(ft+"-"+Xe.id)}applyToHost(me){super.setAttribute(me,this.hostAttr,"")}createElement(me,ce){const Xe=super.createElement(me,ce);return super.setAttribute(Xe,this.contentAttr,""),Xe}}class Nt extends lt{constructor(me,ce,Xe,ft){super(me),this.sharedStylesHost=ce,this.hostEl=Xe,this.shadowRoot=Xe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const dn=W(ft.id,ft.styles);for(let on=0;on<dn.length;on++){const Pn=document.createElement("style");Pn.textContent=dn[on],this.shadowRoot.appendChild(Pn)}}nodeOrShadowRoot(me){return me===this.hostEl?this.shadowRoot:me}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(me,ce){return super.appendChild(this.nodeOrShadowRoot(me),ce)}insertBefore(me,ce,Xe){return super.insertBefore(this.nodeOrShadowRoot(me),ce,Xe)}removeChild(me,ce){return super.removeChild(this.nodeOrShadowRoot(me),ce)}parentNode(me){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(me)))}}let Pt=(()=>{class Be extends ct{constructor(ce){super(ce)}supports(ce){return!0}addEventListener(ce,Xe,ft){return ce.addEventListener(Xe,ft,!1),()=>this.removeEventListener(ce,Xe,ft)}removeEventListener(ce,Xe,ft){return ce.removeEventListener(Xe,ft)}}return Be.\u0275fac=function(ce){return new(ce||Be)(l.LFG(g.K0))},Be.\u0275prov=l.Yz7({token:Be,factory:Be.\u0275fac}),Be})();const Et=["alt","control","meta","shift"],Wt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qt={alt:Be=>Be.altKey,control:Be=>Be.ctrlKey,meta:Be=>Be.metaKey,shift:Be=>Be.shiftKey};let yn=(()=>{class Be extends ct{constructor(ce){super(ce)}supports(ce){return null!=Be.parseEventName(ce)}addEventListener(ce,Xe,ft){const dn=Be.parseEventName(Xe),on=Be.eventCallback(dn.fullKey,ft,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,g.q)().onAndCancel(ce,dn.domEventName,on))}static parseEventName(ce){const Xe=ce.toLowerCase().split("."),ft=Xe.shift();if(0===Xe.length||"keydown"!==ft&&"keyup"!==ft)return null;const dn=Be._normalizeKey(Xe.pop());let on="",Pn=Xe.indexOf("code");if(Pn>-1&&(Xe.splice(Pn,1),on="code."),Et.forEach(xr=>{const Li=Xe.indexOf(xr);Li>-1&&(Xe.splice(Li,1),on+=xr+".")}),on+=dn,0!=Xe.length||0===dn.length)return null;const Qn={};return Qn.domEventName=ft,Qn.fullKey=on,Qn}static matchEventFullKeyCode(ce,Xe){let ft=Wt[ce.key]||ce.key,dn="";return Xe.indexOf("code.")>-1&&(ft=ce.code,dn="code."),!(null==ft||!ft)&&(ft=ft.toLowerCase()," "===ft?ft="space":"."===ft&&(ft="dot"),Et.forEach(on=>{on!==ft&&(0,qt[on])(ce)&&(dn+=on+".")}),dn+=ft,dn===Xe)}static eventCallback(ce,Xe,ft){return dn=>{Be.matchEventFullKeyCode(dn,ce)&&ft.runGuarded(()=>Xe(dn))}}static _normalizeKey(ce){return"esc"===ce?"escape":ce}}return Be.\u0275fac=function(ce){return new(ce||Be)(l.LFG(g.K0))},Be.\u0275prov=l.Yz7({token:Be,factory:Be.\u0275fac}),Be})();const $n=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:g.bD},{provide:l.g9A,useValue:function _r(){ge.makeCurrent()},multi:!0},{provide:g.K0,useFactory:function nn(){return(0,l.RDi)(document),document},deps:[]}]),Vn=new l.OlP(""),Kt=[{provide:l.rWj,useClass:class pe{addToWindow(me){l.dqk.getAngularTestability=(Xe,ft=!0)=>{const dn=me.findTestabilityInTree(Xe,ft);if(null==dn)throw new Error("Could not find testability for element.");return dn},l.dqk.getAllAngularTestabilities=()=>me.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>me.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(Xe=>{const ft=l.dqk.getAllAngularTestabilities();let dn=ft.length,on=!1;const Pn=function(Qn){on=on||Qn,dn--,0==dn&&Xe(on)};ft.forEach(function(Qn){Qn.whenStable(Pn)})})}findTestabilityInTree(me,ce,Xe){return null==ce?null:me.getTestability(ce)??(Xe?(0,g.q)().isShadowRoot(ce)?this.findTestabilityInTree(me,ce.host,!0):this.findTestabilityInTree(me,ce.parentElement,!0):null)}},deps:[]},{provide:l.lri,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]}],He=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function kr(){return new l.qLn},deps:[]},{provide:qe,useClass:Pt,multi:!0,deps:[g.K0,l.R0b,l.Lbi]},{provide:qe,useClass:yn,multi:!0,deps:[g.K0]},{provide:Ie,useClass:Ie,deps:[Qe,Me,l.AFp]},{provide:l.FYo,useExisting:Ie},{provide:Ne,useExisting:Me},{provide:Me,useClass:Me,deps:[g.K0]},{provide:Qe,useClass:Qe,deps:[qe,l.R0b]},{provide:g.JF,useClass:nt,deps:[]},[]];let q=(()=>{class Be{constructor(ce){}static withServerTransition(ce){return{ngModule:Be,providers:[{provide:l.AFp,useValue:ce.appId},{provide:xe,useExisting:l.AFp},ie]}}}return Be.\u0275fac=function(ce){return new(ce||Be)(l.LFG(Vn,12))},Be.\u0275mod=l.oAB({type:Be}),Be.\u0275inj=l.cJS({providers:[...He,...Kt],imports:[g.ez,l.hGG]}),Be})(),Ge=(()=>{class Be{constructor(ce){this._doc=ce}getTitle(){return this._doc.title}setTitle(ce){this._doc.title=ce||""}}return Be.\u0275fac=function(ce){return new(ce||Be)(l.LFG(g.K0))},Be.\u0275prov=l.Yz7({token:Be,factory:function(ce){let Xe=null;return Xe=ce?new ce:function Ht(){return new Ge((0,l.LFG)(g.K0))}(),Xe},providedIn:"root"}),Be})();typeof window<"u"&&window},9051:(Ut,ze,L)=>{L.d(ze,{gz:()=>gi,F0:()=>Kn,rH:()=>Lo,Od:()=>Gn,Bz:()=>du,lC:()=>Ni});var g=L(4650),l=L(8996),G=L(9646),ge=L(7579);class U extends ge.x{constructor(E){super(),this._value=E}get value(){return this.getValue()}_subscribe(E){const y=super._subscribe(E);return!y.closed&&E.next(this._value),y}getValue(){const{hasError:E,thrownError:y,_value:A}=this;if(E)throw y;return this._throwIfClosed(),A}next(E){super.next(this._value=E)}}var be=L(6805),we=L(9751),Ae=L(4742),xe=L(4671),ue=L(3268),ie=L(7669),pe=L(1810),nt=L(5403),qe=L(9672);function Qe(...b){const E=(0,ie.yG)(b),y=(0,ie.jO)(b),{args:A,keys:N}=(0,Ae.D)(b);if(0===A.length)return(0,l.D)([],E);const z=new we.y(function ct(b,E,y=xe.y){return A=>{Ne(E,()=>{const{length:N}=b,z=new Array(N);let X=N,Re=N;for(let vt=0;vt<N;vt++)Ne(E,()=>{const Gt=(0,l.D)(b[vt],E);let Xt=!1;Gt.subscribe((0,nt.x)(A,er=>{z[vt]=er,Xt||(Xt=!0,Re--),Re||A.next(y(z.slice()))},()=>{--X||A.complete()}))},A)},A)}}(A,E,N?X=>(0,pe.n)(N,X):xe.y));return y?z.pipe((0,ue.Z)(y)):z}function Ne(b,E,y){b?(0,qe.f)(y,b,E):E()}var Me=L(7272),Fe=L(8421);function et(b){return new we.y(E=>{(0,Fe.Xf)(b()).subscribe(E)})}var se=L(9635),$e=L(576);function Le(b,E){const y=(0,$e.m)(b)?b:()=>b,A=N=>N.error(y());return new we.y(E?N=>E.schedule(A,0,N):A)}var ut=L(515),Ye=L(727),de=L(4482);function Oe(){return(0,de.e)((b,E)=>{let y=null;b._refCount++;const A=(0,nt.x)(E,void 0,void 0,void 0,()=>{if(!b||b._refCount<=0||0<--b._refCount)return void(y=null);const N=b._connection,z=y;y=null,N&&(!z||N===z)&&N.unsubscribe(),E.unsubscribe()});b.subscribe(A),A.closed||(y=b.connect())})}class W extends we.y{constructor(E,y){super(),this.source=E,this.subjectFactory=y,this._subject=null,this._refCount=0,this._connection=null,(0,de.A)(E)&&(this.lift=E.lift)}_subscribe(E){return this.getSubject().subscribe(E)}getSubject(){const E=this._subject;return(!E||E.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:E}=this;this._subject=this._connection=null,E?.unsubscribe()}connect(){let E=this._connection;if(!E){E=this._connection=new Ye.w0;const y=this.getSubject();E.add(this.source.subscribe((0,nt.x)(y,void 0,()=>{this._teardown(),y.complete()},A=>{this._teardown(),y.error(A)},()=>this._teardown()))),E.closed&&(this._connection=null,E=Ye.w0.EMPTY)}return E}refCount(){return Oe()(this)}}var te=L(6895),ae=L(4004),Ie=L(3900),lt=L(5698),pt=L(8675),Ct=L(9300),Ot=L(5577),Qt=L(590);function Nt(b,E){return(0,$e.m)(E)?(0,Ot.z)(b,E,1):(0,Ot.z)(b,1)}var Pt=L(8505);function Et(b){return(0,de.e)((E,y)=>{let z,A=null,N=!1;A=E.subscribe((0,nt.x)(y,void 0,void 0,X=>{z=(0,Fe.Xf)(b(X,Et(b)(E))),A?(A.unsubscribe(),A=null,z.subscribe(y)):N=!0})),N&&(A.unsubscribe(),A=null,z.subscribe(y))})}var Wt=L(5026);function qt(b){return b<=0?()=>ut.E:(0,de.e)((E,y)=>{let A=[];E.subscribe((0,nt.x)(y,N=>{A.push(N),b<A.length&&A.shift()},()=>{for(const N of A)y.next(N);y.complete()},void 0,()=>{A=null}))})}var yn=L(8068),$t=L(6590);function On(b,E){const y=arguments.length>=2;return A=>A.pipe(b?(0,Ct.h)((N,z)=>b(N,z,A)):xe.y,qt(1),y?(0,$t.d)(E):(0,yn.T)(()=>new be.K))}function kn(b){return(0,de.e)((E,y)=>{try{E.subscribe(y)}finally{y.add(b)}})}var _r=L(8189),kr=L(1481);const nn="primary",zn=Symbol("RouteTitle");class $n{constructor(E){this.params=E||{}}has(E){return Object.prototype.hasOwnProperty.call(this.params,E)}get(E){if(this.has(E)){const y=this.params[E];return Array.isArray(y)?y[0]:y}return null}getAll(E){if(this.has(E)){const y=this.params[E];return Array.isArray(y)?y:[y]}return[]}get keys(){return Object.keys(this.params)}}function Vn(b){return new $n(b)}function Kt(b,E,y){const A=y.path.split("/");if(A.length>b.length||"full"===y.pathMatch&&(E.hasChildren()||A.length<b.length))return null;const N={};for(let z=0;z<A.length;z++){const X=A[z],Re=b[z];if(X.startsWith(":"))N[X.substring(1)]=Re;else if(X!==Re.path)return null}return{consumed:b.slice(0,A.length),posParams:N}}function q(b,E){const y=b?Object.keys(b):void 0,A=E?Object.keys(E):void 0;if(!y||!A||y.length!=A.length)return!1;let N;for(let z=0;z<y.length;z++)if(N=y[z],!ne(b[N],E[N]))return!1;return!0}function ne(b,E){if(Array.isArray(b)&&Array.isArray(E)){if(b.length!==E.length)return!1;const y=[...b].sort(),A=[...E].sort();return y.every((N,z)=>A[z]===N)}return b===E}function at(b){return Array.prototype.concat.apply([],b)}function Dt(b){return b.length>0?b[b.length-1]:null}function Ge(b,E){for(const y in b)b.hasOwnProperty(y)&&E(b[y],y)}function We(b){return(0,g.CqO)(b)?b:(0,g.QGY)(b)?(0,l.D)(Promise.resolve(b)):(0,G.of)(b)}const Ue=!1,Ft={exact:function fi(b,E,y){if(!ht(b.segments,E.segments)||!qr(b.segments,E.segments,y)||b.numberOfChildren!==E.numberOfChildren)return!1;for(const A in E.children)if(!b.children[A]||!fi(b.children[A],E.children[A],y))return!1;return!0},subset:Bi},Er={exact:function or(b,E){return q(b,E)},subset:function $r(b,E){return Object.keys(E).length<=Object.keys(b).length&&Object.keys(E).every(y=>ne(b[y],E[y]))},ignored:()=>!0};function qn(b,E,y){return Ft[y.paths](b.root,E.root,y.matrixParams)&&Er[y.queryParams](b.queryParams,E.queryParams)&&!("exact"===y.fragment&&b.fragment!==E.fragment)}function Bi(b,E,y){return Tn(b,E,E.segments,y)}function Tn(b,E,y,A){if(b.segments.length>y.length){const N=b.segments.slice(0,y.length);return!(!ht(N,y)||E.hasChildren()||!qr(N,y,A))}if(b.segments.length===y.length){if(!ht(b.segments,y)||!qr(b.segments,y,A))return!1;for(const N in E.children)if(!b.children[N]||!Bi(b.children[N],E.children[N],A))return!1;return!0}{const N=y.slice(0,b.segments.length),z=y.slice(b.segments.length);return!!(ht(b.segments,N)&&qr(b.segments,N,A)&&b.children[nn])&&Tn(b.children[nn],E,z,A)}}function qr(b,E,y){return E.every((A,N)=>Er[y](b[N].parameters,A.parameters))}class Mn{constructor(E=new rn([],{}),y={},A=null){this.root=E,this.queryParams=y,this.fragment=A}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vn(this.queryParams)),this._queryParamMap}toString(){return sn.serialize(this)}}class rn{constructor(E,y){this.segments=E,this.children=y,this.parent=null,Ge(y,(A,N)=>A.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ye(this)}}class ai{constructor(E,y){this.path=E,this.parameters=y}get parameterMap(){return this._parameterMap||(this._parameterMap=Vn(this.parameters)),this._parameterMap}toString(){return ar(this)}}function ht(b,E){return b.length===E.length&&b.every((y,A)=>y.path===E[A].path)}let ln=(()=>{class b{}return b.\u0275fac=function(y){return new(y||b)},b.\u0275prov=g.Yz7({token:b,factory:function(){return new pn},providedIn:"root"}),b})();class pn{parse(E){const y=new Pn(E);return new Mn(y.parseRootSegment(),y.parseQueryParams(),y.parseFragment())}serialize(E){const y=`/${he(E.root,!0)}`,A=function Be(b){const E=Object.keys(b).map(y=>{const A=b[y];return Array.isArray(A)?A.map(N=>`${st(y)}=${st(N)}`).join("&"):`${st(y)}=${st(A)}`}).filter(y=>!!y);return E.length?`?${E.join("&")}`:""}(E.queryParams);return`${y}${A}${"string"==typeof E.fragment?`#${function Ze(b){return encodeURI(b)}(E.fragment)}`:""}`}}const sn=new pn;function ye(b){return b.segments.map(E=>ar(E)).join("/")}function he(b,E){if(!b.hasChildren())return ye(b);if(E){const y=b.children[nn]?he(b.children[nn],!1):"",A=[];return Ge(b.children,(N,z)=>{z!==nn&&A.push(`${z}:${he(N,!1)}`)}),A.length>0?`${y}(${A.join("//")})`:y}{const y=function Zt(b,E){let y=[];return Ge(b.children,(A,N)=>{N===nn&&(y=y.concat(E(A,N)))}),Ge(b.children,(A,N)=>{N!==nn&&(y=y.concat(E(A,N)))}),y}(b,(A,N)=>N===nn?[he(b.children[nn],!1)]:[`${N}:${he(A,!1)}`]);return 1===Object.keys(b.children).length&&null!=b.children[nn]?`${ye(b)}/${y[0]}`:`${ye(b)}/(${y.join("//")})`}}function De(b){return encodeURIComponent(b).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function st(b){return De(b).replace(/%3B/gi,";")}function Rt(b){return De(b).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vn(b){return decodeURIComponent(b)}function Fn(b){return vn(b.replace(/\+/g,"%20"))}function ar(b){return`${Rt(b.path)}${function cn(b){return Object.keys(b).map(E=>`;${Rt(E)}=${Rt(b[E])}`).join("")}(b.parameters)}`}const me=/^[^\/()?;=#]+/;function ce(b){const E=b.match(me);return E?E[0]:""}const Xe=/^[^=?&#]+/,dn=/^[^&#]+/;class Pn{constructor(E){this.url=E,this.remaining=E}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new rn([],{}):new rn([],this.parseChildren())}parseQueryParams(){const E={};if(this.consumeOptional("?"))do{this.parseQueryParam(E)}while(this.consumeOptional("&"));return E}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const E=[];for(this.peekStartsWith("(")||E.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),E.push(this.parseSegment());let y={};this.peekStartsWith("/(")&&(this.capture("/"),y=this.parseParens(!0));let A={};return this.peekStartsWith("(")&&(A=this.parseParens(!1)),(E.length>0||Object.keys(y).length>0)&&(A[nn]=new rn(E,y)),A}parseSegment(){const E=ce(this.remaining);if(""===E&&this.peekStartsWith(";"))throw new g.vHH(4009,Ue);return this.capture(E),new ai(vn(E),this.parseMatrixParams())}parseMatrixParams(){const E={};for(;this.consumeOptional(";");)this.parseParam(E);return E}parseParam(E){const y=ce(this.remaining);if(!y)return;this.capture(y);let A="";if(this.consumeOptional("=")){const N=ce(this.remaining);N&&(A=N,this.capture(A))}E[vn(y)]=vn(A)}parseQueryParam(E){const y=function ft(b){const E=b.match(Xe);return E?E[0]:""}(this.remaining);if(!y)return;this.capture(y);let A="";if(this.consumeOptional("=")){const X=function on(b){const E=b.match(dn);return E?E[0]:""}(this.remaining);X&&(A=X,this.capture(A))}const N=Fn(y),z=Fn(A);if(E.hasOwnProperty(N)){let X=E[N];Array.isArray(X)||(X=[X],E[N]=X),X.push(z)}else E[N]=z}parseParens(E){const y={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const A=ce(this.remaining),N=this.remaining[A.length];if("/"!==N&&")"!==N&&";"!==N)throw new g.vHH(4010,Ue);let z;A.indexOf(":")>-1?(z=A.slice(0,A.indexOf(":")),this.capture(z),this.capture(":")):E&&(z=nn);const X=this.parseChildren();y[z]=1===Object.keys(X).length?X[nn]:new rn([],X),this.consumeOptional("//")}return y}peekStartsWith(E){return this.remaining.startsWith(E)}consumeOptional(E){return!!this.peekStartsWith(E)&&(this.remaining=this.remaining.substring(E.length),!0)}capture(E){if(!this.consumeOptional(E))throw new g.vHH(4011,Ue)}}function Qn(b){return b.segments.length>0?new rn([],{[nn]:b}):b}function xr(b){const E={};for(const A of Object.keys(b.children)){const z=xr(b.children[A]);(z.segments.length>0||z.hasChildren())&&(E[A]=z)}return function Li(b){if(1===b.numberOfChildren&&b.children[nn]){const E=b.children[nn];return new rn(b.segments.concat(E.segments),E.children)}return b}(new rn(b.segments,E))}function nr(b){return b instanceof Mn}function Jn(b,E,y,A,N){if(0===y.length)return Tr(E.root,E.root,E.root,A,N);const z=function Bt(b){if("string"==typeof b[0]&&1===b.length&&"/"===b[0])return new Ai(!0,0,b);let E=0,y=!1;const A=b.reduce((N,z,X)=>{if("object"==typeof z&&null!=z){if(z.outlets){const Re={};return Ge(z.outlets,(vt,Gt)=>{Re[Gt]="string"==typeof vt?vt.split("/"):vt}),[...N,{outlets:Re}]}if(z.segmentPath)return[...N,z.segmentPath]}return"string"!=typeof z?[...N,z]:0===X?(z.split("/").forEach((Re,vt)=>{0==vt&&"."===Re||(0==vt&&""===Re?y=!0:".."===Re?E++:""!=Re&&N.push(Re))}),N):[...N,z]},[]);return new Ai(y,E,A)}(y);return z.toRoot()?Tr(E.root,E.root,new rn([],{}),A,N):function X(vt){const Gt=function pi(b,E,y,A){if(b.isAbsolute)return new gn(E.root,!0,0);if(-1===A)return new gn(y,y===E.root,0);return function Jr(b,E,y){let A=b,N=E,z=y;for(;z>N;){if(z-=N,A=A.parent,!A)throw new g.vHH(4005,!1);N=A.segments.length}return new gn(A,!1,N-z)}(y,A+(Mr(b.commands[0])?0:1),b.numberOfDoubleDots)}(z,E,b.snapshot?._urlSegment,vt),Xt=Gt.processChildren?ur(Gt.segmentGroup,Gt.index,z.commands):bi(Gt.segmentGroup,Gt.index,z.commands);return Tr(E.root,Gt.segmentGroup,Xt,A,N)}(b.snapshot?._lastPathIndex)}function Mr(b){return"object"==typeof b&&null!=b&&!b.outlets&&!b.segmentPath}function Dr(b){return"object"==typeof b&&null!=b&&b.outlets}function Tr(b,E,y,A,N){let X,z={};A&&Ge(A,(vt,Gt)=>{z[Gt]=Array.isArray(vt)?vt.map(Xt=>`${Xt}`):`${vt}`}),X=b===E?y:Qr(b,E,y);const Re=Qn(xr(X));return new Mn(Re,z,N)}function Qr(b,E,y){const A={};return Ge(b.children,(N,z)=>{A[z]=N===E?y:Qr(N,E,y)}),new rn(b.segments,A)}class Ai{constructor(E,y,A){if(this.isAbsolute=E,this.numberOfDoubleDots=y,this.commands=A,E&&A.length>0&&Mr(A[0]))throw new g.vHH(4003,!1);const N=A.find(Dr);if(N&&N!==Dt(A))throw new g.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gn{constructor(E,y,A){this.segmentGroup=E,this.processChildren=y,this.index=A}}function bi(b,E,y){if(b||(b=new rn([],{})),0===b.segments.length&&b.hasChildren())return ur(b,E,y);const A=function as(b,E,y){let A=0,N=E;const z={match:!1,pathIndex:0,commandIndex:0};for(;N<b.segments.length;){if(A>=y.length)return z;const X=b.segments[N],Re=y[A];if(Dr(Re))break;const vt=`${Re}`,Gt=A<y.length-1?y[A+1]:null;if(N>0&&void 0===vt)break;if(vt&&Gt&&"object"==typeof Gt&&void 0===Gt.outlets){if(!Ei(vt,Gt,X))return z;A+=2}else{if(!Ei(vt,{},X))return z;A++}N++}return{match:!0,pathIndex:N,commandIndex:A}}(b,E,y),N=y.slice(A.commandIndex);if(A.match&&A.pathIndex<b.segments.length){const z=new rn(b.segments.slice(0,A.pathIndex),{});return z.children[nn]=new rn(b.segments.slice(A.pathIndex),b.children),ur(z,0,N)}return A.match&&0===N.length?new rn(b.segments,{}):A.match&&!b.hasChildren()?Fr(b,E,y):A.match?ur(b,0,N):Fr(b,E,y)}function ur(b,E,y){if(0===y.length)return new rn(b.segments,{});{const A=function Pr(b){return Dr(b[0])?b[0].outlets:{[nn]:b}}(y),N={};return Ge(A,(z,X)=>{"string"==typeof z&&(z=[z]),null!==z&&(N[X]=bi(b.children[X],E,z))}),Ge(b.children,(z,X)=>{void 0===A[X]&&(N[X]=z)}),new rn(b.segments,N)}}function Fr(b,E,y){const A=b.segments.slice(0,E);let N=0;for(;N<y.length;){const z=y[N];if(Dr(z)){const vt=Sn(z.outlets);return new rn(A,vt)}if(0===N&&Mr(y[0])){A.push(new ai(b.segments[E].path,wi(y[0]))),N++;continue}const X=Dr(z)?z.outlets[nn]:`${z}`,Re=N<y.length-1?y[N+1]:null;X&&Re&&Mr(Re)?(A.push(new ai(X,wi(Re))),N+=2):(A.push(new ai(X,{})),N++)}return new rn(A,{})}function Sn(b){const E={};return Ge(b,(y,A)=>{"string"==typeof y&&(y=[y]),null!==y&&(E[A]=Fr(new rn([],{}),0,y))}),E}function wi(b){const E={};return Ge(b,(y,A)=>E[A]=`${y}`),E}function Ei(b,E,y){return b==y.path&&q(E,y.parameters)}class $i{constructor(E,y){this.id=E,this.url=y}}class Xr extends $i{constructor(E,y,A="imperative",N=null){super(E,y),this.type=0,this.navigationTrigger=A,this.restoredState=N}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class yr extends $i{constructor(E,y,A){super(E,y),this.urlAfterRedirects=A,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Br extends $i{constructor(E,y,A,N){super(E,y),this.reason=A,this.code=N,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class vs extends $i{constructor(E,y,A,N){super(E,y),this.error=A,this.target=N,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ui extends $i{constructor(E,y,A,N){super(E,y),this.urlAfterRedirects=A,this.state=N,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bs extends $i{constructor(E,y,A,N){super(E,y),this.urlAfterRedirects=A,this.state=N,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rr extends $i{constructor(E,y,A,N,z){super(E,y),this.urlAfterRedirects=A,this.state=N,this.shouldActivate=z,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ce extends $i{constructor(E,y,A,N){super(E,y),this.urlAfterRedirects=A,this.state=N,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Se extends $i{constructor(E,y,A,N){super(E,y),this.urlAfterRedirects=A,this.state=N,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class je{constructor(E){this.route=E,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class gt{constructor(E){this.route=E,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class At{constructor(E){this.snapshot=E,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class an{constructor(E){this.snapshot=E,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _n{constructor(E){this.snapshot=E,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bn{constructor(E){this.snapshot=E,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ir{constructor(E,y,A){this.routerEvent=E,this.position=y,this.anchor=A,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class li{constructor(E){this._root=E}get root(){return this._root.value}parent(E){const y=this.pathFromRoot(E);return y.length>1?y[y.length-2]:null}children(E){const y=ei(E,this._root);return y?y.children.map(A=>A.value):[]}firstChild(E){const y=ei(E,this._root);return y&&y.children.length>0?y.children[0].value:null}siblings(E){const y=ci(E,this._root);return y.length<2?[]:y[y.length-2].children.map(N=>N.value).filter(N=>N!==E)}pathFromRoot(E){return ci(E,this._root).map(y=>y.value)}}function ei(b,E){if(b===E.value)return E;for(const y of E.children){const A=ei(b,y);if(A)return A}return null}function ci(b,E){if(b===E.value)return[E];for(const y of E.children){const A=ci(b,y);if(A.length)return A.unshift(E),A}return[]}class Hi{constructor(E,y){this.value=E,this.children=y}toString(){return`TreeNode(${this.value})`}}function ii(b){const E={};return b&&b.children.forEach(y=>E[y.value.outlet]=y),E}class ws extends li{constructor(E,y){super(E),this.snapshot=y,Es(this,E)}toString(){return this.snapshot.toString()}}function Xs(b,E){const y=function js(b,E){const X=new Os([],{},{},"",{},nn,E,null,b.root,-1,{});return new Ns("",new Hi(X,[]))}(b,E),A=new U([new ai("",{})]),N=new U({}),z=new U({}),X=new U({}),Re=new U(""),vt=new gi(A,N,X,Re,z,nn,E,y.root);return vt.snapshot=y.root,new ws(new Hi(vt,[]),y)}class gi{constructor(E,y,A,N,z,X,Re,vt){this.url=E,this.params=y,this.queryParams=A,this.fragment=N,this.data=z,this.outlet=X,this.component=Re,this.title=this.data?.pipe((0,ae.U)(Gt=>Gt[zn]))??(0,G.of)(void 0),this._futureSnapshot=vt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ae.U)(E=>Vn(E)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ae.U)(E=>Vn(E)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function us(b,E="emptyOnly"){const y=b.pathFromRoot;let A=0;if("always"!==E)for(A=y.length-1;A>=1;){const N=y[A],z=y[A-1];if(N.routeConfig&&""===N.routeConfig.path)A--;else{if(z.component)break;A--}}return function $s(b){return b.reduce((E,y)=>({params:{...E.params,...y.params},data:{...E.data,...y.data},resolve:{...y.data,...E.resolve,...y.routeConfig?.data,...y._resolvedData}}),{params:{},data:{},resolve:{}})}(y.slice(A))}class Os{constructor(E,y,A,N,z,X,Re,vt,Gt,Xt,er){this.url=E,this.params=y,this.queryParams=A,this.fragment=N,this.data=z,this.outlet=X,this.component=Re,this.routeConfig=vt,this._urlSegment=Gt,this._lastPathIndex=Xt,this._resolve=er}get title(){return this.data?.[zn]}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Vn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(A=>A.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ns extends li{constructor(E,y){super(y),this.url=E,Es(this,y)}toString(){return Hs(this._root)}}function Es(b,E){E.value._routerState=b,E.children.forEach(y=>Es(b,y))}function Hs(b){const E=b.children.length>0?` { ${b.children.map(Hs).join(", ")} } `:"";return`${b.value}${E}`}function Ui(b){if(b.snapshot){const E=b.snapshot,y=b._futureSnapshot;b.snapshot=y,q(E.queryParams,y.queryParams)||b.queryParams.next(y.queryParams),E.fragment!==y.fragment&&b.fragment.next(y.fragment),q(E.params,y.params)||b.params.next(y.params),function He(b,E){if(b.length!==E.length)return!1;for(let y=0;y<b.length;++y)if(!q(b[y],E[y]))return!1;return!0}(E.url,y.url)||b.url.next(y.url),q(E.data,y.data)||b.data.next(y.data)}else b.snapshot=b._futureSnapshot,b.data.next(b._futureSnapshot.data)}function Zi(b,E){const y=q(b.params,E.params)&&function Mt(b,E){return ht(b,E)&&b.every((y,A)=>q(y.parameters,E[A].parameters))}(b.url,E.url);return y&&!(!b.parent!=!E.parent)&&(!b.parent||Zi(b.parent,E.parent))}function Zs(b,E,y){if(y&&b.shouldReuseRoute(E.value,y.value.snapshot)){const A=y.value;A._futureSnapshot=E.value;const N=function ko(b,E,y){return E.children.map(A=>{for(const N of y.children)if(b.shouldReuseRoute(A.value,N.value.snapshot))return Zs(b,A,N);return Zs(b,A)})}(b,E,y);return new Hi(A,N)}{if(b.shouldAttach(E.value)){const z=b.retrieve(E.value);if(null!==z){const X=z.route;return X.value._futureSnapshot=E.value,X.children=E.children.map(Re=>Zs(b,Re)),X}}const A=function So(b){return new gi(new U(b.url),new U(b.params),new U(b.queryParams),new U(b.fragment),new U(b.data),b.outlet,b.component,b)}(E.value),N=E.children.map(z=>Zs(b,z));return new Hi(A,N)}}const mi="ngNavigationCancelingError";function eo(b,E){const{redirectTo:y,navigationBehaviorOptions:A}=nr(E)?{redirectTo:E,navigationBehaviorOptions:void 0}:E,N=ls(!1,0,E);return N.url=y,N.navigationBehaviorOptions=A,N}function ls(b,E,y){const A=new Error("NavigationCancelingError: "+(b||""));return A[mi]=!0,A.cancellationCode=E,y&&(A.url=y),A}function cs(b){return Gs(b)&&nr(b.url)}function Gs(b){return b&&b[mi]}class Ji{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new zi,this.attachRef=null}}let zi=(()=>{class b{constructor(){this.contexts=new Map}onChildOutletCreated(y,A){const N=this.getOrCreateContext(y);N.outlet=A,this.contexts.set(y,N)}onChildOutletDestroyed(y){const A=this.getContext(y);A&&(A.outlet=null,A.attachRef=null)}onOutletDeactivated(){const y=this.contexts;return this.contexts=new Map,y}onOutletReAttached(y){this.contexts=y}getOrCreateContext(y){let A=this.getContext(y);return A||(A=new Ji,this.contexts.set(y,A)),A}getContext(y){return this.contexts.get(y)||null}}return b.\u0275fac=function(y){return new(y||b)},b.\u0275prov=g.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const cr=!1;let Ni=(()=>{class b{constructor(){this.activated=null,this._activatedRoute=null,this.name=nn,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.parentContexts=(0,g.f3M)(zi),this.location=(0,g.f3M)(g.s_b),this.changeDetector=(0,g.f3M)(g.sBO),this.environmentInjector=(0,g.f3M)(g.lqb)}ngOnChanges(y){if(y.name){const{firstChange:A,previousValue:N}=y.name;if(A)return;this.isTrackedInParentContexts(N)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(N)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(y){return this.parentContexts.getContext(y)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const y=this.parentContexts.getContext(this.name);y?.route&&(y.attachRef?this.attach(y.attachRef,y.route):this.activateWith(y.route,y.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,cr);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,cr);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,cr);this.location.detach();const y=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(y.instance),y}attach(y,A){this.activated=y,this._activatedRoute=A,this.location.insert(y.hostView),this.attachEvents.emit(y.instance)}deactivate(){if(this.activated){const y=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(y)}}activateWith(y,A){if(this.isActivated)throw new g.vHH(4013,cr);this._activatedRoute=y;const N=this.location,X=y.snapshot.component,Re=this.parentContexts.getOrCreateContext(this.name).children,vt=new ks(y,Re,N.injector);if(A&&function Ps(b){return!!b.resolveComponentFactory}(A)){const Gt=A.resolveComponentFactory(X);this.activated=N.createComponent(Gt,N.length,vt)}else this.activated=N.createComponent(X,{index:N.length,injector:vt,environmentInjector:A??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return b.\u0275fac=function(y){return new(y||b)},b.\u0275dir=g.lG2({type:b,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[g.TTD]}),b})();class ks{constructor(E,y,A){this.route=E,this.childContexts=y,this.parent=A}get(E,y){return E===gi?this.route:E===zi?this.childContexts:this.parent.get(E,y)}}let xi=(()=>{class b{}return b.\u0275fac=function(y){return new(y||b)},b.\u0275cmp=g.Xpm({type:b,selectors:[["ng-component"]],standalone:!0,features:[g.jDz],decls:1,vars:0,template:function(y,A){1&y&&g._UZ(0,"router-outlet")},dependencies:[Ni],encapsulation:2}),b})();function zs(b,E){return b.providers&&!b._injector&&(b._injector=(0,g.MMx)(b.providers,E,`Route: ${b.path}`)),b._injector??E}function Xi(b){const E=b.children&&b.children.map(Xi),y=E?{...b,children:E}:{...b};return!y.component&&!y.loadComponent&&(E||y.loadChildren)&&y.outlet&&y.outlet!==nn&&(y.component=xi),y}function dr(b){return b.outlet||nn}function Ao(b,E){const y=b.filter(A=>dr(A)===E);return y.push(...b.filter(A=>dr(A)!==E)),y}function ds(b){if(!b)return null;if(b.routeConfig?._injector)return b.routeConfig._injector;for(let E=b.parent;E;E=E.parent){const y=E.routeConfig;if(y?._loadedInjector)return y._loadedInjector;if(y?._injector)return y._injector}return null}class yi{constructor(E,y,A,N){this.routeReuseStrategy=E,this.futureState=y,this.currState=A,this.forwardEvent=N}activate(E){const y=this.futureState._root,A=this.currState?this.currState._root:null;this.deactivateChildRoutes(y,A,E),Ui(this.futureState.root),this.activateChildRoutes(y,A,E)}deactivateChildRoutes(E,y,A){const N=ii(y);E.children.forEach(z=>{const X=z.value.outlet;this.deactivateRoutes(z,N[X],A),delete N[X]}),Ge(N,(z,X)=>{this.deactivateRouteAndItsChildren(z,A)})}deactivateRoutes(E,y,A){const N=E.value,z=y?y.value:null;if(N===z)if(N.component){const X=A.getContext(N.outlet);X&&this.deactivateChildRoutes(E,y,X.children)}else this.deactivateChildRoutes(E,y,A);else z&&this.deactivateRouteAndItsChildren(y,A)}deactivateRouteAndItsChildren(E,y){E.value.component&&this.routeReuseStrategy.shouldDetach(E.value.snapshot)?this.detachAndStoreRouteSubtree(E,y):this.deactivateRouteAndOutlet(E,y)}detachAndStoreRouteSubtree(E,y){const A=y.getContext(E.value.outlet),N=A&&E.value.component?A.children:y,z=ii(E);for(const X of Object.keys(z))this.deactivateRouteAndItsChildren(z[X],N);if(A&&A.outlet){const X=A.outlet.detach(),Re=A.children.onOutletDeactivated();this.routeReuseStrategy.store(E.value.snapshot,{componentRef:X,route:E,contexts:Re})}}deactivateRouteAndOutlet(E,y){const A=y.getContext(E.value.outlet),N=A&&E.value.component?A.children:y,z=ii(E);for(const X of Object.keys(z))this.deactivateRouteAndItsChildren(z[X],N);A&&A.outlet&&(A.outlet.deactivate(),A.children.onOutletDeactivated(),A.attachRef=null,A.resolver=null,A.route=null)}activateChildRoutes(E,y,A){const N=ii(y);E.children.forEach(z=>{this.activateRoutes(z,N[z.value.outlet],A),this.forwardEvent(new Bn(z.value.snapshot))}),E.children.length&&this.forwardEvent(new an(E.value.snapshot))}activateRoutes(E,y,A){const N=E.value,z=y?y.value:null;if(Ui(N),N===z)if(N.component){const X=A.getOrCreateContext(N.outlet);this.activateChildRoutes(E,y,X.children)}else this.activateChildRoutes(E,y,A);else if(N.component){const X=A.getOrCreateContext(N.outlet);if(this.routeReuseStrategy.shouldAttach(N.snapshot)){const Re=this.routeReuseStrategy.retrieve(N.snapshot);this.routeReuseStrategy.store(N.snapshot,null),X.children.onOutletReAttached(Re.contexts),X.attachRef=Re.componentRef,X.route=Re.route.value,X.outlet&&X.outlet.attach(Re.componentRef,Re.route.value),Ui(Re.route.value),this.activateChildRoutes(E,null,X.children)}else{const Re=ds(N.snapshot),vt=Re?.get(g._Vd)??null;X.attachRef=null,X.route=N,X.resolver=vt,X.injector=Re,X.outlet&&X.outlet.activateWith(N,X.injector),this.activateChildRoutes(E,null,X.children)}}else this.activateChildRoutes(E,null,A)}}class Cs{constructor(E){this.path=E,this.route=this.path[this.path.length-1]}}class es{constructor(E,y){this.component=E,this.route=y}}function _o(b,E,y){const A=b._root;return hs(A,E?E._root:null,y,[A.value])}function qi(b,E){const y=Symbol(),A=E.get(b,y);return A===y?"function"!=typeof b||(0,g.Z0I)(b)?E.get(b):b:A}function hs(b,E,y,A,N={canDeactivateChecks:[],canActivateChecks:[]}){const z=ii(E);return b.children.forEach(X=>{(function En(b,E,y,A,N={canDeactivateChecks:[],canActivateChecks:[]}){const z=b.value,X=E?E.value:null,Re=y?y.getContext(b.value.outlet):null;if(X&&z.routeConfig===X.routeConfig){const vt=function xo(b,E,y){if("function"==typeof y)return y(b,E);switch(y){case"pathParamsChange":return!ht(b.url,E.url);case"pathParamsOrQueryParamsChange":return!ht(b.url,E.url)||!q(b.queryParams,E.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zi(b,E)||!q(b.queryParams,E.queryParams);default:return!Zi(b,E)}}(X,z,z.routeConfig.runGuardsAndResolvers);vt?N.canActivateChecks.push(new Cs(A)):(z.data=X.data,z._resolvedData=X._resolvedData),hs(b,E,z.component?Re?Re.children:null:y,A,N),vt&&Re&&Re.outlet&&Re.outlet.isActivated&&N.canDeactivateChecks.push(new es(Re.outlet.component,X))}else X&&vo(E,Re,N),N.canActivateChecks.push(new Cs(A)),hs(b,null,z.component?Re?Re.children:null:y,A,N)})(X,z[X.value.outlet],y,A.concat([X.value]),N),delete z[X.value.outlet]}),Ge(z,(X,Re)=>vo(X,y.getContext(Re),N)),N}function vo(b,E,y){const A=ii(b),N=b.value;Ge(A,(z,X)=>{vo(z,N.component?E?E.children.getContext(X):null:E,y)}),y.canDeactivateChecks.push(new es(N.component&&E&&E.outlet&&E.outlet.isActivated?E.outlet.component:null,N))}function no(b){return"function"==typeof b}function H(b){return b instanceof be.K||"EmptyError"===b?.name}const Ee=Symbol("INITIAL_VALUE");function mt(){return(0,Ie.w)(b=>Qe(b.map(E=>E.pipe((0,lt.q)(1),(0,pt.O)(Ee)))).pipe((0,ae.U)(E=>{for(const y of E)if(!0!==y){if(y===Ee)return Ee;if(!1===y||y instanceof Mn)return y}return!0}),(0,Ct.h)(E=>E!==Ee),(0,lt.q)(1)))}function si(b){return(0,se.z)((0,Pt.b)(E=>{if(nr(E))throw eo(0,E)}),(0,ae.U)(E=>!0===E))}const Kr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Bo(b,E,y,A,N){const z=Ds(b,E,y);return z.matched?function ki(b,E,y,A){const N=E.canMatch;if(!N||0===N.length)return(0,G.of)(!0);const z=N.map(X=>{const Re=qi(X,b);return We(function I(b){return b&&no(b.canMatch)}(Re)?Re.canMatch(E,y):b.runInContext(()=>Re(E,y)))});return(0,G.of)(z).pipe(mt(),si())}(A=zs(E,A),E,y).pipe((0,ae.U)(X=>!0===X?z:{...Kr})):(0,G.of)(z)}function Ds(b,E,y){if(""===E.path)return"full"===E.pathMatch&&(b.hasChildren()||y.length>0)?{...Kr}:{matched:!0,consumedSegments:[],remainingSegments:y,parameters:{},positionalParamSegments:{}};const N=(E.matcher||Kt)(y,b,E);if(!N)return{...Kr};const z={};Ge(N.posParams,(Re,vt)=>{z[vt]=Re.path});const X=N.consumed.length>0?{...z,...N.consumed[N.consumed.length-1].parameters}:z;return{matched:!0,consumedSegments:N.consumed,remainingSegments:y.slice(N.consumed.length),parameters:X,positionalParamSegments:N.posParams??{}}}function Ts(b,E,y,A){if(y.length>0&&function Po(b,E,y){return y.some(A=>ro(b,E,A)&&dr(A)!==nn)}(b,y,A)){const z=new rn(E,function ra(b,E,y,A){const N={};N[nn]=A,A._sourceSegment=b,A._segmentIndexShift=E.length;for(const z of y)if(""===z.path&&dr(z)!==nn){const X=new rn([],{});X._sourceSegment=b,X._segmentIndexShift=E.length,N[dr(z)]=X}return N}(b,E,A,new rn(y,b.children)));return z._sourceSegment=b,z._segmentIndexShift=E.length,{segmentGroup:z,slicedSegments:[]}}if(0===y.length&&function Fa(b,E,y){return y.some(A=>ro(b,E,A))}(b,y,A)){const z=new rn(b.segments,function jo(b,E,y,A,N){const z={};for(const X of A)if(ro(b,y,X)&&!N[dr(X)]){const Re=new rn([],{});Re._sourceSegment=b,Re._segmentIndexShift=E.length,z[dr(X)]=Re}return{...N,...z}}(b,E,y,A,b.children));return z._sourceSegment=b,z._segmentIndexShift=E.length,{segmentGroup:z,slicedSegments:y}}const N=new rn(b.segments,b.children);return N._sourceSegment=b,N._segmentIndexShift=E.length,{segmentGroup:N,slicedSegments:y}}function ro(b,E,y){return(!(b.hasChildren()||E.length>0)||"full"!==y.pathMatch)&&""===y.path}function va(b,E,y,A){return!!(dr(b)===A||A!==nn&&ro(E,y,b))&&("**"===b.path||Ds(E,b,y).matched)}function La(b,E,y){return 0===E.length&&!b.children[y]}const bo=!1;class $o{constructor(E){this.segmentGroup=E||null}}class Tu{constructor(E){this.urlTree=E}}function Fo(b){return Le(new $o(b))}function Ho(b){return Le(new Tu(b))}class fs{constructor(E,y,A,N,z){this.injector=E,this.configLoader=y,this.urlSerializer=A,this.urlTree=N,this.config=z,this.allowRedirects=!0}apply(){const E=Ts(this.urlTree.root,[],[],this.config).segmentGroup,y=new rn(E.segments,E.children);return this.expandSegmentGroup(this.injector,this.config,y,nn).pipe((0,ae.U)(z=>this.createUrlTree(xr(z),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Et(z=>{if(z instanceof Tu)return this.allowRedirects=!1,this.match(z.urlTree);throw z instanceof $o?this.noMatchError(z):z}))}match(E){return this.expandSegmentGroup(this.injector,this.config,E.root,nn).pipe((0,ae.U)(N=>this.createUrlTree(xr(N),E.queryParams,E.fragment))).pipe(Et(N=>{throw N instanceof $o?this.noMatchError(N):N}))}noMatchError(E){return new g.vHH(4002,bo)}createUrlTree(E,y,A){const N=Qn(E);return new Mn(N,y,A)}expandSegmentGroup(E,y,A,N){return 0===A.segments.length&&A.hasChildren()?this.expandChildren(E,y,A).pipe((0,ae.U)(z=>new rn([],z))):this.expandSegment(E,A,y,A.segments,N,!0)}expandChildren(E,y,A){const N=[];for(const z of Object.keys(A.children))"primary"===z?N.unshift(z):N.push(z);return(0,l.D)(N).pipe(Nt(z=>{const X=A.children[z],Re=Ao(y,z);return this.expandSegmentGroup(E,Re,X,z).pipe((0,ae.U)(vt=>({segment:vt,outlet:z})))}),(0,Wt.R)((z,X)=>(z[X.outlet]=X.segment,z),{}),On())}expandSegment(E,y,A,N,z,X){return(0,l.D)(A).pipe(Nt(Re=>this.expandSegmentAgainstRoute(E,y,A,Re,N,z,X).pipe(Et(Gt=>{if(Gt instanceof $o)return(0,G.of)(null);throw Gt}))),(0,Qt.P)(Re=>!!Re),Et((Re,vt)=>{if(H(Re))return La(y,N,z)?(0,G.of)(new rn([],{})):Fo(y);throw Re}))}expandSegmentAgainstRoute(E,y,A,N,z,X,Re){return va(N,y,z,X)?void 0===N.redirectTo?this.matchSegmentAgainstRoute(E,y,N,z,X):Re&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(E,y,A,N,z,X):Fo(y):Fo(y)}expandSegmentAgainstRouteUsingRedirect(E,y,A,N,z,X){return"**"===N.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(E,A,N,X):this.expandRegularSegmentAgainstRouteUsingRedirect(E,y,A,N,z,X)}expandWildCardWithParamsAgainstRouteUsingRedirect(E,y,A,N){const z=this.applyRedirectCommands([],A.redirectTo,{});return A.redirectTo.startsWith("/")?Ho(z):this.lineralizeSegments(A,z).pipe((0,Ot.z)(X=>{const Re=new rn(X,{});return this.expandSegment(E,Re,y,X,N,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(E,y,A,N,z,X){const{matched:Re,consumedSegments:vt,remainingSegments:Gt,positionalParamSegments:Xt}=Ds(y,N,z);if(!Re)return Fo(y);const er=this.applyRedirectCommands(vt,N.redirectTo,Xt);return N.redirectTo.startsWith("/")?Ho(er):this.lineralizeSegments(N,er).pipe((0,Ot.z)(ti=>this.expandSegment(E,y,A,ti.concat(Gt),X,!1)))}matchSegmentAgainstRoute(E,y,A,N,z){return"**"===A.path?(E=zs(A,E),A.loadChildren?(A._loadedRoutes?(0,G.of)({routes:A._loadedRoutes,injector:A._loadedInjector}):this.configLoader.loadChildren(E,A)).pipe((0,ae.U)(Re=>(A._loadedRoutes=Re.routes,A._loadedInjector=Re.injector,new rn(N,{})))):(0,G.of)(new rn(N,{}))):Bo(y,A,N,E).pipe((0,Ie.w)(({matched:X,consumedSegments:Re,remainingSegments:vt})=>X?this.getChildConfig(E=A._injector??E,A,N).pipe((0,Ot.z)(Xt=>{const er=Xt.injector??E,ti=Xt.routes,{segmentGroup:oi,slicedSegments:As}=Ts(y,Re,vt,ti),Ci=new rn(oi.segments,oi.children);if(0===As.length&&Ci.hasChildren())return this.expandChildren(er,ti,Ci).pipe((0,ae.U)(Eo=>new rn(Re,Eo)));if(0===ti.length&&0===As.length)return(0,G.of)(new rn(Re,{}));const ao=dr(A)===z;return this.expandSegment(er,Ci,ti,As,ao?nn:z,!0).pipe((0,ae.U)(Vo=>new rn(Re.concat(Vo.segments),Vo.children)))})):Fo(y)))}getChildConfig(E,y,A){return y.children?(0,G.of)({routes:y.children,injector:E}):y.loadChildren?void 0!==y._loadedRoutes?(0,G.of)({routes:y._loadedRoutes,injector:y._loadedInjector}):function Ur(b,E,y,A){const N=E.canLoad;if(void 0===N||0===N.length)return(0,G.of)(!0);const z=N.map(X=>{const Re=qi(X,b);return We(function P(b){return b&&no(b.canLoad)}(Re)?Re.canLoad(E,y):b.runInContext(()=>Re(E,y)))});return(0,G.of)(z).pipe(mt(),si())}(E,y,A).pipe((0,Ot.z)(N=>N?this.configLoader.loadChildren(E,y).pipe((0,Pt.b)(z=>{y._loadedRoutes=z.routes,y._loadedInjector=z.injector})):function ia(b){return Le(ls(bo,3))}())):(0,G.of)({routes:[],injector:E})}lineralizeSegments(E,y){let A=[],N=y.root;for(;;){if(A=A.concat(N.segments),0===N.numberOfChildren)return(0,G.of)(A);if(N.numberOfChildren>1||!N.children[nn])return Le(new g.vHH(4e3,bo));N=N.children[nn]}}applyRedirectCommands(E,y,A){return this.applyRedirectCreateUrlTree(y,this.urlSerializer.parse(y),E,A)}applyRedirectCreateUrlTree(E,y,A,N){const z=this.createSegmentGroup(E,y.root,A,N);return new Mn(z,this.createQueryParams(y.queryParams,this.urlTree.queryParams),y.fragment)}createQueryParams(E,y){const A={};return Ge(E,(N,z)=>{if("string"==typeof N&&N.startsWith(":")){const Re=N.substring(1);A[z]=y[Re]}else A[z]=N}),A}createSegmentGroup(E,y,A,N){const z=this.createSegments(E,y.segments,A,N);let X={};return Ge(y.children,(Re,vt)=>{X[vt]=this.createSegmentGroup(E,Re,A,N)}),new rn(z,X)}createSegments(E,y,A,N){return y.map(z=>z.path.startsWith(":")?this.findPosParam(E,z,N):this.findOrReturn(z,A))}findPosParam(E,y,A){const N=A[y.path.substring(1)];if(!N)throw new g.vHH(4001,bo);return N}findOrReturn(E,y){let A=0;for(const N of y){if(N.path===E.path)return y.splice(A),N;A++}return E}}class io{}class au{constructor(E,y,A,N,z,X,Re){this.injector=E,this.rootComponentType=y,this.config=A,this.urlTree=N,this.url=z,this.paramsInheritanceStrategy=X,this.urlSerializer=Re}recognize(){const E=Ts(this.urlTree.root,[],[],this.config.filter(y=>void 0===y.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,E,nn).pipe((0,ae.U)(y=>{if(null===y)return null;const A=new Os([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},nn,this.rootComponentType,null,this.urlTree.root,-1,{}),N=new Hi(A,y),z=new Ns(this.url,N);return this.inheritParamsAndData(z._root),z}))}inheritParamsAndData(E){const y=E.value,A=us(y,this.paramsInheritanceStrategy);y.params=Object.freeze(A.params),y.data=Object.freeze(A.data),E.children.forEach(N=>this.inheritParamsAndData(N))}processSegmentGroup(E,y,A,N){return 0===A.segments.length&&A.hasChildren()?this.processChildren(E,y,A):this.processSegment(E,y,A,A.segments,N)}processChildren(E,y,A){return(0,l.D)(Object.keys(A.children)).pipe(Nt(N=>{const z=A.children[N],X=Ao(y,N);return this.processSegmentGroup(E,X,z,N)}),(0,Wt.R)((N,z)=>N&&z?(N.push(...z),N):null),function Nn(b,E=!1){return(0,de.e)((y,A)=>{let N=0;y.subscribe((0,nt.x)(A,z=>{const X=b(z,N++);(X||E)&&A.next(z),!X&&A.complete()}))})}(N=>null!==N),(0,$t.d)(null),On(),(0,ae.U)(N=>{if(null===N)return null;const z=M(N);return function sa(b){b.sort((E,y)=>E.value.outlet===nn?-1:y.value.outlet===nn?1:E.value.outlet.localeCompare(y.value.outlet))}(z),z}))}processSegment(E,y,A,N,z){return(0,l.D)(y).pipe(Nt(X=>this.processSegmentAgainstRoute(X._injector??E,X,A,N,z)),(0,Qt.P)(X=>!!X),Et(X=>{if(H(X))return La(A,N,z)?(0,G.of)([]):(0,G.of)(null);throw X}))}processSegmentAgainstRoute(E,y,A,N,z){if(y.redirectTo||!va(y,A,N,z))return(0,G.of)(null);let X;if("**"===y.path){const Re=N.length>0?Dt(N).parameters:{},vt=it(A)+N.length,Gt=new Os(N,Re,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Yt(y),dr(y),y.component??y._loadedComponent??null,y,_e(A),vt,pr(y));X=(0,G.of)({snapshot:Gt,consumedSegments:[],remainingSegments:[]})}else X=Bo(A,y,N,E).pipe((0,ae.U)(({matched:Re,consumedSegments:vt,remainingSegments:Gt,parameters:Xt})=>{if(!Re)return null;const er=it(A)+vt.length;return{snapshot:new Os(vt,Xt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Yt(y),dr(y),y.component??y._loadedComponent??null,y,_e(A),er,pr(y)),consumedSegments:vt,remainingSegments:Gt}}));return X.pipe((0,Ie.w)(Re=>{if(null===Re)return(0,G.of)(null);const{snapshot:vt,consumedSegments:Gt,remainingSegments:Xt}=Re;E=y._injector??E;const er=y._loadedInjector??E,ti=function x(b){return b.children?b.children:b.loadChildren?b._loadedRoutes:[]}(y),{segmentGroup:oi,slicedSegments:As}=Ts(A,Gt,Xt,ti.filter(ao=>void 0===ao.redirectTo));if(0===As.length&&oi.hasChildren())return this.processChildren(er,ti,oi).pipe((0,ae.U)(ao=>null===ao?null:[new Hi(vt,ao)]));if(0===ti.length&&0===As.length)return(0,G.of)([new Hi(vt,[])]);const Ci=dr(y)===z;return this.processSegment(er,ti,oi,As,Ci?nn:z).pipe((0,ae.U)(ao=>null===ao?null:[new Hi(vt,ao)]))}))}}function j(b){const E=b.value.routeConfig;return E&&""===E.path&&void 0===E.redirectTo}function M(b){const E=[],y=new Set;for(const A of b){if(!j(A)){E.push(A);continue}const N=E.find(z=>A.value.routeConfig===z.value.routeConfig);void 0!==N?(N.children.push(...A.children),y.add(N)):E.push(A)}for(const A of y){const N=M(A.children);E.push(new Hi(A.value,N))}return E.filter(A=>!y.has(A))}function _e(b){let E=b;for(;E._sourceSegment;)E=E._sourceSegment;return E}function it(b){let E=b,y=E._segmentIndexShift??0;for(;E._sourceSegment;)E=E._sourceSegment,y+=E._segmentIndexShift??0;return y-1}function Yt(b){return b.data||{}}function pr(b){return b.resolve||{}}function It(b){return"string"==typeof b.title||null===b.title}function vr(b){return(0,Ie.w)(E=>{const y=b(E);return y?(0,l.D)(y).pipe((0,ae.U)(()=>E)):(0,G.of)(E)})}const jt=new g.OlP("ROUTES");let Jt=(()=>{class b{constructor(y,A){this.injector=y,this.compiler=A,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(y){if(this.componentLoaders.get(y))return this.componentLoaders.get(y);if(y._loadedComponent)return(0,G.of)(y._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(y);const A=We(y.loadComponent()).pipe((0,ae.U)(zt),(0,Pt.b)(z=>{this.onLoadEndListener&&this.onLoadEndListener(y),y._loadedComponent=z}),kn(()=>{this.componentLoaders.delete(y)})),N=new W(A,()=>new ge.x).pipe(Oe());return this.componentLoaders.set(y,N),N}loadChildren(y,A){if(this.childrenLoaders.get(A))return this.childrenLoaders.get(A);if(A._loadedRoutes)return(0,G.of)({routes:A._loadedRoutes,injector:A._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(A);const z=this.loadModuleFactoryOrRoutes(A.loadChildren).pipe((0,ae.U)(Re=>{this.onLoadEndListener&&this.onLoadEndListener(A);let vt,Gt,Xt=!1;Array.isArray(Re)?Gt=Re:(vt=Re.create(y).injector,Gt=at(vt.get(jt,[],g.XFs.Self|g.XFs.Optional)));return{routes:Gt.map(Xi),injector:vt}}),kn(()=>{this.childrenLoaders.delete(A)})),X=new W(z,()=>new ge.x).pipe(Oe());return this.childrenLoaders.set(A,X),X}loadModuleFactoryOrRoutes(y){return We(y()).pipe((0,ae.U)(zt),(0,Ot.z)(N=>N instanceof g.YKP||Array.isArray(N)?(0,G.of)(N):(0,l.D)(this.compiler.compileModuleAsync(N))))}}return b.\u0275fac=function(y){return new(y||b)(g.LFG(g.zs3),g.LFG(g.Sil))},b.\u0275prov=g.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function zt(b){return function oa(b){return b&&"object"==typeof b&&"default"in b}(b)?b.default:b}let wt=(()=>{class b{constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ge.x,this.configLoader=(0,g.f3M)(Jt),this.environmentInjector=(0,g.f3M)(g.lqb),this.urlSerializer=(0,g.f3M)(ln),this.rootContexts=(0,g.f3M)(zi),this.navigationId=0,this.configLoader.onLoadEndListener=N=>this.events.next(new gt(N)),this.configLoader.onLoadStartListener=N=>this.events.next(new je(N))}get hasRequestedNavigation(){return 0!==this.navigationId}complete(){this.transitions?.complete()}handleNavigationRequest(y){const A=++this.navigationId;this.transitions?.next({...this.transitions.value,...y,id:A})}setupNavigations(y){return this.transitions=new U({id:0,targetPageId:0,currentUrlTree:y.currentUrlTree,currentRawUrl:y.currentUrlTree,extractedUrl:y.urlHandlingStrategy.extract(y.currentUrlTree),urlAfterRedirects:y.urlHandlingStrategy.extract(y.currentUrlTree),rawUrl:y.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:y.routerState.snapshot,targetSnapshot:null,currentRouterState:y.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Ct.h)(A=>0!==A.id),(0,ae.U)(A=>({...A,extractedUrl:y.urlHandlingStrategy.extract(A.rawUrl)})),(0,Ie.w)(A=>{let N=!1,z=!1;return(0,G.of)(A).pipe((0,Pt.b)(X=>{this.currentNavigation={id:X.id,initialUrl:X.rawUrl,extractedUrl:X.extractedUrl,trigger:X.source,extras:X.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ie.w)(X=>{const Re=y.browserUrlTree.toString(),vt=!y.navigated||X.extractedUrl.toString()!==Re||Re!==y.currentUrlTree.toString();if(("reload"===y.onSameUrlNavigation||vt)&&y.urlHandlingStrategy.shouldProcessUrl(X.rawUrl))return _i(X.source)&&(y.browserUrlTree=X.extractedUrl),(0,G.of)(X).pipe((0,Ie.w)(Xt=>{const er=this.transitions?.getValue();return this.events.next(new Xr(Xt.id,this.urlSerializer.serialize(Xt.extractedUrl),Xt.source,Xt.restoredState)),er!==this.transitions?.getValue()?ut.E:Promise.resolve(Xt)}),function Zo(b,E,y,A){return(0,Ie.w)(N=>function ba(b,E,y,A,N){return new fs(b,E,y,A,N).apply()}(b,E,y,N.extractedUrl,A).pipe((0,ae.U)(z=>({...N,urlAfterRedirects:z}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,y.config),(0,Pt.b)(Xt=>{this.currentNavigation={...this.currentNavigation,finalUrl:Xt.urlAfterRedirects},A.urlAfterRedirects=Xt.urlAfterRedirects}),function Zn(b,E,y,A,N){return(0,Ot.z)(z=>function Pi(b,E,y,A,N,z,X="emptyOnly"){return new au(b,E,y,A,N,X,z).recognize().pipe((0,Ie.w)(Re=>null===Re?function ns(b){return new we.y(E=>E.error(b))}(new io):(0,G.of)(Re)))}(b,E,y,z.urlAfterRedirects,A.serialize(z.urlAfterRedirects),A,N).pipe((0,ae.U)(X=>({...z,targetSnapshot:X}))))}(this.environmentInjector,y.rootComponentType,y.config,this.urlSerializer,y.paramsInheritanceStrategy),(0,Pt.b)(Xt=>{if(A.targetSnapshot=Xt.targetSnapshot,"eager"===y.urlUpdateStrategy){if(!Xt.extras.skipLocationChange){const ti=y.urlHandlingStrategy.merge(Xt.urlAfterRedirects,Xt.rawUrl);y.setBrowserUrl(ti,Xt)}y.browserUrlTree=Xt.urlAfterRedirects}const er=new ui(Xt.id,this.urlSerializer.serialize(Xt.extractedUrl),this.urlSerializer.serialize(Xt.urlAfterRedirects),Xt.targetSnapshot);this.events.next(er)}));if(vt&&y.rawUrlTree&&y.urlHandlingStrategy.shouldProcessUrl(y.rawUrlTree)){const{id:er,extractedUrl:ti,source:oi,restoredState:As,extras:Ci}=X,ao=new Xr(er,this.urlSerializer.serialize(ti),oi,As);this.events.next(ao);const Yo=Xs(ti,y.rootComponentType).snapshot;return A={...X,targetSnapshot:Yo,urlAfterRedirects:ti,extras:{...Ci,skipLocationChange:!1,replaceUrl:!1}},(0,G.of)(A)}return y.rawUrlTree=X.rawUrl,X.resolve(null),ut.E}),(0,Pt.b)(X=>{const Re=new bs(X.id,this.urlSerializer.serialize(X.extractedUrl),this.urlSerializer.serialize(X.urlAfterRedirects),X.targetSnapshot);this.events.next(Re)}),(0,ae.U)(X=>A={...X,guards:_o(X.targetSnapshot,X.currentSnapshot,this.rootContexts)}),function In(b,E){return(0,Ot.z)(y=>{const{targetSnapshot:A,currentSnapshot:N,guards:{canActivateChecks:z,canDeactivateChecks:X}}=y;return 0===X.length&&0===z.length?(0,G.of)({...y,guardsResult:!0}):function An(b,E,y,A){return(0,l.D)(b).pipe((0,Ot.z)(N=>function Xn(b,E,y,A,N){const z=E&&E.routeConfig?E.routeConfig.canDeactivate:null;if(!z||0===z.length)return(0,G.of)(!0);const X=z.map(Re=>{const vt=ds(E)??N,Gt=qi(Re,vt);return We(function Te(b){return b&&no(b.canDeactivate)}(Gt)?Gt.canDeactivate(b,E,y,A):vt.runInContext(()=>Gt(b,E,y,A))).pipe((0,Qt.P)())});return(0,G.of)(X).pipe(mt())}(N.component,N.route,y,E,A)),(0,Qt.P)(N=>!0!==N,!0))}(X,A,N,b).pipe((0,Ot.z)(Re=>Re&&function $(b){return"boolean"==typeof b}(Re)?function lr(b,E,y,A){return(0,l.D)(E).pipe(Nt(N=>(0,Me.z)(function di(b,E){return null!==b&&E&&E(new At(b)),(0,G.of)(!0)}(N.route.parent,A),function hr(b,E){return null!==b&&E&&E(new _n(b)),(0,G.of)(!0)}(N.route,A),function Mi(b,E,y){const A=E[E.length-1],z=E.slice(0,E.length-1).reverse().map(X=>function ts(b){const E=b.routeConfig?b.routeConfig.canActivateChild:null;return E&&0!==E.length?{node:b,guards:E}:null}(X)).filter(X=>null!==X).map(X=>et(()=>{const Re=X.guards.map(vt=>{const Gt=ds(X.node)??y,Xt=qi(vt,Gt);return We(function oe(b){return b&&no(b.canActivateChild)}(Xt)?Xt.canActivateChild(A,b):Gt.runInContext(()=>Xt(A,b))).pipe((0,Qt.P)())});return(0,G.of)(Re).pipe(mt())}));return(0,G.of)(z).pipe(mt())}(b,N.path,y),function Rr(b,E,y){const A=E.routeConfig?E.routeConfig.canActivate:null;if(!A||0===A.length)return(0,G.of)(!0);const N=A.map(z=>et(()=>{const X=ds(E)??y,Re=qi(z,X);return We(function ee(b){return b&&no(b.canActivate)}(Re)?Re.canActivate(E,b):X.runInContext(()=>Re(E,b))).pipe((0,Qt.P)())}));return(0,G.of)(N).pipe(mt())}(b,N.route,y))),(0,Qt.P)(N=>!0!==N,!0))}(A,z,b,E):(0,G.of)(Re)),(0,ae.U)(Re=>({...y,guardsResult:Re})))})}(this.environmentInjector,X=>this.events.next(X)),(0,Pt.b)(X=>{if(A.guardsResult=X.guardsResult,nr(X.guardsResult))throw eo(0,X.guardsResult);const Re=new rr(X.id,this.urlSerializer.serialize(X.extractedUrl),this.urlSerializer.serialize(X.urlAfterRedirects),X.targetSnapshot,!!X.guardsResult);this.events.next(Re)}),(0,Ct.h)(X=>!!X.guardsResult||(y.restoreHistory(X),this.cancelNavigationTransition(X,"",3,y),!1)),vr(X=>{if(X.guards.canActivateChecks.length)return(0,G.of)(X).pipe((0,Pt.b)(Re=>{const vt=new Ce(Re.id,this.urlSerializer.serialize(Re.extractedUrl),this.urlSerializer.serialize(Re.urlAfterRedirects),Re.targetSnapshot);this.events.next(vt)}),(0,Ie.w)(Re=>{let vt=!1;return(0,G.of)(Re).pipe(function Rn(b,E){return(0,Ot.z)(y=>{const{targetSnapshot:A,guards:{canActivateChecks:N}}=y;if(!N.length)return(0,G.of)(y);let z=0;return(0,l.D)(N).pipe(Nt(X=>function Wn(b,E,y,A){const N=b.routeConfig,z=b._resolve;return void 0!==N?.title&&!It(N)&&(z[zn]=N.title),function Cr(b,E,y,A){const N=function Or(b){return[...Object.keys(b),...Object.getOwnPropertySymbols(b)]}(b);if(0===N.length)return(0,G.of)({});const z={};return(0,l.D)(N).pipe((0,Ot.z)(X=>function Vi(b,E,y,A){const N=ds(E)??A,z=qi(b,N);return We(z.resolve?z.resolve(E,y):N.runInContext(()=>z(E,y)))}(b[X],E,y,A).pipe((0,Qt.P)(),(0,Pt.b)(Re=>{z[X]=Re}))),qt(1),function wr(b){return(0,ae.U)(()=>b)}(z),Et(X=>H(X)?ut.E:Le(X)))}(z,b,E,A).pipe((0,ae.U)(X=>(b._resolvedData=X,b.data=us(b,y).resolve,N&&It(N)&&(b.data[zn]=N.title),null)))}(X.route,A,b,E)),(0,Pt.b)(()=>z++),qt(1),(0,Ot.z)(X=>z===N.length?(0,G.of)(y):ut.E))})}(y.paramsInheritanceStrategy,this.environmentInjector),(0,Pt.b)({next:()=>vt=!0,complete:()=>{vt||(y.restoreHistory(Re),this.cancelNavigationTransition(Re,"",2,y))}}))}),(0,Pt.b)(Re=>{const vt=new Se(Re.id,this.urlSerializer.serialize(Re.extractedUrl),this.urlSerializer.serialize(Re.urlAfterRedirects),Re.targetSnapshot);this.events.next(vt)}))}),vr(X=>{const Re=vt=>{const Gt=[];vt.routeConfig?.loadComponent&&!vt.routeConfig._loadedComponent&&Gt.push(this.configLoader.loadComponent(vt.routeConfig).pipe((0,Pt.b)(Xt=>{vt.component=Xt}),(0,ae.U)(()=>{})));for(const Xt of vt.children)Gt.push(...Re(Xt));return Gt};return Qe(Re(X.targetSnapshot.root)).pipe((0,$t.d)(),(0,lt.q)(1))}),vr(()=>y.afterPreactivation()),(0,ae.U)(X=>{const Re=function Gi(b,E,y){const A=Zs(b,E._root,y?y._root:void 0);return new ws(A,E)}(y.routeReuseStrategy,X.targetSnapshot,X.currentRouterState);return A={...X,targetRouterState:Re}}),(0,Pt.b)(X=>{y.currentUrlTree=X.urlAfterRedirects,y.rawUrlTree=y.urlHandlingStrategy.merge(X.urlAfterRedirects,X.rawUrl),y.routerState=X.targetRouterState,"deferred"===y.urlUpdateStrategy&&(X.extras.skipLocationChange||y.setBrowserUrl(y.rawUrlTree,X),y.browserUrlTree=X.urlAfterRedirects)}),((b,E,y)=>(0,ae.U)(A=>(new yi(E,A.targetRouterState,A.currentRouterState,y).activate(b),A)))(this.rootContexts,y.routeReuseStrategy,X=>this.events.next(X)),(0,Pt.b)({next:X=>{N=!0,this.lastSuccessfulNavigation=this.currentNavigation,y.navigated=!0,this.events.next(new yr(X.id,this.urlSerializer.serialize(X.extractedUrl),this.urlSerializer.serialize(y.currentUrlTree))),y.titleStrategy?.updateTitle(X.targetRouterState.snapshot),X.resolve(!0)},complete:()=>{N=!0}}),kn(()=>{N||z||this.cancelNavigationTransition(A,"",1,y),this.currentNavigation?.id===A.id&&(this.currentNavigation=null)}),Et(X=>{if(z=!0,Gs(X)){cs(X)||(y.navigated=!0,y.restoreHistory(A,!0));const Re=new Br(A.id,this.urlSerializer.serialize(A.extractedUrl),X.message,X.cancellationCode);if(this.events.next(Re),cs(X)){const vt=y.urlHandlingStrategy.merge(X.url,y.rawUrlTree),Gt={skipLocationChange:A.extras.skipLocationChange,replaceUrl:"eager"===y.urlUpdateStrategy||_i(A.source)};y.scheduleNavigation(vt,"imperative",null,Gt,{resolve:A.resolve,reject:A.reject,promise:A.promise})}else A.resolve(!1)}else{y.restoreHistory(A,!0);const Re=new vs(A.id,this.urlSerializer.serialize(A.extractedUrl),X,A.targetSnapshot??void 0);this.events.next(Re);try{A.resolve(y.errorHandler(X))}catch(vt){A.reject(vt)}}return ut.E}))}))}cancelNavigationTransition(y,A,N,z){const X=new Br(y.id,this.urlSerializer.serialize(y.extractedUrl),A,N);this.events.next(X),y.resolve(!1)}}return b.\u0275fac=function(y){return new(y||b)},b.\u0275prov=g.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function _i(b){return"imperative"!==b}let Mo=(()=>{class b{buildTitle(y){let A,N=y.root;for(;void 0!==N;)A=this.getResolvedTitleForRoute(N)??A,N=N.children.find(z=>z.outlet===nn);return A}getResolvedTitleForRoute(y){return y.data[zn]}}return b.\u0275fac=function(y){return new(y||b)},b.\u0275prov=g.Yz7({token:b,factory:function(){return(0,g.f3M)(Ua)},providedIn:"root"}),b})(),Ua=(()=>{class b extends Mo{constructor(y){super(),this.title=y}updateTitle(y){const A=this.buildTitle(y);void 0!==A&&this.title.setTitle(A)}}return b.\u0275fac=function(y){return new(y||b)(g.LFG(kr.Dx))},b.\u0275prov=g.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})(),wa=(()=>{class b{}return b.\u0275fac=function(y){return new(y||b)},b.\u0275prov=g.Yz7({token:b,factory:function(){return(0,g.f3M)(uu)},providedIn:"root"}),b})();class Va{shouldDetach(E){return!1}store(E,y){}shouldAttach(E){return!1}retrieve(E){return null}shouldReuseRoute(E,y){return E.routeConfig===y.routeConfig}}let uu=(()=>{class b extends Va{}return b.\u0275fac=function(){let E;return function(A){return(E||(E=g.n5z(b)))(A||b)}}(),b.\u0275prov=g.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const rs=new g.OlP("",{providedIn:"root",factory:()=>({})});let xu=(()=>{class b{}return b.\u0275fac=function(y){return new(y||b)},b.\u0275prov=g.Yz7({token:b,factory:function(){return(0,g.f3M)(Ba)},providedIn:"root"}),b})(),Ba=(()=>{class b{shouldProcessUrl(y){return!0}extract(y){return y}merge(y,A){return y}}return b.\u0275fac=function(y){return new(y||b)},b.\u0275prov=g.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function ja(b){throw b}function Ln(b,E,y){return E.parse("/")}const zo={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Mu={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Kn=(()=>{class b{constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,g.f3M)(g.c2e),this.isNgZoneEnabled=!1,this.options=(0,g.f3M)(rs,{optional:!0})||{},this.errorHandler=this.options.errorHandler||ja,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Ln,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,G.of)(void 0),this.urlHandlingStrategy=(0,g.f3M)(xu),this.routeReuseStrategy=(0,g.f3M)(wa),this.titleStrategy=(0,g.f3M)(Mo),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=at((0,g.f3M)(jt,{optional:!0})??[]),this.navigationTransitions=(0,g.f3M)(wt),this.urlSerializer=(0,g.f3M)(ln),this.location=(0,g.f3M)(te.Ye),this.rootComponentType=null,this.isNgZoneEnabled=(0,g.f3M)(g.R0b)instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Mn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Xs(this.currentUrlTree,this.rootComponentType),this.navigationTransitions.setupNavigations(this).subscribe(y=>{this.lastSuccessfulId=y.id,this.currentPageId=y.targetPageId},y=>{this.console.warn(`Unhandled Navigation Error: ${y}`)})}get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}resetRootComponentType(y){this.rootComponentType=y,this.routerState.root.component=this.rootComponentType}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(y=>{const A="popstate"===y.type?"popstate":"hashchange";"popstate"===A&&setTimeout(()=>{const N={replaceUrl:!0},z=y.state?.navigationId?y.state:null;if(y.state){const Re={...y.state};delete Re.navigationId,delete Re.\u0275routerPageId,0!==Object.keys(Re).length&&(N.state=Re)}const X=this.parseUrl(y.url);this.scheduleNavigation(X,A,z,N)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(y){this.config=y.map(Xi),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(y,A={}){const{relativeTo:N,queryParams:z,fragment:X,queryParamsHandling:Re,preserveFragment:vt}=A,Gt=N||this.routerState.root,Xt=vt?this.currentUrlTree.fragment:X;let er=null;switch(Re){case"merge":er={...this.currentUrlTree.queryParams,...z};break;case"preserve":er=this.currentUrlTree.queryParams;break;default:er=z||null}return null!==er&&(er=this.removeEmptyProps(er)),Jn(Gt,this.currentUrlTree,y,er,Xt??null)}navigateByUrl(y,A={skipLocationChange:!1}){const N=nr(y)?y:this.parseUrl(y),z=this.urlHandlingStrategy.merge(N,this.rawUrlTree);return this.scheduleNavigation(z,"imperative",null,A)}navigate(y,A={skipLocationChange:!1}){return function mn(b){for(let E=0;E<b.length;E++){if(null==b[E])throw new g.vHH(4008,!1)}}(y),this.navigateByUrl(this.createUrlTree(y,A),A)}serializeUrl(y){return this.urlSerializer.serialize(y)}parseUrl(y){let A;try{A=this.urlSerializer.parse(y)}catch(N){A=this.malformedUriErrorHandler(N,this.urlSerializer,y)}return A}isActive(y,A){let N;if(N=!0===A?{...zo}:!1===A?{...Mu}:A,nr(y))return qn(this.currentUrlTree,y,N);const z=this.parseUrl(y);return qn(this.currentUrlTree,z,N)}removeEmptyProps(y){return Object.keys(y).reduce((A,N)=>{const z=y[N];return null!=z&&(A[N]=z),A},{})}scheduleNavigation(y,A,N,z,X){if(this.disposed)return Promise.resolve(!1);let Re,vt,Gt,Xt;return X?(Re=X.resolve,vt=X.reject,Gt=X.promise):Gt=new Promise((er,ti)=>{Re=er,vt=ti}),"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(N=this.location.getState()),Xt=N&&N.\u0275routerPageId?N.\u0275routerPageId:z.replaceUrl||z.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):Xt=0,this.navigationTransitions.handleNavigationRequest({targetPageId:Xt,source:A,restoredState:N,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:y,extras:z,resolve:Re,reject:vt,promise:Gt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Gt.catch(er=>Promise.reject(er))}setBrowserUrl(y,A){const N=this.urlSerializer.serialize(y),z={...A.extras.state,...this.generateNgRouterState(A.id,A.targetPageId)};this.location.isCurrentPathEqualTo(N)||A.extras.replaceUrl?this.location.replaceState(N,"",z):this.location.go(N,"",z)}restoreHistory(y,A=!1){if("computed"===this.canceledNavigationResolution){const N=this.currentPageId-y.targetPageId;"popstate"!==y.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===N?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===N&&(this.resetState(y),this.browserUrlTree=y.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(N)}else"replace"===this.canceledNavigationResolution&&(A&&this.resetState(y),this.resetUrlToCurrentUrlTree())}resetState(y){this.routerState=y.currentRouterState,this.currentUrlTree=y.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,y.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(y,A){return"computed"===this.canceledNavigationResolution?{navigationId:y,\u0275routerPageId:A}:{navigationId:y}}}return b.\u0275fac=function(y){return new(y||b)},b.\u0275prov=g.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})(),Lo=(()=>{class b{constructor(y,A,N,z,X,Re){this.router=y,this.route=A,this.tabIndexAttribute=N,this.renderer=z,this.el=X,this.locationStrategy=Re,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new ge.x;const vt=X.nativeElement.tagName;this.isAnchorElement="A"===vt||"AREA"===vt,this.isAnchorElement?this.subscription=y.events.subscribe(Gt=>{Gt instanceof yr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(y){this._preserveFragment=(0,g.D6c)(y)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(y){this._skipLocationChange=(0,g.D6c)(y)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(y){this._replaceUrl=(0,g.D6c)(y)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(y){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",y)}ngOnChanges(y){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(y){null!=y?(this.commands=Array.isArray(y)?y:[y],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(y,A,N,z,X){return!!(null===this.urlTree||this.isAnchorElement&&(0!==y||A||N||z||X||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const y=null===this.href?null:(0,g.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",y)}applyAttributeValue(y,A){const N=this.renderer,z=this.el.nativeElement;null!==A?N.setAttribute(z,y,A):N.removeAttribute(z,y)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return b.\u0275fac=function(y){return new(y||b)(g.Y36(Kn),g.Y36(gi),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(te.S$))},b.\u0275dir=g.lG2({type:b,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(y,A){1&y&&g.NdJ("click",function(z){return A.onClick(z.button,z.ctrlKey,z.shiftKey,z.altKey,z.metaKey)}),2&y&&g.uIk("target",A.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[g.TTD]}),b})(),Gn=(()=>{class b{constructor(y,A,N,z,X){this.router=y,this.element=A,this.renderer=N,this.cdr=z,this.link=X,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new g.vpe,this.routerEventsSubscription=y.events.subscribe(Re=>{Re instanceof yr&&this.update()})}ngAfterContentInit(){(0,G.of)(this.links.changes,(0,G.of)(null)).pipe((0,_r.J)()).subscribe(y=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const y=[...this.links.toArray(),this.link].filter(A=>!!A).map(A=>A.onChanges);this.linkInputChangesSubscription=(0,l.D)(y).pipe((0,_r.J)()).subscribe(A=>{this.isActive!==this.isLinkActive(this.router)(A)&&this.update()})}set routerLinkActive(y){const A=Array.isArray(y)?y:y.split(" ");this.classes=A.filter(N=>!!N)}ngOnChanges(y){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const y=this.hasActiveLinks();this.isActive!==y&&(this.isActive=y,this.cdr.markForCheck(),this.classes.forEach(A=>{y?this.renderer.addClass(this.element.nativeElement,A):this.renderer.removeClass(this.element.nativeElement,A)}),y&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(y))})}isLinkActive(y){const A=function lu(b){return!!b.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return N=>!!N.urlTree&&y.isActive(N.urlTree,A)}hasActiveLinks(){const y=this.isLinkActive(this.router);return this.link&&y(this.link)||this.links.some(y)}}return b.\u0275fac=function(y){return new(y||b)(g.Y36(Kn),g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(g.sBO),g.Y36(Lo,8))},b.\u0275dir=g.lG2({type:b,selectors:[["","routerLinkActive",""]],contentQueries:function(y,A,N){if(1&y&&g.Suo(N,Lo,5),2&y){let z;g.iGM(z=g.CRH())&&(A.links=z)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[g.TTD]}),b})();class Yr{}let Ha=(()=>{class b{constructor(y,A,N,z,X){this.router=y,this.injector=N,this.preloadingStrategy=z,this.loader=X}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ct.h)(y=>y instanceof yr),Nt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(y,A){const N=[];for(const z of A){z.providers&&!z._injector&&(z._injector=(0,g.MMx)(z.providers,y,`Route: ${z.path}`));const X=z._injector??y,Re=z._loadedInjector??X;z.loadChildren&&!z._loadedRoutes&&void 0===z.canLoad||z.loadComponent&&!z._loadedComponent?N.push(this.preloadConfig(X,z)):(z.children||z._loadedRoutes)&&N.push(this.processRoutes(Re,z.children??z._loadedRoutes))}return(0,l.D)(N).pipe((0,_r.J)())}preloadConfig(y,A){return this.preloadingStrategy.preload(A,()=>{let N;N=A.loadChildren&&void 0===A.canLoad?this.loader.loadChildren(y,A):(0,G.of)(null);const z=N.pipe((0,Ot.z)(X=>null===X?(0,G.of)(void 0):(A._loadedRoutes=X.routes,A._loadedInjector=X.injector,this.processRoutes(X.injector??y,X.routes))));if(A.loadComponent&&!A._loadedComponent){const X=this.loader.loadComponent(A);return(0,l.D)([z,X]).pipe((0,_r.J)())}return z})}}return b.\u0275fac=function(y){return new(y||b)(g.LFG(Kn),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(Yr),g.LFG(Jt))},b.\u0275prov=g.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const Wi=new g.OlP("");let so=(()=>{class b{constructor(y,A,N,z,X={}){this.urlSerializer=y,this.transitions=A,this.viewportScroller=N,this.zone=z,this.options=X,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},X.scrollPositionRestoration=X.scrollPositionRestoration||"disabled",X.anchorScrolling=X.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(y=>{y instanceof Xr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=y.navigationTrigger,this.restoredId=y.restoredState?y.restoredState.navigationId:0):y instanceof yr&&(this.lastId=y.id,this.scheduleScrollEvent(y,this.urlSerializer.parse(y.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(y=>{y instanceof ir&&(y.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(y.position):y.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(y.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(y,A){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ir(y,"popstate"===this.lastSource?this.store[this.restoredId]:null,A))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return b.\u0275fac=function(y){g.$Z()},b.\u0275prov=g.Yz7({token:b,factory:b.\u0275fac}),b})();function Ko(b,E){return{\u0275kind:b,\u0275providers:E}}function aa(){const b=(0,g.f3M)(g.zs3);return E=>{const y=b.get(g.z2F);if(E!==y.components[0])return;const A=b.get(Kn),N=b.get(Ro);1===b.get(Ea)&&A.initialNavigation(),b.get(Gr,null,g.XFs.Optional)?.setUpPreloading(),b.get(Wi,null,g.XFs.Optional)?.init(),A.resetRootComponentType(y.componentTypes[0]),N.closed||(N.next(),N.unsubscribe())}}const Ro=new g.OlP("",{factory:()=>new ge.x}),Ea=new g.OlP("",{providedIn:"root",factory:()=>1});const Gr=new g.OlP("");function ua(b){return Ko(0,[{provide:Gr,useExisting:Ha},{provide:Yr,useExisting:b}])}const cu=new g.OlP("ROUTER_FORROOT_GUARD"),qa=[te.Ye,{provide:ln,useClass:pn},Kn,zi,{provide:gi,useFactory:function Wo(b){return b.routerState.root},deps:[Kn]},Jt,[]];function el(){return new g.PXZ("Router",Kn)}let du=(()=>{class b{constructor(y){}static forRoot(y,A){return{ngModule:b,providers:[qa,[],{provide:jt,multi:!0,useValue:y},{provide:cu,useFactory:Da,deps:[[Kn,new g.FiY,new g.tp0]]},{provide:rs,useValue:A||{}},A?.useHash?{provide:te.S$,useClass:te.Do}:{provide:te.S$,useClass:te.b0},{provide:Wi,useFactory:()=>{const b=(0,g.f3M)(te.EM),E=(0,g.f3M)(g.R0b),y=(0,g.f3M)(rs),A=(0,g.f3M)(wt),N=(0,g.f3M)(ln);return y.scrollOffset&&b.setOffset(y.scrollOffset),new so(N,A,b,E,y)}},A?.preloadingStrategy?ua(A.preloadingStrategy).\u0275providers:[],{provide:g.PXZ,multi:!0,useFactory:el},A?.initialNavigation?wo(A):[],[{provide:Wa,useFactory:aa},{provide:g.tb,multi:!0,useExisting:Wa}]]}}static forChild(y){return{ngModule:b,providers:[{provide:jt,multi:!0,useValue:y}]}}}return b.\u0275fac=function(y){return new(y||b)(g.LFG(cu,8))},b.\u0275mod=g.oAB({type:b}),b.\u0275inj=g.cJS({imports:[xi]}),b})();function Da(b){return"guarded"}function wo(b){return["disabled"===b.initialNavigation?Ko(3,[{provide:g.ip1,multi:!0,useFactory:()=>{const E=(0,g.f3M)(Kn);return()=>{E.setUpLocationChangeListener()}}},{provide:Ea,useValue:2}]).\u0275providers:[],"enabledBlocking"===b.initialNavigation?Ko(2,[{provide:Ea,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:E=>{const y=E.get(te.V_,Promise.resolve());return()=>y.then(()=>new Promise(N=>{const z=E.get(Kn),X=E.get(Ro);(function A(N){E.get(Kn).events.pipe((0,Ct.h)(X=>X instanceof yr||X instanceof Br||X instanceof vs),(0,ae.U)(X=>X instanceof yr||X instanceof Br&&(0===X.code||1===X.code)&&null),(0,Ct.h)(X=>null!==X),(0,lt.q)(1)).subscribe(()=>{N()})})(()=>{N(!0)}),z.afterPreactivation=()=>(N(!0),X.closed?(0,G.of)(void 0):X),z.initialNavigation()}))}}]).\u0275providers:[]]}const Wa=new g.OlP("")},3942:(Ut,ze,L)=>{L.d(ze,{Z:()=>Qe});var g=L(2090),l=L(4859),G=L(9681),ge=L(1877);class U{constructor(Ne,Me){this._delegate=Ne,this.firebase=Me,(0,G._addComponent)(Ne,new l.wA("app-compat",()=>this,"PUBLIC")),this.container=Ne.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ne){this._delegate.automaticDataCollectionEnabled=Ne}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ne=>{this._delegate.checkDestroyed(),Ne()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,G.deleteApp)(this._delegate)))}_getService(Ne,Me=G._DEFAULT_ENTRY_NAME){var Fe;this._delegate.checkDestroyed();const et=this._delegate.container.getProvider(Ne);return!et.isInitialized()&&"EXPLICIT"===(null===(Fe=et.getComponent())||void 0===Fe?void 0:Fe.instantiationMode)&&et.initialize(),et.getImmediate({identifier:Me})}_removeServiceInstance(Ne,Me=G._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ne).clearInstance(Me)}_addComponent(Ne){(0,G._addComponent)(this._delegate,Ne)}_addOrOverwriteComponent(Ne){(0,G._addOrOverwriteComponent)(this._delegate,Ne)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const we=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ue=function xe(){const ct=function Ae(ct){const Ne={},Me={__esModule:!0,initializeApp:function se(Ye,de={}){const Oe=G.initializeApp(Ye,de);if((0,g.r3)(Ne,Oe.name))return Ne[Oe.name];const W=new ct(Oe,Me);return Ne[Oe.name]=W,W},app:et,registerVersion:G.registerVersion,setLogLevel:G.setLogLevel,onLog:G.onLog,apps:null,SDK_VERSION:G.SDK_VERSION,INTERNAL:{registerComponent:function Le(Ye){const de=Ye.name,Oe=de.replace("-compat","");if(G._registerComponent(Ye)&&"PUBLIC"===Ye.type){const W=(te=et())=>{if("function"!=typeof te[Oe])throw we.create("invalid-app-argument",{appName:de});return te[Oe]()};void 0!==Ye.serviceProps&&(0,g.ZB)(W,Ye.serviceProps),Me[Oe]=W,ct.prototype[Oe]=function(...te){return this._getService.bind(this,de).apply(this,Ye.multipleInstances?te:[])}}return"PUBLIC"===Ye.type?Me[Oe]:null},removeApp:function Fe(Ye){delete Ne[Ye]},useAsService:function ut(Ye,de){return"serverAuth"===de?null:de},modularAPIs:G}};function et(Ye){if(!(0,g.r3)(Ne,Ye=Ye||G._DEFAULT_ENTRY_NAME))throw we.create("no-app",{appName:Ye});return Ne[Ye]}return Me.default=Me,Object.defineProperty(Me,"apps",{get:function $e(){return Object.keys(Ne).map(Ye=>Ne[Ye])}}),et.App=ct,Me}(U);return ct.INTERNAL=Object.assign(Object.assign({},ct.INTERNAL),{createFirebaseNamespace:xe,extendNamespace:function Ne(Me){(0,g.ZB)(ct,Me)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),ct}(),ie=new ge.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){ie.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ct=self.firebase.SDK_VERSION;ct&&ct.indexOf("LITE")>=0&&ie.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Qe=ue;!function qe(ct){(0,G.registerVersion)("@firebase/app-compat","0.2.0",ct)}()},9681:(Ut,ze,L)=>{L.r(ze),L.d(ze,{FirebaseError:()=>ge.ZR,SDK_VERSION:()=>kr,_DEFAULT_ENTRY_NAME:()=>Qt,_addComponent:()=>Wt,_addOrOverwriteComponent:()=>qt,_apps:()=>Pt,_clearComponents:()=>Nn,_components:()=>Et,_getProvider:()=>$t,_registerComponent:()=>yn,_removeServiceInstance:()=>On,deleteApp:()=>Vn,getApp:()=>zn,getApps:()=>$n,initializeApp:()=>nn,onLog:()=>q,registerVersion:()=>He,setLogLevel:()=>ne});var g=L(5861),l=L(4859),G=L(1877),ge=L(2090),U=L(8766);class be{constructor(ht){this.container=ht}getPlatformInfoString(){return this.container.getProviders().map(Zt=>{if(function we(Mt){return"VERSION"===Mt.getComponent()?.type}(Zt)){const ln=Zt.getImmediate();return`${ln.library}/${ln.version}`}return null}).filter(Zt=>Zt).join(" ")}}const Ae="@firebase/app",ue=new G.Yd("@firebase/app"),Qt="[DEFAULT]",Nt={[Ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Pt=new Map,Et=new Map;function Wt(Mt,ht){try{Mt.container.addComponent(ht)}catch(Zt){ue.debug(`Component ${ht.name} failed to register with FirebaseApp ${Mt.name}`,Zt)}}function qt(Mt,ht){Mt.container.addOrOverwriteComponent(ht)}function yn(Mt){const ht=Mt.name;if(Et.has(ht))return ue.debug(`There were multiple attempts to register component ${ht}.`),!1;Et.set(ht,Mt);for(const Zt of Pt.values())Wt(Zt,Mt);return!0}function $t(Mt,ht){const Zt=Mt.container.getProvider("heartbeat").getImmediate({optional:!0});return Zt&&Zt.triggerHeartbeat(),Mt.container.getProvider(ht)}function On(Mt,ht,Zt=Qt){$t(Mt,ht).clearInstance(Zt)}function Nn(){Et.clear()}const kn=new ge.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class _r{constructor(ht,Zt,ln){this._isDeleted=!1,this._options=Object.assign({},ht),this._config=Object.assign({},Zt),this._name=Zt.name,this._automaticDataCollectionEnabled=Zt.automaticDataCollectionEnabled,this._container=ln,this.container.addComponent(new l.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ht){this.checkDestroyed(),this._automaticDataCollectionEnabled=ht}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ht){this._isDeleted=ht}checkDestroyed(){if(this.isDeleted)throw kn.create("app-deleted",{appName:this._name})}}const kr="9.15.0";function nn(Mt,ht={}){let Zt=Mt;"object"!=typeof ht&&(ht={name:ht});const ln=Object.assign({name:Qt,automaticDataCollectionEnabled:!1},ht),pn=ln.name;if("string"!=typeof pn||!pn)throw kn.create("bad-app-name",{appName:String(pn)});if(Zt||(Zt=(0,ge.aH)()),!Zt)throw kn.create("no-options");const sn=Pt.get(pn);if(sn){if((0,ge.vZ)(Zt,sn.options)&&(0,ge.vZ)(ln,sn.config))return sn;throw kn.create("duplicate-app",{appName:pn})}const ye=new l.H0(pn);for(const De of Et.values())ye.addComponent(De);const he=new _r(Zt,ln,ye);return Pt.set(pn,he),he}function zn(Mt=Qt){const ht=Pt.get(Mt);if(!ht&&Mt===Qt)return nn();if(!ht)throw kn.create("no-app",{appName:Mt});return ht}function $n(){return Array.from(Pt.values())}function Vn(Mt){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,g.Z)(function*(Mt){const ht=Mt.name;Pt.has(ht)&&(Pt.delete(ht),yield Promise.all(Mt.container.getProviders().map(Zt=>Zt.delete())),Mt.isDeleted=!0)})).apply(this,arguments)}function He(Mt,ht,Zt){var ln;let pn=null!==(ln=Nt[Mt])&&void 0!==ln?ln:Mt;Zt&&(pn+=`-${Zt}`);const sn=pn.match(/\s|\//),ye=ht.match(/\s|\//);if(sn||ye){const he=[`Unable to register library "${pn}" with version "${ht}":`];return sn&&he.push(`library name "${pn}" contains illegal characters (whitespace or "/")`),sn&&ye&&he.push("and"),ye&&he.push(`version name "${ht}" contains illegal characters (whitespace or "/")`),void ue.warn(he.join(" "))}yn(new l.wA(`${pn}-version`,()=>({library:pn,version:ht}),"VERSION"))}function q(Mt,ht){if(null!==Mt&&"function"!=typeof Mt)throw kn.create("invalid-log-argument");(0,G.Am)(Mt,ht)}function ne(Mt){(0,G.Ub)(Mt)}const Ht="firebase-heartbeat-store";let Ge=null;function We(){return Ge||(Ge=(0,U.X3)("firebase-heartbeat-database",1,{upgrade:(Mt,ht)=>{0===ht&&Mt.createObjectStore(Ht)}}).catch(Mt=>{throw kn.create("idb-open",{originalErrorMessage:Mt.message})})),Ge}function Ft(){return(Ft=(0,g.Z)(function*(Mt){try{return(yield We()).transaction(Ht).objectStore(Ht).get(or(Mt))}catch(ht){if(ht instanceof ge.ZR)ue.warn(ht.message);else{const Zt=kn.create("idb-get",{originalErrorMessage:ht?.message});ue.warn(Zt.message)}}})).apply(this,arguments)}function Er(Mt,ht){return qn.apply(this,arguments)}function qn(){return(qn=(0,g.Z)(function*(Mt,ht){try{const ln=(yield We()).transaction(Ht,"readwrite");return yield ln.objectStore(Ht).put(ht,or(Mt)),ln.done}catch(Zt){if(Zt instanceof ge.ZR)ue.warn(Zt.message);else{const ln=kn.create("idb-set",{originalErrorMessage:Zt?.message});ue.warn(ln.message)}}})).apply(this,arguments)}function or(Mt){return`${Mt.name}!${Mt.options.appId}`}class Bi{constructor(ht){this.container=ht,this._heartbeatsCache=null;const Zt=this.container.getProvider("app").getImmediate();this._storage=new Mn(Zt),this._heartbeatsCachePromise=this._storage.read().then(ln=>(this._heartbeatsCache=ln,ln))}triggerHeartbeat(){var ht=this;return(0,g.Z)(function*(){const ln=ht.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),pn=Tn();if(null===ht._heartbeatsCache&&(ht._heartbeatsCache=yield ht._heartbeatsCachePromise),ht._heartbeatsCache.lastSentHeartbeatDate!==pn&&!ht._heartbeatsCache.heartbeats.some(sn=>sn.date===pn))return ht._heartbeatsCache.heartbeats.push({date:pn,agent:ln}),ht._heartbeatsCache.heartbeats=ht._heartbeatsCache.heartbeats.filter(sn=>{const ye=new Date(sn.date).valueOf();return Date.now()-ye<=2592e6}),ht._storage.overwrite(ht._heartbeatsCache)})()}getHeartbeatsHeader(){var ht=this;return(0,g.Z)(function*(){if(null===ht._heartbeatsCache&&(yield ht._heartbeatsCachePromise),null===ht._heartbeatsCache||0===ht._heartbeatsCache.heartbeats.length)return"";const Zt=Tn(),{heartbeatsToSend:ln,unsentEntries:pn}=function qr(Mt,ht=1024){const Zt=[];let ln=Mt.slice();for(const pn of Mt){const sn=Zt.find(ye=>ye.agent===pn.agent);if(sn){if(sn.dates.push(pn.date),rn(Zt)>ht){sn.dates.pop();break}}else if(Zt.push({agent:pn.agent,dates:[pn.date]}),rn(Zt)>ht){Zt.pop();break}ln=ln.slice(1)}return{heartbeatsToSend:Zt,unsentEntries:ln}}(ht._heartbeatsCache.heartbeats),sn=(0,ge.L)(JSON.stringify({version:2,heartbeats:ln}));return ht._heartbeatsCache.lastSentHeartbeatDate=Zt,pn.length>0?(ht._heartbeatsCache.heartbeats=pn,yield ht._storage.overwrite(ht._heartbeatsCache)):(ht._heartbeatsCache.heartbeats=[],ht._storage.overwrite(ht._heartbeatsCache)),sn})()}}function Tn(){return(new Date).toISOString().substring(0,10)}class Mn{constructor(ht){this.app=ht,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,ge.hl)()&&(0,ge.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ht=this;return(0,g.Z)(function*(){return(yield ht._canUseIndexedDBPromise)&&(yield function Ue(Mt){return Ft.apply(this,arguments)}(ht.app))||{heartbeats:[]}})()}overwrite(ht){var Zt=this;return(0,g.Z)(function*(){var ln;if(yield Zt._canUseIndexedDBPromise){const sn=yield Zt.read();return Er(Zt.app,{lastSentHeartbeatDate:null!==(ln=ht.lastSentHeartbeatDate)&&void 0!==ln?ln:sn.lastSentHeartbeatDate,heartbeats:ht.heartbeats})}})()}add(ht){var Zt=this;return(0,g.Z)(function*(){var ln;if(yield Zt._canUseIndexedDBPromise){const sn=yield Zt.read();return Er(Zt.app,{lastSentHeartbeatDate:null!==(ln=ht.lastSentHeartbeatDate)&&void 0!==ln?ln:sn.lastSentHeartbeatDate,heartbeats:[...sn.heartbeats,...ht.heartbeats]})}})()}}function rn(Mt){return(0,ge.L)(JSON.stringify({version:2,heartbeats:Mt})).length}!function ai(Mt){yn(new l.wA("platform-logger",ht=>new be(ht),"PRIVATE")),yn(new l.wA("heartbeat",ht=>new Bi(ht),"PRIVATE")),He(Ae,"0.9.0",Mt),He(Ae,"0.9.0","esm2017"),He("fire-js","")}("")},4859:(Ut,ze,L)=>{L.d(ze,{H0:()=>Ae,wA:()=>G});var g=L(5861),l=L(2090);class G{constructor(ue,ie,pe){this.name=ue,this.instanceFactory=ie,this.type=pe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ue){return this.instantiationMode=ue,this}setMultipleInstances(ue){return this.multipleInstances=ue,this}setServiceProps(ue){return this.serviceProps=ue,this}setInstanceCreatedCallback(ue){return this.onInstanceCreated=ue,this}}const ge="[DEFAULT]";class U{constructor(ue,ie){this.name=ue,this.container=ie,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ue){const ie=this.normalizeInstanceIdentifier(ue);if(!this.instancesDeferred.has(ie)){const pe=new l.BH;if(this.instancesDeferred.set(ie,pe),this.isInitialized(ie)||this.shouldAutoInitialize())try{const nt=this.getOrInitializeService({instanceIdentifier:ie});nt&&pe.resolve(nt)}catch{}}return this.instancesDeferred.get(ie).promise}getImmediate(ue){var ie;const pe=this.normalizeInstanceIdentifier(ue?.identifier),nt=null!==(ie=ue?.optional)&&void 0!==ie&&ie;if(!this.isInitialized(pe)&&!this.shouldAutoInitialize()){if(nt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:pe})}catch(qe){if(nt)return null;throw qe}}getComponent(){return this.component}setComponent(ue){if(ue.name!==this.name)throw Error(`Mismatching Component ${ue.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ue,this.shouldAutoInitialize()){if(function we(xe){return"EAGER"===xe.instantiationMode}(ue))try{this.getOrInitializeService({instanceIdentifier:ge})}catch{}for(const[ie,pe]of this.instancesDeferred.entries()){const nt=this.normalizeInstanceIdentifier(ie);try{const qe=this.getOrInitializeService({instanceIdentifier:nt});pe.resolve(qe)}catch{}}}}clearInstance(ue=ge){this.instancesDeferred.delete(ue),this.instancesOptions.delete(ue),this.instances.delete(ue)}delete(){var ue=this;return(0,g.Z)(function*(){const ie=Array.from(ue.instances.values());yield Promise.all([...ie.filter(pe=>"INTERNAL"in pe).map(pe=>pe.INTERNAL.delete()),...ie.filter(pe=>"_delete"in pe).map(pe=>pe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ue=ge){return this.instances.has(ue)}getOptions(ue=ge){return this.instancesOptions.get(ue)||{}}initialize(ue={}){const{options:ie={}}=ue,pe=this.normalizeInstanceIdentifier(ue.instanceIdentifier);if(this.isInitialized(pe))throw Error(`${this.name}(${pe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const nt=this.getOrInitializeService({instanceIdentifier:pe,options:ie});for(const[qe,Qe]of this.instancesDeferred.entries())pe===this.normalizeInstanceIdentifier(qe)&&Qe.resolve(nt);return nt}onInit(ue,ie){var pe;const nt=this.normalizeInstanceIdentifier(ie),qe=null!==(pe=this.onInitCallbacks.get(nt))&&void 0!==pe?pe:new Set;qe.add(ue),this.onInitCallbacks.set(nt,qe);const Qe=this.instances.get(nt);return Qe&&ue(Qe,nt),()=>{qe.delete(ue)}}invokeOnInitCallbacks(ue,ie){const pe=this.onInitCallbacks.get(ie);if(pe)for(const nt of pe)try{nt(ue,ie)}catch{}}getOrInitializeService({instanceIdentifier:ue,options:ie={}}){let pe=this.instances.get(ue);if(!pe&&this.component&&(pe=this.component.instanceFactory(this.container,{instanceIdentifier:(xe=ue,xe===ge?void 0:xe),options:ie}),this.instances.set(ue,pe),this.instancesOptions.set(ue,ie),this.invokeOnInitCallbacks(pe,ue),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ue,pe)}catch{}var xe;return pe||null}normalizeInstanceIdentifier(ue=ge){return this.component?this.component.multipleInstances?ue:ge:ue}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ae{constructor(ue){this.name=ue,this.providers=new Map}addComponent(ue){const ie=this.getProvider(ue.name);if(ie.isComponentSet())throw new Error(`Component ${ue.name} has already been registered with ${this.name}`);ie.setComponent(ue)}addOrOverwriteComponent(ue){this.getProvider(ue.name).isComponentSet()&&this.providers.delete(ue.name),this.addComponent(ue)}getProvider(ue){if(this.providers.has(ue))return this.providers.get(ue);const ie=new U(ue,this);return this.providers.set(ue,ie),ie}getProviders(){return Array.from(this.providers.values())}}},1877:(Ut,ze,L)=>{L.d(ze,{Am:()=>xe,Ub:()=>Ae,Yd:()=>we,in:()=>l});const g=[];var l=(()=>{return(ue=l||(l={}))[ue.DEBUG=0]="DEBUG",ue[ue.VERBOSE=1]="VERBOSE",ue[ue.INFO=2]="INFO",ue[ue.WARN=3]="WARN",ue[ue.ERROR=4]="ERROR",ue[ue.SILENT=5]="SILENT",l;var ue})();const G={debug:l.DEBUG,verbose:l.VERBOSE,info:l.INFO,warn:l.WARN,error:l.ERROR,silent:l.SILENT},ge=l.INFO,U={[l.DEBUG]:"log",[l.VERBOSE]:"log",[l.INFO]:"info",[l.WARN]:"warn",[l.ERROR]:"error"},be=(ue,ie,...pe)=>{if(ie<ue.logLevel)return;const nt=(new Date).toISOString(),qe=U[ie];if(!qe)throw new Error(`Attempted to log a message with an invalid logType (value: ${ie})`);console[qe](`[${nt}]  ${ue.name}:`,...pe)};class we{constructor(ie){this.name=ie,this._logLevel=ge,this._logHandler=be,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(ie){if(!(ie in l))throw new TypeError(`Invalid value "${ie}" assigned to \`logLevel\``);this._logLevel=ie}setLogLevel(ie){this._logLevel="string"==typeof ie?G[ie]:ie}get logHandler(){return this._logHandler}set logHandler(ie){if("function"!=typeof ie)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ie}get userLogHandler(){return this._userLogHandler}set userLogHandler(ie){this._userLogHandler=ie}debug(...ie){this._userLogHandler&&this._userLogHandler(this,l.DEBUG,...ie),this._logHandler(this,l.DEBUG,...ie)}log(...ie){this._userLogHandler&&this._userLogHandler(this,l.VERBOSE,...ie),this._logHandler(this,l.VERBOSE,...ie)}info(...ie){this._userLogHandler&&this._userLogHandler(this,l.INFO,...ie),this._logHandler(this,l.INFO,...ie)}warn(...ie){this._userLogHandler&&this._userLogHandler(this,l.WARN,...ie),this._logHandler(this,l.WARN,...ie)}error(...ie){this._userLogHandler&&this._userLogHandler(this,l.ERROR,...ie),this._logHandler(this,l.ERROR,...ie)}}function Ae(ue){g.forEach(ie=>{ie.setLogLevel(ue)})}function xe(ue,ie){for(const pe of g){let nt=null;ie&&ie.level&&(nt=G[ie.level]),pe.userLogHandler=null===ue?null:(qe,Qe,...ct)=>{const Ne=ct.map(Me=>{if(null==Me)return null;if("string"==typeof Me)return Me;if("number"==typeof Me||"boolean"==typeof Me)return Me.toString();if(Me instanceof Error)return Me.message;try{return JSON.stringify(Me)}catch{return null}}).filter(Me=>Me).join(" ");Qe>=(nt??qe.logLevel)&&ue({level:l[Qe].toLowerCase(),message:Ne,args:ct,type:qe.name})}}}},259:(Ut,ze,L)=>{L.d(ze,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=L(9681);(0,g.registerVersion)("firebase","9.15.0","app")},9260:(Ut,ze,L)=>{L.d(ze,{Z:()=>g.Z});var g=L(3942);g.Z.registerVersion("firebase","9.15.0","app-compat")},9169:(Ut,ze,L)=>{L.r(ze);var g=L(5861),l=L(3942),G=L(2090),ge=L(9681),U=L(1877),be=L(655),we=L(4859);const Qe=function nt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ct=function qe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ne=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Fe=new U.Yd("@firebase/auth");function et(_,...d){Fe.logLevel<=U.in.ERROR&&Fe.error(`Auth (${ge.SDK_VERSION}): ${_}`,...d)}function se(_,...d){throw Ye(_,...d)}function $e(_,...d){return Ye(_,...d)}function Le(_,d,p){const w=Object.assign(Object.assign({},ct()),{[d]:p});return new G.LL("auth","Firebase",w).create(d,{appName:_.name})}function ut(_,d,p){if(!(d instanceof p))throw p.name!==d.constructor.name&&se(_,"argument-error"),Le(_,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ye(_,...d){if("string"!=typeof _){const p=d[0],w=[...d.slice(1)];return w[0]&&(w[0].appName=_.name),_._errorFactory.create(p,...w)}return Ne.create(_,...d)}function de(_,d,...p){if(!_)throw Ye(d,...p)}function Oe(_){const d="INTERNAL ASSERTION FAILED: "+_;throw et(d),new Error(d)}function W(_,d){_||Oe(d)}const te=new Map;function ae(_){W(_ instanceof Function,"Expected a class definition");let d=te.get(_);return d?(W(d instanceof _,"Instance stored in cache mismatched with class"),d):(d=new _,te.set(_,d),d)}function pt(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function Ct(){return"http:"===Ot()||"https:"===Ot()}function Ot(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class Pt{constructor(d,p){this.shortDelay=d,this.longDelay=p,W(p>d,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return function Qt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ct()||(0,G.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Et(_,d){W(_.emulator,"Emulator should always be set here");const{url:p}=_.emulator;return d?`${p}${d.startsWith("/")?d.slice(1):d}`:p}class Wt{static initialize(d,p,w){this.fetchImpl=d,p&&(this.headersImpl=p),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Oe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Oe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Oe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const qt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},yn=new Pt(3e4,6e4);function $t(_,d){return _.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:_.tenantId}):d}function On(_,d,p,w){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,g.Z)(function*(_,d,p,w,B={}){return wr(_,B,(0,g.Z)(function*(){let J={},ke={};w&&("GET"===d?ke=w:J={body:JSON.stringify(w)});const dt=(0,G.xO)(Object.assign({key:_.config.apiKey},ke)).slice(1),Vt=yield _._getAdditionalHeaders();return Vt["Content-Type"]="application/json",_.languageCode&&(Vt["X-Firebase-Locale"]=_.languageCode),Wt.fetch()(nn(_,_.config.apiHost,p,dt),Object.assign({method:d,headers:Vt,referrerPolicy:"no-referrer"},J))}))})).apply(this,arguments)}function wr(_,d,p){return kn.apply(this,arguments)}function kn(){return(kn=(0,g.Z)(function*(_,d,p){_._canInitEmulator=!1;const w=Object.assign(Object.assign({},qt),d);try{const B=new zn(_),J=yield Promise.race([p(),B.promise]);B.clearNetworkTimeout();const ke=yield J.json();if("needConfirmation"in ke)throw $n(_,"account-exists-with-different-credential",ke);if(J.ok&&!("errorMessage"in ke))return ke;{const dt=J.ok?ke.errorMessage:ke.error.message,[Vt,fn]=dt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Vt)throw $n(_,"credential-already-in-use",ke);if("EMAIL_EXISTS"===Vt)throw $n(_,"email-already-in-use",ke);if("USER_DISABLED"===Vt)throw $n(_,"user-disabled",ke);const Un=w[Vt]||Vt.toLowerCase().replace(/[_\s]+/g,"-");if(fn)throw Le(_,Un,fn);se(_,Un)}}catch(B){if(B instanceof G.ZR)throw B;se(_,"network-request-failed")}})).apply(this,arguments)}function _r(_,d,p,w){return kr.apply(this,arguments)}function kr(){return(kr=(0,g.Z)(function*(_,d,p,w,B={}){const J=yield On(_,d,p,w,B);return"mfaPendingCredential"in J&&se(_,"multi-factor-auth-required",{_serverResponse:J}),J})).apply(this,arguments)}function nn(_,d,p,w){const B=`${d}${p}?${w}`;return _.config.emulator?Et(_.config,B):`${_.config.apiScheme}://${B}`}class zn{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((p,w)=>{this.timer=setTimeout(()=>w($e(this.auth,"network-request-failed")),yn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $n(_,d,p){const w={appName:_.name};p.email&&(w.email=p.email),p.phoneNumber&&(w.phoneNumber=p.phoneNumber);const B=$e(_,d,w);return B.customData._tokenResponse=p,B}function Kt(){return(Kt=(0,g.Z)(function*(_,d){return On(_,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function He(_,d){return q.apply(this,arguments)}function q(){return(q=(0,g.Z)(function*(_,d){return On(_,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function ne(_,d){return at.apply(this,arguments)}function at(){return(at=(0,g.Z)(function*(_,d){return On(_,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Dt(_){if(_)try{const d=new Date(Number(_));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function We(){return(We=(0,g.Z)(function*(_,d=!1){const p=(0,G.m9)(_),w=yield p.getIdToken(d),B=Ft(w);de(B&&B.exp&&B.auth_time&&B.iat,p.auth,"internal-error");const J="object"==typeof B.firebase?B.firebase:void 0,ke=J?.sign_in_provider;return{claims:B,token:w,authTime:Dt(Ue(B.auth_time)),issuedAtTime:Dt(Ue(B.iat)),expirationTime:Dt(Ue(B.exp)),signInProvider:ke||null,signInSecondFactor:J?.sign_in_second_factor||null}})).apply(this,arguments)}function Ue(_){return 1e3*Number(_)}function Ft(_){const[d,p,w]=_.split(".");if(void 0===d||void 0===p||void 0===w)return et("JWT malformed, contained fewer than 3 sections"),null;try{const B=(0,G.tV)(p);return B?JSON.parse(B):(et("Failed to decode base64 JWT payload"),null)}catch(B){return et("Caught error parsing JWT payload as JSON",B?.toString()),null}}function qn(_,d){return or.apply(this,arguments)}function or(){return(or=(0,g.Z)(function*(_,d,p=!1){if(p)return d;try{return yield d}catch(w){throw w instanceof G.ZR&&fi(w)&&_.auth.currentUser===_&&(yield _.auth.signOut()),w}})).apply(this,arguments)}function fi({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class $r{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var p;if(d){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const B=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,B)}}schedule(d=!1){var p=this;if(!this.isRunning)return;const w=this.getInterval(d);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),w)}iteration(){var d=this;return(0,g.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&d.schedule(!0))}d.schedule()})()}}class Bi{constructor(d,p){this.createdAt=d,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dt(this.lastLoginAt),this.creationTime=Dt(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Tn(_){return qr.apply(this,arguments)}function qr(){return(qr=(0,g.Z)(function*(_){var d;const p=_.auth,w=yield _.getIdToken(),B=yield qn(_,ne(p,{idToken:w}));de(B?.users.length,p,"internal-error");const J=B.users[0];_._notifyReloadListener(J);const ke=null!==(d=J.providerUserInfo)&&void 0!==d&&d.length?Mt(J.providerUserInfo):[],dt=ai(_.providerData,ke),Un=!!_.isAnonymous&&!(_.email&&J.passwordHash||dt?.length),Cn={uid:J.localId,displayName:J.displayName||null,photoURL:J.photoUrl||null,email:J.email||null,emailVerified:J.emailVerified||!1,phoneNumber:J.phoneNumber||null,tenantId:J.tenantId||null,providerData:dt,metadata:new Bi(J.createdAt,J.lastLoginAt),isAnonymous:Un};Object.assign(_,Cn)})).apply(this,arguments)}function rn(){return(rn=(0,g.Z)(function*(_){const d=(0,G.m9)(_);yield Tn(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function ai(_,d){return[..._.filter(w=>!d.some(B=>B.providerId===w.providerId)),...d]}function Mt(_){return _.map(d=>{var{providerId:p}=d,w=(0,be._T)(d,["providerId"]);return{providerId:p,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Zt(){return(Zt=(0,g.Z)(function*(_,d){const p=yield wr(_,{},(0,g.Z)(function*(){const w=(0,G.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:B,apiKey:J}=_.config,ke=nn(_,B,"/v1/token",`key=${J}`),dt=yield _._getAdditionalHeaders();return dt["Content-Type"]="application/x-www-form-urlencoded",Wt.fetch()(ke,{method:"POST",headers:dt,body:w})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class ln{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){de(d.idToken,"internal-error"),de(typeof d.idToken<"u","internal-error"),de(typeof d.refreshToken<"u","internal-error");const p="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function Er(_){const d=Ft(_);return de(d,"internal-error"),de(typeof d.exp<"u","internal-error"),de(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,p)}getToken(d,p=!1){var w=this;return(0,g.Z)(function*(){return de(!w.accessToken||w.refreshToken,d,"user-token-expired"),p||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(d,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,p){var w=this;return(0,g.Z)(function*(){const{accessToken:B,refreshToken:J,expiresIn:ke}=yield function ht(_,d){return Zt.apply(this,arguments)}(d,p);w.updateTokensAndExpiration(B,J,Number(ke))})()}updateTokensAndExpiration(d,p,w){this.refreshToken=p||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(d,p){const{refreshToken:w,accessToken:B,expirationTime:J}=p,ke=new ln;return w&&(de("string"==typeof w,"internal-error",{appName:d}),ke.refreshToken=w),B&&(de("string"==typeof B,"internal-error",{appName:d}),ke.accessToken=B),J&&(de("number"==typeof J,"internal-error",{appName:d}),ke.expirationTime=J),ke}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new ln,this.toJSON())}_performRefresh(){return Oe("not implemented")}}function pn(_,d){de("string"==typeof _||typeof _>"u","internal-error",{appName:d})}class sn{constructor(d){var{uid:p,auth:w,stsTokenManager:B}=d,J=(0,be._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $r(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=w,this.stsTokenManager=B,this.accessToken=B.accessToken,this.displayName=J.displayName||null,this.email=J.email||null,this.emailVerified=J.emailVerified||!1,this.phoneNumber=J.phoneNumber||null,this.photoURL=J.photoURL||null,this.isAnonymous=J.isAnonymous||!1,this.tenantId=J.tenantId||null,this.providerData=J.providerData?[...J.providerData]:[],this.metadata=new Bi(J.createdAt||void 0,J.lastLoginAt||void 0)}getIdToken(d){var p=this;return(0,g.Z)(function*(){const w=yield qn(p,p.stsTokenManager.getToken(p.auth,d));return de(w,p.auth,"internal-error"),p.accessToken!==w&&(p.accessToken=w,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),w})()}getIdTokenResult(d){return function Ge(_){return We.apply(this,arguments)}(this,d)}reload(){return function Mn(_){return rn.apply(this,arguments)}(this)}_assign(d){this!==d&&(de(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(p=>Object.assign({},p)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){return new sn(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(d){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,p=!1){var w=this;return(0,g.Z)(function*(){let B=!1;d.idToken&&d.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(d),B=!0),p&&(yield Tn(w)),yield w.auth._persistUserIfCurrent(w),B&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var d=this;return(0,g.Z)(function*(){const p=yield d.getIdToken();return yield qn(d,function Vn(_,d){return Kt.apply(this,arguments)}(d.auth,{idToken:p})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,p){var w,B,J,ke,dt,Vt,fn,Un;const Cn=null!==(w=p.displayName)&&void 0!==w?w:void 0,gs=null!==(B=p.email)&&void 0!==B?B:void 0,ga=null!==(J=p.phoneNumber)&&void 0!==J?J:void 0,Zl=null!==(ke=p.photoURL)&&void 0!==ke?ke:void 0,Fh=null!==(dt=p.tenantId)&&void 0!==dt?dt:void 0,Gl=null!==(Vt=p._redirectEventId)&&void 0!==Vt?Vt:void 0,Oa=null!==(fn=p.createdAt)&&void 0!==fn?fn:void 0,ma=null!==(Un=p.lastLoginAt)&&void 0!==Un?Un:void 0,{uid:tu,emailVerified:Dc,isAnonymous:_d,providerData:vd,stsTokenManager:Do}=p;de(tu&&Do,d,"internal-error");const jg=ln.fromJSON(this.name,Do);de("string"==typeof tu,d,"internal-error"),pn(Cn,d.name),pn(gs,d.name),de("boolean"==typeof Dc,d,"internal-error"),de("boolean"==typeof _d,d,"internal-error"),pn(ga,d.name),pn(Zl,d.name),pn(Fh,d.name),pn(Gl,d.name),pn(Oa,d.name),pn(ma,d.name);const dl=new sn({uid:tu,auth:d,email:gs,emailVerified:Dc,displayName:Cn,isAnonymous:_d,photoURL:Zl,phoneNumber:ga,tenantId:Fh,stsTokenManager:jg,createdAt:Oa,lastLoginAt:ma});return vd&&Array.isArray(vd)&&(dl.providerData=vd.map(Xo=>Object.assign({},Xo))),Gl&&(dl._redirectEventId=Gl),dl}static _fromIdTokenResponse(d,p,w=!1){return(0,g.Z)(function*(){const B=new ln;B.updateFromServerResponse(p);const J=new sn({uid:p.localId,auth:d,stsTokenManager:B,isAnonymous:w});return yield Tn(J),J})()}}const he=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,w){var B=this;return(0,g.Z)(function*(){B.storage[p]=w})()}_get(p){var w=this;return(0,g.Z)(function*(){const B=w.storage[p];return void 0===B?null:B})()}_remove(p){var w=this;return(0,g.Z)(function*(){delete w.storage[p]})()}_addListener(p,w){}_removeListener(p,w){}}return _.type="NONE",_})();function De(_,d,p){return`firebase:${_}:${d}:${p}`}class st{constructor(d,p,w){this.persistence=d,this.auth=p,this.userKey=w;const{config:B,name:J}=this.auth;this.fullUserKey=De(this.userKey,B.apiKey,J),this.fullPersistenceKey=De("persistence",B.apiKey,J),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,g.Z)(function*(){const p=yield d.persistence._get(d.fullUserKey);return p?sn._fromJSON(d.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var p=this;return(0,g.Z)(function*(){if(p.persistence===d)return;const w=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=d,w?p.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,p,w="authUser"){return(0,g.Z)(function*(){if(!p.length)return new st(ae(he),d,w);const B=(yield Promise.all(p.map(function(){var fn=(0,g.Z)(function*(Un){if(yield Un._isAvailable())return Un});return function(Un){return fn.apply(this,arguments)}}()))).filter(fn=>fn);let J=B[0]||ae(he);const ke=De(w,d.config.apiKey,d.name);let dt=null;for(const fn of p)try{const Un=yield fn._get(ke);if(Un){const Cn=sn._fromJSON(d,Un);fn!==J&&(dt=Cn),J=fn;break}}catch{}const Vt=B.filter(fn=>fn._shouldAllowMigration);return J._shouldAllowMigration&&Vt.length?(J=Vt[0],dt&&(yield J._set(ke,dt.toJSON())),yield Promise.all(p.map(function(){var fn=(0,g.Z)(function*(Un){if(Un!==J)try{yield Un._remove(ke)}catch{}});return function(Un){return fn.apply(this,arguments)}}())),new st(J,d,w)):new st(J,d,w)})()}}function Ze(_){const d=_.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(ar(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(Rt(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(Be(d))return"Blackberry";if(me(d))return"Webos";if(vn(d))return"Safari";if((d.includes("chrome/")||Fn(d))&&!d.includes("edge/"))return"Chrome";if(cn(d))return"Android";{const w=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function Rt(_=(0,G.z$)()){return/firefox\//i.test(_)}function vn(_=(0,G.z$)()){const d=_.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function Fn(_=(0,G.z$)()){return/crios\//i.test(_)}function ar(_=(0,G.z$)()){return/iemobile/i.test(_)}function cn(_=(0,G.z$)()){return/android/i.test(_)}function Be(_=(0,G.z$)()){return/blackberry/i.test(_)}function me(_=(0,G.z$)()){return/webos/i.test(_)}function ce(_=(0,G.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function on(_=(0,G.z$)()){return ce(_)||cn(_)||me(_)||Be(_)||/windows phone/i.test(_)||ar(_)}function Qn(_,d=[]){let p;switch(_){case"Browser":p=Ze((0,G.z$)());break;case"Worker":p=`${Ze((0,G.z$)())}-${_}`;break;default:p=_}const w=d.length?d.join(","):"FirebaseCore-web";return`${p}/JsCore/${ge.SDK_VERSION}/${w}`}class xr{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,p){const w=J=>new Promise((ke,dt)=>{try{ke(d(J))}catch(Vt){dt(Vt)}});w.onAbort=p,this.queue.push(w);const B=this.queue.length-1;return()=>{this.queue[B]=()=>Promise.resolve()}}runMiddleware(d){var p=this;return(0,g.Z)(function*(){if(p.auth.currentUser===d)return;const w=[];try{for(const B of p.queue)yield B(d),B.onAbort&&w.push(B.onAbort)}catch(B){w.reverse();for(const J of w)try{J()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:B?.message})}})()}}class Li{constructor(d,p,w){this.app=d,this.heartbeatServiceProvider=p,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rs(this),this.idTokenSubscription=new Rs(this),this.beforeStateQueue=new xr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ne,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(d,p){var w=this;return p&&(this._popupRedirectResolver=ae(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var B,J;if(!w._deleted&&(w.persistenceManager=yield st.create(w,d),!w._deleted)){if(null!==(B=w._popupRedirectResolver)&&void 0!==B&&B._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(p),w.lastNotifiedUid=(null===(J=w.currentUser)||void 0===J?void 0:J.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,g.Z)(function*(){if(d._deleted)return;const p=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||p){if(d.currentUser&&p&&d.currentUser.uid===p.uid)return d._currentUser._assign(p),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(p,!0)}})()}initializeCurrentUser(d){var p=this;return(0,g.Z)(function*(){var w;const B=yield p.assertedPersistence.getCurrentUser();let J=B,ke=!1;if(d&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const dt=null===(w=p.redirectUser)||void 0===w?void 0:w._redirectEventId,Vt=J?._redirectEventId,fn=yield p.tryRedirectSignIn(d);(!dt||dt===Vt)&&fn?.user&&(J=fn.user,ke=!0)}if(!J)return p.directlySetCurrentUser(null);if(!J._redirectEventId){if(ke)try{yield p.beforeStateQueue.runMiddleware(J)}catch(dt){J=B,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(dt))}return J?p.reloadAndSetCurrentUserOrClear(J):p.directlySetCurrentUser(null)}return de(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===J._redirectEventId?p.directlySetCurrentUser(J):p.reloadAndSetCurrentUserOrClear(J)})()}tryRedirectSignIn(d){var p=this;return(0,g.Z)(function*(){let w=null;try{w=yield p._popupRedirectResolver._completeRedirectFn(p,d,!0)}catch{yield p._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(d){var p=this;return(0,g.Z)(function*(){try{yield Tn(d)}catch(w){if("auth/network-request-failed"!==w?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function Nt(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var d=this;return(0,g.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var p=this;return(0,g.Z)(function*(){const w=d?(0,G.m9)(d):null;return w&&de(w.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(w&&w._clone(p))})()}_updateCurrentUser(d,p=!1){var w=this;return(0,g.Z)(function*(){if(!w._deleted)return d&&de(w.tenantId===d.tenantId,w,"tenant-id-mismatch"),p||(yield w.beforeStateQueue.runMiddleware(d)),w.queue((0,g.Z)(function*(){yield w.directlySetCurrentUser(d),w.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,g.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(ae(d))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new G.LL("auth","Firebase",d())}onAuthStateChanged(d,p,w){return this.registerStateListener(this.authStateSubscription,d,p,w)}beforeAuthStateChanged(d,p){return this.beforeStateQueue.pushCallback(d,p)}onIdTokenChanged(d,p,w){return this.registerStateListener(this.idTokenSubscription,d,p,w)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,p){var w=this;return(0,g.Z)(function*(){const B=yield w.getOrInitRedirectPersistenceManager(p);return null===d?B.removeCurrentUser():B.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const w=d&&ae(d)||p._popupRedirectResolver;de(w,p,"argument-error"),p.redirectPersistenceManager=yield st.create(p,[ae(w._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(d){var p=this;return(0,g.Z)(function*(){var w,B;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(w=p._currentUser)||void 0===w?void 0:w._redirectEventId)===d?p._currentUser:(null===(B=p.redirectUser)||void 0===B?void 0:B._redirectEventId)===d?p.redirectUser:null})()}_persistUserIfCurrent(d){var p=this;return(0,g.Z)(function*(){if(d===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(p=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,p,w,B){if(this._deleted)return()=>{};const J="function"==typeof p?p:p.next.bind(p),ke=this._isInitialized?Promise.resolve():this._initializationPromise;return de(ke,this,"internal-error"),ke.then(()=>J(this.currentUser)),"function"==typeof p?d.addObserver(p,w,B):d.addObserver(p)}directlySetCurrentUser(d){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==d&&p._currentUser._stopProactiveRefresh(),d&&p.isProactiveRefreshEnabled&&d._startProactiveRefresh(),p.currentUser=d,d?yield p.assertedPersistence.setCurrentUser(d):yield p.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=Qn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,g.Z)(function*(){var p;const w={"X-Client-Version":d.clientVersion};d.app.options.appId&&(w["X-Firebase-gmpid"]=d.app.options.appId);const B=yield null===(p=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return B&&(w["X-Firebase-Client"]=B),w})()}}function nr(_){return(0,G.m9)(_)}class Rs{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,G.ne)(p=>this.observer=p)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Si(_){const d=_.indexOf(":");return d<0?"":_.substr(0,d+1)}function Jn(_){if(!_)return null;const d=Number(_);return isNaN(d)?null:d}class Dr{constructor(d,p){this.providerId=d,this.signInMethod=p}toJSON(){return Oe("not implemented")}_getIdTokenResponse(d){return Oe("not implemented")}_linkToIdToken(d,p){return Oe("not implemented")}_getReauthenticationResolver(d){return Oe("not implemented")}}function Tr(_,d){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,g.Z)(function*(_,d){return On(_,"POST","/v1/accounts:resetPassword",$t(_,d))})).apply(this,arguments)}function Ai(_,d){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,g.Z)(function*(_,d){return On(_,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function gn(_,d){return mr.apply(this,arguments)}function mr(){return(mr=(0,g.Z)(function*(_,d){return On(_,"POST","/v1/accounts:update",$t(_,d))})).apply(this,arguments)}function Jr(){return(Jr=(0,g.Z)(function*(_,d){return _r(_,"POST","/v1/accounts:signInWithPassword",$t(_,d))})).apply(this,arguments)}function Pr(_,d){return bi.apply(this,arguments)}function bi(){return(bi=(0,g.Z)(function*(_,d){return On(_,"POST","/v1/accounts:sendOobCode",$t(_,d))})).apply(this,arguments)}function ur(_,d){return as.apply(this,arguments)}function as(){return(as=(0,g.Z)(function*(_,d){return Pr(_,d)})).apply(this,arguments)}function Fr(_,d){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,g.Z)(function*(_,d){return Pr(_,d)})).apply(this,arguments)}function wi(_,d){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,g.Z)(function*(_,d){return Pr(_,d)})).apply(this,arguments)}function $i(_,d){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,g.Z)(function*(_,d){return Pr(_,d)})).apply(this,arguments)}function Br(){return(Br=(0,g.Z)(function*(_,d){return _r(_,"POST","/v1/accounts:signInWithEmailLink",$t(_,d))})).apply(this,arguments)}function ui(){return(ui=(0,g.Z)(function*(_,d){return _r(_,"POST","/v1/accounts:signInWithEmailLink",$t(_,d))})).apply(this,arguments)}class bs extends Dr{constructor(d,p,w,B=null){super("password",w),this._email=d,this._password=p,this._tenantId=B}static _fromEmailAndPassword(d,p){return new bs(d,p,"password")}static _fromEmailAndCode(d,p,w=null){return new bs(d,p,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(d){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function pi(_,d){return Jr.apply(this,arguments)}(d,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function yr(_,d){return Br.apply(this,arguments)}(d,{email:p._email,oobCode:p._password});default:se(d,"internal-error")}})()}_linkToIdToken(d,p){var w=this;return(0,g.Z)(function*(){switch(w.signInMethod){case"password":return Ai(d,{idToken:p,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function vs(_,d){return ui.apply(this,arguments)}(d,{idToken:p,email:w._email,oobCode:w._password});default:se(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function rr(_,d){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,g.Z)(function*(_,d){return _r(_,"POST","/v1/accounts:signInWithIdp",$t(_,d))})).apply(this,arguments)}class je extends Dr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const p=new je(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(p.idToken=d.idToken),d.accessToken&&(p.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(p.nonce=d.nonce),d.pendingToken&&(p.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(p.accessToken=d.oauthToken,p.secret=d.oauthTokenSecret):se("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:w,signInMethod:B}=p,J=(0,be._T)(p,["providerId","signInMethod"]);if(!w||!B)return null;const ke=new je(w,B);return ke.idToken=J.idToken||void 0,ke.accessToken=J.accessToken||void 0,ke.secret=J.secret,ke.nonce=J.nonce,ke.pendingToken=J.pendingToken||null,ke}_getIdTokenResponse(d){return rr(d,this.buildRequest())}_linkToIdToken(d,p){const w=this.buildRequest();return w.idToken=p,rr(d,w)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,rr(d,p)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),d.postBody=(0,G.xO)(p)}return d}}function gt(_,d){return At.apply(this,arguments)}function At(){return(At=(0,g.Z)(function*(_,d){return On(_,"POST","/v1/accounts:sendVerificationCode",$t(_,d))})).apply(this,arguments)}function _n(){return(_n=(0,g.Z)(function*(_,d){return _r(_,"POST","/v1/accounts:signInWithPhoneNumber",$t(_,d))})).apply(this,arguments)}function ir(){return(ir=(0,g.Z)(function*(_,d){const p=yield _r(_,"POST","/v1/accounts:signInWithPhoneNumber",$t(_,d));if(p.temporaryProof)throw $n(_,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Lr={USER_NOT_FOUND:"user-not-found"};function ei(){return(ei=(0,g.Z)(function*(_,d){return _r(_,"POST","/v1/accounts:signInWithPhoneNumber",$t(_,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Lr)})).apply(this,arguments)}class ci extends Dr{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,p){return new ci({verificationId:d,verificationCode:p})}static _fromTokenResponse(d,p){return new ci({phoneNumber:d,temporaryProof:p})}_getIdTokenResponse(d){return function an(_,d){return _n.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,p){return function Bn(_,d){return ir.apply(this,arguments)}(d,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function li(_,d){return ei.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:p,verificationId:w,verificationCode:B}=this.params;return d&&p?{temporaryProof:d,phoneNumber:p}:{sessionInfo:w,code:B}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:p,verificationCode:w,phoneNumber:B,temporaryProof:J}=d;return w||p||B||J?new ci({verificationId:p,verificationCode:w,phoneNumber:B,temporaryProof:J}):null}}class ws{constructor(d){var p,w,B,J,ke,dt;const Vt=(0,G.zd)((0,G.pd)(d)),fn=null!==(p=Vt.apiKey)&&void 0!==p?p:null,Un=null!==(w=Vt.oobCode)&&void 0!==w?w:null,Cn=function Hi(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(B=Vt.mode)&&void 0!==B?B:null);de(fn&&Un&&Cn,"argument-error"),this.apiKey=fn,this.operation=Cn,this.code=Un,this.continueUrl=null!==(J=Vt.continueUrl)&&void 0!==J?J:null,this.languageCode=null!==(ke=Vt.languageCode)&&void 0!==ke?ke:null,this.tenantId=null!==(dt=Vt.tenantId)&&void 0!==dt?dt:null}static parseLink(d){const p=function ii(_){const d=(0,G.zd)((0,G.pd)(_)).link,p=d?(0,G.zd)((0,G.pd)(d)).deep_link_id:null,w=(0,G.zd)((0,G.pd)(_)).deep_link_id;return(w?(0,G.zd)((0,G.pd)(w)).link:null)||w||p||d||_}(d);try{return new ws(p)}catch{return null}}}let js=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(p,w){return bs._fromEmailAndPassword(p,w)}static credentialWithLink(p,w){const B=ws.parseLink(w);return de(B,"argument-error"),bs._fromEmailAndCode(p,B.code,B.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class gi{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class us extends gi{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class $s extends us{static credentialFromJSON(d){const p="string"==typeof d?JSON.parse(d):d;return de("providerId"in p&&"signInMethod"in p,"argument-error"),je._fromParams(p)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return de(d.idToken||d.accessToken,"argument-error"),je._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return $s.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return $s.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:w,oauthTokenSecret:B,pendingToken:J,nonce:ke,providerId:dt}=d;if(!w&&!B&&!p&&!J||!dt)return null;try{return new $s(dt)._credential({idToken:p,accessToken:w,nonce:ke,pendingToken:J})}catch{return null}}}let Os=(()=>{class _ extends us{constructor(){super("facebook.com")}static credential(p){return je._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Ns=(()=>{class _ extends us{constructor(){super("google.com"),this.addScope("profile")}static credential(p,w){return je._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:w})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:w,oauthAccessToken:B}=p;if(!w&&!B)return null;try{return _.credential(w,B)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Es=(()=>{class _ extends us{constructor(){super("github.com")}static credential(p){return je._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Ui extends Dr{constructor(d,p){super(d,d),this.pendingToken=p}_getIdTokenResponse(d){return rr(d,this.buildRequest())}_linkToIdToken(d,p){const w=this.buildRequest();return w.idToken=p,rr(d,w)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,rr(d,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:w,signInMethod:B,pendingToken:J}=p;return w&&B&&J&&w===B?new Ui(w,J):null}static _create(d,p){return new Ui(d,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Gi extends gi{constructor(d){de(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return Gi.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return Gi.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const p=Ui.fromJSON(d);return de(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:p,providerId:w}=d;if(!p||!w)return null;try{return Ui._create(w,p)}catch{return null}}}let Zs=(()=>{class _ extends us{constructor(){super("twitter.com")}static credential(p,w){return je._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:w})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:w,oauthTokenSecret:B}=p;if(!w||!B)return null;try{return _.credential(w,B)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function ko(_,d){return So.apply(this,arguments)}function So(){return(So=(0,g.Z)(function*(_,d){return _r(_,"POST","/v1/accounts:signUp",$t(_,d))})).apply(this,arguments)}class mi{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,p,w,B=!1){return(0,g.Z)(function*(){const J=yield sn._fromIdTokenResponse(d,w,B),ke=eo(w);return new mi({user:J,providerId:ke,_tokenResponse:w,operationType:p})})()}static _forOperation(d,p,w){return(0,g.Z)(function*(){yield d._updateTokensIfNecessary(w,!0);const B=eo(w);return new mi({user:d,providerId:B,_tokenResponse:w,operationType:p})})()}}function eo(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function cs(){return(cs=(0,g.Z)(function*(_){var d;const p=nr(_);if(yield p._initializationPromise,null!==(d=p.currentUser)&&void 0!==d&&d.isAnonymous)return new mi({user:p.currentUser,providerId:null,operationType:"signIn"});const w=yield ko(p,{returnSecureToken:!0}),B=yield mi._fromIdTokenResponse(p,"signIn",w,!0);return yield p._updateCurrentUser(B.user),B})).apply(this,arguments)}class Gs extends G.ZR{constructor(d,p,w,B){var J;super(p.code,p.message),this.operationType=w,this.user=B,Object.setPrototypeOf(this,Gs.prototype),this.customData={appName:d.name,tenantId:null!==(J=d.tenantId)&&void 0!==J?J:void 0,_serverResponse:p.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(d,p,w,B){return new Gs(d,p,w,B)}}function Ji(_,d,p,w){return("reauthenticate"===d?p._getReauthenticationResolver(_):p._getIdTokenResponse(_)).catch(J=>{throw"auth/multi-factor-auth-required"===J.code?Gs._fromErrorAndOperation(_,J,d,w):J})}function zi(_){return new Set(_.map(({providerId:d})=>d).filter(d=>!!d))}function Ni(){return(Ni=(0,g.Z)(function*(_,d){const p=(0,G.m9)(_);yield xi(!0,p,d);const{providerUserInfo:w}=yield He(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[d]}),B=zi(w||[]);return p.providerData=p.providerData.filter(J=>B.has(J.providerId)),B.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function ks(_,d){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,g.Z)(function*(_,d,p=!1){const w=yield qn(_,d._linkToIdToken(_.auth,yield _.getIdToken()),p);return mi._forOperation(_,"link",w)})).apply(this,arguments)}function xi(_,d,p){return zs.apply(this,arguments)}function zs(){return(zs=(0,g.Z)(function*(_,d,p){yield Tn(d);const B=!1===_?"provider-already-linked":"no-such-provider";de(zi(d.providerData).has(p)===_,d.auth,B)})).apply(this,arguments)}function qs(_,d){return to.apply(this,arguments)}function to(){return(to=(0,g.Z)(function*(_,d,p=!1){const{auth:w}=_,B="reauthenticate";try{const J=yield qn(_,Ji(w,B,d,_),p);de(J.idToken,w,"internal-error");const ke=Ft(J.idToken);de(ke,w,"internal-error");const{sub:dt}=ke;return de(_.uid===dt,w,"user-mismatch"),mi._forOperation(_,B,J)}catch(J){throw"auth/user-not-found"===J?.code&&se(w,"user-mismatch"),J}})).apply(this,arguments)}function yo(_,d){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,g.Z)(function*(_,d,p=!1){const w="signIn",B=yield Ji(_,w,d),J=yield mi._fromIdTokenResponse(_,w,B);return p||(yield _._updateCurrentUser(J.user)),J})).apply(this,arguments)}function Ir(_,d){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,g.Z)(function*(_,d){return yo(nr(_),d)})).apply(this,arguments)}function Hr(_,d){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,g.Z)(function*(_,d){const p=(0,G.m9)(_);return yield xi(!1,p,d.providerId),ks(p,d)})).apply(this,arguments)}function Xi(_,d){return dr.apply(this,arguments)}function dr(){return(dr=(0,g.Z)(function*(_,d){return qs((0,G.m9)(_),d)})).apply(this,arguments)}function Ao(_,d){return ds.apply(this,arguments)}function ds(){return(ds=(0,g.Z)(function*(_,d){return _r(_,"POST","/v1/accounts:signInWithCustomToken",$t(_,d))})).apply(this,arguments)}function yi(){return(yi=(0,g.Z)(function*(_,d){const p=nr(_),w=yield Ao(p,{token:d,returnSecureToken:!0}),B=yield mi._fromIdTokenResponse(p,"signIn",w);return yield p._updateCurrentUser(B.user),B})).apply(this,arguments)}class Cs{constructor(d,p){this.factorId=d,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(d,p){return"phoneInfo"in p?es._fromServerResponse(d,p):se(d,"internal-error")}}class es extends Cs{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,p){return new es(p)}}function _o(_,d,p){var w;de((null===(w=p.url)||void 0===w?void 0:w.length)>0,_,"invalid-continue-uri"),de(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),d.continueUrl=p.url,d.dynamicLinkDomain=p.dynamicLinkDomain,d.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(de(p.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),d.iOSBundleId=p.iOS.bundleId),p.android&&(de(p.android.packageName.length>0,_,"missing-android-pkg-name"),d.androidInstallApp=p.android.installApp,d.androidMinimumVersionCode=p.android.minimumVersion,d.androidPackageName=p.android.packageName)}function qi(){return(qi=(0,g.Z)(function*(_,d,p){const w=(0,G.m9)(_),B={requestType:"PASSWORD_RESET",email:d};p&&_o(w,B,p),yield Fr(w,B)})).apply(this,arguments)}function En(){return(En=(0,g.Z)(function*(_,d,p){yield Tr((0,G.m9)(_),{oobCode:d,newPassword:p})})).apply(this,arguments)}function vo(){return(vo=(0,g.Z)(function*(_,d){yield gn((0,G.m9)(_),{oobCode:d})})).apply(this,arguments)}function no(_,d){return $.apply(this,arguments)}function $(){return($=(0,g.Z)(function*(_,d){const p=(0,G.m9)(_),w=yield Tr(p,{oobCode:d}),B=w.requestType;switch(de(B,p,"internal-error"),B){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":de(w.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":de(w.mfaInfo,p,"internal-error");default:de(w.email,p,"internal-error")}let J=null;return w.mfaInfo&&(J=Cs._fromServerResponse(nr(p),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:J},operation:B}})).apply(this,arguments)}function ee(){return(ee=(0,g.Z)(function*(_,d){const{data:p}=yield no((0,G.m9)(_),d);return p.email})).apply(this,arguments)}function Te(){return(Te=(0,g.Z)(function*(_,d,p){const w=nr(_),B=yield ko(w,{returnSecureToken:!0,email:d,password:p}),J=yield mi._fromIdTokenResponse(w,"signIn",B);return yield w._updateCurrentUser(J.user),J})).apply(this,arguments)}function S(){return(S=(0,g.Z)(function*(_,d,p){const w=(0,G.m9)(_),B={requestType:"EMAIL_SIGNIN",email:d};de(p.handleCodeInApp,w,"argument-error"),p&&_o(w,B,p),yield wi(w,B)})).apply(this,arguments)}function mt(){return(mt=(0,g.Z)(function*(_,d,p){const w=(0,G.m9)(_),B=js.credentialWithLink(d,p||pt());return de(B._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Ir(w,B)})).apply(this,arguments)}function In(_,d){return An.apply(this,arguments)}function An(){return(An=(0,g.Z)(function*(_,d){return On(_,"POST","/v1/accounts:createAuthUri",$t(_,d))})).apply(this,arguments)}function hr(){return(hr=(0,g.Z)(function*(_,d){const w={identifier:d,continueUri:Ct()?pt():"http://localhost"},{signinMethods:B}=yield In((0,G.m9)(_),w);return B||[]})).apply(this,arguments)}function Rr(){return(Rr=(0,g.Z)(function*(_,d){const p=(0,G.m9)(_),B={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};d&&_o(p.auth,B,d);const{email:J}=yield ur(p.auth,B);J!==_.email&&(yield _.reload())})).apply(this,arguments)}function Xn(){return(Xn=(0,g.Z)(function*(_,d,p){const w=(0,G.m9)(_),J={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:d};p&&_o(w.auth,J,p);const{email:ke}=yield $i(w.auth,J);ke!==_.email&&(yield _.reload())})).apply(this,arguments)}function Ur(_,d){return si.apply(this,arguments)}function si(){return(si=(0,g.Z)(function*(_,d){return On(_,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Kr(){return(Kr=(0,g.Z)(function*(_,{displayName:d,photoURL:p}){if(void 0===d&&void 0===p)return;const w=(0,G.m9)(_),J={idToken:yield w.getIdToken(),displayName:d,photoUrl:p,returnSecureToken:!0},ke=yield qn(w,Ur(w.auth,J));w.displayName=ke.displayName||null,w.photoURL=ke.photoUrl||null;const dt=w.providerData.find(({providerId:Vt})=>"password"===Vt);dt&&(dt.displayName=w.displayName,dt.photoURL=w.photoURL),yield w._updateTokensIfNecessary(ke)})).apply(this,arguments)}function Ts(_,d,p){return jo.apply(this,arguments)}function jo(){return(jo=(0,g.Z)(function*(_,d,p){const{auth:w}=_,J={idToken:yield _.getIdToken(),returnSecureToken:!0};d&&(J.email=d),p&&(J.password=p);const ke=yield qn(_,Ai(w,J));yield _._updateTokensIfNecessary(ke,!0)})).apply(this,arguments)}class Po{constructor(d,p,w={}){this.isNewUser=d,this.providerId=p,this.profile=w}}class Fa extends Po{constructor(d,p,w,B){super(d,p,w),this.username=B}}class ro extends Po{constructor(d,p){super(d,"facebook.com",p)}}class va extends Fa{constructor(d,p){super(d,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class La extends Po{constructor(d,p){super(d,"google.com",p)}}class bo extends Fa{constructor(d,p,w){super(d,"twitter.com",p,w)}}function $o(_){const{user:d,_tokenResponse:p}=_;return d.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function ra(_){var d,p;if(!_)return null;const{providerId:w}=_,B=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},J=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!w&&_?.idToken){const ke=null===(p=null===(d=Ft(_.idToken))||void 0===d?void 0:d.firebase)||void 0===p?void 0:p.sign_in_provider;if(ke)return new Po(J,"anonymous"!==ke&&"custom"!==ke?ke:null)}if(!w)return null;switch(w){case"facebook.com":return new ro(J,B);case"github.com":return new va(J,B);case"google.com":return new La(J,B);case"twitter.com":return new bo(J,B,_.screenName||null);case"custom":case"anonymous":return new Po(J,null);default:return new Po(J,w,B)}}(p)}class io{constructor(d,p,w){this.type=d,this.credential=p,this.auth=w}static _fromIdtoken(d,p){return new io("enroll",d,p)}static _fromMfaPendingCredential(d){return new io("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var p,w;if(d?.multiFactorSession){if(null!==(p=d.multiFactorSession)&&void 0!==p&&p.pendingCredential)return io._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(w=d.multiFactorSession)&&void 0!==w&&w.idToken)return io._fromIdtoken(d.multiFactorSession.idToken)}return null}}class ns{constructor(d,p,w){this.session=d,this.hints=p,this.signInResolver=w}static _fromError(d,p){const w=nr(d),B=p.customData._serverResponse,J=(B.mfaInfo||[]).map(dt=>Cs._fromServerResponse(w,dt));de(B.mfaPendingCredential,w,"internal-error");const ke=io._fromMfaPendingCredential(B.mfaPendingCredential);return new ns(ke,J,function(){var dt=(0,g.Z)(function*(Vt){const fn=yield Vt._process(w,ke);delete B.mfaInfo,delete B.mfaPendingCredential;const Un=Object.assign(Object.assign({},B),{idToken:fn.idToken,refreshToken:fn.refreshToken});switch(p.operationType){case"signIn":const Cn=yield mi._fromIdTokenResponse(w,p.operationType,Un);return yield w._updateCurrentUser(Cn.user),Cn;case"reauthenticate":return de(p.user,w,"internal-error"),mi._forOperation(p.user,p.operationType,Un);default:se(w,"internal-error")}});return function(Vt){return dt.apply(this,arguments)}}())}resolveSignIn(d){var p=this;return(0,g.Z)(function*(){return p.signInResolver(d)})()}}function au(_,d){return On(_,"POST","/v2/accounts/mfaEnrollment:start",$t(_,d))}class j{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(w=>Cs._fromServerResponse(d.auth,w)))})}static _fromUser(d){return new j(d)}getSession(){var d=this;return(0,g.Z)(function*(){return io._fromIdtoken(yield d.user.getIdToken(),d.user.auth)})()}enroll(d,p){var w=this;return(0,g.Z)(function*(){const B=d,J=yield w.getSession(),ke=yield qn(w.user,B._process(w.user.auth,J,p));return yield w.user._updateTokensIfNecessary(ke),w.user.reload()})()}unenroll(d){var p=this;return(0,g.Z)(function*(){const w="string"==typeof d?d:d.uid,B=yield p.user.getIdToken(),J=yield qn(p.user,function x(_,d){return On(_,"POST","/v2/accounts/mfaEnrollment:withdraw",$t(_,d))}(p.user.auth,{idToken:B,mfaEnrollmentId:w}));p.enrolledFactors=p.enrolledFactors.filter(({uid:ke})=>ke!==w),yield p.user._updateTokensIfNecessary(J);try{yield p.user.reload()}catch(ke){if("auth/user-token-expired"!==ke?.code)throw ke}})()}}const M=new WeakMap,_e="__sak";class it{constructor(d,p){this.storageRetriever=d,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(_e,"1"),this.storage.removeItem(_e),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,p){return this.storage.setItem(d,JSON.stringify(p)),Promise.resolve()}_get(d){const p=this.storage.getItem(d);return Promise.resolve(p?JSON.parse(p):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const Rn=(()=>{class _ extends it{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,w)=>this.onStorageEvent(p,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function yt(){const _=(0,G.z$)();return vn(_)||ce(_)}()&&function Pn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=on(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const w of Object.keys(this.listeners)){const B=this.storage.getItem(w),J=this.localCache[w];B!==J&&p(w,J,B)}}onStorageEvent(p,w=!1){if(!p.key)return void this.forAllChangedKeys((dt,Vt,fn)=>{this.notifyListeners(dt,fn)});const B=p.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const dt=this.storage.getItem(B);if(p.newValue!==dt)null!==p.newValue?this.storage.setItem(B,p.newValue):this.storage.removeItem(B);else if(this.localCache[B]===p.newValue&&!w)return}const J=()=>{const dt=this.storage.getItem(B);!w&&this.localCache[B]===dt||this.notifyListeners(B,dt)},ke=this.storage.getItem(B);!function dn(){return(0,G.w1)()&&10===document.documentMode}()||ke===p.newValue||p.newValue===p.oldValue?J():setTimeout(J,10)}notifyListeners(p,w){this.localCache[p]=w;const B=this.listeners[p];if(B)for(const J of Array.from(B))J(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,w,B)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:w,newValue:B}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(w)}_removeListener(p,w){this.listeners[p]&&(this.listeners[p].delete(w),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,w){var B=()=>super._set,J=this;return(0,g.Z)(function*(){yield B().call(J,p,w),J.localCache[p]=JSON.stringify(w)})()}_get(p){var w=()=>super._get,B=this;return(0,g.Z)(function*(){const J=yield w().call(B,p);return B.localCache[p]=JSON.stringify(J),J})()}_remove(p){var w=()=>super._remove,B=this;return(0,g.Z)(function*(){yield w().call(B,p),delete B.localCache[p]})()}}return _.type="LOCAL",_})(),Cr=(()=>{class _ extends it{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,w){}_removeListener(p,w){}}return _.type="SESSION",_})();let Vi=(()=>{class _{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const w=this.receivers.find(J=>J.isListeningto(p));if(w)return w;const B=new _(p);return this.receivers.push(B),B}isListeningto(p){return this.eventTarget===p}handleEvent(p){var w=this;return(0,g.Z)(function*(){const B=p,{eventId:J,eventType:ke,data:dt}=B.data,Vt=w.handlersMap[ke];if(!Vt?.size)return;B.ports[0].postMessage({status:"ack",eventId:J,eventType:ke});const fn=Array.from(Vt).map(function(){var Cn=(0,g.Z)(function*(gs){return gs(B.origin,dt)});return function(gs){return Cn.apply(this,arguments)}}()),Un=yield function Or(_){return Promise.all(_.map(function(){var d=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(w){return{fulfilled:!1,reason:w}}});return function(p){return d.apply(this,arguments)}}()))}(fn);B.ports[0].postMessage({status:"done",eventId:J,eventType:ke,response:Un})})()}_subscribe(p,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(w)}_unsubscribe(p,w){this.handlersMap[p]&&w&&this.handlersMap[p].delete(w),(!w||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function It(_="",d=10){let p="";for(let w=0;w<d;w++)p+=Math.floor(10*Math.random());return _+p}class vr{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,p,w=50){var B=this;return(0,g.Z)(function*(){const J=typeof MessageChannel<"u"?new MessageChannel:null;if(!J)throw new Error("connection_unavailable");let ke,dt;return new Promise((Vt,fn)=>{const Un=It("",20);J.port1.start();const Cn=setTimeout(()=>{fn(new Error("unsupported_event"))},w);dt={messageChannel:J,onMessage(gs){const ga=gs;if(ga.data.eventId===Un)switch(ga.data.status){case"ack":clearTimeout(Cn),ke=setTimeout(()=>{fn(new Error("timeout"))},3e3);break;case"done":clearTimeout(ke),Vt(ga.data.response);break;default:clearTimeout(Cn),clearTimeout(ke),fn(new Error("invalid_response"))}}},B.handlers.add(dt),J.port1.addEventListener("message",dt.onMessage),B.target.postMessage({eventType:d,eventId:Un,data:p},[J.port2])}).finally(()=>{dt&&B.removeMessageHandler(dt)})})()}}function br(){return window}function jt(){return typeof br().WorkerGlobalScope<"u"&&"function"==typeof br().importScripts}function oa(){return(oa=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const wt="firebaseLocalStorageDb",Mo="firebaseLocalStorage",Ua="fbase_key";class wa{constructor(d){this.request=d}toPromise(){return new Promise((d,p)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Va(_,d){return _.transaction([Mo],d?"readwrite":"readonly").objectStore(Mo)}function Au(){const _=indexedDB.open(wt,1);return new Promise((d,p)=>{_.addEventListener("error",()=>{p(_.error)}),_.addEventListener("upgradeneeded",()=>{const w=_.result;try{w.createObjectStore(Mo,{keyPath:Ua})}catch(B){p(B)}}),_.addEventListener("success",(0,g.Z)(function*(){const w=_.result;w.objectStoreNames.contains(Mo)?d(w):(w.close(),yield function uu(){const _=indexedDB.deleteDatabase(wt);return new wa(_).toPromise()}(),d(yield Au()))}))})}function rs(_,d,p){return xu.apply(this,arguments)}function xu(){return(xu=(0,g.Z)(function*(_,d,p){const w=Va(_,!0).put({[Ua]:d,value:p});return new wa(w).toPromise()})).apply(this,arguments)}function Go(){return(Go=(0,g.Z)(function*(_,d){const p=Va(_,!1).get(d),w=yield new wa(p).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function ja(_,d){const p=Va(_,!0).delete(d);return new wa(p).toPromise()}const Kn=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield Au()),p.db})()}_withRetries(p){var w=this;return(0,g.Z)(function*(){let B=0;for(;;)try{const J=yield w._openDb();return yield p(J)}catch(J){if(B++>3)throw J;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return jt()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=Vi._getInstance(function ot(){return jt()?self:null}()),p.receiver._subscribe("keyChanged",function(){var w=(0,g.Z)(function*(B,J){return{keyProcessed:(yield p._poll()).includes(J.key)}});return function(B,J){return w.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var w=(0,g.Z)(function*(B,J){return["keyChanged"]});return function(B,J){return w.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var w,B;if(p.activeServiceWorker=yield function Jt(){return oa.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new vr(p.activeServiceWorker);const J=yield p.sender._send("ping",{},800);!J||(null===(w=J[0])||void 0===w?void 0:w.fulfilled)&&(null===(B=J[0])||void 0===B?void 0:B.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var w=this;return(0,g.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function zt(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:p},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Au();return yield rs(p,_e,"1"),yield ja(p,_e),!0}catch{}return!1})()}_withPendingWrite(p){var w=this;return(0,g.Z)(function*(){w.pendingWrites++;try{yield p()}finally{w.pendingWrites--}})()}_set(p,w){var B=this;return(0,g.Z)(function*(){return B._withPendingWrite((0,g.Z)(function*(){return yield B._withRetries(J=>rs(J,p,w)),B.localCache[p]=w,B.notifyServiceWorker(p)}))})()}_get(p){var w=this;return(0,g.Z)(function*(){const B=yield w._withRetries(J=>function Ba(_,d){return Go.apply(this,arguments)}(J,p));return w.localCache[p]=B,B})()}_remove(p){var w=this;return(0,g.Z)(function*(){return w._withPendingWrite((0,g.Z)(function*(){return yield w._withRetries(B=>ja(B,p)),delete w.localCache[p],w.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const w=yield p._withRetries(ke=>{const dt=Va(ke,!1).getAll();return new wa(dt).toPromise()});if(!w)return[];if(0!==p.pendingWrites)return[];const B=[],J=new Set;for(const{fbase_key:ke,value:dt}of w)J.add(ke),JSON.stringify(p.localCache[ke])!==JSON.stringify(dt)&&(p.notifyListeners(ke,dt),B.push(ke));for(const ke of Object.keys(p.localCache))p.localCache[ke]&&!J.has(ke)&&(p.notifyListeners(ke,null),B.push(ke));return B})()}notifyListeners(p,w){this.localCache[p]=w;const B=this.listeners[p];if(B)for(const J of Array.from(B))J(w)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(w)}_removeListener(p,w){this.listeners[p]&&(this.listeners[p].delete(w),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function mn(_,d){return On(_,"POST","/v2/accounts/mfaSignIn:start",$t(_,d))}function lu(){return(lu=(0,g.Z)(function*(_){return(yield On(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function kt(_){return new Promise((d,p)=>{const w=document.createElement("script");w.setAttribute("src",_),w.onload=d,w.onerror=B=>{const J=$e("internal-error");J.customData=B,p(J)},w.type="text/javascript",w.charset="UTF-8",function Yr(){var _,d;return null!==(d=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==d?d:document}().appendChild(w)})}function $a(_){return`__${_}${Math.floor(1e6*Math.random())}`}const so=1e12;class qo{constructor(d){this.auth=d,this.counter=so,this._widgets=new Map}render(d,p){const w=this.counter;return this._widgets.set(w,new Pl(d,this.auth.name,p||{})),this.counter++,w}reset(d){var p;const w=d||so;null===(p=this._widgets.get(w))||void 0===p||p.delete(),this._widgets.delete(w)}getResponse(d){var p;return(null===(p=this._widgets.get(d||so))||void 0===p?void 0:p.getResponse())||""}execute(d){var p=this;return(0,g.Z)(function*(){var w;return null===(w=p._widgets.get(d||so))||void 0===w||w.execute(),""})()}}class Pl{constructor(d,p,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const B="string"==typeof d?document.getElementById(d):d;de(B,"argument-error",{appName:p}),this.container=B,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Wo(_){const d=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<_;w++)d.push(p.charAt(Math.floor(Math.random()*p.length)));return d.join("")}(50);const{callback:d,"expired-callback":p}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ko=$a("rcb"),Za=new Pt(3e4,6e4);class Uo{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=br().grecaptcha)||void 0===d||!d.render)}load(d,p=""){return de(function Ga(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(p),d,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(br().grecaptcha):new Promise((w,B)=>{const J=br().setTimeout(()=>{B($e(d,"network-request-failed"))},Za.get());br()[Ko]=()=>{br().clearTimeout(J),delete br()[Ko];const dt=br().grecaptcha;if(!dt)return void B($e(d,"internal-error"));const Vt=dt.render;dt.render=(fn,Un)=>{const Cn=Vt(fn,Un);return this.counter++,Cn},this.hostLanguage=p,w(dt)},kt(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:Ko,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(J),B($e(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var p;return!(null===(p=br().grecaptcha)||void 0===p||!p.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class aa{load(d){return(0,g.Z)(function*(){return new qo(d)})()}clearedOneInstance(){}}const Ro="recaptcha",Ea={theme:"light",type:"image"};class tt{constructor(d,p=Object.assign({},Ea),w){this.parameters=p,this.type=Ro,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=nr(w),this.isInvisible="invisible"===this.parameters.size,de(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const B="string"==typeof d?document.getElementById(d):d;de(B,this.auth,"argument-error"),this.container=B,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new aa:new Uo,this.validateStartingState()}verify(){var d=this;return(0,g.Z)(function*(){d.assertNotDestroyed();const p=yield d.render(),w=d.getAssertedRecaptcha();return w.getResponse(p)||new Promise(J=>{const ke=dt=>{!dt||(d.tokenChangeListeners.delete(ke),J(dt))};d.tokenChangeListeners.add(ke),d.isInvisible&&w.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){de(!this.parameters.sitekey,this.auth,"argument-error"),de(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),de(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return p=>{if(this.tokenChangeListeners.forEach(w=>w(p)),"function"==typeof d)d(p);else if("string"==typeof d){const w=br()[d];"function"==typeof w&&w(p)}}}assertNotDestroyed(){de(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,g.Z)(function*(){if(yield d.init(),!d.widgetId){let p=d.container;if(!d.isInvisible){const w=document.createElement("div");p.appendChild(w),p=w}d.widgetId=d.getAssertedRecaptcha().render(p,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,g.Z)(function*(){de(Ct()&&!jt(),d.auth,"internal-error"),yield function Ru(){let _=null;return new Promise(d=>{"complete"!==document.readyState?(_=()=>d(),window.addEventListener("load",_)):d()}).catch(d=>{throw _&&window.removeEventListener("load",_),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const p=yield function Gn(_){return lu.apply(this,arguments)}(d.auth);de(p,d.auth,"internal-error"),d.parameters.sitekey=p})()}getAssertedRecaptcha(){return de(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class oo{constructor(d,p){this.verificationId=d,this.onConfirmation=p}confirm(d){const p=ci._fromVerification(this.verificationId,d);return this.onConfirmation(p)}}function ua(){return(ua=(0,g.Z)(function*(_,d,p){const w=nr(_),B=yield qa(w,d,(0,G.m9)(p));return new oo(B,J=>Ir(w,J))})).apply(this,arguments)}function Ca(){return(Ca=(0,g.Z)(function*(_,d,p){const w=(0,G.m9)(_);yield xi(!1,w,"phone");const B=yield qa(w.auth,d,(0,G.m9)(p));return new oo(B,J=>Hr(w,J))})).apply(this,arguments)}function cu(){return(cu=(0,g.Z)(function*(_,d,p){const w=(0,G.m9)(_),B=yield qa(w.auth,d,(0,G.m9)(p));return new oo(B,J=>Xi(w,J))})).apply(this,arguments)}function qa(_,d,p){return el.apply(this,arguments)}function el(){return(el=(0,g.Z)(function*(_,d,p){var w;const B=yield p.verify();try{let J;if(de("string"==typeof B,_,"argument-error"),de(p.type===Ro,_,"argument-error"),J="string"==typeof d?{phoneNumber:d}:d,"session"in J){const ke=J.session;if("phoneNumber"in J)return de("enroll"===ke.type,_,"internal-error"),(yield au(_,{idToken:ke.credential,phoneEnrollmentInfo:{phoneNumber:J.phoneNumber,recaptchaToken:B}})).phoneSessionInfo.sessionInfo;{de("signin"===ke.type,_,"internal-error");const dt=(null===(w=J.multiFactorHint)||void 0===w?void 0:w.uid)||J.multiFactorUid;return de(dt,_,"missing-multi-factor-info"),(yield mn(_,{mfaPendingCredential:ke.credential,mfaEnrollmentId:dt,phoneSignInInfo:{recaptchaToken:B}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ke}=yield gt(_,{phoneNumber:J.phoneNumber,recaptchaToken:B});return ke}}finally{p._reset()}})).apply(this,arguments)}function Fs(){return(Fs=(0,g.Z)(function*(_,d){yield ks((0,G.m9)(_),d)})).apply(this,arguments)}let hu=(()=>{class _{constructor(p){this.providerId=_.PROVIDER_ID,this.auth=nr(p)}verifyPhoneNumber(p,w){return qa(this.auth,p,(0,G.m9)(w))}static credential(p,w){return ci._fromVerification(p,w)}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:w,temporaryProof:B}=p;return w&&B?ci._fromTokenResponse(w,B):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Sr(_,d){return d?ae(d):(de(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Da extends Dr{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return rr(d,this._buildIdpRequest())}_linkToIdToken(d,p){return rr(d,this._buildIdpRequest(p))}_getReauthenticationResolver(d){return rr(d,this._buildIdpRequest())}_buildIdpRequest(d){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(p.idToken=d),p}}function wo(_){return yo(_.auth,new Da(_),_.bypassAuthState)}function Wa(_){const{auth:d,user:p}=_;return de(p,d,"internal-error"),qs(p,new Da(_),_.bypassAuthState)}function Ki(_){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,g.Z)(function*(_){const{auth:d,user:p}=_;return de(p,d,"internal-error"),ks(p,new Da(_),_.bypassAuthState)})).apply(this,arguments)}class b{constructor(d,p,w,B,J=!1){this.auth=d,this.resolver=w,this.user=B,this.bypassAuthState=J,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var d=this;return new Promise(function(){var p=(0,g.Z)(function*(w,B){d.pendingPromise={resolve:w,reject:B};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(J){d.reject(J)}});return function(w,B){return p.apply(this,arguments)}}())}onAuthEvent(d){var p=this;return(0,g.Z)(function*(){const{urlResponse:w,sessionId:B,postBody:J,tenantId:ke,error:dt,type:Vt}=d;if(dt)return void p.reject(dt);const fn={auth:p.auth,requestUri:w,sessionId:B,tenantId:ke||void 0,postBody:J||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Vt)(fn))}catch(Un){p.reject(Un)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return wo;case"linkViaPopup":case"linkViaRedirect":return Ki;case"reauthViaPopup":case"reauthViaRedirect":return Wa;default:se(this.auth,"internal-error")}}resolve(d){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const E=new Pt(2e3,1e4);function A(){return(A=(0,g.Z)(function*(_,d,p){const w=nr(_);ut(_,d,gi);const B=Sr(w,p);return new vt(w,"signInViaPopup",d,B).executeNotNull()})).apply(this,arguments)}function z(){return(z=(0,g.Z)(function*(_,d,p){const w=(0,G.m9)(_);ut(w.auth,d,gi);const B=Sr(w.auth,p);return new vt(w.auth,"reauthViaPopup",d,B,w).executeNotNull()})).apply(this,arguments)}function Re(){return(Re=(0,g.Z)(function*(_,d,p){const w=(0,G.m9)(_);ut(w.auth,d,gi);const B=Sr(w.auth,p);return new vt(w.auth,"linkViaPopup",d,B,w).executeNotNull()})).apply(this,arguments)}let vt=(()=>{class _ extends b{constructor(p,w,B,J,ke){super(p,w,J,ke),this.provider=B,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const w=yield p.execute();return de(w,p.auth,"internal-error"),w})()}onExecution(){var p=this;return(0,g.Z)(function*(){W(1===p.filter.length,"Popup operations only handle one event");const w=It();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],w),p.authWindow.associatedEvent=w,p.resolver._originValidation(p.auth).catch(B=>{p.reject(B)}),p.resolver._isIframeWebStorageSupported(p.auth,B=>{B||p.reject($e(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject($e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const p=()=>{var w,B;this.pollId=null!==(B=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==B&&B.closed?window.setTimeout(()=>{this.pollId=null,this.reject($e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,E.get())};p()}}return _.currentPopupAction=null,_})();const Xt=new Map;class er extends b{constructor(d,p,w=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,w),this.eventId=null}execute(){var d=()=>super.execute,p=this;return(0,g.Z)(function*(){let w=Xt.get(p.auth._key());if(!w){try{const J=(yield function ti(_,d){return oi.apply(this,arguments)}(p.resolver,p.auth))?yield d().call(p):null;w=()=>Promise.resolve(J)}catch(B){w=()=>Promise.reject(B)}Xt.set(p.auth._key(),w)}return p.bypassAuthState||Xt.set(p.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(d){var p=()=>super.onAuthEvent,w=this;return(0,g.Z)(function*(){if("signInViaRedirect"===d.type)return p().call(w,d);if("unknown"!==d.type){if(d.eventId){const B=yield w.auth._redirectUserForId(d.eventId);if(B)return w.user=B,p().call(w,d);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function oi(){return(oi=(0,g.Z)(function*(_,d){const p=Eo(d),w=Vo(_);if(!(yield w._isAvailable()))return!1;const B="true"===(yield w._get(p));return yield w._remove(p),B})).apply(this,arguments)}function As(_,d){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,g.Z)(function*(_,d){return Vo(_)._set(Eo(d),"true")})).apply(this,arguments)}function Yo(_,d){Xt.set(_._key(),d)}function Vo(_){return ae(_._redirectPersistence)}function Eo(_){return De("pendingRedirect",_.config.apiKey,_.name)}function O(){return(O=(0,g.Z)(function*(_,d,p){const w=nr(_);ut(_,d,gi);const B=Sr(w,p);return yield As(B,w),B._openRedirect(w,d,"signInViaRedirect")})).apply(this,arguments)}function fe(){return(fe=(0,g.Z)(function*(_,d,p){const w=(0,G.m9)(_);ut(w.auth,d,gi);const B=Sr(w.auth,p);yield As(B,w.auth);const J=yield Hn(w);return B._openRedirect(w.auth,d,"reauthViaRedirect",J)})).apply(this,arguments)}function Tt(){return(Tt=(0,g.Z)(function*(_,d,p){const w=(0,G.m9)(_);ut(w.auth,d,gi);const B=Sr(w.auth,p);yield xi(!1,w,d.providerId),yield As(B,w.auth);const J=yield Hn(w);return B._openRedirect(w.auth,d,"linkViaRedirect",J)})).apply(this,arguments)}function bn(){return(bn=(0,g.Z)(function*(_,d){return yield nr(_)._initializationPromise,un(_,d,!1)})).apply(this,arguments)}function un(_,d){return tr.apply(this,arguments)}function tr(){return(tr=(0,g.Z)(function*(_,d,p=!1){const w=nr(_),B=Sr(w,d),ke=yield new er(w,B,p).execute();return ke&&!p&&(delete ke.user._redirectEventId,yield w._persistUserIfCurrent(ke.user),yield w._setRedirectUser(null,d)),ke})).apply(this,arguments)}function Hn(_){return uo.apply(this,arguments)}function uo(){return(uo=(0,g.Z)(function*(_){const d=It(`${_.uid}:::`);return _._redirectEventId=d,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),d})).apply(this,arguments)}class Nr{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let p=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(d,w)&&(p=!0,this.sendToConsumer(d,w),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Oo(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Aa(_);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=d,p=!0)),p}sendToConsumer(d,p){var w;if(d.error&&!Aa(d)){const B=(null===(w=d.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";p.onError($e(this.auth,B))}else p.onAuthEvent(d)}isEventForConsumer(d,p){const w=null===p.eventId||!!d.eventId&&d.eventId===p.eventId;return p.filter.includes(d.type)&&w}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sa(d))}saveEventToCache(d){this.cachedEventUids.add(Sa(d)),this.lastProcessedEventTime=Date.now()}}function Sa(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(d=>d).join("-")}function Aa({type:_,error:d}){return"unknown"===_&&"auth/no-auth-event"===d?.code}function Qo(_){return xa.apply(this,arguments)}function xa(){return(xa=(0,g.Z)(function*(_,d={}){return On(_,"GET","/v1/projects",d)})).apply(this,arguments)}const td=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Eh=/^https?/;function Ih(){return(Ih=(0,g.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:d}=yield Qo(_);for(const p of d)try{if(Ch(p))return}catch{}se(_,"unauthorized-domain")})).apply(this,arguments)}function Ch(_){const d=pt(),{protocol:p,hostname:w}=new URL(d);if(_.startsWith("chrome-extension://")){const ke=new URL(_);return""===ke.hostname&&""===w?"chrome-extension:"===p&&_.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===p&&ke.hostname===w}if(!Eh.test(p))return!1;if(td.test(_))return w===_;const B=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+B+"|"+B+")$","i").test(w)}const Lg=new Pt(3e4,6e4);function rd(){const _=br().___jsl;if(_?.H)for(const d of Object.keys(_.H))if(_.H[d].r=_.H[d].r||[],_.H[d].L=_.H[d].L||[],_.H[d].r=[..._.H[d].L],_.CP)for(let p=0;p<_.CP.length;p++)_.CP[p]=null}let Nu=null;function Ug(_){return Nu=Nu||function sp(_){return new Promise((d,p)=>{var w,B,J;function ke(){rd(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{rd(),p($e(_,"network-request-failed"))},timeout:Lg.get()})}if(null!==(B=null===(w=br().gapi)||void 0===w?void 0:w.iframes)&&void 0!==B&&B.Iframe)d(gapi.iframes.getContext());else{if(null===(J=br().gapi)||void 0===J||!J.load){const dt=$a("iframefcb");return br()[dt]=()=>{gapi.load?ke():p($e(_,"network-request-failed"))},kt(`https://apis.google.com/js/api.js?onload=${dt}`).catch(Vt=>p(Vt))}ke()}}).catch(d=>{throw Nu=null,d})}(_),Nu}const Vg=new Pt(5e3,15e3),is={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},id=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lo(_){const d=_.config;de(d.authDomain,_,"auth-domain-config-required");const p=d.emulator?Et(d,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,w={apiKey:d.apiKey,appName:_.name,v:ge.SDK_VERSION},B=id.get(_.config.apiHost);B&&(w.eid=B);const J=_._getFrameworks();return J.length&&(w.fw=J.join(",")),`${p}?${(0,G.xO)(w).slice(1)}`}function ac(){return ac=(0,g.Z)(function*(_){const d=yield Ug(_),p=br().gapi;return de(p,_,"internal-error"),d.open({where:document.body,url:lo(_),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:is,dontclear:!0},w=>new Promise(function(){var B=(0,g.Z)(function*(J,ke){yield w.restyle({setHideOnLeave:!1});const dt=$e(_,"network-request-failed"),Vt=br().setTimeout(()=>{ke(dt)},Vg.get());function fn(){br().clearTimeout(Vt),J(w)}w.ping(fn).then(fn,()=>{ke(dt)})});return function(J,ke){return B.apply(this,arguments)}}()))}),ac.apply(this,arguments)}const ku={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class la{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pu(_,d,p,w,B,J){de(_.config.authDomain,_,"auth-domain-config-required"),de(_.config.apiKey,_,"invalid-api-key");const ke={apiKey:_.config.apiKey,appName:_.name,authType:p,redirectUrl:w,v:ge.SDK_VERSION,eventId:B};if(d instanceof gi){d.setDefaultLanguage(_.languageCode),ke.providerId=d.providerId||"",(0,G.xb)(d.getCustomParameters())||(ke.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Vt,fn]of Object.entries(J||{}))ke[Vt]=fn}if(d instanceof us){const Vt=d.getScopes().filter(fn=>""!==fn);Vt.length>0&&(ke.scopes=Vt.join(","))}_.tenantId&&(ke.tid=_.tenantId);const dt=ke;for(const Vt of Object.keys(dt))void 0===dt[Vt]&&delete dt[Vt];return`${function Dh({config:_}){return _.emulator?Et(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,G.xO)(dt).slice(1)}`}const uc="webStorageSupport",lc=class Ka{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Cr,this._completeRedirectFn=un,this._overrideRedirectResult=Yo}_openPopup(d,p,w,B){var J=this;return(0,g.Z)(function*(){var ke;W(null===(ke=J.eventManagers[d._key()])||void 0===ke?void 0:ke.manager,"_initialize() not called before _openPopup()");const dt=pu(d,p,w,pt(),B);return function od(_,d,p,w=500,B=600){const J=Math.max((window.screen.availHeight-B)/2,0).toString(),ke=Math.max((window.screen.availWidth-w)/2,0).toString();let dt="";const Vt=Object.assign(Object.assign({},ku),{width:w.toString(),height:B.toString(),top:J,left:ke}),fn=(0,G.z$)().toLowerCase();p&&(dt=Fn(fn)?"_blank":p),Rt(fn)&&(d=d||"http://localhost",Vt.scrollbars="yes");const Un=Object.entries(Vt).reduce((gs,[ga,Zl])=>`${gs}${ga}=${Zl},`,"");if(function ft(_=(0,G.z$)()){var d;return ce(_)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(fn)&&"_self"!==dt)return function Pu(_,d){const p=document.createElement("a");p.href=_,p.target=d;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(w)}(d||"",dt),new la(null);const Cn=window.open(d||"",dt,Un);de(Cn,_,"popup-blocked");try{Cn.focus()}catch{}return new la(Cn)}(d,dt,It())})()}_openRedirect(d,p,w,B){var J=this;return(0,g.Z)(function*(){return yield J._originValidation(d),function ps(_){br().location.href=_}(pu(d,p,w,pt(),B)),new Promise(()=>{})})()}_initialize(d){const p=d._key();if(this.eventManagers[p]){const{manager:B,promise:J}=this.eventManagers[p];return B?Promise.resolve(B):(W(J,"If manager is not set, promise should be"),J)}const w=this.initAndGetManager(d);return this.eventManagers[p]={promise:w},w.catch(()=>{delete this.eventManagers[p]}),w}initAndGetManager(d){var p=this;return(0,g.Z)(function*(){const w=yield function vi(_){return ac.apply(this,arguments)}(d),B=new Nr(d);return w.register("authEvent",J=>(de(J?.authEvent,d,"invalid-auth-event"),{status:B.onEvent(J.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[d._key()]={manager:B},p.iframes[d._key()]=w,B})()}_isIframeWebStorageSupported(d,p){this.iframes[d._key()].send(uc,{type:uc},B=>{var J;const ke=null===(J=B?.[0])||void 0===J?void 0:J[uc];void 0!==ke&&p(!!ke),se(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function nd(_){return Ih.apply(this,arguments)}(d)),this.originValidationPromises[p]}get _shouldInitProactively(){return on()||vn()||ce()}};class tl{constructor(d){this.factorId=d}_process(d,p,w){switch(p.type){case"enroll":return this._finalizeEnroll(d,p.credential,w);case"signin":return this._finalizeSignIn(d,p.credential);default:return Oe("unexpected MultiFactorSessionType")}}}class cc extends tl{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new cc(d)}_finalizeEnroll(d,p,w){return function sa(_,d){return On(_,"POST","/v2/accounts/mfaEnrollment:finalize",$t(_,d))}(d,{idToken:p,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,p){return function Lo(_,d){return On(_,"POST","/v2/accounts/mfaSignIn:finalize",$t(_,d))}(d,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let co=(()=>{class _{constructor(){}static assertion(p){return cc._fromCredential(p)}}return _.FACTOR_ID="phone",_})();var Fu="@firebase/auth";class Ya{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const p=this.auth.onIdTokenChanged(w=>{d(w?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,p),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const p=this.internalListeners.get(d);!p||(this.internalListeners.delete(d),p(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Qa(){return window}function hc(){return(hc=(0,g.Z)(function*(_,d,p){var w;const{BuildInfo:B}=Qa();W(d.sessionId,"AuthEvent did not contain a session ID");const J=yield sl(d.sessionId),ke={};return ce()?ke.ibi=B.packageName:cn()?ke.apn=B.packageName:se(_,"operation-not-supported-in-this-environment"),B.displayName&&(ke.appDisplayName=B.displayName),ke.sessionId=J,pu(_,p,d.type,void 0,null!==(w=d.eventId)&&void 0!==w?w:void 0,ke)})).apply(this,arguments)}function rl(){return(rl=(0,g.Z)(function*(_){const{BuildInfo:d}=Qa(),p={};ce()?p.iosBundleId=d.packageName:cn()?p.androidPackageName=d.packageName:se(_,"operation-not-supported-in-this-environment"),yield Qo(_,p)})).apply(this,arguments)}function Uu(){return(Uu=(0,g.Z)(function*(_,d,p){const{cordova:w}=Qa();let B=()=>{};try{yield new Promise((J,ke)=>{let dt=null;function Vt(){var Cn;J();const gs=null===(Cn=w.plugins.browsertab)||void 0===Cn?void 0:Cn.close;"function"==typeof gs&&gs(),"function"==typeof p?.close&&p.close()}function fn(){dt||(dt=window.setTimeout(()=>{ke($e(_,"redirect-cancelled-by-user"))},2e3))}function Un(){"visible"===document?.visibilityState&&fn()}d.addPassiveListener(Vt),document.addEventListener("resume",fn,!1),cn()&&document.addEventListener("visibilitychange",Un,!1),B=()=>{d.removePassiveListener(Vt),document.removeEventListener("resume",fn,!1),document.removeEventListener("visibilitychange",Un,!1),dt&&window.clearTimeout(dt)}})}finally{B()}})).apply(this,arguments)}function sl(_){return ca.apply(this,arguments)}function ca(){return(ca=(0,g.Z)(function*(_){const d=fc(_),p=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(p)).map(B=>B.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function fc(_){if(W(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(_);const d=new ArrayBuffer(_.length),p=new Uint8Array(d);for(let w=0;w<_.length;w++)p[w]=_.charCodeAt(w);return p}(0,G.Pz)("authIdTokenMaxAge"),function Lu(_){(0,ge._registerComponent)(new we.wA("auth",(d,{options:p})=>{const w=d.getProvider("app").getImmediate(),B=d.getProvider("heartbeat"),{apiKey:J,authDomain:ke}=w.options;return((dt,Vt)=>{de(J&&!J.includes(":"),"invalid-api-key",{appName:dt.name}),de(!ke?.includes(":"),"argument-error",{appName:dt.name});const fn={apiKey:J,authDomain:ke,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qn(_)},Un=new Li(dt,Vt,fn);return function lt(_,d){const p=d?.persistence||[],w=(Array.isArray(p)?p:[p]).map(ae);d?.errorMap&&_._updateErrorMap(d.errorMap),_._initializeWithPersistence(w,d?.popupRedirectResolver)}(Un,p),Un})(w,B)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,p,w)=>{d.getProvider("auth-internal").initialize()})),(0,ge._registerComponent)(new we.wA("auth-internal",d=>{const p=nr(d.getProvider("auth").getImmediate());return new Ya(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ge.registerVersion)(Fu,"0.21.0",function ni(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,ge.registerVersion)(Fu,"0.21.0","esm2017")}("Browser");class Vu extends Nr{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(d)),super.onEvent(d)}initialized(){var d=this;return(0,g.Z)(function*(){yield d.initPromise})()}}function ld(_){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,g.Z)(function*(_){const d=yield Ti()._get(ol(_));return d&&(yield Ti()._remove(ol(_))),d})).apply(this,arguments)}function up(){const _=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const w=Math.floor(Math.random()*d.length);_.push(d.charAt(w))}return _.join("")}function Ti(){return ae(Rn)}function ol(_){return De("authEvent",_.config.apiKey,_.name)}function Bl(_){if(!_?.includes("?"))return{};const[d,...p]=_.split("?");return(0,G.zd)(p.join("?"))}const gc=class Oh{constructor(){this._redirectPersistence=Cr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=un,this._overrideRedirectResult=Yo}_initialize(d){var p=this;return(0,g.Z)(function*(){const w=d._key();let B=p.eventManagers.get(w);return B||(B=new Vu(d),p.eventManagers.set(w,B),p.attachCallbackListeners(d,B)),B})()}_openPopup(d){se(d,"operation-not-supported-in-this-environment")}_openRedirect(d,p,w,B){var J=this;return(0,g.Z)(function*(){!function Mh(_){var d,p,w,B,J,ke,dt,Vt,fn,Un;const Cn=Qa();de("function"==typeof(null===(d=Cn?.universalLinks)||void 0===d?void 0:d.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),de(typeof(null===(p=Cn?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),de("function"==typeof(null===(J=null===(B=null===(w=Cn?.cordova)||void 0===w?void 0:w.plugins)||void 0===B?void 0:B.browsertab)||void 0===J?void 0:J.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),de("function"==typeof(null===(Vt=null===(dt=null===(ke=Cn?.cordova)||void 0===ke?void 0:ke.plugins)||void 0===dt?void 0:dt.browsertab)||void 0===Vt?void 0:Vt.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),de("function"==typeof(null===(Un=null===(fn=Cn?.cordova)||void 0===fn?void 0:fn.InAppBrowser)||void 0===Un?void 0:Un.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const ke=yield J._initialize(d);yield ke.initialized(),ke.resetRedirect(),function ao(){Xt.clear()}(),yield J._originValidation(d);const dt=function mu(_,d,p=null){return{type:d,eventId:p,urlResponse:null,sessionId:up(),postBody:null,tenantId:_.tenantId,error:$e(_,"no-auth-event")}}(d,w,B);yield function ud(_,d){return Ti()._set(ol(_),d)}(d,dt);const Vt=yield function Ah(_,d,p){return hc.apply(this,arguments)}(d,dt,p),fn=yield function il(_){const{cordova:d}=Qa();return new Promise(p=>{d.plugins.browsertab.isAvailable(w=>{let B=null;w?d.plugins.browsertab.openUrl(_):B=d.InAppBrowser.open(_,function Xe(_=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),p(B)})})}(Vt);return function op(_,d,p){return Uu.apply(this,arguments)}(d,ke,fn)})()}_isIframeWebStorageSupported(d,p){throw new Error("Method not implemented.")}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function xh(_){return rl.apply(this,arguments)}(d)),this.originValidationPromises[p]}attachCallbackListeners(d,p){const{universalLinks:w,handleOpenURL:B,BuildInfo:J}=Qa(),ke=setTimeout((0,g.Z)(function*(){yield ld(d),p.onEvent(ju())}),500),dt=function(){var Un=(0,g.Z)(function*(Cn){clearTimeout(ke);const gs=yield ld(d);let ga=null;gs&&Cn?.url&&(ga=function ap(_,d){var p,w;const B=function Rh(_){const d=Bl(_),p=d.link?decodeURIComponent(d.link):void 0,w=Bl(p).link,B=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return Bl(B).link||B||w||p||_}(d);if(B.includes("/__/auth/callback")){const J=Bl(B),ke=J.firebaseError?function pc(_){try{return JSON.parse(_)}catch{return null}}(decodeURIComponent(J.firebaseError)):null,dt=null===(w=null===(p=ke?.code)||void 0===p?void 0:p.split("auth/"))||void 0===w?void 0:w[1],Vt=dt?$e(dt):null;return Vt?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Vt,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:B,postBody:null}}return null}(gs,Cn.url)),p.onEvent(ga||ju())});return function(gs){return Un.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,dt);const Vt=B,fn=`${J.packageName.toLowerCase()}://`;Qa().handleOpenURL=function(){var Un=(0,g.Z)(function*(Cn){if(Cn.toLowerCase().startsWith(fn)&&dt({url:Cn}),"function"==typeof Vt)try{Vt(Cn)}catch(gs){console.error(gs)}});return function(Cn){return Un.apply(this,arguments)}}()}};function ju(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:$e("no-auth-event")}}function da(){var _;return(null===(_=self?.location)||void 0===_?void 0:_.protocol)||null}function Nh(_=(0,G.z$)()){return!("file:"!==da()&&"ionic:"!==da()&&"capacitor:"!==da()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ma(){try{const _=self.localStorage,d=It();if(_)return _.setItem(d,"1"),_.removeItem(d),!function hd(_=(0,G.z$)()){return function Ar(){return(0,G.w1)()&&11===document?.documentMode}()||function kh(_=(0,G.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,G.hl)()}catch{return yc()&&(0,G.hl)()}return!1}function yc(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Vs(){return(function mc(){return"http:"===da()||"https:"===da()}()||(0,G.ru)()||Nh())&&!function xs(){return(0,G.b$)()||(0,G.UG)()}()&&Ma()&&!yc()}function _c(){return Nh()&&typeof document<"u"}function $u(){return($u=(0,g.Z)(function*(){return!!_c()&&new Promise(_=>{const d=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),_(!0)})})})).apply(this,arguments)}const ho={LOCAL:"local",NONE:"none",SESSION:"session"},fa=de,vc="persistence";function sr(_){return bc.apply(this,arguments)}function bc(){return(bc=(0,g.Z)(function*(_){yield _._initializationPromise;const d=al(),p=De(vc,_.config.apiKey,_.name);d&&d.setItem(p,_._getPersistence())})).apply(this,arguments)}function al(){var _;try{return(null===(_=function ha(){return typeof window<"u"?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch{return null}}const $l=de;class Jo{constructor(){this.browserResolver=ae(lc),this.cordovaResolver=ae(gc),this.underlyingResolver=null,this._redirectPersistence=Cr,this._completeRedirectFn=un,this._overrideRedirectResult=Yo}_initialize(d){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,p,w,B){var J=this;return(0,g.Z)(function*(){return yield J.selectUnderlyingResolver(),J.assertedUnderlyingResolver._openPopup(d,p,w,B)})()}_openRedirect(d,p,w,B){var J=this;return(0,g.Z)(function*(){return yield J.selectUnderlyingResolver(),J.assertedUnderlyingResolver._openRedirect(d,p,w,B)})()}_isIframeWebStorageSupported(d,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,p)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return _c()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return $l(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,g.Z)(function*(){if(d.underlyingResolver)return;const p=yield function _u(){return $u.apply(this,arguments)}();d.underlyingResolver=p?d.cordovaResolver:d.browserResolver})()}}function Ec(_){return _.unwrap()}function Ic(_){return fd(_)}function fd(_){const{_tokenResponse:d}=_ instanceof G.ZR?_.customData:_;if(!d)return null;if(!(_ instanceof G.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return hu.credentialFromResult(_);const p=d.providerId;if(!p||"password"===p)return null;let w;switch(p){case"google.com":w=Ns;break;case"facebook.com":w=Os;break;case"github.com":w=Es;break;case"twitter.com":w=Zs;break;default:const{oauthIdToken:B,oauthAccessToken:J,oauthTokenSecret:ke,pendingToken:dt,nonce:Vt}=d;return J||ke||B||dt?dt?p.startsWith("saml.")?Ui._create(p,dt):je._fromParams({providerId:p,signInMethod:p,pendingToken:dt,idToken:B,accessToken:J}):new $s(p).credential({idToken:B,accessToken:J,rawNonce:Vt}):null}return _ instanceof G.ZR?w.credentialFromError(_):w.credentialFromResult(_)}function Co(_,d){return d.catch(p=>{throw p instanceof G.ZR&&function Hu(_,d){var p;const w=null===(p=d.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===d?.code)d.resolver=new gd(_,function Pi(_,d){var p;const w=(0,G.m9)(_),B=d;return de(d.customData.operationType,w,"argument-error"),de(null===(p=B.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,w,"argument-error"),ns._fromError(w,B)}(_,d));else if(w){const B=fd(d),J=d;B&&(J.credential=B,J.tenantId=w.tenantId||void 0,J.email=w.email||void 0,J.phoneNumber=w.phoneNumber||void 0)}}(_,p),p}).then(p=>{const B=p.user;return{operationType:p.operationType,credential:Ic(p),additionalUserInfo:$o(p),user:eu.getOrCreate(B)}})}function Ph(_,d){return pd.apply(this,arguments)}function pd(){return(pd=(0,g.Z)(function*(_,d){const p=yield d;return{verificationId:p.verificationId,confirm:w=>Co(_,p.confirm(w))}})).apply(this,arguments)}class gd{constructor(d,p){this.resolver=p,this.auth=function Hl(_){return _.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return Co(Ec(this.auth),this.resolver.resolveSignIn(d))}}class eu{constructor(d){this._delegate=d,this.multiFactor=function Y(_){const d=(0,G.m9)(_);return M.has(d)||M.set(d,j._fromUser(d)),M.get(d)}(d)}static getOrCreate(d){return eu.USER_MAP.has(d)||eu.USER_MAP.set(d,new eu(d)),eu.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var p=this;return(0,g.Z)(function*(){return Co(p.auth,Hr(p._delegate,d))})()}linkWithPhoneNumber(d,p){var w=this;return(0,g.Z)(function*(){return Ph(w.auth,function Ia(_,d,p){return Ca.apply(this,arguments)}(w._delegate,d,p))})()}linkWithPopup(d){var p=this;return(0,g.Z)(function*(){return Co(p.auth,function X(_,d,p){return Re.apply(this,arguments)}(p._delegate,d,Jo))})()}linkWithRedirect(d){var p=this;return(0,g.Z)(function*(){return yield sr(nr(p.auth)),function Ve(_,d,p){return function rt(_,d,p){return Tt.apply(this,arguments)}(_,d,p)}(p._delegate,d,Jo)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var p=this;return(0,g.Z)(function*(){return Co(p.auth,Xi(p._delegate,d))})()}reauthenticateWithPhoneNumber(d,p){return Ph(this.auth,function za(_,d,p){return cu.apply(this,arguments)}(this._delegate,d,p))}reauthenticateWithPopup(d){return Co(this.auth,function N(_,d,p){return z.apply(this,arguments)}(this._delegate,d,Jo))}reauthenticateWithRedirect(d){var p=this;return(0,g.Z)(function*(){return yield sr(nr(p.auth)),function k(_,d,p){return function K(_,d,p){return fe.apply(this,arguments)}(_,d,p)}(p._delegate,d,Jo)})()}sendEmailVerification(d){return function di(_,d){return Rr.apply(this,arguments)}(this._delegate,d)}unlink(d){var p=this;return(0,g.Z)(function*(){return yield function cr(_,d){return Ni.apply(this,arguments)}(p._delegate,d),p})()}updateEmail(d){return function Bo(_,d){return Ts((0,G.m9)(_),d,null)}(this._delegate,d)}updatePassword(d){return function Ds(_,d){return Ts((0,G.m9)(_),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function du(_,d){return Fs.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function ki(_,d){return Kr.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,p){return function Mi(_,d,p){return Xn.apply(this,arguments)}(this._delegate,d,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}eu.USER_MAP=new WeakMap;const pa=de;let ul=(()=>{class _{constructor(p,w){if(this.app=p,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:B}=p.options;pa(B,"invalid-api-key",{appName:p.name}),pa(B,"invalid-api-key",{appName:p.name});const J=typeof window<"u"?Jo:void 0;this._delegate=w.initialize({options:{persistence:Yi(B,p.name),popupRedirectResolver:J}}),this._delegate._updateErrorMap(Qe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?eu.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,w){!function ji(_,d,p){const w=nr(_);de(w._canInitEmulator,w,"emulator-config-failed"),de(/^https?:\/\//.test(d),w,"invalid-emulator-scheme");const B=!!p?.disableWarnings,J=Si(d),{host:ke,port:dt}=function os(_){const d=Si(_),p=/(\/\/)?([^?#/]+)/.exec(_.substr(d.length));if(!p)return{host:"",port:null};const w=p[2].split("@").pop()||"",B=/^(\[[^\]]+\])(:|$)/.exec(w);if(B){const J=B[1];return{host:J,port:Jn(w.substr(J.length+1))}}{const[J,ke]=w.split(":");return{host:J,port:Jn(ke)}}}(d);w.config.emulator={url:`${J}//${ke}${null===dt?"":`:${dt}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:ke,port:dt,protocol:J.replace(":",""),options:Object.freeze({disableWarnings:B})}),B||function Mr(){function _(){const d=document.createElement("p"),p=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,p,w)}applyActionCode(p){return function xo(_,d){return vo.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return no(this._delegate,p)}confirmPasswordReset(p,w){return function hs(_,d,p){return En.apply(this,arguments)}(this._delegate,p,w)}createUserWithEmailAndPassword(p,w){var B=this;return(0,g.Z)(function*(){return Co(B._delegate,function oe(_,d,p){return Te.apply(this,arguments)}(B._delegate,p,w))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function lr(_,d){return hr.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function H(_,d){return"EMAIL_SIGNIN"===ws.parseLink(d)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){pa(Vs(),p._delegate,"operation-not-supported-in-this-environment");const w=yield function hn(_,d){return bn.apply(this,arguments)}(p._delegate,Jo);return w?Co(p._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Xa(_,d){nr(_)._logFramework(d)}(this._delegate,p)}onAuthStateChanged(p,w,B){const{next:J,error:ke,complete:dt}=Cc(p,w,B);return this._delegate.onAuthStateChanged(J,ke,dt)}onIdTokenChanged(p,w,B){const{next:J,error:ke,complete:dt}=Cc(p,w,B);return this._delegate.onIdTokenChanged(J,ke,dt)}sendSignInLinkToEmail(p,w){return function T(_,d,p){return S.apply(this,arguments)}(this._delegate,p,w)}sendPasswordResetEmail(p,w){return function ts(_,d,p){return qi.apply(this,arguments)}(this._delegate,p,w||void 0)}setPersistence(p){var w=this;return(0,g.Z)(function*(){let B;switch(function jl(_,d){fa(Object.values(ho).includes(d),_,"invalid-persistence-type"),(0,G.b$)()?fa(d!==ho.SESSION,_,"unsupported-persistence-type"):(0,G.UG)()?fa(d===ho.NONE,_,"unsupported-persistence-type"):yc()?fa(d===ho.NONE||d===ho.LOCAL&&(0,G.hl)(),_,"unsupported-persistence-type"):fa(d===ho.NONE||Ma(),_,"unsupported-persistence-type")}(w._delegate,p),p){case ho.SESSION:B=Cr;break;case ho.LOCAL:B=(yield ae(Kn)._isAvailable())?Kn:Rn;break;case ho.NONE:B=he;break;default:return se("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(B)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Co(this._delegate,function ls(_){return cs.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Co(this._delegate,Ir(this._delegate,p))}signInWithCustomToken(p){return Co(this._delegate,function Is(_,d){return yi.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,w){return Co(this._delegate,function I(_,d,p){return Ir((0,G.m9)(_),js.credential(d,p))}(this._delegate,p,w))}signInWithEmailLink(p,w){return Co(this._delegate,function Ee(_,d,p){return mt.apply(this,arguments)}(this._delegate,p,w))}signInWithPhoneNumber(p,w){return Ph(this._delegate,function Gr(_,d,p){return ua.apply(this,arguments)}(this._delegate,p,w))}signInWithPopup(p){var w=this;return(0,g.Z)(function*(){return pa(Vs(),w._delegate,"operation-not-supported-in-this-environment"),Co(w._delegate,function y(_,d,p){return A.apply(this,arguments)}(w._delegate,p,Jo))})()}signInWithRedirect(p){var w=this;return(0,g.Z)(function*(){return pa(Vs(),w._delegate,"operation-not-supported-in-this-environment"),yield sr(w._delegate),function Ou(_,d,p){return function Ta(_,d,p){return O.apply(this,arguments)}(_,d,p)}(w._delegate,p,Jo)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function P(_,d){return ee.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=ho,_})();function Cc(_,d,p){let w=_;"function"!=typeof _&&({next:w,error:d,complete:p}=_);const B=w;return{next:ke=>B(ke&&eu.getOrCreate(ke)),error:d,complete:p}}function Yi(_,d){const p=function wc(_,d){const p=al();if(!p)return[];const w=De(vc,_,d);switch(p.getItem(w)){case ho.NONE:return[he];case ho.LOCAL:return[Kn,Cr];case ho.SESSION:return[Cr];default:return[]}}(_,d);if(typeof self<"u"&&!p.includes(Kn)&&p.push(Kn),typeof window<"u")for(const w of[Rn,Cr])p.includes(w)||p.push(w);return p.includes(he)||p.push(he),p}class ll{constructor(){this.providerId="phone",this._delegate=new hu(Ec(l.Z.auth()))}static credential(d,p){return hu.credential(d,p)}verifyPhoneNumber(d,p){return this._delegate.verifyPhoneNumber(d,p)}unwrap(){return this._delegate}}ll.PHONE_SIGN_IN_METHOD=hu.PHONE_SIGN_IN_METHOD,ll.PROVIDER_ID=hu.PROVIDER_ID;const md=de;class cl{constructor(d,p,w=l.Z.app()){var B;md(null===(B=w.options)||void 0===B?void 0:B.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new tt(d,p,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function yd(_){_.INTERNAL.registerComponent(new we.wA("auth-compat",d=>{const p=d.getProvider("app-compat").getImmediate(),w=d.getProvider("auth");return new ul(p,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:js,FacebookAuthProvider:Os,GithubAuthProvider:Es,GoogleAuthProvider:Ns,OAuthProvider:$s,SAMLAuthProvider:Gi,PhoneAuthProvider:ll,PhoneMultiFactorGenerator:co,RecaptchaVerifier:cl,TwitterAuthProvider:Zs,Auth:ul,AuthCredential:Dr,Error:G.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.3.0")}(l.Z)},8766:(Ut,ze,L)=>{L.d(ze,{Lj:()=>se,X3:()=>et});var g=L(5861);let G,ge;const we=new WeakMap,Ae=new WeakMap,xe=new WeakMap,ue=new WeakMap,ie=new WeakMap;let qe={get(de,Oe,W){if(de instanceof IDBTransaction){if("done"===Oe)return Ae.get(de);if("objectStoreNames"===Oe)return de.objectStoreNames||xe.get(de);if("store"===Oe)return W.objectStoreNames[1]?void 0:W.objectStore(W.objectStoreNames[0])}return Me(de[Oe])},set:(de,Oe,W)=>(de[Oe]=W,!0),has:(de,Oe)=>de instanceof IDBTransaction&&("done"===Oe||"store"===Oe)||Oe in de};function Ne(de){return"function"==typeof de?function ct(de){return de!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function be(){return ge||(ge=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(de)?function(...Oe){return de.apply(Fe(this),Oe),Me(we.get(this))}:function(...Oe){return Me(de.apply(Fe(this),Oe))}:function(Oe,...W){const te=de.call(Fe(this),Oe,...W);return xe.set(te,Oe.sort?Oe.sort():[Oe]),Me(te)}}(de):(de instanceof IDBTransaction&&function nt(de){if(Ae.has(de))return;const Oe=new Promise((W,te)=>{const ae=()=>{de.removeEventListener("complete",Ie),de.removeEventListener("error",lt),de.removeEventListener("abort",lt)},Ie=()=>{W(),ae()},lt=()=>{te(de.error||new DOMException("AbortError","AbortError")),ae()};de.addEventListener("complete",Ie),de.addEventListener("error",lt),de.addEventListener("abort",lt)});Ae.set(de,Oe)}(de),((de,Oe)=>Oe.some(W=>de instanceof W))(de,function U(){return G||(G=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(de,qe):de)}function Me(de){if(de instanceof IDBRequest)return function pe(de){const Oe=new Promise((W,te)=>{const ae=()=>{de.removeEventListener("success",Ie),de.removeEventListener("error",lt)},Ie=()=>{W(Me(de.result)),ae()},lt=()=>{te(de.error),ae()};de.addEventListener("success",Ie),de.addEventListener("error",lt)});return Oe.then(W=>{W instanceof IDBCursor&&we.set(W,de)}).catch(()=>{}),ie.set(Oe,de),Oe}(de);if(ue.has(de))return ue.get(de);const Oe=Ne(de);return Oe!==de&&(ue.set(de,Oe),ie.set(Oe,de)),Oe}const Fe=de=>ie.get(de);function et(de,Oe,{blocked:W,upgrade:te,blocking:ae,terminated:Ie}={}){const lt=indexedDB.open(de,Oe),pt=Me(lt);return te&&lt.addEventListener("upgradeneeded",Ct=>{te(Me(lt.result),Ct.oldVersion,Ct.newVersion,Me(lt.transaction))}),W&&lt.addEventListener("blocked",()=>W()),pt.then(Ct=>{Ie&&Ct.addEventListener("close",()=>Ie()),ae&&Ct.addEventListener("versionchange",()=>ae())}).catch(()=>{}),pt}function se(de,{blocked:Oe}={}){const W=indexedDB.deleteDatabase(de);return Oe&&W.addEventListener("blocked",()=>Oe()),Me(W).then(()=>{})}const $e=["get","getKey","getAll","getAllKeys","count"],Le=["put","add","delete","clear"],ut=new Map;function Ye(de,Oe){if(!(de instanceof IDBDatabase)||Oe in de||"string"!=typeof Oe)return;if(ut.get(Oe))return ut.get(Oe);const W=Oe.replace(/FromIndex$/,""),te=Oe!==W,ae=Le.includes(W);if(!(W in(te?IDBIndex:IDBObjectStore).prototype)||!ae&&!$e.includes(W))return;const Ie=function(){var lt=(0,g.Z)(function*(pt,...Ct){const Ot=this.transaction(pt,ae?"readwrite":"readonly");let Qt=Ot.store;return te&&(Qt=Qt.index(Ct.shift())),(yield Promise.all([Qt[W](...Ct),ae&&Ot.done]))[0]});return function(Ct){return lt.apply(this,arguments)}}();return ut.set(Oe,Ie),Ie}!function Qe(de){qe=de(qe)}(de=>({...de,get:(Oe,W,te)=>Ye(Oe,W)||de.get(Oe,W,te),has:(Oe,W)=>!!Ye(Oe,W)||de.has(Oe,W)}))},5861:(Ut,ze,L)=>{function g(G,ge,U,be,we,Ae,xe){try{var ue=G[Ae](xe),ie=ue.value}catch(pe){return void U(pe)}ue.done?ge(ie):Promise.resolve(ie).then(be,we)}function l(G){return function(){var ge=this,U=arguments;return new Promise(function(be,we){var Ae=G.apply(ge,U);function xe(ie){g(Ae,be,we,xe,ue,"next",ie)}function ue(ie){g(Ae,be,we,xe,ue,"throw",ie)}xe(void 0)})}}L.d(ze,{Z:()=>l})}},Ut=>{Ut(Ut.s=521)}]);